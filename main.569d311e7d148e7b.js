"use strict";(self.webpackChunkHackathon=self.webpackChunkHackathon||[]).push([[179],{667:()=>{function Gt(i){return"function"==typeof i}function vu(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const ip=vu(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function oc(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class yt{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(Gt(n))try{n()}catch(s){t=s instanceof ip?s.errors:[s]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const s of r)try{xS(s)}catch(o){t=null!=t?t:[],o instanceof ip?t=[...t,...o.errors]:t.push(o)}}if(t)throw new ip(t)}}add(t){var e;if(t&&t!==this)if(this.closed)xS(t);else{if(t instanceof yt){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&oc(e,t)}remove(t){const{_teardowns:e}=this;e&&oc(e,t),t instanceof yt&&t._removeParent(this)}}yt.EMPTY=(()=>{const i=new yt;return i.closed=!0,i})();const vS=yt.EMPTY;function bS(i){return i instanceof yt||i&&"closed"in i&&Gt(i.remove)&&Gt(i.add)&&Gt(i.unsubscribe)}function xS(i){Gt(i)?i():i.unsubscribe()}const $a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},rp={setTimeout(...i){const{delegate:t}=rp;return((null==t?void 0:t.setTimeout)||setTimeout)(...i)},clearTimeout(i){const{delegate:t}=rp;return((null==t?void 0:t.clearTimeout)||clearTimeout)(i)},delegate:void 0};function wS(i){rp.setTimeout(()=>{const{onUnhandledError:t}=$a;if(!t)throw i;t(i)})}function ac(){}const J3=zy("C",void 0,void 0);function zy(i,t,e){return{kind:i,value:t,error:e}}let qa=null;function sp(i){if($a.useDeprecatedSynchronousErrorHandling){const t=!qa;if(t&&(qa={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=qa;if(qa=null,e)throw n}}else i()}class Gy extends yt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,bS(t)&&t.add(this)):this.destination=iH}static create(t,e,n){return new jy(t,e,n)}next(t){this.isStopped?$y(function tH(i){return zy("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?$y(function eH(i){return zy("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?$y(J3,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class jy extends Gy{constructor(t,e,n){let r;if(super(),Gt(t))r=t;else if(t){let s;({next:r,error:e,complete:n}=t),this&&$a.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe()):s=t,r=null==r?void 0:r.bind(s),e=null==e?void 0:e.bind(s),n=null==n?void 0:n.bind(s)}this.destination={next:r?Wy(r):ac,error:Wy(null!=e?e:MS),complete:n?Wy(n):ac}}}function Wy(i,t){return(...e)=>{try{i(...e)}catch(n){$a.useDeprecatedSynchronousErrorHandling?function nH(i){$a.useDeprecatedSynchronousErrorHandling&&qa&&(qa.errorThrown=!0,qa.error=i)}(n):wS(n)}}}function MS(i){throw i}function $y(i,t){const{onStoppedNotification:e}=$a;e&&rp.setTimeout(()=>e(i,t))}const iH={closed:!0,next:ac,error:MS,complete:ac},qy="function"==typeof Symbol&&Symbol.observable||"@@observable";function Jo(i){return i}let Xt=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function sH(i){return i&&i instanceof Gy||function rH(i){return i&&Gt(i.next)&&Gt(i.error)&&Gt(i.complete)}(i)&&bS(i)}(e)?e:new jy(e,n,r);return sp(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=SS(n))((r,s)=>{let o;o=this.subscribe(a=>{try{e(a)}catch(l){s(l),null==o||o.unsubscribe()}},s,r)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[qy](){return this}pipe(...e){return function CS(i){return 0===i.length?Jo:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}(e)(this)}toPromise(e){return new(e=SS(e))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=t=>new i(t),i})();function SS(i){var t;return null!==(t=null!=i?i:$a.Promise)&&void 0!==t?t:Promise}const oH=vu(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ge=(()=>{class i extends Xt{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new DS(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new oH}next(e){sp(()=>{if(this._throwIfClosed(),!this.isStopped){const n=this.observers.slice();for(const r of n)r.next(e)}})}error(e){sp(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){sp(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?vS:(s.push(e),new yt(()=>oc(s,e)))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new Xt;return e.source=this,e}}return i.create=(t,e)=>new DS(t,e),i})();class DS extends ge{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:vS}}function ES(i){return Gt(null==i?void 0:i.lift)}function Rn(i){return t=>{if(ES(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}class wn extends Gy{constructor(t,e,n,r,s){super(t),this.onFinalize=s,this._next=e?function(o){try{e(o)}catch(a){t.error(a)}}:super._next,this._error=r?function(o){try{r(o)}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(o){t.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function Dt(i,t){return Rn((e,n)=>{let r=0;e.subscribe(new wn(n,s=>{n.next(i.call(t,s,r++))}))})}function Ya(i){return this instanceof Ya?(this.v=i,this):new Ya(i)}function cH(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){n[h]&&(r[h]=function(f){return new Promise(function(p,m){s.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof Ya?Promise.resolve(h.value.v).then(c,d):u(s[0][2],h)}(n[h](f))}catch(p){u(s[0][3],p)}}function c(h){a("next",h)}function d(h){a("throw",h)}function u(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function dH(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function RS(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=i[s](o)).done,o.value)})}}}const Ky=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function kS(i){return Gt(null==i?void 0:i.then)}function IS(i){return Gt(i[qy])}function PS(i){return Symbol.asyncIterator&&Gt(null==i?void 0:i[Symbol.asyncIterator])}function OS(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const FS=function hH(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function LS(i){return Gt(null==i?void 0:i[FS])}function NS(i){return cH(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield Ya(e.read());if(r)return yield Ya(void 0);yield yield Ya(n)}}finally{e.releaseLock()}})}function BS(i){return Gt(null==i?void 0:i.getReader)}function cr(i){if(i instanceof Xt)return i;if(null!=i){if(IS(i))return function fH(i){return new Xt(t=>{const e=i[qy]();if(Gt(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(Ky(i))return function pH(i){return new Xt(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(kS(i))return function mH(i){return new Xt(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,wS)})}(i);if(PS(i))return VS(i);if(LS(i))return function gH(i){return new Xt(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(BS(i))return function _H(i){return VS(NS(i))}(i)}throw OS(i)}function VS(i){return new Xt(t=>{(function yH(i,t){var e,n,r,s;return function aH(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=dH(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function po(i,t,e,n=0,r=!1){const s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function Jn(i,t,e=1/0){return Gt(t)?Jn((n,r)=>Dt((s,o)=>t(n,s,r,o))(cr(i(n,r))),e):("number"==typeof t&&(e=t),Rn((n,r)=>function vH(i,t,e,n,r,s,o,a){const l=[];let c=0,d=0,u=!1;const h=()=>{u&&!l.length&&!c&&t.complete()},f=m=>c<n?p(m):l.push(m),p=m=>{s&&t.next(m),c++;let g=!1;cr(e(m,d++)).subscribe(new wn(t,_=>{null==r||r(_),s?f(_):t.next(_)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<n;){const _=l.shift();o?po(t,o,()=>p(_)):p(_)}h()}catch(_){t.error(_)}}))};return i.subscribe(new wn(t,f,()=>{u=!0,h()})),()=>{null==a||a()}}(n,r,i,e)))}function bu(i=1/0){return Jn(Jo,i)}const Is=new Xt(i=>i.complete());function HS(i){return i&&Gt(i.schedule)}function Xy(i){return i[i.length-1]}function US(i){return Gt(Xy(i))?i.pop():void 0}function xu(i){return HS(Xy(i))?i.pop():void 0}function zS(i,t=0){return Rn((e,n)=>{e.subscribe(new wn(n,r=>po(n,i,()=>n.next(r),t),()=>po(n,i,()=>n.complete(),t),r=>po(n,i,()=>n.error(r),t)))})}function GS(i,t=0){return Rn((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function jS(i,t){if(!i)throw new Error("Iterable cannot be null");return new Xt(e=>{po(e,t,()=>{const n=i[Symbol.asyncIterator]();po(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function hi(i,t){return t?function EH(i,t){if(null!=i){if(IS(i))return function wH(i,t){return cr(i).pipe(GS(t),zS(t))}(i,t);if(Ky(i))return function CH(i,t){return new Xt(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(kS(i))return function MH(i,t){return cr(i).pipe(GS(t),zS(t))}(i,t);if(PS(i))return jS(i,t);if(LS(i))return function SH(i,t){return new Xt(e=>{let n;return po(e,t,()=>{n=i[FS](),po(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>Gt(null==n?void 0:n.return)&&n.return()})}(i,t);if(BS(i))return function DH(i,t){return jS(NS(i),t)}(i,t)}throw OS(i)}(i,t):cr(i)}function gn(...i){const t=xu(i),e=function xH(i,t){return"number"==typeof Xy(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?cr(n[0]):bu(e)(hi(n,t)):Is}function fn(i){return i<=0?()=>Is:Rn((t,e)=>{let n=0;t.subscribe(new wn(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function WS(i={}){const{connector:t=(()=>new ge),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o=null,a=null,l=null,c=0,d=!1,u=!1;const h=()=>{null==a||a.unsubscribe(),a=null},f=()=>{h(),o=l=null,d=u=!1},p=()=>{const m=o;f(),null==m||m.unsubscribe()};return Rn((m,g)=>{c++,!u&&!d&&h();const _=l=null!=l?l:t();g.add(()=>{c--,0===c&&!u&&!d&&(a=Qy(p,r))}),_.subscribe(g),o||(o=new jy({next:v=>_.next(v),error:v=>{u=!0,h(),a=Qy(f,e,v),_.error(v)},complete:()=>{d=!0,h(),a=Qy(f,n),_.complete()}}),hi(m).subscribe(o))})(s)}}function Qy(i,t,...e){return!0===t?(i(),null):!1===t?null:t(...e).pipe(fn(1)).subscribe(()=>i())}function pn(i){for(let t in i)if(i[t]===pn)return t;throw Error("Could not find renamed property on target object.")}function Zy(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function sn(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(sn).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Jy(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const AH=pn({__forward_ref__:pn});function Tt(i){return i.__forward_ref__=Tt,i.toString=function(){return sn(this())},i}function Rt(i){return $S(i)?i():i}function $S(i){return"function"==typeof i&&i.hasOwnProperty(AH)&&i.__forward_ref__===Tt}class $t extends Error{constructor(t,e){super(function ev(i,t){return`NG0${Math.abs(i)}${t?": "+t:""}`}(t,e)),this.code=t}}function wt(i){return"string"==typeof i?i:null==i?"":String(i)}function qi(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():wt(i)}function op(i,t){const e=t?` in ${t}`:"";throw new $t(-201,`No provider for ${qi(i)} found${e}`)}function ur(i,t){null==i&&function Mn(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function oe(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function De(i){return{providers:i.providers||[],imports:i.imports||[]}}function tv(i){return qS(i,ap)||qS(i,KS)}function qS(i,t){return i.hasOwnProperty(t)?i[t]:null}function YS(i){return i&&(i.hasOwnProperty(nv)||i.hasOwnProperty(FH))?i[nv]:null}const ap=pn({\u0275prov:pn}),nv=pn({\u0275inj:pn}),KS=pn({ngInjectableDef:pn}),FH=pn({ngInjectorDef:pn});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let iv;function ea(i){const t=iv;return iv=i,t}function XS(i,t,e){const n=tv(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&bt.Optional?null:void 0!==t?t:void op(sn(i),"Injector")}function ta(i){return{toString:i}.toString()}var ns=(()=>((ns=ns||{})[ns.OnPush=0]="OnPush",ns[ns.Default=1]="Default",ns))(),is=(()=>{return(i=is||(is={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",is;var i})();const NH="undefined"!=typeof globalThis&&globalThis,BH="undefined"!=typeof window&&window,VH="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,un=NH||"undefined"!=typeof global&&global||BH||VH,lc={},mn=[],lp=pn({\u0275cmp:pn}),rv=pn({\u0275dir:pn}),sv=pn({\u0275pipe:pn}),QS=pn({\u0275mod:pn}),go=pn({\u0275fac:pn}),wu=pn({__NG_ELEMENT_ID__:pn});let HH=0;function We(i){return ta(()=>{const e={},n={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===ns.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||mn,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||is.Emulated,id:"c",styles:i.styles||mn,_:null,setInput:null,schemas:i.schemas||null,tView:null},r=i.directives,s=i.features,o=i.pipes;return n.id+=HH++,n.inputs=tD(i.inputs,e),n.outputs=tD(i.outputs),s&&s.forEach(a=>a(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ZS):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(JS):null,n})}function ZS(i){return Li(i)||function na(i){return i[rv]||null}(i)}function JS(i){return function Ka(i){return i[sv]||null}(i)}const eD={};function Te(i){return ta(()=>{const t={type:i.type,bootstrap:i.bootstrap||mn,declarations:i.declarations||mn,imports:i.imports||mn,exports:i.exports||mn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(eD[i.id]=i.type),t})}function tD(i,t){if(null==i)return lc;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=n,t&&(t[r]=s)}return e}const H=We;function rr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Li(i){return i[lp]||null}function Ir(i,t){const e=i[QS]||null;if(!e&&!0===t)throw new Error(`Type ${sn(i)} does not have '\u0275mod' property.`);return e}function Ps(i){return Array.isArray(i)&&"object"==typeof i[1]}function ss(i){return Array.isArray(i)&&!0===i[1]}function lv(i){return 0!=(8&i.flags)}function hp(i){return 2==(2&i.flags)}function fp(i){return 1==(1&i.flags)}function os(i){return null!==i.template}function $H(i){return 0!=(512&i[2])}function Ja(i,t){return i.hasOwnProperty(go)?i[go]:null}class KH{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function jt(){return iD}function iD(i){return i.type.prototype.ngOnChanges&&(i.setInput=QH),XH}function XH(){const i=sD(this),t=null==i?void 0:i.current;if(t){const e=i.previous;if(e===lc)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function QH(i,t,e,n){const r=sD(i)||function ZH(i,t){return i[rD]=t}(i,{previous:lc,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[e],l=o[a];s[a]=new KH(l&&l.currentValue,t,o===lc),i[n]=t}jt.ngInherit=!0;const rD="__ngSimpleChanges__";function sD(i){return i[rD]||null}const oD="http://www.w3.org/2000/svg";let uv;function Ln(i){return!!i.listen}const lD={createRenderer:(i,t)=>function hv(){return void 0!==uv?uv:"undefined"!=typeof document?document:void 0}()};function ei(i){for(;Array.isArray(i);)i=i[0];return i}function pp(i,t){return ei(t[i])}function Fr(i,t){return ei(t[i.index])}function fv(i,t){return i.data[t]}function fc(i,t){return i[t]}function fr(i,t){const e=t[i];return Ps(e)?e:e[0]}function cD(i){return 4==(4&i[2])}function pv(i){return 128==(128&i[2])}function ia(i,t){return null==t?null:i[t]}function dD(i){i[18]=0}function mv(i,t){i[5]+=t;let e=i,n=i[3];for(;null!==n&&(1===t&&1===e[5]||-1===t&&0===e[5]);)n[5]+=t,e=n,n=n[3]}const vt={lFrame:yD(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function uD(){return vt.bindingsEnabled}function ce(){return vt.lFrame.lView}function qt(){return vt.lFrame.tView}function qn(i){return vt.lFrame.contextLView=i,i[8]}function fi(){let i=hD();for(;null!==i&&64===i.type;)i=i.parent;return i}function hD(){return vt.lFrame.currentTNode}function Os(i,t){const e=vt.lFrame;e.currentTNode=i,e.isParent=t}function gv(){return vt.lFrame.isParent}function _v(){vt.lFrame.isParent=!1}function mp(){return vt.isInCheckNoChangesMode}function gp(i){vt.isInCheckNoChangesMode=i}function Yi(){const i=vt.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function pc(){return vt.lFrame.bindingIndex++}function yo(i){const t=vt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function hU(i,t){const e=vt.lFrame;e.bindingIndex=e.bindingRootIndex=i,yv(t)}function yv(i){vt.lFrame.currentDirectiveIndex=i}function vv(i){const t=vt.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}function mD(){return vt.lFrame.currentQueryIndex}function bv(i){vt.lFrame.currentQueryIndex=i}function pU(i){const t=i[1];return 2===t.type?t.declTNode:1===t.type?i[6]:null}function gD(i,t,e){if(e&bt.SkipSelf){let r=t,s=i;for(;!(r=r.parent,null!==r||e&bt.Host||(r=pU(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;t=r,i=s}const n=vt.lFrame=_D();return n.currentTNode=t,n.lView=i,!0}function _p(i){const t=_D(),e=i[1];vt.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function _D(){const i=vt.lFrame,t=null===i?null:i.child;return null===t?yD(i):t}function yD(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function vD(){const i=vt.lFrame;return vt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const bD=vD;function yp(){const i=vD();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ki(){return vt.lFrame.selectedIndex}function ra(i){vt.lFrame.selectedIndex=i}function Nn(){const i=vt.lFrame;return fv(i.tView,i.selectedIndex)}function sa(){vt.lFrame.currentNamespace=oD}function vp(){!function yU(){vt.lFrame.currentNamespace=null}()}function bp(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const s=i.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-e,o),a&&((i.contentHooks||(i.contentHooks=[])).push(e,a),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(e,a)),l&&(i.viewHooks||(i.viewHooks=[])).push(-e,l),c&&((i.viewHooks||(i.viewHooks=[])).push(e,c),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(e,c)),null!=d&&(i.destroyHooks||(i.destroyHooks=[])).push(e,d)}}function xp(i,t,e){xD(i,t,3,e)}function wp(i,t,e,n){(3&i[2])===e&&xD(i,t,e,n)}function xv(i,t){let e=i[2];(3&e)===t&&(e&=2047,e+=1,i[2]=e)}function xD(i,t,e,n){const s=null!=n?n:-1,o=t.length-1;let a=0;for(let l=void 0!==n?65535&i[18]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=n&&a>=n)break}else t[l]<0&&(i[18]+=65536),(a<s||-1==s)&&(xU(i,e,t,l),i[18]=(4294901760&i[18])+l+2),l++}function xU(i,t,e,n){const r=e[n]<0,s=e[n+1],a=i[r?-e[n]:e[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===t){i[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Eu{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Mp(i,t,e){const n=Ln(i);let r=0;for(;r<e.length;){const s=e[r];if("number"==typeof s){if(0!==s)break;r++;const o=e[r++],a=e[r++],l=e[r++];n?i.setAttribute(t,a,l,o):t.setAttributeNS(o,a,l)}else{const o=s,a=e[++r];Mv(o)?n&&i.setProperty(t,o,a):n?i.setAttribute(t,o,a):t.setAttribute(o,a),r++}}return r}function wD(i){return 3===i||4===i||6===i}function Mv(i){return 64===i.charCodeAt(0)}function Cp(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||MD(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function MD(i,t,e,n,r){let s=0,o=i.length;if(-1===t)o=-1;else for(;s<i.length;){const a=i[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<i.length;){const a=i[s];if("number"==typeof a)break;if(a===e){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,t),s=o+1),i.splice(s++,0,e),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function CD(i){return-1!==i}function mc(i){return 32767&i}function gc(i,t){let e=function DU(i){return i>>16}(i),n=t;for(;e>0;)n=n[15],e--;return n}let Cv=!0;function Sp(i){const t=Cv;return Cv=i,t}let EU=0;function Tu(i,t){const e=Dv(i,t);if(-1!==e)return e;const n=t[1];n.firstCreatePass&&(i.injectorIndex=t.length,Sv(n.data,i),Sv(t,null),Sv(n.blueprint,null));const r=Dp(i,t),s=i.injectorIndex;if(CD(r)){const o=mc(r),a=gc(r,t),l=a[1].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function Sv(i,t){i.push(0,0,0,0,0,0,0,0,t)}function Dv(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function Dp(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){const s=r[1],o=s.type;if(n=2===o?s.declTNode:1===o?r[6]:null,null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function Ep(i,t,e){!function AU(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(wu)&&(n=e[wu]),null==n&&(n=e[wu]=EU++);const r=255&n;t.data[i+(r>>5)]|=1<<r}(i,t,e)}function ED(i,t,e){if(e&bt.Optional)return i;op(t,"NodeInjector")}function AD(i,t,e,n){if(e&bt.Optional&&void 0===n&&(n=null),0==(e&(bt.Self|bt.Host))){const r=i[9],s=ea(void 0);try{return r?r.get(t,n,e&bt.Optional):XS(t,n,e&bt.Optional)}finally{ea(s)}}return ED(n,t,e)}function TD(i,t,e,n=bt.Default,r){if(null!==i){const s=function IU(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(wu)?i[wu]:void 0;return"number"==typeof t?t>=0?255&t:RU:t}(e);if("function"==typeof s){if(!gD(t,i,n))return n&bt.Host?ED(r,e,n):AD(t,e,n,r);try{const o=s(n);if(null!=o||n&bt.Optional)return o;op(e)}finally{bD()}}else if("number"==typeof s){let o=null,a=Dv(i,t),l=-1,c=n&bt.Host?t[16][6]:null;for((-1===a||n&bt.SkipSelf)&&(l=-1===a?Dp(i,t):t[a+8],-1!==l&&ID(n,!1)?(o=t[1],a=mc(l),t=gc(l,t)):a=-1);-1!==a;){const d=t[1];if(kD(s,a,d.data)){const u=kU(a,t,e,o,n,c);if(u!==RD)return u}l=t[a+8],-1!==l&&ID(n,t[1].data[a+8]===c)&&kD(s,a,t)?(o=d,a=mc(l),t=gc(l,t)):a=-1}}}return AD(t,e,n,r)}const RD={};function RU(){return new _c(fi(),ce())}function kU(i,t,e,n,r,s){const o=t[1],a=o.data[i+8],d=Ap(a,o,e,null==n?hp(a)&&Cv:n!=o&&0!=(3&a.type),r&bt.Host&&s===a);return null!==d?Ru(t,o,d,a):RD}function Ap(i,t,e,n,r){const s=i.providerIndexes,o=t.data,a=1048575&s,l=i.directiveStart,d=s>>20,h=r?a+d:i.directiveEnd;for(let f=n?a:a+d;f<h;f++){const p=o[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(r){const f=o[l];if(f&&os(f)&&f.type===e)return l}return null}function Ru(i,t,e,n){let r=i[e];const s=t.data;if(function wU(i){return i instanceof Eu}(r)){const o=r;o.resolving&&function TH(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new $t(-200,`Circular dependency in DI detected for ${i}${e}`)}(qi(s[e]));const a=Sp(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?ea(o.injectImpl):null;gD(i,n,bt.Default);try{r=i[e]=o.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&function bU(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){const o=iD(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(i,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-i,r),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(i,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,s))}(e,s[e],t)}finally{null!==l&&ea(l),Sp(a),o.resolving=!1,bD()}}return r}function kD(i,t,e){return!!(e[t+(i>>5)]&1<<i)}function ID(i,t){return!(i&bt.Self||i&bt.Host&&t)}class _c{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return TD(this._tNode,this._lView,t,n,e)}}function xe(i){return ta(()=>{const t=i.prototype.constructor,e=t[go]||Ev(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[go]||Ev(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Ev(i){return $S(i)?()=>{const t=Ev(Rt(i));return t&&t()}:Ja(i)}function ti(i){return function TU(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const s=e[r];if(wD(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(fi(),i)}const vc="__parameters__";function xc(i,t,e){return ta(()=>{const n=function Av(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,d){const u=l.hasOwnProperty(vc)?l[vc]:Object.defineProperty(l,vc,{value:[]})[vc];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class X{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=oe({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const OU=new X("AnalyzeForEntryComponents");function Lr(i,t){void 0===t&&(t=i);for(let e=0;e<i.length;e++){let n=i[e];Array.isArray(n)?(t===i&&(t=i.slice(0,e)),Lr(n,t)):t!==i&&t.push(n)}return t}function Fs(i,t){i.forEach(e=>Array.isArray(e)?Fs(e,t):t(e))}function OD(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function Tp(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function Pu(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function pr(i,t,e){let n=wc(i,t);return n>=0?i[1|n]=e:(n=~n,function NU(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function Rv(i,t){const e=wc(i,t);if(e>=0)return i[1|e]}function wc(i,t){return function ND(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<e];if(t===o)return s<<e;o>t?r=s:n=s+1}return~(r<<e)}(i,t,1)}const Ou={},Iv="__NG_DI_FLAG__",kp="ngTempTokenPath",jU=/\n/gm,VD="__source",$U=pn({provide:String,useValue:pn});let Fu;function HD(i){const t=Fu;return Fu=i,t}function qU(i,t=bt.Default){if(void 0===Fu)throw new $t(203,"");return null===Fu?XS(i,void 0,t):Fu.get(i,t&bt.Optional?null:void 0,t)}function G(i,t=bt.Default){return(function LH(){return iv}()||qU)(Rt(i),t)}const Mc=G;function Pv(i){const t=[];for(let e=0;e<i.length;e++){const n=Rt(i[e]);if(Array.isArray(n)){if(0===n.length)throw new $t(900,"");let r,s=bt.Default;for(let o=0;o<n.length;o++){const a=n[o],l=YU(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}t.push(G(r,s))}else t.push(G(n))}return t}function Lu(i,t){return i[Iv]=t,i.prototype[Iv]=t,i}function YU(i){return i[Iv]}const Nu=Lu(xc("Inject",i=>({token:i})),-1),mi=Lu(xc("Optional"),8),mr=Lu(xc("SkipSelf"),4);let Pp;function Sc(i){var t;return(null===(t=function Fv(){if(void 0===Pp&&(Pp=null,un.trustedTypes))try{Pp=un.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Pp}())||void 0===t?void 0:t.createHTML(i))||i}class el{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class az extends el{getTypeName(){return"HTML"}}class lz extends el{getTypeName(){return"Style"}}class cz extends el{getTypeName(){return"Script"}}class dz extends el{getTypeName(){return"URL"}}class uz extends el{getTypeName(){return"ResourceURL"}}function gr(i){return i instanceof el?i.changingThisBreaksApplicationSecurity:i}function Ls(i,t){const e=KD(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}function KD(i){return i instanceof el&&i.getTypeName()||null}class _z{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Sc(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class yz{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Sc(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Sc(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&t.removeAttribute(o)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const bz=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,xz=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Vu(i){return(i=String(i)).match(bz)||i.match(xz)?i:"unsafe:"+i}function Ns(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function Hu(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const ZD=Ns("area,br,col,hr,img,wbr"),JD=Ns("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),eE=Ns("rp,rt"),Nv=Hu(ZD,Hu(JD,Ns("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Hu(eE,Ns("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Hu(eE,JD)),Bv=Ns("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Vv=Ns("srcset"),tE=Hu(Bv,Vv,Ns("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ns("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),wz=Ns("script,style,template");class Mz{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Nv.hasOwnProperty(e))return this.sanitizedSomething=!0,!wz.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,a=o.toLowerCase();if(!tE.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Bv[a]&&(l=Vu(l)),Vv[a]&&(i=l,l=(i=String(i)).split(",").map(t=>Vu(t.trim())).join(", ")),this.buf.push(" ",o,'="',nE(l),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Nv.hasOwnProperty(e)&&!ZD.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(nE(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Cz=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sz=/([^\#-~ |!])/g;function nE(i){return i.replace(/&/g,"&amp;").replace(Cz,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Sz,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Fp;function iE(i,t){let e=null;try{Fp=Fp||function XD(i){const t=new yz(i);return function vz(){try{return!!(new window.DOMParser).parseFromString(Sc(""),"text/html")}catch(i){return!1}}()?new _z(t):t}(i);let n=t?String(t):"";e=Fp.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=e.innerHTML,e=Fp.getInertBodyElement(n)}while(n!==s);return Sc((new Mz).sanitizeChildren(Hv(e)||e))}finally{if(e){const n=Hv(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function Hv(i){return"content"in i&&function Dz(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Zt=(()=>((Zt=Zt||{})[Zt.NONE=0]="NONE",Zt[Zt.HTML=1]="HTML",Zt[Zt.STYLE=2]="STYLE",Zt[Zt.SCRIPT=3]="SCRIPT",Zt[Zt.URL=4]="URL",Zt[Zt.RESOURCE_URL=5]="RESOURCE_URL",Zt))();function Uu(i){const t=function zu(){const i=ce();return i&&i[12]}();return t?t.sanitize(Zt.URL,i)||"":Ls(i,"URL")?gr(i):Vu(wt(i))}const oE="__ngContext__";function Bi(i,t){i[oE]=t}function zv(i){const t=function Gu(i){return i[oE]||null}(i);return t?Array.isArray(t)?t:t.lView:null}function jv(i){return i.ngOriginalError}function Gz(i,...t){i.error(...t)}class vo{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=function zz(i){return i&&i.ngErrorLogger||Gz}(t);n(this._console,"ERROR",t),e&&n(this._console,"ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&jv(t);for(;e&&jv(e);)e=jv(e);return e||null}}const uE=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(un))();function Bs(i){return i instanceof Function?i():i}var _r=(()=>((_r=_r||{})[_r.Important=1]="Important",_r[_r.DashCase=2]="DashCase",_r))();function $v(i,t){return undefined(i,t)}function ju(i){const t=i[3];return ss(t)?t[3]:t}function qv(i){return gE(i[13])}function Yv(i){return gE(i[4])}function gE(i){for(;null!==i&&!ss(i);)i=i[4];return i}function Ec(i,t,e,n,r){if(null!=n){let s,o=!1;ss(n)?s=n:Ps(n)&&(o=!0,n=n[0]);const a=ei(n);0===i&&null!==e?null==r?wE(t,e,a):tl(t,e,a,r||null,!0):1===i&&null!==e?tl(t,e,a,r||null,!0):2===i?function TE(i,t,e){const n=Lp(i,t);n&&function hG(i,t,e,n){Ln(i)?i.removeChild(t,e,n):t.removeChild(e)}(i,n,t,e)}(t,a,o):3===i&&t.destroyNode(a),null!=s&&function mG(i,t,e,n,r){const s=e[7];s!==ei(e)&&Ec(t,i,n,s,r);for(let a=10;a<e.length;a++){const l=e[a];Wu(l[1],l,i,t,n,s)}}(t,i,s,e,r)}}function Xv(i,t,e){return Ln(i)?i.createElement(t,e):null===e?i.createElement(t):i.createElementNS(e,t)}function yE(i,t){const e=i[9],n=e.indexOf(t),r=t[3];1024&t[2]&&(t[2]&=-1025,mv(r,-1)),e.splice(n,1)}function Qv(i,t){if(i.length<=10)return;const e=10+t,n=i[e];if(n){const r=n[17];null!==r&&r!==i&&yE(r,n),t>0&&(i[e-1][4]=n[4]);const s=Tp(i,10+t);!function rG(i,t){Wu(i,t,t[11],2,null,null),t[0]=null,t[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}function vE(i,t){if(!(256&t[2])){const e=t[11];Ln(e)&&e.destroyNode&&Wu(i,t,e,3,null,null),function aG(i){let t=i[13];if(!t)return Zv(i[1],i);for(;t;){let e=null;if(Ps(t))e=t[13];else{const n=t[10];n&&(e=n)}if(!e){for(;t&&!t[4]&&t!==i;)Ps(t)&&Zv(t[1],t),t=t[3];null===t&&(t=i),Ps(t)&&Zv(t[1],t),e=t&&t[4]}t=e}}(t)}}function Zv(i,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function uG(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof Eu)){const s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(i,t),function dG(i,t){const e=i.cleanup,n=t[7];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+1],a="function"==typeof o?o(t):ei(t[o]),l=n[r=e[s+2]],c=e[s+3];"boolean"==typeof c?a.removeEventListener(e[s],l,c):c>=0?n[r=c]():n[r=-c].unsubscribe(),s+=2}else{const o=n[r=e[s+1]];e[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)n[s]();t[7]=null}}(i,t),1===t[1].type&&Ln(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&ss(t[3])){e!==t[3]&&yE(e,t);const n=t[19];null!==n&&n.detachView(i)}}}function bE(i,t,e){return function xE(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===is.None||r===is.Emulated)return null}return Fr(n,e)}(i,t.parent,e)}function tl(i,t,e,n,r){Ln(i)?i.insertBefore(t,e,n,r):t.insertBefore(e,n,r)}function wE(i,t,e){Ln(i)?i.appendChild(t,e):t.appendChild(e)}function ME(i,t,e,n,r){null!==n?tl(i,t,e,n,r):wE(i,t,e)}function Lp(i,t){return Ln(i)?i.parentNode(t):t.parentNode}function CE(i,t,e){return DE(i,t,e)}let DE=function SE(i,t,e){return 40&i.type?Fr(i,e):null};function Np(i,t,e,n){const r=bE(i,n,t),s=t[11],a=CE(n.parent||t[6],n,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)ME(s,r,e[l],a,!1);else ME(s,r,e,a,!1)}function Bp(i,t){if(null!==t){const e=t.type;if(3&e)return Fr(t,i);if(4&e)return eb(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return Bp(i,n);{const r=i[t.index];return ss(r)?eb(-1,r):ei(r)}}if(32&e)return $v(t,i)()||ei(i[t.index]);{const n=AE(i,t);return null!==n?Array.isArray(n)?n[0]:Bp(ju(i[16]),n):Bp(i,t.next)}}return null}function AE(i,t){return null!==t?i[16][6].projection[t.projection]:null}function eb(i,t){const e=10+i+1;if(e<t.length){const n=t[e],r=n[1].firstChild;if(null!==r)return Bp(n,r)}return t[7]}function tb(i,t,e,n,r,s,o){for(;null!=e;){const a=n[e.index],l=e.type;if(o&&0===t&&(a&&Bi(ei(a),n),e.flags|=4),64!=(64&e.flags))if(8&l)tb(i,t,e.child,n,r,s,!1),Ec(t,i,r,a,s);else if(32&l){const c=$v(e,n);let d;for(;d=c();)Ec(t,i,r,d,s);Ec(t,i,r,a,s)}else 16&l?RE(i,t,n,e,r,s):Ec(t,i,r,a,s);e=o?e.projectionNext:e.next}}function Wu(i,t,e,n,r,s){tb(e,n,i.firstChild,t,r,s,!1)}function RE(i,t,e,n,r,s){const o=e[16],l=o[6].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Ec(t,i,r,l[c],s);else tb(i,t,l,o[3],r,s,!0)}function kE(i,t,e){Ln(i)?i.setAttribute(t,"style",e):t.style.cssText=e}function nb(i,t,e){Ln(i)?""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e):t.className=e}function IE(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}const PE="ng-template";function _G(i,t,e){let n=0;for(;n<i.length;){let r=i[n++];if(e&&"class"===r){if(r=i[n],-1!==IE(r.toLowerCase(),t,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function OE(i){return 4===i.type&&i.value!==PE}function yG(i,t,e){return t===(4!==i.type||e?i.value:PE)}function vG(i,t,e){let n=4;const r=i.attrs||[],s=function wG(i){for(let t=0;t<i.length;t++)if(wD(i[t]))return t;return i.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!yG(i,l,e)||""===l&&1===t.length){if(as(n))return!1;o=!0}}else{const c=8&n?l:t[++a];if(8&n&&null!==i.attrs){if(!_G(i.attrs,c,e)){if(as(n))return!1;o=!0}continue}const u=bG(8&n?"class":l,r,OE(i),e);if(-1===u){if(as(n))return!1;o=!0;continue}if(""!==c){let h;h=u>s?"":r[u+1].toLowerCase();const f=8&n?h:null;if(f&&-1!==IE(f,c,0)||2&n&&c!==h){if(as(n))return!1;o=!0}}}}else{if(!o&&!as(n)&&!as(l))return!1;if(o&&as(l))continue;o=!1,n=l|1&n}}return as(n)||o}function as(i){return 0==(1&i)}function bG(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function MG(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function FE(i,t,e=!1){for(let n=0;n<t.length;n++)if(vG(i,t[n],e))return!0;return!1}function CG(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function LE(i,t){return i?":not("+t.trim()+")":t}function SG(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let o=i[e];if("string"==typeof o)if(2&n){const a=i[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!as(o)&&(t+=LE(s,r),r=""),n=o,s=s||!as(n);e++}return""!==r&&(t+=LE(s,r)),t}const Mt={};function J(i){NE(qt(),ce(),Ki()+i,mp())}function NE(i,t,e,n){if(!n)if(3==(3&t[2])){const s=i.preOrderCheckHooks;null!==s&&xp(t,s,e)}else{const s=i.preOrderHooks;null!==s&&wp(t,s,0,e)}ra(e)}function Vp(i,t){return i<<17|t<<2}function ls(i){return i>>17&32767}function ib(i){return 2|i}function bo(i){return(131068&i)>>2}function rb(i,t){return-131069&i|t<<2}function sb(i){return 1|i}function YE(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],s=e[n+1];if(-1!==s){const o=i.data[s];bv(r),o.contentQueries(2,t[s],s)}}}function $u(i,t,e,n,r,s,o,a,l,c){const d=t.blueprint.slice();return d[0]=r,d[2]=140|n,dD(d),d[3]=d[15]=i,d[8]=e,d[10]=o||i&&i[10],d[11]=a||i&&i[11],d[12]=l||i&&i[12]||null,d[9]=c||i&&i[9]||null,d[6]=s,d[16]=2==t.type?i[16]:d,d}function Ac(i,t,e,n,r){let s=i.data[t];if(null===s)s=function pb(i,t,e,n,r){const s=hD(),o=gv(),l=i.data[t]=function GG(i,t,e,n,r,s){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(i,t,e,n,r),function uU(){return vt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const o=function Du(){const i=vt.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Os(s,!0),s}function Tc(i,t,e,n){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function qu(i,t,e){_p(t);try{const n=i.viewQuery;null!==n&&Mb(1,n,e);const r=i.template;null!==r&&KE(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&YE(i,t),i.staticViewQueries&&Mb(2,i.viewQuery,e);const s=i.components;null!==s&&function HG(i,t){for(let e=0;e<t.length;e++)l5(i,t[e])}(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[2]&=-5,yp()}}function Rc(i,t,e,n){const r=t[2];if(256==(256&r))return;_p(t);const s=mp();try{dD(t),function fD(i){return vt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&KE(i,t,e,2,n);const o=3==(3&r);if(!s)if(o){const c=i.preOrderCheckHooks;null!==c&&xp(t,c,null)}else{const c=i.preOrderHooks;null!==c&&wp(t,c,0,null),xv(t,0)}if(function o5(i){for(let t=qv(i);null!==t;t=Yv(t)){if(!t[2])continue;const e=t[9];for(let n=0;n<e.length;n++){const r=e[n],s=r[3];0==(1024&r[2])&&mv(s,1),r[2]|=1024}}}(t),function s5(i){for(let t=qv(i);null!==t;t=Yv(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];pv(n)&&Rc(r,n,r.template,n[8])}}(t),null!==i.contentQueries&&YE(i,t),!s)if(o){const c=i.contentCheckHooks;null!==c&&xp(t,c)}else{const c=i.contentHooks;null!==c&&wp(t,c,1),xv(t,1)}!function BG(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)ra(~r);else{const s=r,o=e[++n],a=e[++n];hU(o,s),a(2,t[s])}}}finally{ra(-1)}}(i,t);const a=i.components;null!==a&&function VG(i,t){for(let e=0;e<t.length;e++)a5(i,t[e])}(t,a);const l=i.viewQuery;if(null!==l&&Mb(2,l,n),!s)if(o){const c=i.viewCheckHooks;null!==c&&xp(t,c)}else{const c=i.viewHooks;null!==c&&wp(t,c,2),xv(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,mv(t[3],-1))}finally{yp()}}function UG(i,t,e,n){const r=t[10],s=!mp(),o=cD(t);try{s&&!o&&r.begin&&r.begin(),o&&qu(i,t,n),Rc(i,t,e,n)}finally{s&&!o&&r.end&&r.end()}}function KE(i,t,e,n,r){const s=Ki(),o=2&n;try{ra(-1),o&&t.length>20&&NE(i,t,20,mp()),e(n,r)}finally{ra(s)}}function XE(i,t,e){if(lv(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function mb(i,t,e){!uD()||(function XG(i,t,e,n){const r=e.directiveStart,s=e.directiveEnd;i.firstCreatePass||Tu(e,t),Bi(n,t);const o=e.initialInputs;for(let a=r;a<s;a++){const l=i.data[a],c=os(l);c&&t5(t,e,l);const d=Ru(t,i,a,e);Bi(d,t),null!==o&&n5(0,a-r,d,l,0,o),c&&(fr(e.index,t)[8]=d)}}(i,t,e,Fr(e,t)),128==(128&e.flags)&&function QG(i,t,e){const n=e.directiveStart,r=e.directiveEnd,o=e.index,a=function fU(){return vt.lFrame.currentDirectiveIndex}();try{ra(o);for(let l=n;l<r;l++){const c=i.data[l],d=t[l];yv(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&rA(c,d)}}finally{ra(-1),yv(a)}}(i,t,e))}function gb(i,t,e=Fr){const n=t.localNames;if(null!==n){let r=t.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?e(t,i):i[o];i[r++]=a}}}function QE(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=zp(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function zp(i,t,e,n,r,s,o,a,l,c){const d=20+n,u=d+r,h=function zG(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:Mt);return e}(d,u),f="function"==typeof c?c():c;return h[1]={type:i,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:u,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function eA(i,t,e,n){const r=dA(t);null===e?r.push(n):(r.push(e),i.firstCreatePass&&uA(i).push(n,r.length-1))}function tA(i,t,e){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}return e}function yr(i,t,e,n,r,s,o,a){const l=Fr(t,e);let d,c=t.inputs;!a&&null!=c&&(d=c[n])?(pA(i,e,d,n,r),hp(t)&&function $G(i,t){const e=fr(t,i);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(n=function WG(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,t.value||"",n):r,Ln(s)?s.setProperty(l,n,r):Mv(n)||(l.setProperty?l.setProperty(n,r):l[n]=r))}function _b(i,t,e,n){let r=!1;if(uD()){const s=function ZG(i,t,e){const n=i.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];FE(e,o.selectors,!1)&&(r||(r=[]),Ep(Tu(e,t),i,o.type),os(o)?(sA(i,e),r.unshift(o)):r.push(o))}return r}(i,t,e),o=null===n?null:{"":-1};if(null!==s){r=!0,oA(e,i.data.length,s.length);for(let d=0;d<s.length;d++){const u=s[d];u.providersResolver&&u.providersResolver(u)}let a=!1,l=!1,c=Tc(i,t,s.length,null);for(let d=0;d<s.length;d++){const u=s[d];e.mergedAttrs=Cp(e.mergedAttrs,u.hostAttrs),aA(i,e,t,c,u),e5(c,u,o),null!==u.contentQueries&&(e.flags|=8),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=128);const h=u.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function jG(i,t){const n=t.directiveEnd,r=i.data,s=t.attrs,o=[];let a=null,l=null;for(let c=t.directiveStart;c<n;c++){const d=r[c],u=d.inputs,h=null===s||OE(t)?null:r5(u,s);o.push(h),a=tA(u,c,a),l=tA(d.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=a,t.outputs=l}(i,e)}o&&function JG(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new $t(-301,`Export of name '${t[r+1]}' not found!`);n.push(t[r],s)}}}(e,n,o)}return e.mergedAttrs=Cp(e.mergedAttrs,e.attrs),r}function iA(i,t,e,n,r,s){const o=s.hostBindings;if(o){let a=i.hostBindingOpCodes;null===a&&(a=i.hostBindingOpCodes=[]);const l=~t.index;(function KG(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(a)!=l&&a.push(l),a.push(n,r,o)}}function rA(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function sA(i,t){t.flags|=2,(i.components||(i.components=[])).push(t.index)}function e5(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;os(t)&&(e[""]=i)}}function oA(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}function aA(i,t,e,n,r){i.data[n]=r;const s=r.factory||(r.factory=Ja(r.type)),o=new Eu(s,os(r),null);i.blueprint[n]=o,e[n]=o,iA(i,t,0,n,Tc(i,e,r.hostVars,Mt),r)}function t5(i,t,e){const n=Fr(t,i),r=QE(e),s=i[10],o=Gp(i,$u(i,r,null,e.onPush?64:16,n,t,s,s.createRenderer(n,e),null,null));i[t.index]=o}function Vs(i,t,e,n,r,s){const o=Fr(i,t);!function yb(i,t,e,n,r,s,o){if(null==s)Ln(i)?i.removeAttribute(t,r,e):t.removeAttribute(r);else{const a=null==o?wt(s):o(s,n||"",r);Ln(i)?i.setAttribute(t,r,a,e):e?t.setAttributeNS(e,r,a):t.setAttribute(r,a)}}(t[11],o,s,i.value,e,n,r)}function n5(i,t,e,n,r,s){const o=s[t];if(null!==o){const a=n.setInput;for(let l=0;l<o.length;){const c=o[l++],d=o[l++],u=o[l++];null!==a?n.setInput(e,u,c,d):e[d]=u}}}function r5(i,t){let e=null,n=0;for(;n<t.length;){const r=t[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,i[r],t[n+1])),n+=2}else n+=2;else n+=4}return e}function lA(i,t,e,n){return new Array(i,!0,!1,t,null,0,n,e,null,null)}function a5(i,t){const e=fr(t,i);if(pv(e)){const n=e[1];80&e[2]?Rc(n,e,n.template,e[8]):e[5]>0&&vb(e)}}function vb(i){for(let n=qv(i);null!==n;n=Yv(n))for(let r=10;r<n.length;r++){const s=n[r];if(1024&s[2]){const o=s[1];Rc(o,s,o.template,s[8])}else s[5]>0&&vb(s)}const e=i[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=fr(e[n],i);pv(r)&&r[5]>0&&vb(r)}}function l5(i,t){const e=fr(t,i),n=e[1];(function c5(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])})(n,e),qu(n,e,e[8])}function Gp(i,t){return i[13]?i[14][4]=t:i[13]=t,i[14]=t,t}function bb(i){for(;i;){i[2]|=64;const t=ju(i);if($H(i)&&!t)return i;i=t}return null}function wb(i,t,e){const n=t[10];n.begin&&n.begin();try{Rc(i,t,i.template,e)}catch(r){throw fA(t,r),r}finally{n.end&&n.end()}}function cA(i){!function xb(i){for(let t=0;t<i.components.length;t++){const e=i.components[t],n=zv(e),r=n[1];UG(r,n,r.template,e)}}(i[8])}function Mb(i,t,e){bv(0),t(i,e)}const f5=(()=>Promise.resolve(null))();function dA(i){return i[7]||(i[7]=[])}function uA(i){return i.cleanup||(i.cleanup=[])}function hA(i,t,e){return(null===i||os(i))&&(e=function nU(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(e[t.index])),e[11]}function fA(i,t){const e=i[9],n=e?e.get(vo,null):null;n&&n.handleError(t)}function pA(i,t,e,n,r){for(let s=0;s<e.length;){const o=e[s++],a=e[s++],l=t[o],c=i.data[o];null!==c.setInput?c.setInput(l,r,n,a):l[a]=r}}function xo(i,t,e){const n=pp(t,i);!function _E(i,t,e){Ln(i)?i.setValue(t,e):t.textContent=e}(i[11],n,e)}function jp(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?r=Jy(r,a):2==s&&(n=Jy(n,a+": "+t[++o]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}const Cb=new X("INJECTOR",-1);class mA{get(t,e=Ou){if(e===Ou){const n=new Error(`NullInjectorError: No provider for ${sn(t)}!`);throw n.name="NullInjectorError",n}return e}}const Sb=new X("Set Injector scope."),Yu={},g5={};let Db;function gA(){return void 0===Db&&(Db=new mA),Db}function _A(i,t=null,e=null,n){const r=yA(i,t,e,n);return r._resolveInjectorDefTypes(),r}function yA(i,t=null,e=null,n){return new _5(i,e,t||gA(),n)}class _5{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];e&&Fs(e,a=>this.processProvider(a,t,e)),Fs([t],a=>this.processInjectorType(a,[],s)),this.records.set(Cb,kc(void 0,this));const o=this.records.get(Sb);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:sn(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Ou,n=bt.Default){this.assertNotDestroyed();const r=HD(this),s=ea(void 0);try{if(!(n&bt.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function S5(i){return"function"==typeof i||"object"==typeof i&&i instanceof X}(t)&&tv(t);a=l&&this.injectableDefInScope(l)?kc(Eb(t),Yu):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(n&bt.Self?gA():this.parent).get(t,e=n&bt.Optional&&e===Ou?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[kp]=o[kp]||[]).unshift(sn(t)),r)throw o;return function KU(i,t,e,n){const r=i[kp];throw t[VD]&&r.unshift(t[VD]),i.message=function XU(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let r=sn(t);if(Array.isArray(t))r=t.map(sn).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):sn(a)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(jU,"\n  ")}`}("\n"+i.message,r,e,n),i.ngTokenPath=r,i[kp]=null,i}(o,t,"R3InjectorError",this.source)}throw o}finally{ea(s),HD(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((n,r)=>t.push(sn(r))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $t(205,"")}processInjectorType(t,e,n){if(!(t=Rt(t)))return!1;let r=YS(t);const s=null==r&&t.ngModule||void 0,o=void 0===s?t:s,a=-1!==n.indexOf(o);if(void 0!==s&&(r=YS(s)),null==r)return!1;if(null!=r.imports&&!a){let d;n.push(o);try{Fs(r.imports,u=>{this.processInjectorType(u,e,n)&&(void 0===d&&(d=[]),d.push(u))})}finally{}if(void 0!==d)for(let u=0;u<d.length;u++){const{ngModule:h,providers:f}=d[u];Fs(f,p=>this.processProvider(p,h,f||mn))}}this.injectorDefTypes.add(o);const l=Ja(o)||(()=>new o);this.records.set(o,kc(l,Yu));const c=r.providers;if(null!=c&&!a){const d=t;Fs(c,u=>this.processProvider(u,d,c))}return void 0!==s&&void 0!==t.providers}processProvider(t,e,n){let r=Ic(t=Rt(t))?t:Rt(t&&t.provide);const s=function v5(i,t,e){return bA(i)?kc(void 0,i.useValue):kc(vA(i),Yu)}(t);if(Ic(t)||!0!==t.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=kc(void 0,Yu,!0),o.factory=()=>Pv(o.multi),this.records.set(r,o)),r=t,o.multi.push(t)}this.records.set(r,s)}hydrate(t,e){return e.value===Yu&&(e.value=g5,e.value=e.factory()),"object"==typeof e.value&&e.value&&function C5(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Rt(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Eb(i){const t=tv(i),e=null!==t?t.factory:Ja(i);if(null!==e)return e;if(i instanceof X)throw new $t(204,"");if(i instanceof Function)return function y5(i){const t=i.length;if(t>0)throw Pu(t,"?"),new $t(204,"");const e=function PH(i){const t=i&&(i[ap]||i[KS]);if(t){const e=function OH(i){if(i.hasOwnProperty("name"))return i.name;const t=(""+i).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new $t(204,"")}function vA(i,t,e){let n;if(Ic(i)){const r=Rt(i);return Ja(r)||Eb(r)}if(bA(i))n=()=>Rt(i.useValue);else if(function x5(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...Pv(i.deps||[]));else if(function b5(i){return!(!i||!i.useExisting)}(i))n=()=>G(Rt(i.useExisting));else{const r=Rt(i&&(i.useClass||i.provide));if(!function M5(i){return!!i.deps}(i))return Ja(r)||Eb(r);n=()=>new r(...Pv(i.deps))}return n}function kc(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function bA(i){return null!==i&&"object"==typeof i&&$U in i}function Ic(i){return"function"==typeof i}let kn=(()=>{class i{static create(e,n){var r;if(Array.isArray(e))return _A({name:""},n,e,"");{const s=null!==(r=e.name)&&void 0!==r?r:"";return _A({name:s},e.parent,e.providers,s)}}}return i.THROW_IF_NOT_FOUND=Ou,i.NULL=new mA,i.\u0275prov=oe({token:i,providedIn:"any",factory:()=>G(Cb)}),i.__NG_ELEMENT_ID__=-1,i})();function P5(i,t){bp(zv(i)[1],fi())}function q(i){let t=function IA(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(os(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new $t(903,"");r=t.\u0275dir}if(r){if(e){n.push(r);const o=i;o.inputs=Rb(i.inputs),o.declaredInputs=Rb(i.declaredInputs),o.outputs=Rb(i.outputs);const a=r.hostBindings;a&&N5(i,a);const l=r.viewQuery,c=r.contentQueries;if(l&&F5(i,l),c&&L5(i,c),Zy(i.inputs,r.inputs),Zy(i.declaredInputs,r.declaredInputs),Zy(i.outputs,r.outputs),os(r)&&r.data.animation){const d=i.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(i),a===q&&(e=!1)}}t=Object.getPrototypeOf(t)}!function O5(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=Cp(r.hostAttrs,e=Cp(e,r.hostAttrs))}}(n)}function Rb(i){return i===lc?{}:i===mn?[]:i}function F5(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function L5(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,s)=>{t(n,r,s),e(n,r,s)}:t}function N5(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}let Wp=null;function Pc(){if(!Wp){const i=un.Symbol;if(i&&i.iterator)Wp=i.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Wp=n)}}}return Wp}function Ku(i){return!!kb(i)&&(Array.isArray(i)||!(i instanceof Map)&&Pc()in i)}function kb(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Hs(i,t,e){return i[t]=e}function Vi(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function Ue(i,t,e,n){const r=ce();return Vi(r,pc(),t)&&(qt(),Vs(Nn(),r,i,t,e,n)),Ue}function Fc(i,t,e,n){return Vi(i,pc(),e)?t+wt(e)+n:Mt}function Ye(i,t,e,n,r,s,o,a){const l=ce(),c=qt(),d=i+20,u=c.firstCreatePass?function j5(i,t,e,n,r,s,o,a,l){const c=t.consts,d=Ac(t,i,4,o||null,ia(c,a));_b(t,e,d,ia(c,l)),bp(t,d);const u=d.tViews=zp(2,d,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,d),u.queries=t.queries.embeddedTView(d)),d}(d,c,l,t,e,n,r,s,o):c.data[d];Os(u,!1);const h=l[11].createComment("");Np(c,l,h,u),Bi(h,l),Gp(l,l[d]=lA(h,l,h,u)),fp(u)&&mb(c,l,u),null!=o&&gb(l,u,a)}function vr(i){return fc(function dU(){return vt.lFrame.contextLView}(),20+i)}function y(i,t=bt.Default){const e=ce();return null===e?G(i,t):TD(fi(),e,Rt(i),t)}function jc(){throw new Error("invalid")}function te(i,t,e){const n=ce();return Vi(n,pc(),t)&&yr(qt(),Nn(),n,i,t,n[11],e,!1),te}function Lb(i,t,e,n,r){const o=r?"class":"style";pA(i,e,t.inputs[o],o,n)}function O(i,t,e,n){const r=ce(),s=qt(),o=20+i,a=r[11],l=r[o]=Xv(a,t,function vU(){return vt.lFrame.currentNamespace}()),c=s.firstCreatePass?function h4(i,t,e,n,r,s,o){const a=t.consts,c=Ac(t,i,2,r,ia(a,s));return _b(t,e,c,ia(a,o)),null!==c.attrs&&jp(c,c.attrs,!1),null!==c.mergedAttrs&&jp(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(o,s,r,0,t,e,n):s.data[o];Os(c,!0);const d=c.mergedAttrs;null!==d&&Mp(a,l,d);const u=c.classes;null!==u&&nb(a,l,u);const h=c.styles;null!==h&&kE(a,l,h),64!=(64&c.flags)&&Np(s,r,l,c),0===function sU(){return vt.lFrame.elementDepthCount}()&&Bi(l,r),function oU(){vt.lFrame.elementDepthCount++}(),fp(c)&&(mb(s,r,c),XE(s,c,r)),null!==n&&gb(r,c)}function F(){let i=fi();gv()?_v():(i=i.parent,Os(i,!1));const t=i;!function aU(){vt.lFrame.elementDepthCount--}();const e=qt();e.firstCreatePass&&(bp(e,i),lv(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function CU(i){return 0!=(16&i.flags)}(t)&&Lb(e,t,ce(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function SU(i){return 0!=(32&i.flags)}(t)&&Lb(e,t,ce(),t.stylesWithoutHost,!1)}function Ne(i,t,e,n){O(i,t,e,n),F()}function Wc(i,t,e){const n=ce(),r=qt(),s=i+20,o=r.firstCreatePass?function f4(i,t,e,n,r){const s=t.consts,o=ia(s,n),a=Ac(t,i,8,"ng-container",o);return null!==o&&jp(a,o,!0),_b(t,e,a,ia(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,n,t,e):r.data[s];Os(o,!0);const a=n[s]=n[11].createComment("");Np(r,n,a,o),Bi(a,n),fp(o)&&(mb(r,n,o),XE(r,o,n)),null!=e&&gb(n,o)}function $c(){let i=fi();const t=qt();gv()?_v():(i=i.parent,Os(i,!1)),t.firstCreatePass&&(bp(t,i),lv(i)&&t.queries.elementEnd(i))}function br(){return ce()}function Qu(i){return!!i&&"function"==typeof i.then}const Nb=function ZA(i){return!!i&&"function"==typeof i.subscribe};function Re(i,t,e,n){const r=ce(),s=qt(),o=fi();return JA(s,r,r[11],o,i,t,!!e,n),Re}function Yp(i,t){const e=fi(),n=ce(),r=qt();return JA(r,n,hA(vv(r.data),e,n),e,i,t,!1),Yp}function JA(i,t,e,n,r,s,o,a){const l=fp(n),d=i.firstCreatePass&&uA(i),u=t[8],h=dA(t);let f=!0;if(3&n.type||a){const g=Fr(n,t),_=a?a(g):g,v=h.length,b=a?x=>a(ei(x[n.index])):n.index;if(Ln(e)){let x=null;if(!a&&l&&(x=function p4(i,t,e,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===n){const a=t[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(i,t,r,n.index)),null!==x)(x.__ngLastListenerFn__||x).__ngNextListenerFn__=s,x.__ngLastListenerFn__=s,f=!1;else{s=Bb(n,t,u,s,!1);const w=e.listen(_,r,s);h.push(s,w),d&&d.push(r,b,v,v+1)}}else s=Bb(n,t,u,s,!0),_.addEventListener(r,s,o),h.push(s),d&&d.push(r,b,v,o)}else s=Bb(n,t,u,s,!1);const p=n.outputs;let m;if(f&&null!==p&&(m=p[r])){const g=m.length;if(g)for(let _=0;_<g;_+=2){const S=t[m[_]][m[_+1]].subscribe(s),T=h.length;h.push(s,S),d&&d.push(r,n.index,T,-(T+1))}}}function eT(i,t,e,n){try{return!1!==e(n)}catch(r){return fA(i,r),!1}}function Bb(i,t,e,n,r){return function s(o){if(o===Function)return n;const a=2&i.flags?fr(i.index,t):t;0==(32&t[2])&&bb(a);let l=eT(t,0,n,o),c=s.__ngNextListenerFn__;for(;c;)l=eT(t,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Je(i=1){return function mU(i){return(vt.lFrame.contextLView=function gU(i,t){for(;i>0;)t=t[15],i--;return t}(i,vt.lFrame.contextLView))[8]}(i)}function m4(i,t){let e=null;const n=function xG(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===n?FE(i,s,!0):CG(n,s))return r}else e=r}return e}function on(i){const t=ce()[16][6];if(!t.projection){const n=t.projection=Pu(i?i.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const o=i?m4(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function rt(i,t=0,e){const n=ce(),r=qt(),s=Ac(r,20+i,16,null,e||null);null===s.projection&&(s.projection=t),_v(),64!=(64&s.flags)&&function pG(i,t,e){RE(t[11],0,t,e,bE(i,e,t),CE(e.parent||t[6],e,t))}(r,n,s)}function dT(i,t,e,n,r){const s=i[e+1],o=null===t;let a=n?ls(s):bo(s),l=!1;for(;0!==a&&(!1===l||o);){const d=i[a+1];y4(i[a],t)&&(l=!0,i[a+1]=n?sb(d):ib(d)),a=n?ls(d):bo(d)}l&&(i[e+1]=n?ib(s):sb(s))}function y4(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&wc(i,t)>=0}const gi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function uT(i){return i.substring(gi.key,gi.keyEnd)}function hT(i,t){const e=gi.textEnd;return e===t?-1:(t=gi.keyEnd=function w4(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,gi.key=t,e),qc(i,t,e))}function qc(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function Hi(i,t,e){return ds(i,t,e,!1),Hi}function Ke(i,t){return ds(i,t,null,!0),Ke}function zs(i,t){for(let e=function b4(i){return function pT(i){gi.key=0,gi.keyEnd=0,gi.value=0,gi.valueEnd=0,gi.textEnd=i.length}(i),hT(i,qc(i,0,gi.textEnd))}(t);e>=0;e=hT(t,e))pr(i,uT(t),!0)}function ds(i,t,e,n){const r=ce(),s=qt(),o=yo(2);s.firstUpdatePass&&yT(s,i,o,n),t!==Mt&&Vi(r,o,t)&&bT(s,s.data[Ki()],r,r[11],i,r[o+1]=function P4(i,t){return null==i||("string"==typeof t?i+=t:"object"==typeof i&&(i=sn(gr(i)))),i}(t,e),n,o)}function _T(i,t){return t>=i.expandoStartIndex}function yT(i,t,e,n){const r=i.data;if(null===r[e+1]){const s=r[Ki()],o=_T(i,e);wT(s,n)&&null===t&&!o&&(t=!1),t=function E4(i,t,e,n){const r=vv(i);let s=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=Zu(e=Hb(null,i,t,e,n),t.attrs,n),s=null);else{const o=t.directiveStylingLast;if(-1===o||i[o]!==r)if(e=Hb(r,i,t,e,n),null===s){let l=function A4(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==bo(n))return i[ls(n)]}(i,t,n);void 0!==l&&Array.isArray(l)&&(l=Hb(null,i,t,l[1],n),l=Zu(l,t.attrs,n),function T4(i,t,e,n){i[ls(e?t.classBindings:t.styleBindings)]=n}(i,t,n,l))}else s=function R4(i,t,e){let n;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)n=Zu(n,i[s].hostAttrs,e);return Zu(n,t.attrs,e)}(i,t,n)}return void 0!==s&&(n?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,n),function g4(i,t,e,n,r,s){let o=s?t.classBindings:t.styleBindings,a=ls(o),l=bo(o);i[n]=e;let d,c=!1;if(Array.isArray(e)){const u=e;d=u[1],(null===d||wc(u,d)>0)&&(c=!0)}else d=e;if(r)if(0!==l){const h=ls(i[a+1]);i[n+1]=Vp(h,a),0!==h&&(i[h+1]=rb(i[h+1],n)),i[a+1]=function AG(i,t){return 131071&i|t<<17}(i[a+1],n)}else i[n+1]=Vp(a,0),0!==a&&(i[a+1]=rb(i[a+1],n)),a=n;else i[n+1]=Vp(l,0),0===a?a=n:i[l+1]=rb(i[l+1],n),l=n;c&&(i[n+1]=ib(i[n+1])),dT(i,d,n,!0),dT(i,d,n,!1),function _4(i,t,e,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&wc(s,t)>=0&&(e[n+1]=sb(e[n+1]))}(t,d,i,n,s),o=Vp(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,n)}}function Hb(i,t,e,n,r){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],n=Zu(n,s.hostAttrs,r),s!==i);)a++;return null!==i&&(e.directiveStylingLast=a),n}function Zu(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),pr(i,o,!!e||t[++s]))}return void 0===i?null:i}function bT(i,t,e,n,r,s,o,a){if(!(3&t.type))return;const l=i.data,c=l[a+1];Kp(function HE(i){return 1==(1&i)}(c)?xT(l,t,e,r,bo(c),o):void 0)||(Kp(s)||function VE(i){return 2==(2&i)}(c)&&(s=xT(l,null,e,r,a,o)),function gG(i,t,e,n,r){const s=Ln(i);if(t)r?s?i.addClass(e,n):e.classList.add(n):s?i.removeClass(e,n):e.classList.remove(n);else{let o=-1===n.indexOf("-")?void 0:_r.DashCase;if(null==r)s?i.removeStyle(e,n,o):e.style.removeProperty(n);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=_r.Important),s?i.setStyle(e,n,r,o):e.style.setProperty(n,r,a?"important":"")}}}(n,o,pp(Ki(),e),r,s))}function xT(i,t,e,n,r,s){const o=null===t;let a;for(;r>0;){const l=i[r],c=Array.isArray(l),d=c?l[1]:l,u=null===d;let h=e[r+1];h===Mt&&(h=u?mn:void 0);let f=u?Rv(h,n):d===n?h:void 0;if(c&&!Kp(f)&&(f=Rv(l,n)),Kp(f)&&(a=f,o))return a;const p=i[r+1];r=o?ls(p):bo(p)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=Rv(l,n))}return a}function Kp(i){return void 0!==i}function wT(i,t){return 0!=(i.flags&(t?16:32))}function et(i,t=""){const e=ce(),n=qt(),r=i+20,s=n.firstCreatePass?Ac(n,r,1,t,null):n.data[r],o=e[r]=function Kv(i,t){return Ln(i)?i.createText(t):i.createTextNode(t)}(e[11],t);Np(n,e,o,s),Os(s,!1)}function Ai(i){return Br("",i,""),Ai}function Br(i,t,e){const n=ce(),r=Fc(n,i,t,e);return r!==Mt&&xo(n,Ki(),r),Br}function kT(i,t,e){!function us(i,t,e,n){const r=qt(),s=yo(2);r.firstUpdatePass&&yT(r,null,s,n);const o=ce();if(e!==Mt&&Vi(o,s,e)){const a=r.data[Ki()];if(wT(a,n)&&!_T(r,s)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=Jy(l,e||"")),Lb(r,a,o,e,n)}else!function I4(i,t,e,n,r,s,o,a){r===Mt&&(r=mn);let l=0,c=0,d=0<r.length?r[0]:null,u=0<s.length?s[0]:null;for(;null!==d||null!==u;){const h=l<r.length?r[l+1]:void 0,f=c<s.length?s[c+1]:void 0;let m,p=null;d===u?(l+=2,c+=2,h!==f&&(p=u,m=f)):null===u||null!==d&&d<u?(l+=2,p=d):(c+=2,p=u,m=f),null!==p&&bT(i,t,e,n,p,m,o,a),d=l<r.length?r[l]:null,u=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function k4(i,t,e){if(null==e||""===e)return mn;const n=[],r=gr(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,s)}}(pr,zs,Fc(ce(),i,t,e),!0)}function hs(i,t,e){const n=ce();return Vi(n,pc(),t)&&yr(qt(),Nn(),n,i,t,n[11],e,!0),hs}function Xp(i,t,e){const n=ce();if(Vi(n,pc(),t)){const s=qt(),o=Nn();yr(s,o,n,i,t,hA(vv(s.data),o,n),e,!0)}return Xp}const il=void 0;var Z4=["en",[["a","p"],["AM","PM"],il],[["AM","PM"],il,il],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],il,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],il,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",il,"{1} 'at' {0}",il],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Q4(i){const e=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Yc={};function zT(i){return i in Yc||(Yc[i]=un.ng&&un.ng.common&&un.ng.common.locales&&un.ng.common.locales[i]),Yc[i]}var Fe=(()=>((Fe=Fe||{})[Fe.LocaleId=0]="LocaleId",Fe[Fe.DayPeriodsFormat=1]="DayPeriodsFormat",Fe[Fe.DayPeriodsStandalone=2]="DayPeriodsStandalone",Fe[Fe.DaysFormat=3]="DaysFormat",Fe[Fe.DaysStandalone=4]="DaysStandalone",Fe[Fe.MonthsFormat=5]="MonthsFormat",Fe[Fe.MonthsStandalone=6]="MonthsStandalone",Fe[Fe.Eras=7]="Eras",Fe[Fe.FirstDayOfWeek=8]="FirstDayOfWeek",Fe[Fe.WeekendRange=9]="WeekendRange",Fe[Fe.DateFormat=10]="DateFormat",Fe[Fe.TimeFormat=11]="TimeFormat",Fe[Fe.DateTimeFormat=12]="DateTimeFormat",Fe[Fe.NumberSymbols=13]="NumberSymbols",Fe[Fe.NumberFormats=14]="NumberFormats",Fe[Fe.CurrencyCode=15]="CurrencyCode",Fe[Fe.CurrencySymbol=16]="CurrencySymbol",Fe[Fe.CurrencyName=17]="CurrencyName",Fe[Fe.Currencies=18]="Currencies",Fe[Fe.Directionality=19]="Directionality",Fe[Fe.PluralCase=20]="PluralCase",Fe[Fe.ExtraData=21]="ExtraData",Fe))();const Qp="en-US";let GT=Qp;function Gb(i,t,e,n,r){if(i=Rt(i),Array.isArray(i))for(let s=0;s<i.length;s++)Gb(i[s],t,e,n,r);else{const s=qt(),o=ce();let a=Ic(i)?i:Rt(i.provide),l=vA(i);const c=fi(),d=1048575&c.providerIndexes,u=c.directiveStart,h=c.providerIndexes>>20;if(Ic(i)||!i.multi){const f=new Eu(l,r,y),p=Wb(a,t,r?d:d+h,u);-1===p?(Ep(Tu(c,o),s,a),jb(s,i,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(f),o.push(f)):(e[p]=f,o[p]=f)}else{const f=Wb(a,t,d+h,u),p=Wb(a,t,d,d+h),m=f>=0&&e[f],g=p>=0&&e[p];if(r&&!g||!r&&!m){Ep(Tu(c,o),s,a);const _=function Qj(i,t,e,n,r){const s=new Eu(i,e,y);return s.multi=[],s.index=t,s.componentProviders=0,p1(s,r,n&&!e),s}(r?Xj:Kj,e.length,r,n,l);!r&&g&&(e[p].providerFactory=_),jb(s,i,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(_),o.push(_)}else jb(s,i,f>-1?f:p,p1(e[r?p:f],l,!r&&n));!r&&n&&g&&e[p].componentProviders++}}}function jb(i,t,e,n){const r=Ic(t),s=function w5(i){return!!i.useClass}(t);if(r||s){const l=(s?Rt(t.useClass):t).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const d=c.indexOf(e);-1===d?c.push(e,[n,l]):c[d+1].push(n,l)}else c.push(e,l)}}}function p1(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function Wb(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function Kj(i,t,e,n){return $b(this.multi,[])}function Xj(i,t,e,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ru(e,e[1],this.providerFactory.index,n);s=a.slice(0,o),$b(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],$b(r,s);return s}function $b(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function Me(i,t=[]){return e=>{e.providersResolver=(n,r)=>function Yj(i,t,e){const n=qt();if(n.firstCreatePass){const r=os(i);Gb(e,n.data,n.blueprint,r,!0),Gb(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class m1{}class e8{resolveComponentFactory(t){throw function Jj(i){const t=Error(`No component factory found for ${sn(i)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=i,t}(t)}}let wo=(()=>{class i{}return i.NULL=new e8,i})();function t8(){return Xc(fi(),ce())}function Xc(i,t){return new de(Fr(i,t))}let de=(()=>{class i{constructor(e){this.nativeElement=e}}return i.__NG_ELEMENT_ID__=t8,i})();function n8(i){return i instanceof de?i.nativeElement:i}class ih{}let fs=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function r8(){const i=ce(),e=fr(fi().index,i);return function i8(i){return i[11]}(Ps(e)?e:i)}(),i})(),s8=(()=>{class i{}return i.\u0275prov=oe({token:i,providedIn:"root",factory:()=>null}),i})();class ca{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const o8=new ca("13.1.3"),qb={};function nm(i,t,e,n,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&n.push(ei(s)),ss(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&nm(l[1],l,c,n)}const o=e.type;if(8&o)nm(i,t,e.child,n);else if(32&o){const a=$v(e,t);let l;for(;l=a();)n.push(l)}else if(16&o){const a=AE(t,e);if(Array.isArray(a))n.push(...a);else{const l=ju(t[16]);nm(l[1],l,a,n,!0)}}e=r?e.projectionNext:e.next}return n}class rh{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return nm(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ss(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Qv(t,n),Tp(e,n))}this._attachedToViewContainer=!1}vE(this._lView[1],this._lView)}onDestroy(t){eA(this._lView[1],this._lView,null,t)}markForCheck(){bb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){wb(this._lView[1],this._lView,this.context)}checkNoChanges(){!function u5(i,t,e){gp(!0);try{wb(i,t,e)}finally{gp(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new $t(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function oG(i,t){Wu(i,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new $t(902,"");this._appRef=t}}class a8 extends rh{constructor(t){super(t),this._view=t}detectChanges(){cA(this._view)}checkNoChanges(){!function h5(i){gp(!0);try{cA(i)}finally{gp(!1)}}(this._view)}get context(){return null}}class _1 extends wo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Li(t);return new Yb(e,this.ngModule)}}function y1(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}const c8=new X("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>uE});class Yb extends m1{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function DG(i){return i.map(SG).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return y1(this.componentDef.inputs)}get outputs(){return y1(this.componentDef.outputs)}create(t,e,n,r){const s=(r=r||this.ngModule)?function d8(i,t){return{get:(e,n,r)=>{const s=i.get(e,qb,r);return s!==qb||n===qb?s:t.get(e,n,r)}}}(t,r.injector):t,o=s.get(ih,lD),a=s.get(s8,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=n?function JE(i,t,e){if(Ln(i))return i.selectRootElement(t,e===is.ShadowDom);let n="string"==typeof t?i.querySelector(t):t;return n.textContent="",n}(l,n,this.componentDef.encapsulation):Xv(o.createRenderer(null,this.componentDef),c,function l8(i){const t=i.toLowerCase();return"svg"===t?oD:"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),u=this.componentDef.onPush?576:528,h=function kA(i,t){return{components:[],scheduler:i||uE,clean:f5,playerHandler:t||null,flags:0}}(),f=zp(0,null,null,1,0,null,null,null,null,null),p=$u(null,f,h,u,null,null,o,l,a,s);let m,g;_p(p);try{const _=function TA(i,t,e,n,r,s){const o=e[1];e[20]=i;const l=Ac(o,20,2,"#host",null),c=l.mergedAttrs=t.hostAttrs;null!==c&&(jp(l,c,!0),null!==i&&(Mp(r,i,c),null!==l.classes&&nb(r,i,l.classes),null!==l.styles&&kE(r,i,l.styles)));const d=n.createRenderer(i,t),u=$u(e,QE(t),null,t.onPush?64:16,e[20],l,n,d,s||null,null);return o.firstCreatePass&&(Ep(Tu(l,e),o,t.type),sA(o,l),oA(l,e.length,1)),Gp(e,u),e[20]=u}(d,this.componentDef,p,o,l);if(d)if(n)Mp(l,d,["ng-version",o8.full]);else{const{attrs:v,classes:b}=function EG(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&t.push(s,i[++n]):8===r&&e.push(s);else{if(!as(r))break;r=s}n++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);v&&Mp(l,d,v),b&&b.length>0&&nb(l,d,b.join(" "))}if(g=fv(f,20),void 0!==e){const v=g.projection=[];for(let b=0;b<this.ngContentSelectors.length;b++){const x=e[b];v.push(null!=x?Array.from(x):null)}}m=function RA(i,t,e,n,r){const s=e[1],o=function YG(i,t,e){const n=fi();i.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),aA(i,n,t,Tc(i,t,1,null),e));const r=Ru(t,i,n.directiveStart,n);Bi(r,t);const s=Fr(n,t);return s&&Bi(s,t),r}(s,e,t);if(n.components.push(o),i[8]=o,r&&r.forEach(l=>l(o,t)),t.contentQueries){const l=fi();t.contentQueries(1,o,l.directiveStart)}const a=fi();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(ra(a.index),iA(e[1],a,0,a.directiveStart,a.directiveEnd,t),rA(t,o)),o}(_,this.componentDef,p,h,[P5]),qu(f,p,null)}finally{yp()}return new h8(this.componentType,m,Xc(g,p),p,g)}}class h8 extends class Zj{}{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new a8(r),this.componentType=t}get injector(){return new _c(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class Mo{}class v1{}const Qc=new Map;class w1 extends Mo{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new _1(this);const n=Ir(t);this._bootstrapComponents=Bs(n.bootstrap),this._r3Injector=yA(t,e,[{provide:Mo,useValue:this},{provide:wo,useValue:this.componentFactoryResolver}],sn(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=kn.THROW_IF_NOT_FOUND,n=bt.Default){return t===kn||t===Mo||t===Cb?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Kb extends v1{constructor(t){super(),this.moduleType=t,null!==Ir(t)&&function p8(i){const t=new Set;!function e(n){const r=Ir(n,!0),s=r.id;null!==s&&(function b1(i,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${i} - ${sn(t)} vs ${sn(t.name)}`)}(s,Qc.get(s),n),Qc.set(s,n));const o=Bs(r.imports);for(const a of o)t.has(a)||(t.add(a),e(a))}(i)}(t)}create(t){return new w1(this.moduleType,t)}}function M1(i,t,e,n,r){return function S1(i,t,e,n,r,s,o){const a=t+e;return function nl(i,t,e,n){const r=Vi(i,t,e);return Vi(i,t+1,n)||r}(i,a,r,s)?Hs(i,a+2,o?n.call(o,r,s):n(r,s)):oh(i,a+2)}(ce(),Yi(),i,t,e,n,r)}function oh(i,t){const e=i[t];return e===Mt?void 0:e}function C1(i,t,e,n,r,s){const o=t+e;return Vi(i,o,r)?Hs(i,o+1,s?n.call(s,r):n(r)):oh(i,o+1)}function Xb(i){return t=>{setTimeout(i,void 0,t)}}const ue=class A8 extends ge{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,o;let a=t,l=e||(()=>null),c=n;if(t&&"object"==typeof t){const u=t;a=null===(r=u.next)||void 0===r?void 0:r.bind(u),l=null===(s=u.error)||void 0===s?void 0:s.bind(u),c=null===(o=u.complete)||void 0===o?void 0:o.bind(u)}this.__isAsync&&(l=Xb(l),a&&(a=Xb(a)),c&&(c=Xb(c)));const d=super.subscribe({next:a,error:l,complete:c});return t instanceof yt&&t.add(d),d}};function T8(){return this._results[Pc()]()}class da{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Pc(),n=da.prototype;n[e]||(n[e]=T8)}get changes(){return this._changes||(this._changes=new ue)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Lr(t);(this._changesDetected=!function FU(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Vn=(()=>{class i{}return i.__NG_ELEMENT_ID__=I8,i})();const R8=Vn,k8=class extends R8{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=$u(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(n[19]=s.createEmbeddedView(e)),qu(e,n,t),new rh(n)}};function I8(){return im(fi(),ce())}function im(i,t){return 4&i.type?new k8(t,i,Xc(i,t)):null}let Cn=(()=>{class i{}return i.__NG_ELEMENT_ID__=P8,i})();function P8(){return P1(fi(),ce())}const O8=Cn,k1=class extends O8{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Xc(this._hostTNode,this._hostLView)}get injector(){return new _c(this._hostTNode,this._hostLView)}get parentInjector(){const t=Dp(this._hostTNode,this._hostLView);if(CD(t)){const e=gc(t,this._hostLView),n=mc(t);return new _c(e[1].data[n+8],e)}return new _c(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=I1(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,s){const o=t&&!function Iu(i){return"function"==typeof i}(t);let a;if(o)a=e;else{const u=e||{};a=u.index,n=u.injector,r=u.projectableNodes,s=u.ngModuleRef}const l=o?t:new Yb(Li(t)),c=n||this.parentInjector;if(!s&&null==l.ngModule&&c){const u=c.get(Mo,null);u&&(s=u)}const d=l.create(c,r,void 0,s);return this.insert(d.hostView,a),d}insert(t,e){const n=t._lView,r=n[1];if(function rU(i){return ss(i[3])}(n)){const d=this.indexOf(t);if(-1!==d)this.detach(d);else{const u=n[3],h=new k1(u,u[6],u[3]);h.detach(h.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function lG(i,t,e,n){const r=10+n,s=e.length;n>0&&(e[r-1][4]=t),n<s-10?(t[4]=e[r],OD(e,10+n,t)):(e.push(t),t[4]=null),t[3]=e;const o=t[17];null!==o&&e!==o&&function cG(i,t){const e=i[9];t[16]!==t[3][3][16]&&(i[2]=!0),null===e?i[9]=[t]:e.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(i),t[2]|=128}(r,n,o,s);const a=eb(s,o),l=n[11],c=Lp(l,o[7]);return null!==c&&function sG(i,t,e,n,r,s){n[0]=r,n[6]=t,Wu(i,n,e,1,r,s)}(r,o[6],l,n,c,a),t.attachToViewContainerRef(),OD(Qb(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=I1(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Qv(this._lContainer,e);n&&(Tp(Qb(this._lContainer),e),vE(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Qv(this._lContainer,e);return n&&null!=Tp(Qb(this._lContainer),e)?new rh(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function I1(i){return i[8]}function Qb(i){return i[8]||(i[8]=[])}function P1(i,t){let e;const n=t[i.index];if(ss(n))e=n;else{let r;if(8&i.type)r=ei(n);else{const s=t[11];r=s.createComment("");const o=Fr(i,t);tl(s,Lp(s,o),r,function fG(i,t){return Ln(i)?i.nextSibling(t):t.nextSibling}(s,o),!1)}t[i.index]=e=lA(n,t,r,i),Gp(t,e)}return new k1(e,i,t)}class Zb{constructor(t){this.queryList=t,this.matches=null}clone(){return new Zb(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jb{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new Jb(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==B1(t,e).matches&&this.queries[e].setDirty()}}class O1{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class ex{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new ex(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class tx{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new tx(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,N8(e,s)),this.matchTNodeWithReadOption(t,e,Ap(e,t,s,!1,!1))}else n===Vn?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ap(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===de||r===Cn||r===Vn&&4&e.type)this.addMatch(e.index,-2);else{const s=Ap(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function N8(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function V8(i,t,e,n){return-1===e?function B8(i,t){return 11&i.type?Xc(i,t):4&i.type?im(i,t):null}(t,i):-2===e?function H8(i,t,e){return e===de?Xc(t,i):e===Vn?im(t,i):e===Cn?P1(t,i):void 0}(i,t,n):Ru(i,i[1],e,t)}function F1(i,t,e,n){const r=t[19].queries[n];if(null===r.matches){const s=i.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:V8(t,s[c],o[l+1],e.metadata.read))}r.matches=a}return r.matches}function nx(i,t,e,n){const r=i.queries.getByIndex(e),s=r.matches;if(null!==s){const o=F1(i,t,r,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)n.push(o[a/2]);else{const c=s[a+1],d=t[-l];for(let u=10;u<d.length;u++){const h=d[u];h[17]===h[3]&&nx(h[1],h,c,n)}if(null!==d[9]){const u=d[9];for(let h=0;h<u.length;h++){const f=u[h];nx(f[1],f,c,n)}}}}}return n}function he(i){const t=ce(),e=qt(),n=mD();bv(n+1);const r=B1(e,n);if(i.dirty&&cD(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?nx(e,t,n,[]):F1(e,t,r,n);i.reset(s,n8),i.notifyOnChanges()}return!0}return!1}function ut(i,t,e){const n=qt();n.firstCreatePass&&(N1(n,new O1(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),L1(n,ce(),t)}function ht(i,t,e,n){const r=qt();if(r.firstCreatePass){const s=fi();N1(r,new O1(t,e,n),s.index),function z8(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}L1(r,ce(),e)}function fe(){return function U8(i,t){return i[19].queries[t].queryList}(ce(),mD())}function L1(i,t,e){const n=new da(4==(4&e));eA(i,t,n,n.destroy),null===t[19]&&(t[19]=new Jb),t[19].queries.push(new Zb(n))}function N1(i,t,e){null===i.queries&&(i.queries=new ex),i.queries.track(new tx(t,e))}function B1(i,t){return i.queries.getByIndex(t)}function V1(i,t){return im(i,t)}function om(...i){}const am=new X("Application Initializer");let Jc=(()=>{class i{constructor(e){this.appInits=e,this.resolve=om,this.reject=om,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Qu(s))e.push(s);else if(Nb(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return i.\u0275fac=function(e){return new(e||i)(G(am,8))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const ch=new X("AppId"),oW={provide:ch,useFactory:function sW(){return`${lx()}${lx()}${lx()}`},deps:[]};function lx(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const nR=new X("Platform Initializer"),xr=new X("Platform ID"),cx=new X("appBootstrapListener");let iR=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const Co=new X("LocaleId"),rR=new X("DefaultCurrencyCode");class aW{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let lm=(()=>{class i{compileModuleSync(e){return new Kb(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=Bs(Ir(e).declarations).reduce((o,a)=>{const l=Li(a);return l&&o.push(new Yb(l)),o},[]);return new aW(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const cW=(()=>Promise.resolve(0))();function dx(i){"undefined"==typeof Zone?cW.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Xe{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ue(!1),this.onMicrotaskEmpty=new ue(!1),this.onStable=new ue(!1),this.onError=new ue(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function dW(){let i=un.requestAnimationFrame,t=un.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&t){const e=i[Zone.__symbol__("OriginalDelegate")];e&&(i=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function fW(i){const t=()=>{!function hW(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(un,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,hx(i),i.isCheckStableRunning=!0,ux(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),hx(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,o,a)=>{try{return sR(i),e.invokeTask(r,s,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),oR(i)}},onInvoke:(e,n,r,s,o,a,l)=>{try{return sR(i),e.invoke(r,s,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&t(),oR(i)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,hx(i),ux(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xe.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Xe.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,uW,om,om);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const uW={};function ux(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function hx(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function sR(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function oR(i){i._nesting--,ux(i)}class pW{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ue,this.onMicrotaskEmpty=new ue,this.onStable=new ue,this.onError=new ue}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let fx=(()=>{class i{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xe.assertNotInAngularZone(),dx(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dx(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,n,r){return[]}}return i.\u0275fac=function(e){return new(e||i)(G(Xe))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})(),aR=(()=>{class i{constructor(){this._applications=new Map,px.addToWindow(this)}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return px.findTestabilityInTree(this,e,n)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();class mW{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let ps,px=new mW;const lR=new X("AllowMultipleToken");class cR{constructor(t,e){this.name=t,this.token=e}}function dR(i,t,e=[]){const n=`Platform: ${t}`,r=new X(n);return(s=[])=>{let o=uR();if(!o||o.injector.get(lR,!1))if(i)i(e.concat(s).concat({provide:r,useValue:!0}));else{const a=e.concat(s).concat({provide:r,useValue:!0},{provide:Sb,useValue:"platform"});!function vW(i){if(ps&&!ps.destroyed&&!ps.injector.get(lR,!1))throw new $t(400,"");ps=i.get(hR);const t=i.get(nR,null);t&&t.forEach(e=>e())}(kn.create({providers:a,name:n}))}return function bW(i){const t=uR();if(!t)throw new $t(401,"");return t}()}}function uR(){return ps&&!ps.destroyed?ps:null}let hR=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const a=function xW(i,t){let e;return e="noop"===i?new pW:("zone.js"===i?void 0:i)||new Xe({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(n?n.ngZone:void 0,{ngZoneEventCoalescing:n&&n.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:n&&n.ngZoneRunCoalescing||!1}),l=[{provide:Xe,useValue:a}];return a.run(()=>{const c=kn.create({providers:l,parent:this.injector,name:e.moduleType.name}),d=e.create(c),u=d.injector.get(vo,null);if(!u)throw new $t(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{u.handleError(f)}});d.onDestroy(()=>{mx(this._modules,d),h.unsubscribe()})}),function wW(i,t,e){try{const n=e();return Qu(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(u,a,()=>{const h=d.injector.get(Jc);return h.runInitializers(),h.donePromise.then(()=>(function ij(i){ur(i,"Expected localeId to be defined"),"string"==typeof i&&(GT=i.toLowerCase().replace(/_/g,"-"))}(d.injector.get(Co,Qp)||Qp),this._moduleDoBootstrap(d),d))})})}bootstrapModule(e,n=[]){const r=fR({},n);return function _W(i,t,e){const n=new Kb(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(ed);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new $t(403,"");e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $t(404,"");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(e){return new(e||i)(G(kn))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();function fR(i,t){return Array.isArray(t)?t.reduce(fR,i):Object.assign(Object.assign({},i),t)}let ed=(()=>{class i{constructor(e,n,r,s,o){this._zone=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new Xt(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Xt(c=>{let d;this._zone.runOutsideAngular(()=>{d=this._zone.onStable.subscribe(()=>{Xe.assertNotInAngularZone(),dx(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{Xe.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{d.unsubscribe(),u.unsubscribe()}});this.isStable=gn(a,l.pipe(WS()))}bootstrap(e,n){if(!this._initStatus.done)throw new $t(405,"");let r;r=e instanceof m1?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const s=function yW(i){return i.isBoundToModule}(r)?void 0:this._injector.get(Mo),a=r.create(kn.NULL,[],n||r.selector,s),l=a.location.nativeElement,c=a.injector.get(fx,null),d=c&&a.injector.get(aR);return c&&d&&d.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),mx(this.components,a),d&&d.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new $t(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;mx(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(cx,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(e){return new(e||i)(G(Xe),G(kn),G(vo),G(wo),G(Jc))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();function mx(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}let mR=!0,Et=(()=>{class i{}return i.__NG_ELEMENT_ID__=SW,i})();function SW(i){return function DW(i,t,e){if(hp(i)&&!e){const n=fr(i.index,t);return new rh(n,n)}return 47&i.type?new rh(t[16],t):null}(fi(),ce(),16==(16&i))}class wR{constructor(){}supports(t){return Ku(t)}create(t){return new IW(t)}}const kW=(i,t)=>t;class IW{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||kW}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const o=!n||e&&e.currentIndex<CR(n,r,s)?e:n,a=CR(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,d=l-r;if(c!=d){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;d<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=d-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ku(t))throw new $t(900,"");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),n=!0),e=e._next}else r=0,function G5(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[Pc()]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,a=>{o=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new PW(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new MR),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new MR),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class PW{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class OW{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class MR{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new OW,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function CR(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}class SR{constructor(){}supports(t){return t instanceof Map||kb(t)}create(){return new FW}}class FW{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||kb(t)))throw new $t(900,"")}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new LW(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class LW{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function DR(){return new or([new wR])}let or=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||DR()),deps:[[i,new mr,new mi]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new $t(901,"")}}return i.\u0275prov=oe({token:i,providedIn:"root",factory:DR}),i})();function ER(){return new ua([new SR])}let ua=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||ER()),deps:[[i,new mr,new mi]]}}find(e){const n=this.factories.find(s=>s.supports(e));if(n)return n;throw new $t(901,"")}}return i.\u0275prov=oe({token:i,providedIn:"root",factory:ER}),i})();const NW=[new SR],VW=new or([new wR]),HW=new ua(NW),UW=dR(null,"core",[{provide:xr,useValue:"unknown"},{provide:hR,deps:[kn]},{provide:aR,deps:[]},{provide:iR,deps:[]}]),$W=[{provide:ed,useClass:ed,deps:[Xe,kn,vo,wo,Jc]},{provide:c8,deps:[Xe],useFactory:function qW(i){let t=[];return i.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Jc,useClass:Jc,deps:[[new mi,am]]},{provide:lm,useClass:lm,deps:[]},oW,{provide:or,useFactory:function zW(){return VW},deps:[]},{provide:ua,useFactory:function GW(){return HW},deps:[]},{provide:Co,useFactory:function jW(i){return i||function WW(){return"undefined"!=typeof $localize&&$localize.locale||Qp}()},deps:[[new Nu(Co),new mi,new mr]]},{provide:rR,useValue:"USD"}];let YW=(()=>{class i{constructor(e){}}return i.\u0275fac=function(e){return new(e||i)(G(ed))},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:$W}),i})(),dm=null;function Gs(){return dm}const nt=new X("DocumentToken");let sl=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:function(){return function ZW(){return G(AR)}()},providedIn:"platform"}),i})();const JW=new X("Location Initialized");let AR=(()=>{class i extends sl{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gs().getBaseHref(this._doc)}onPopState(e){const n=Gs().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Gs().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){TR()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){TR()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(G(nt))},i.\u0275prov=oe({token:i,factory:function(){return function e6(){return new AR(G(nt))}()},providedIn:"platform"}),i})();function TR(){return!!window.history.pushState}function bx(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function RR(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function So(i){return i&&"?"!==i[0]?"?"+i:i}let td=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:function(){return function t6(i){const t=G(nt).location;return new kR(G(sl),t&&t.origin||"")}()},providedIn:"root"}),i})();const xx=new X("appBaseHref");let kR=(()=>{class i extends td{constructor(e,n){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return bx(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+So(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const o=this.prepareExternalUrl(r+So(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){const o=this.prepareExternalUrl(r+So(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformLocation).historyGo)||void 0===r||r.call(n,e)}}return i.\u0275fac=function(e){return new(e||i)(G(sl),G(xx,8))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})(),n6=(()=>{class i extends td{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=bx(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let o=this.prepareExternalUrl(r+So(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){let o=this.prepareExternalUrl(r+So(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformLocation).historyGo)||void 0===r||r.call(n,e)}}return i.\u0275fac=function(e){return new(e||i)(G(sl),G(xx,8))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})(),um=(()=>{class i{constructor(e,n){this._subject=new ue,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=RR(IR(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+So(n))}normalize(e){return i.stripTrailingSlash(function s6(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,IR(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._platformStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+So(n)),r)}replaceState(e,n="",r=null){this._platformStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+So(n)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformStrategy).historyGo)||void 0===r||r.call(n,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}))}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return i.normalizeQueryParams=So,i.joinWithSlash=bx,i.stripTrailingSlash=RR,i.\u0275fac=function(e){return new(e||i)(G(td),G(sl))},i.\u0275prov=oe({token:i,factory:function(){return function r6(){return new um(G(td),G(sl))}()},providedIn:"root"}),i})();function IR(i){return i.replace(/\/index.html$/,"")}var ni=(()=>((ni=ni||{})[ni.Zero=0]="Zero",ni[ni.One=1]="One",ni[ni.Two=2]="Two",ni[ni.Few=3]="Few",ni[ni.Many=4]="Many",ni[ni.Other=5]="Other",ni))();const h6=function UT(i){return function Qi(i){const t=function J4(i){return i.toLowerCase().replace(/_/g,"-")}(i);let e=zT(t);if(e)return e;const n=t.split("-")[0];if(e=zT(n),e)return e;if("en"===n)return Z4;throw new Error(`Missing locale data for the locale "${i}".`)}(i)[Fe.PluralCase]};class xm{}let U6=(()=>{class i extends xm{constructor(e){super(),this.locale=e}getPluralCategory(e,n){switch(h6(n||this.locale)(e)){case ni.Zero:return"zero";case ni.One:return"one";case ni.Two:return"two";case ni.Few:return"few";case ni.Many:return"many";default:return"other"}}}return i.\u0275fac=function(e){return new(e||i)(G(Co))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();function UR(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}let ol=(()=>{class i{constructor(e,n,r,s){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Ku(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${sn(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(e){return new(e||i)(y(or),y(ua),y(de),y(fs))},i.\u0275dir=H({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),i})();class G6{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let al=(()=>{class i{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new G6(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const a=n.get(s);n.move(a,o),zR(a,r)}});for(let r=0,s=n.length;r<s;r++){const a=n.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{zR(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(y(Cn),y(Vn),y(or))},i.\u0275dir=H({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();function zR(i,t){i.context.$implicit=t.item}let Ur=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new j6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){GR("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){GR("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(y(Cn),y(Vn))},i.\u0275dir=H({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class j6{constructor(){this.$implicit=null,this.ngIf=null}}function GR(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${sn(t)}'.`)}class Rx{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let ll=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(e)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),i})(),hh=(()=>{class i{constructor(e,n,r){this.ngSwitch=r,r._addCase(),this._view=new Rx(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(e){return new(e||i)(y(Cn),y(Vn),y(ll,9))},i.\u0275dir=H({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),i})(),jR=(()=>{class i{constructor(e,n,r){r._addDefault(new Rx(e,n))}}return i.\u0275fac=function(e){return new(e||i)(y(Cn),y(Vn),y(ll,9))},i.\u0275dir=H({type:i,selectors:[["","ngSwitchDefault",""]]}),i})(),$R=(()=>{class i{transform(e){return JSON.stringify(e,null,2)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=rr({name:"json",type:i,pure:!1}),i})(),ri=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[{provide:xm,useClass:U6}]}),i})();const YR="browser";function cl(i){return i===YR}function nd(i){return"server"===i}let g$=(()=>{class i{}return i.\u0275prov=oe({token:i,providedIn:"root",factory:()=>new _$(G(nt),window)}),i})();class _${constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function y$(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=KR(this.window.history)||KR(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function KR(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class XR{}class Px extends class v$ extends class QW{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function XW(i){dm||(dm=i)}(new Px)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function b$(){return fh=fh||document.querySelector("base"),fh?fh.getAttribute("href"):null}();return null==e?null:function x$(i){Mm=Mm||document.createElement("a"),Mm.setAttribute("href",i);const t=Mm.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){fh=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return UR(document.cookie,t)}}let Mm,fh=null;const QR=new X("TRANSITION_ID"),M$=[{provide:am,useFactory:function w$(i,t,e){return()=>{e.get(Jc).donePromise.then(()=>{const n=Gs(),r=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[QR,nt,kn],multi:!0}];class Ox{static init(){!function gW(i){px=i}(new Ox)}addToWindow(t){un.getAngularTestability=(n,r=!0)=>{const s=t.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},un.getAllAngularTestabilities=()=>t.getAllTestabilities(),un.getAllAngularRootElements=()=>t.getAllRootElements(),un.frameworkStabilizers||(un.frameworkStabilizers=[]),un.frameworkStabilizers.push(n=>{const r=un.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&n(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Gs().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let C$=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const Cm=new X("EventManagerPlugins");let Sm=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(G(Cm),G(Xe))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();class ZR{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Gs().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let JR=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})(),ph=(()=>{class i extends JR{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(ek),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(ek))}}return i.\u0275fac=function(e){return new(e||i)(G(nt))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();function ek(i){Gs().remove(i)}const Fx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Lx=/%COMP%/g;function Dm(i,t,e){for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?Dm(i,r,e):(r=r.replace(Lx,i),e.push(r))}return e}function ik(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let Em=(()=>{class i{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Nx(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case is.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new R$(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case is.ShadowDom:return new k$(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=Dm(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(G(Sm),G(ph),G(ch))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();class Nx{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Fx[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=Fx[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Fx[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(_r.DashCase|_r.Important)?t.style.setProperty(e,n,r&_r.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&_r.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ik(n)):this.eventManager.addEventListener(t,e,ik(n))}}class R$ extends Nx{constructor(t,e,n,r){super(t),this.component=n;const s=Dm(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr=function E$(i){return"_ngcontent-%COMP%".replace(Lx,i)}(r+"-"+n.id),this.hostAttr=function A$(i){return"_nghost-%COMP%".replace(Lx,i)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class k$ extends Nx{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Dm(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let I$=(()=>{class i extends ZR{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return i.\u0275fac=function(e){return new(e||i)(G(nt))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const sk=["alt","control","meta","shift"],O$={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ok={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},F$={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let L$=(()=>{class i extends ZR{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gs().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="";if(sk.forEach(l=>{const c=n.indexOf(l);c>-1&&(n.splice(c,1),o+=l+".")}),o+=s,0!=n.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(e){let n="",r=function N$(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&ok.hasOwnProperty(t)&&(t=ok[t]))}return O$[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),sk.forEach(s=>{s!=r&&F$[s](e)&&(n+=s+".")}),n+=r,n}static eventCallback(e,n,r){return s=>{i.getEventFullKey(s)===e&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(G(nt))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const U$=dR(UW,"browser",[{provide:xr,useValue:YR},{provide:nR,useValue:function B$(){Px.makeCurrent(),Ox.init()},multi:!0},{provide:nt,useFactory:function H$(){return function eU(i){uv=i}(document),document},deps:[]}]),z$=[{provide:Sb,useValue:"root"},{provide:vo,useFactory:function V$(){return new vo},deps:[]},{provide:Cm,useClass:I$,multi:!0,deps:[nt,Xe,xr]},{provide:Cm,useClass:L$,multi:!0,deps:[nt]},{provide:Em,useClass:Em,deps:[Sm,ph,ch]},{provide:ih,useExisting:Em},{provide:JR,useExisting:ph},{provide:ph,useClass:ph,deps:[nt]},{provide:fx,useClass:fx,deps:[Xe]},{provide:Sm,useClass:Sm,deps:[Cm,Xe]},{provide:XR,useClass:C$,deps:[]}];let ak=(()=>{class i{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:i,providers:[{provide:ch,useValue:e.appId},{provide:QR,useExisting:ch},M$]}}}return i.\u0275fac=function(e){return new(e||i)(G(i,12))},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:z$,imports:[ri,YW]}),i})();"undefined"!=typeof window&&window;let Am=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:function(e){let n=null;return n=e?new(e||i):G(dk),n},providedIn:"root"}),i})(),dk=(()=>{class i extends Am{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case Zt.NONE:return n;case Zt.HTML:return Ls(n,"HTML")?gr(n):iE(this._doc,String(n)).toString();case Zt.STYLE:return Ls(n,"Style")?gr(n):n;case Zt.SCRIPT:if(Ls(n,"Script"))return gr(n);throw new Error("unsafe value used in a script context");case Zt.URL:return KD(n),Ls(n,"URL")?gr(n):Vu(String(n));case Zt.RESOURCE_URL:if(Ls(n,"ResourceURL"))return gr(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function hz(i){return new az(i)}(e)}bypassSecurityTrustStyle(e){return function fz(i){return new lz(i)}(e)}bypassSecurityTrustScript(e){return function pz(i){return new cz(i)}(e)}bypassSecurityTrustUrl(e){return function mz(i){return new dz(i)}(e)}bypassSecurityTrustResourceUrl(e){return function gz(i){return new uz(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)(G(nt))},i.\u0275prov=oe({token:i,factory:function(e){let n=null;return n=e?new e:function Z$(i){return new dk(i.get(nt))}(G(kn)),n},providedIn:"root"}),i})();function Qe(...i){return hi(i,xu(i))}class Ji extends ge{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}const{isArray:J$}=Array,{getPrototypeOf:eq,prototype:tq,keys:nq}=Object;function uk(i){if(1===i.length){const t=i[0];if(J$(t))return{args:t,keys:null};if(function iq(i){return i&&"object"==typeof i&&eq(i)===tq}(t)){const e=nq(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}const{isArray:rq}=Array;function Vx(i){return Dt(t=>function sq(i,t){return rq(t)?i(...t):i(t)}(i,t))}function hk(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function fk(i,t,e){i?po(e,i,t):t()}const Tm=vu(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function Rm(...i){return function lq(){return bu(1)}()(hi(i,xu(i)))}function km(i){return new Xt(t=>{cr(i()).subscribe(t)})}function pk(){return Rn((i,t)=>{let e=null;i._refCount++;const n=new wn(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class cq extends Xt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,ES(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new yt;const e=this.getSubject();t.add(this.source.subscribe(new wn(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=yt.EMPTY)}return t}refCount(){return pk()(this)}}function zr(i,t){return Rn((e,n)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&n.complete();e.subscribe(new wn(n,l=>{null==r||r.unsubscribe();let c=0;const d=s++;cr(i(l,d)).subscribe(r=new wn(n,u=>n.next(t?t(l,u,d,c++):u),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function yi(...i){const t=xu(i);return Rn((e,n)=>{(t?Rm(i,e,t):Rm(i,e)).subscribe(n)})}function dq(i,t,e,n,r){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(new wn(o,d=>{const u=c++;l=a?i(l,d,u):(a=!0,d),n&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function mk(i,t){return Rn(dq(i,t,arguments.length>=2,!0))}function an(i,t){return Rn((e,n)=>{let r=0;e.subscribe(new wn(n,s=>i.call(t,s,r++)&&n.next(s)))})}function Eo(i){return Rn((t,e)=>{let s,n=null,r=!1;n=t.subscribe(new wn(e,void 0,void 0,o=>{s=cr(i(o,Eo(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function id(i,t){return Gt(t)?Jn(i,t,1):Jn(i,1)}function Hx(i){return i<=0?()=>Is:Rn((t,e)=>{let n=[];t.subscribe(new wn(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function gk(i=uq){return Rn((t,e)=>{let n=!1;t.subscribe(new wn(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function uq(){return new Tm}function _k(i){return Rn((t,e)=>{let n=!1;t.subscribe(new wn(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function rd(i,t){const e=arguments.length>=2;return n=>n.pipe(i?an((r,s)=>i(r,s,n)):Jo,fn(1),e?_k(t):gk(()=>new Tm))}function vi(i,t,e){const n=Gt(i)||t||e?{next:i,error:t,complete:e}:i;return n?Rn((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let a=!0;r.subscribe(new wn(s,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),s.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),s.complete()},l=>{var c;a=!1,null===(c=n.error)||void 0===c||c.call(n,l),s.error(l)},()=>{var l,c;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):Jo}function yk(i){return Rn((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}class Ao{constructor(t,e){this.id=t,this.url=e}}class Ux extends Ao{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class mh extends Ao{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vk extends Ao{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fq extends Ao{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pq extends Ao{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mq extends Ao{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gq extends Ao{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _q extends Ao{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yq extends Ao{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bk{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xk{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vq{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bq{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xq{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wq{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wk{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Nt="primary";class Mq{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function sd(i){return new Mq(i)}const Mk="ngNavigationCancelingError";function zx(i){const t=Error("NavigationCancelingError: "+i);return t[Mk]=!0,t}function Sq(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],a=i[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function js(i,t){const e=i?Object.keys(i):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!Ck(i[r],t[r]))return!1;return!0}function Ck(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}return i===t}function Sk(i){return Array.prototype.concat.apply([],i)}function Dk(i){return i.length>0?i[i.length-1]:null}function Oi(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function Ws(i){return Nb(i)?i:Qu(i)?hi(Promise.resolve(i)):Qe(i)}const Aq={exact:function Tk(i,t,e){if(!ul(i.segments,t.segments)||!Im(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!Tk(i.children[n],t.children[n],e))return!1;return!0},subset:Rk},Ek={exact:function Tq(i,t){return js(i,t)},subset:function Rq(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>Ck(i[e],t[e]))},ignored:()=>!0};function Ak(i,t,e){return Aq[e.paths](i.root,t.root,e.matrixParams)&&Ek[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function Rk(i,t,e){return kk(i,t,t.segments,e)}function kk(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!ul(r,e)||t.hasChildren()||!Im(r,e,n))}if(i.segments.length===e.length){if(!ul(i.segments,e)||!Im(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!Rk(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(ul(i.segments,r)&&Im(i.segments,r,n)&&i.children[Nt])&&kk(i.children[Nt],t,s,n)}}function Im(i,t,e){return t.every((n,r)=>Ek[e](i[r].parameters,n.parameters))}class dl{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sd(this.queryParams)),this._queryParamMap}toString(){return Pq.serialize(this)}}class Ut{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Oi(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pm(this)}}class gh{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=sd(this.parameters)),this._parameterMap}toString(){return Lk(this)}}function ul(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}class Ik{}class Pk{parse(t){const e=new zq(t);return new dl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${_h(t.root,!0)}`,n=function Lq(i){const t=Object.keys(i).map(e=>{const n=i[e];return Array.isArray(n)?n.map(r=>`${Om(e)}=${Om(r)}`).join("&"):`${Om(e)}=${Om(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function Oq(i){return encodeURI(i)}(t.fragment)}`:""}`}}const Pq=new Pk;function Pm(i){return i.segments.map(t=>Lk(t)).join("/")}function _h(i,t){if(!i.hasChildren())return Pm(i);if(t){const e=i.children[Nt]?_h(i.children[Nt],!1):"",n=[];return Oi(i.children,(r,s)=>{s!==Nt&&n.push(`${s}:${_h(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function Iq(i,t){let e=[];return Oi(i.children,(n,r)=>{r===Nt&&(e=e.concat(t(n,r)))}),Oi(i.children,(n,r)=>{r!==Nt&&(e=e.concat(t(n,r)))}),e}(i,(n,r)=>r===Nt?[_h(i.children[Nt],!1)]:[`${r}:${_h(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Nt]?`${Pm(i)}/${e[0]}`:`${Pm(i)}/(${e.join("//")})`}}function Ok(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Om(i){return Ok(i).replace(/%3B/gi,";")}function Gx(i){return Ok(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fm(i){return decodeURIComponent(i)}function Fk(i){return Fm(i.replace(/\+/g,"%20"))}function Lk(i){return`${Gx(i.path)}${function Fq(i){return Object.keys(i).map(t=>`;${Gx(t)}=${Gx(i[t])}`).join("")}(i.parameters)}`}const Nq=/^[^\/()?;=#]+/;function Lm(i){const t=i.match(Nq);return t?t[0]:""}const Bq=/^[^=?&#]+/,Hq=/^[^&#]+/;class zq{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Nt]=new Ut(t,e)),n}parseSegment(){const t=Lm(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new gh(Fm(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Lm(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=Lm(this.remaining);r&&(n=r,this.capture(n))}t[Fm(e)]=Fm(n)}parseQueryParam(t){const e=function Vq(i){const t=i.match(Bq);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function Uq(i){const t=i.match(Hq);return t?t[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=Fk(e),s=Fk(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Lm(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;n.indexOf(":")>-1?(s=n.substr(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Nt);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[Nt]:new Ut([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Nk{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=jx(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=jx(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Wx(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Wx(t,this._root).map(e=>e.value)}}function jx(i,t){if(i===t.value)return t;for(const e of t.children){const n=jx(i,e);if(n)return n}return null}function Wx(i,t){if(i===t.value)return[t];for(const e of t.children){const n=Wx(i,e);if(n.length)return n.unshift(t),n}return[]}class To{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function od(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class Bk extends Nk{constructor(t,e){super(t),this.snapshot=e,$x(this,t)}toString(){return this.snapshot.toString()}}function Vk(i,t){const e=function Gq(i,t){const o=new Nm([],{},{},"",{},Nt,t,null,i.root,-1,{});return new Uk("",new To(o,[]))}(i,t),n=new Ji([new gh("",{})]),r=new Ji({}),s=new Ji({}),o=new Ji({}),a=new Ji(""),l=new fa(n,r,o,a,s,Nt,t,e.root);return l.snapshot=e.root,new Bk(new To(l,[]),e)}class fa{constructor(t,e,n,r,s,o,a,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Dt(t=>sd(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Dt(t=>sd(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Hk(i,t="emptyOnly"){const e=i.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const r=e[n],s=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function jq(i){return i.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(n))}class Nm{constructor(t,e,n,r,s,o,a,l,c,d,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=d,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Uk extends Nk{constructor(t,e){super(e),this.url=t,$x(this,e)}toString(){return zk(this._root)}}function $x(i,t){t.value._routerState=i,t.children.forEach(e=>$x(i,e))}function zk(i){const t=i.children.length>0?` { ${i.children.map(zk).join(", ")} } `:"";return`${i.value}${t}`}function qx(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,js(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),js(t.params,e.params)||i.params.next(e.params),function Dq(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!js(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),js(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function Yx(i,t){const e=js(i.params,t.params)&&function kq(i,t){return ul(i,t)&&i.every((e,n)=>js(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||Yx(i.parent,t.parent))}function yh(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function $q(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return yh(i,n,r);return yh(i,n)})}(i,t,e);return new To(n,r)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>yh(i,a)),o}}const n=function qq(i){return new fa(new Ji(i.url),new Ji(i.params),new Ji(i.queryParams),new Ji(i.fragment),new Ji(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(s=>yh(i,s));return new To(n,r)}}function Bm(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function vh(i){return"object"==typeof i&&null!=i&&i.outlets}function Kx(i,t,e,n,r){let s={};return n&&Oi(n,(o,a)=>{s[a]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new dl(e.root===i?t:Gk(e.root,i,t),s,r)}function Gk(i,t,e){const n={};return Oi(i.children,(r,s)=>{n[s]=r===t?e:Gk(r,t,e)}),new Ut(i.segments,n)}class jk{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Bm(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(vh);if(r&&r!==Dk(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xx{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Wk(i,t,e){if(i||(i=new Ut([],{})),0===i.segments.length&&i.hasChildren())return Vm(i,t,e);const n=function Jq(i,t,e){let n=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;const o=i.segments[r],a=e[n];if(vh(a))break;const l=`${a}`,c=n<e.length-1?e[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!qk(l,c,o))return s;n+=2}else{if(!qk(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new Ut(i.segments.slice(0,n.pathIndex),{});return s.children[Nt]=new Ut(i.segments.slice(n.pathIndex),i.children),Vm(s,0,r)}return n.match&&0===r.length?new Ut(i.segments,{}):n.match&&!i.hasChildren()?Qx(i,t,e):n.match?Vm(i,0,r):Qx(i,t,e)}function Vm(i,t,e){if(0===e.length)return new Ut(i.segments,{});{const n=function Zq(i){return vh(i[0])?i[0].outlets:{[Nt]:i}}(e),r={};return Oi(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=Wk(i.children[o],t,s))}),Oi(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new Ut(i.segments,r)}}function Qx(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(vh(s)){const l=e7(s.outlets);return new Ut(n,l)}if(0===r&&Bm(e[0])){n.push(new gh(i.segments[t].path,$k(e[0]))),r++;continue}const o=vh(s)?s.outlets[Nt]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&Bm(a)?(n.push(new gh(o,$k(a))),r+=2):(n.push(new gh(o,{})),r++)}return new Ut(n,{})}function e7(i){const t={};return Oi(i,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=Qx(new Ut([],{}),0,e))}),t}function $k(i){const t={};return Oi(i,(e,n)=>t[n]=`${e}`),t}function qk(i,t,e){return i==e.path&&js(t,e.parameters)}class n7{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),qx(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=od(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Oi(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=od(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=od(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=od(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new wq(s.value.snapshot))}),t.children.length&&this.forwardEvent(new bq(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(qx(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),qx(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=function r7(i){for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}}class Zx{constructor(t,e){this.routes=t,this.module=e}}function pa(i){return"function"==typeof i}function hl(i){return i instanceof dl}const bh=Symbol("INITIAL_VALUE");function xh(){return zr(i=>function oq(...i){const t=xu(i),e=US(i),{args:n,keys:r}=uk(i);if(0===n.length)return hi([],t);const s=new Xt(function aq(i,t,e=Jo){return n=>{fk(t,()=>{const{length:r}=i,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)fk(t,()=>{const c=hi(i[l],t);let d=!1;c.subscribe(new wn(n,u=>{s[l]=u,d||(d=!0,a--),a||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,t,r?o=>hk(r,o):Jo));return e?s.pipe(Vx(e)):s}(i.map(t=>t.pipe(fn(1),yi(bh)))).pipe(mk((t,e)=>{let n=!1;return e.reduce((r,s,o)=>r!==bh?r:(s===bh&&(n=!0),n||!1!==s&&o!==e.length-1&&!hl(s)?r:s),t)},bh),an(t=>t!==bh),Dt(t=>hl(t)?t:!0===t),fn(1)))}class d7{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new wh,this.attachRef=null}}class wh{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new d7,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let Jx=(()=>{class i{constructor(e,n,r,s,o){this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new ue,this.deactivateEvents=new ue,this.attachEvents=new ue,this.detachEvents=new ue,this.name=s||Nt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const o=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new u7(e,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)(y(wh),y(Cn),y(wo),ti("name"),y(Et))},i.\u0275dir=H({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class u7{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===fa?this.route:t===wh?this.childContexts:this.parent.get(t,e)}}let Yk=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=We({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&Ne(0,"router-outlet")},directives:[Jx],encapsulation:2}),i})();function Kk(i,t=""){for(let e=0;e<i.length;e++){const n=i[e];h7(n,f7(t,n))}}function h7(i,t){i.children&&Kk(i.children,t)}function f7(i,t){return t?i||t.path?i&&!t.path?`${i}/`:!i&&t.path?t.path:`${i}/${t.path}`:"":i}function e0(i){const t=i.children&&i.children.map(e0),e=t?Object.assign(Object.assign({},i),{children:t}):Object.assign({},i);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Nt&&(e.component=Yk),e}function Gr(i){return i.outlet||Nt}function Xk(i,t){const e=i.filter(n=>Gr(n)===t);return e.push(...i.filter(n=>Gr(n)!==t)),e}const Qk={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Hm(i,t,e){var n;if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?Object.assign({},Qk):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(t.matcher||Sq)(e,i,t);if(!s)return Object.assign({},Qk);const o={};Oi(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:a,positionalParamSegments:null!==(n=s.posParams)&&void 0!==n?n:{}}}function Um(i,t,e,n,r="corrected"){if(e.length>0&&function g7(i,t,e){return e.some(n=>zm(i,t,n)&&Gr(n)!==Nt)}(i,e,n)){const o=new Ut(t,function m7(i,t,e,n){const r={};r[Nt]=n,n._sourceSegment=i,n._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Gr(s)!==Nt){const o=new Ut([],{});o._sourceSegment=i,o._segmentIndexShift=t.length,r[Gr(s)]=o}return r}(i,t,n,new Ut(e,i.children)));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function _7(i,t,e){return e.some(n=>zm(i,t,n))}(i,e,n)){const o=new Ut(i.segments,function p7(i,t,e,n,r,s){const o={};for(const a of n)if(zm(i,e,a)&&!r[Gr(a)]){const l=new Ut([],{});l._sourceSegment=i,l._segmentIndexShift="legacy"===s?i.segments.length:t.length,o[Gr(a)]=l}return Object.assign(Object.assign({},r),o)}(i,t,e,n,i.children,r));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const s=new Ut(i.segments,i.children);return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function zm(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function Zk(i,t,e,n){return!!(Gr(i)===n||n!==Nt&&zm(t,e,i))&&("**"===i.path||Hm(t,i,e).matched)}function Jk(i,t,e){return 0===t.length&&!i.children[e]}class Mh{constructor(t){this.segmentGroup=t||null}}class eI{constructor(t){this.urlTree=t}}function Gm(i){return new Xt(t=>t.error(new Mh(i)))}function tI(i){return new Xt(t=>t.error(new eI(i)))}function y7(i){return new Xt(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class x7{constructor(t,e,n,r,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(Mo)}apply(){const t=Um(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ut(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Nt).pipe(Dt(s=>this.createUrlTree(t0(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Eo(s=>{if(s instanceof eI)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Mh?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Nt).pipe(Dt(r=>this.createUrlTree(t0(r),t.queryParams,t.fragment))).pipe(Eo(r=>{throw r instanceof Mh?this.noMatchError(r):r}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Ut([],{[Nt]:t}):t;return new dl(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Dt(s=>new Ut([],s))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return hi(r).pipe(id(s=>{const o=n.children[s],a=Xk(e,s);return this.expandSegmentGroup(t,a,o,s).pipe(Dt(l=>({segment:l,outlet:s})))}),mk((s,o)=>(s[o.outlet]=o.segment,s),{}),function hq(i,t){const e=arguments.length>=2;return n=>n.pipe(i?an((r,s)=>i(r,s,n)):Jo,Hx(1),e?_k(t):gk(()=>new Tm))}())}expandSegment(t,e,n,r,s,o){return hi(n).pipe(id(a=>this.expandSegmentAgainstRoute(t,e,n,a,r,s,o).pipe(Eo(c=>{if(c instanceof Mh)return Qe(null);throw c}))),rd(a=>!!a),Eo((a,l)=>{if(a instanceof Tm||"EmptyError"===a.name){if(Jk(e,r,s))return Qe(new Ut([],{}));throw new Mh(e)}throw a}))}expandSegmentAgainstRoute(t,e,n,r,s,o,a){return Zk(r,e,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o):Gm(e):Gm(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?tI(s):this.lineralizeSegments(n,s).pipe(Jn(o=>{const a=new Ut(o,{});return this.expandSegment(t,a,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){const{matched:a,consumedSegments:l,lastChild:c,positionalParamSegments:d}=Hm(e,r,s);if(!a)return Gm(e);const u=this.applyRedirectCommands(l,r.redirectTo,d);return r.redirectTo.startsWith("/")?tI(u):this.lineralizeSegments(r,u).pipe(Jn(h=>this.expandSegment(t,e,n,h.concat(s.slice(c)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Qe(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Dt(h=>(n._loadedConfig=h,new Ut(r,{})))):Qe(new Ut(r,{}));const{matched:o,consumedSegments:a,lastChild:l}=Hm(e,n,r);if(!o)return Gm(e);const c=r.slice(l);return this.getChildConfig(t,n,r).pipe(Jn(u=>{const h=u.module,f=u.routes,{segmentGroup:p,slicedSegments:m}=Um(e,a,c,f),g=new Ut(p.segments,p.children);if(0===m.length&&g.hasChildren())return this.expandChildren(h,f,g).pipe(Dt(x=>new Ut(a,x)));if(0===f.length&&0===m.length)return Qe(new Ut(a,{}));const _=Gr(n)===s;return this.expandSegment(h,g,f,m,_?Nt:s,!0).pipe(Dt(b=>new Ut(a.concat(b.segments),b.children)))}))}getChildConfig(t,e,n){return e.children?Qe(new Zx(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Qe(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Jn(r=>r?this.configLoader.load(t.injector,e).pipe(Dt(s=>(e._loadedConfig=s,s))):function v7(i){return new Xt(t=>t.error(zx(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`)))}(e))):Qe(new Zx([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Qe(r.map(o=>{const a=t.get(o);let l;if(function o7(i){return i&&pa(i.canLoad)}(a))l=a.canLoad(e,n);else{if(!pa(a))throw new Error("Invalid CanLoad guard");l=a(e,n)}return Ws(l)})).pipe(xh(),vi(o=>{if(!hl(o))return;const a=zx(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),Dt(o=>!0===o)):Qe(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Qe(n);if(r.numberOfChildren>1||!r.children[Nt])return y7(t.redirectTo);r=r.children[Nt]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new dl(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Oi(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);n[s]=e[a]}else n[s]=r}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let o={};return Oi(e.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,n,r)}),new Ut(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function t0(i){const t={};for(const n of Object.keys(i.children)){const s=t0(i.children[n]);(s.segments.length>0||s.hasChildren())&&(t[n]=s)}return function w7(i){if(1===i.numberOfChildren&&i.children[Nt]){const t=i.children[Nt];return new Ut(i.segments.concat(t.segments),t.children)}return i}(new Ut(i.segments,t))}class nI{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class jm{constructor(t,e){this.component=t,this.route=e}}function C7(i,t,e){const n=i._root;return Ch(n,t?t._root:null,e,[n.value])}function Wm(i,t,e){const n=function D7(i){if(!i)return null;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(n?n.module.injector:e).get(i)}function Ch(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=od(t);return i.children.forEach(o=>{(function E7(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=t?t.value:null,a=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function A7(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!ul(i.url,t.url);case"pathParamsOrQueryParamsChange":return!ul(i.url,t.url)||!js(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yx(i,t)||!js(i.queryParams,t.queryParams);default:return!Yx(i,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new nI(n)):(s.data=o.data,s._resolvedData=o._resolvedData),Ch(i,t,s.component?a?a.children:null:e,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new jm(a.outlet.component,o))}else o&&Sh(t,a,r),r.canActivateChecks.push(new nI(n)),Ch(i,null,s.component?a?a.children:null:e,n,r)})(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),Oi(s,(o,a)=>Sh(o,e.getContext(a),r)),r}function Sh(i,t,e){const n=od(i),r=i.value;Oi(n,(s,o)=>{Sh(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new jm(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class N7{}function iI(i){return new Xt(t=>t.error(i))}class V7{constructor(t,e,n,r,s,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const t=Um(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Nt);if(null===e)return null;const n=new Nm([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Nt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new To(n,e),s=new Uk(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const e=t.value,n=Hk(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const s of Object.keys(e.children)){const o=e.children[s],a=Xk(t,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;n.push(...l)}const r=rI(n);return function H7(i){i.sort((t,e)=>t.value.outlet===Nt?-1:e.value.outlet===Nt?1:t.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(t,e,n,r){for(const s of t){const o=this.processSegmentAgainstRoute(s,e,n,r);if(null!==o)return o}return Jk(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Zk(t,e,n,r))return null;let s,o=[],a=[];if("**"===t.path){const f=n.length>0?Dk(n).parameters:{};s=new Nm(n,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,aI(t),Gr(t),t.component,t,sI(e),oI(e)+n.length,lI(t))}else{const f=Hm(e,t,n);if(!f.matched)return null;o=f.consumedSegments,a=n.slice(f.lastChild),s=new Nm(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,aI(t),Gr(t),t.component,t,sI(e),oI(e)+o.length,lI(t))}const l=function U7(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:d}=Um(e,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===d.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new To(s,f)]}if(0===l.length&&0===d.length)return[new To(s,[])];const u=Gr(t)===r,h=this.processSegment(l,c,d,u?Nt:r);return null===h?null:[new To(s,h)]}}function z7(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function rI(i){const t=[],e=new Set;for(const n of i){if(!z7(n)){t.push(n);continue}const r=t.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=rI(n.children);t.push(new To(n.value,r))}return t.filter(n=>!e.has(n))}function sI(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function oI(i){let t=i,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function aI(i){return i.data||{}}function lI(i){return i.resolve||{}}function n0(i){return zr(t=>{const e=i(t);return e?hi(e).pipe(Dt(()=>t)):Qe(t)})}class X7 extends class K7{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const r0=new X("ROUTES");class cI{constructor(t,e,n,r){this.injector=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(Dt(s=>{this.onLoadEndListener&&this.onLoadEndListener(e);const o=s.create(t);return new Zx(Sk(o.injector.get(r0,void 0,bt.Self|bt.Optional)).map(e0),o)}),Eo(s=>{throw e._loader$=void 0,s}));return e._loader$=new cq(r,()=>new ge).pipe(pk()),e._loader$}loadModuleFactory(t){return Ws(t()).pipe(Jn(e=>e instanceof v1?Qe(e):hi(this.compiler.compileModuleAsync(e))))}}class Z7{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function J7(i){throw i}function e9(i,t,e){return t.parse("/")}function dI(i,t){return Qe(null)}const t9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},n9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let er=(()=>{class i{constructor(e,n,r,s,o,a,l){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ge,this.errorHandler=J7,this.malformedUriErrorHandler=e9,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:dI,afterPreactivation:dI},this.urlHandlingStrategy=new Z7,this.routeReuseStrategy=new X7,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Mo),this.console=o.get(iR);const u=o.get(Xe);this.isNgZoneEnabled=u instanceof Xe&&Xe.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function Eq(){return new dl(new Ut([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new cI(o,a,h=>this.triggerEvent(new bk(h)),h=>this.triggerEvent(new xk(h))),this.routerState=Vk(this.currentUrlTree,this.rootComponentType),this.transitions=new Ji({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(an(r=>0!==r.id),Dt(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),zr(r=>{let s=!1,o=!1;return Qe(r).pipe(vi(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),zr(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return $m(a.source)&&(this.browserUrlTree=a.extractedUrl),Qe(a).pipe(zr(u=>{const h=this.transitions.getValue();return n.next(new Ux(u.id,this.serializeUrl(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions.getValue()?Is:Promise.resolve(u)}),function M7(i,t,e,n){return zr(r=>function b7(i,t,e,n,r){return new x7(i,t,e,n,r).apply()}(i,t,e,r.extractedUrl,n).pipe(Dt(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),vi(u=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:u.urlAfterRedirects})}),function G7(i,t,e,n,r){return Jn(s=>function B7(i,t,e,n,r="emptyOnly",s="legacy"){try{const o=new V7(i,t,e,n,r,s).recognize();return null===o?iI(new N7):Qe(o)}catch(o){return iI(o)}}(i,t,s.urlAfterRedirects,e(s.urlAfterRedirects),n,r).pipe(Dt(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,u=>this.serializeUrl(u),this.paramsInheritanceStrategy,this.relativeLinkResolution),vi(u=>{if("eager"===this.urlUpdateStrategy){if(!u.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);this.setBrowserUrl(f,u)}this.browserUrlTree=u.urlAfterRedirects}const h=new pq(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);n.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:m,extras:g}=a,_=new Ux(h,this.serializeUrl(f),p,m);n.next(_);const v=Vk(f,this.rootComponentType).snapshot;return Qe(Object.assign(Object.assign({},a),{targetSnapshot:v,urlAfterRedirects:f,extras:Object.assign(Object.assign({},g),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),Is}),n0(a=>{const{targetSnapshot:l,id:c,extractedUrl:d,rawUrl:u,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:d,rawUrlTree:u,skipLocationChange:!!h,replaceUrl:!!f})}),vi(a=>{const l=new mq(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Dt(a=>Object.assign(Object.assign({},a),{guards:C7(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function T7(i,t){return Jn(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?Qe(Object.assign(Object.assign({},e),{guardsResult:!0})):function R7(i,t,e,n){return hi(i).pipe(Jn(r=>function L7(i,t,e,n,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Qe(s.map(a=>{const l=Wm(a,t,r);let c;if(function c7(i){return i&&pa(i.canDeactivate)}(l))c=Ws(l.canDeactivate(i,t,e,n));else{if(!pa(l))throw new Error("Invalid CanDeactivate guard");c=Ws(l(i,t,e,n))}return c.pipe(rd())})).pipe(xh()):Qe(!0)}(r.component,r.route,e,t,n)),rd(r=>!0!==r,!0))}(o,n,r,i).pipe(Jn(a=>a&&function s7(i){return"boolean"==typeof i}(a)?function k7(i,t,e,n){return hi(t).pipe(id(r=>Rm(function P7(i,t){return null!==i&&t&&t(new vq(i)),Qe(!0)}(r.route.parent,n),function I7(i,t){return null!==i&&t&&t(new xq(i)),Qe(!0)}(r.route,n),function F7(i,t,e){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function S7(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(o)).filter(o=>null!==o).map(o=>km(()=>Qe(o.guards.map(l=>{const c=Wm(l,o.node,e);let d;if(function l7(i){return i&&pa(i.canActivateChild)}(c))d=Ws(c.canActivateChild(n,i));else{if(!pa(c))throw new Error("Invalid CanActivateChild guard");d=Ws(c(n,i))}return d.pipe(rd())})).pipe(xh())));return Qe(s).pipe(xh())}(i,r.path,e),function O7(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return Qe(!0);const r=n.map(s=>km(()=>{const o=Wm(s,t,e);let a;if(function a7(i){return i&&pa(i.canActivate)}(o))a=Ws(o.canActivate(t,i));else{if(!pa(o))throw new Error("Invalid CanActivate guard");a=Ws(o(t,i))}return a.pipe(rd())}));return Qe(r).pipe(xh())}(i,r.route,e))),rd(r=>!0!==r,!0))}(n,s,i,t):Qe(a)),Dt(a=>Object.assign(Object.assign({},e),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),vi(a=>{if(hl(a.guardsResult)){const c=zx(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new gq(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),an(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),n0(a=>{if(a.guards.canActivateChecks.length)return Qe(a).pipe(vi(l=>{const c=new _q(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),zr(l=>{let c=!1;return Qe(l).pipe(function j7(i,t){return Jn(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return Qe(e);let s=0;return hi(r).pipe(id(o=>function W7(i,t,e,n){return function $7(i,t,e,n){const r=Object.keys(i);if(0===r.length)return Qe({});const s={};return hi(r).pipe(Jn(o=>function q7(i,t,e,n){const r=Wm(i,t,n);return Ws(r.resolve?r.resolve(t,e):r(t,e))}(i[o],t,e,n).pipe(vi(a=>{s[o]=a}))),Hx(1),Jn(()=>Object.keys(s).length===r.length?Qe(s):Is))}(i._resolve,i,t,n).pipe(Dt(s=>(i._resolvedData=s,i.data=Object.assign(Object.assign({},i.data),Hk(i,e).resolve),null)))}(o.route,n,i,t)),vi(()=>s++),Hx(1),Jn(o=>s===r.length?Qe(e):Is))})}(this.paramsInheritanceStrategy,this.ngModule.injector),vi({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),vi(l=>{const c=new yq(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),n0(a=>{const{targetSnapshot:l,id:c,extractedUrl:d,rawUrl:u,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:d,rawUrlTree:u,skipLocationChange:!!h,replaceUrl:!!f})}),Dt(a=>{const l=function Wq(i,t,e){const n=yh(i,t._root,e?e._root:void 0);return new Bk(n,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),vi(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((i,t,e)=>Dt(n=>(new n7(t,n.targetRouterState,n.currentRouterState,e).activate(i),n)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),vi({next(){s=!0},complete(){s=!0}}),yk(()=>{var a;s||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===r.id&&(this.currentNavigation=null)}),Eo(a=>{if(o=!0,function Cq(i){return i&&i[Mk]}(a)){const l=hl(a.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new vk(r.id,this.serializeUrl(r.extractedUrl),a.message);n.next(c),l?setTimeout(()=>{const d=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||$m(r.source)};this.scheduleNavigation(d,"imperative",null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new fq(r.id,this.serializeUrl(r.extractedUrl),a);n.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return Is}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{var r;const s={replaceUrl:!0},o=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e.url);this.scheduleNavigation(a,n,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Kk(e),this.config=e.map(e0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=r||this.routerState.root,d=l?this.currentUrlTree.fragment:o;let u=null;switch(a){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}return null!==u&&(u=this.removeEmptyProps(u)),function Yq(i,t,e,n,r){if(0===e.length)return Kx(t.root,t.root,t,n,r);const s=function Kq(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new jk(!0,0,i);let t=0,e=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Oi(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new jk(e,t,n)}(e);if(s.toRoot())return Kx(t.root,new Ut([],{}),t,n,r);const o=function Xq(i,t,e){if(i.isAbsolute)return new Xx(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const s=e.snapshot._urlSegment;return new Xx(s,s===t.root,0)}const n=Bm(i.commands[0])?0:1;return function Qq(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new Error("Invalid number of '../'");r=n.segments.length}return new Xx(n,!1,r-s)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+n,i.numberOfDoubleDots)}(s,t,i),a=o.processChildren?Vm(o.segmentGroup,o.index,s.commands):Wk(o.segmentGroup,o.index,s.commands);return Kx(o.segmentGroup,a,t,n,r)}(c,this.currentUrlTree,e,u,null!=d?d:null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=hl(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function i9(i){for(let t=0;t<i.length;t++){const e=i[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?Object.assign({},t9):!1===n?Object.assign({},n9):n,hl(e))return Ak(this.currentUrlTree,e,r);const s=this.parseUrl(e);return Ak(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const s=e[r];return null!=s&&(n[r]=s),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new mh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,r,s,o){var a,l,c;if(this.disposed)return Promise.resolve(!1);const d=this.transitions.value,u=$m(n)&&d&&!$m(d.source),h=d.rawUrl.toString()===e.toString(),f=d.id===(null===(a=this.currentNavigation)||void 0===a?void 0:a.id);if(u&&h&&f)return Promise.resolve(!0);let m,g,_;o?(m=o.resolve,g=o.reject,_=o.promise):_=new Promise((x,w)=>{m=x,g=w});const v=++this.navigationId;let b;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),b=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):b=0,this.setTransition({id:v,targetPageId:b,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:m,reject:g,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(x=>Promise.reject(x))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),s=Object.assign(Object.assign({},n.extras.state),this.generateNgRouterState(n.id,n.targetPageId));this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,n=!1){var r,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n){const r=new vk(e.id,this.serializeUrl(e.extractedUrl),n);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return i.\u0275fac=function(e){jc()},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();function $m(i){return"imperative"!==i}let qm=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new ge,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const n=this.renderer,r=this.el.nativeElement;null!==e?n.setAttribute(r,"tabindex",e):n.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:ad(this.skipLocationChange),replaceUrl:ad(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ad(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(y(er),y(fa),ti("tabindex"),y(fs),y(de))},i.\u0275dir=H({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,n){1&e&&Re("click",function(){return n.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[jt]}),i})(),Ym=(()=>{class i{constructor(e,n,r){this.router=e,this.route=n,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new ge,this.subscription=e.events.subscribe(s=>{s instanceof mh&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,n,r,s,o){if(0!==e||n||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:ad(this.skipLocationChange),replaceUrl:ad(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ad(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(y(er),y(fa),y(td))},i.\u0275dir=H({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,n){1&e&&Re("click",function(s){return n.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&Ue("target",n.target)("href",n.href,Uu)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[jt]}),i})();function ad(i){return""===i||!!i}class uI{}class hI{preload(t,e){return Qe(null)}}let fI=(()=>{class i{constructor(e,n,r,s){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=new cI(r,n,l=>e.triggerEvent(new bk(l)),l=>e.triggerEvent(new xk(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(an(e=>e instanceof mh),id(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Mo);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(e,s)):s.children&&r.push(this.processRoutes(e,s.children));return hi(r).pipe(bu(),Dt(s=>{}))}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>(n._loadedConfig?Qe(n._loadedConfig):this.loader.load(e.injector,n)).pipe(Jn(s=>(n._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return i.\u0275fac=function(e){return new(e||i)(G(er),G(lm),G(kn),G(uI))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})(),s0=(()=>{class i{constructor(e,n,r={}){this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Ux?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof mh&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof wk&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new wk(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(e){jc()},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const fl=new X("ROUTER_CONFIGURATION"),pI=new X("ROUTER_FORROOT_GUARD"),a9=[um,{provide:Ik,useClass:Pk},{provide:er,useFactory:function h9(i,t,e,n,r,s,o={},a,l){const c=new er(null,i,t,e,n,r,Sk(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function f9(i,t){i.errorHandler&&(t.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(t.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(t.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(t.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(t.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(t.canceledNavigationResolution=i.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(d=>{var u,h;null===(u=console.group)||void 0===u||u.call(console,`Router Event: ${d.constructor.name}`),console.log(d.toString()),console.log(d),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[Ik,wh,um,kn,lm,r0,fl,[class Q7{},new mi],[class Y7{},new mi]]},wh,{provide:fa,useFactory:function p9(i){return i.routerState.root},deps:[er]},fI,hI,class o9{preload(t,e){return e().pipe(Eo(()=>Qe(null)))}},{provide:fl,useValue:{enableTracing:!1}}];function l9(){return new cR("Router",er)}let mI=(()=>{class i{constructor(e,n){}static forRoot(e,n){return{ngModule:i,providers:[a9,gI(e),{provide:pI,useFactory:u9,deps:[[er,new mi,new mr]]},{provide:fl,useValue:n||{}},{provide:td,useFactory:d9,deps:[sl,[new Nu(xx),new mi],fl]},{provide:s0,useFactory:c9,deps:[er,g$,fl]},{provide:uI,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:hI},{provide:cR,multi:!0,useFactory:l9},[o0,{provide:am,multi:!0,useFactory:m9,deps:[o0]},{provide:_I,useFactory:g9,deps:[o0]},{provide:cx,multi:!0,useExisting:_I}]]}}static forChild(e){return{ngModule:i,providers:[gI(e)]}}}return i.\u0275fac=function(e){return new(e||i)(G(pI,8),G(er,8))},i.\u0275mod=Te({type:i}),i.\u0275inj=De({}),i})();function c9(i,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new s0(i,t,e)}function d9(i,t,e={}){return e.useHash?new n6(i,t):new kR(i,t)}function u9(i){return"guarded"}function gI(i){return[{provide:OU,multi:!0,useValue:i},{provide:r0,multi:!0,useValue:i}]}let o0=(()=>{class i{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ge}appInitializer(){return this.injector.get(JW,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let n=null;const r=new Promise(a=>n=a),s=this.injector.get(er),o=this.injector.get(fl);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),n(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Qe(null):(this.initNavigation=!0,n(!0),this.resultOfPreactivationDone),s.initialNavigation()):n(!0),r})}bootstrapListener(e){const n=this.injector.get(fl),r=this.injector.get(fI),s=this.injector.get(s0),o=this.injector.get(er),a=this.injector.get(ed);e===a.components[0]&&(("enabledNonBlocking"===n.initialNavigation||void 0===n.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(e){return new(e||i)(G(kn))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();function m9(i){return i.appInitializer.bind(i)}function g9(i){return i.bootstrapListener.bind(i)}const _I=new X("Router Initializer");function yI(...i){const t=US(i),{args:e,keys:n}=uk(i),r=new Xt(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let d=0;d<o;d++){let u=!1;cr(e[d]).subscribe(new wn(s,h=>{u||(u=!0,c--),a[d]=h},()=>l--,void 0,()=>{(!l||!u)&&(c||s.next(n?hk(n,a):a),s.complete())}))}});return t?r.pipe(Vx(t)):r}let vI=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(y(fs),y(de))},i.\u0275dir=H({type:i}),i})(),pl=(()=>{class i extends vI{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=xe(i)))(n||i)}}(),i.\u0275dir=H({type:i,features:[q]}),i})();const si=new X("NgValueAccessor"),v9={provide:si,useExisting:Tt(()=>Km),multi:!0},x9=new X("CompositionEventMode");let Km=(()=>{class i extends vI{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function b9(){const i=Gs()?Gs().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(y(fs),y(de),y(x9,8))},i.\u0275dir=H({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&Re("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[Me([v9]),q]}),i})();function ma(i){return null==i||0===i.length}function xI(i){return null!=i&&"number"==typeof i.length}const Kn=new X("NgValidators"),ga=new X("NgAsyncValidators"),w9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ro{static min(t){return function wI(i){return t=>{if(ma(t.value)||ma(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}(t)}static max(t){return function MI(i){return t=>{if(ma(t.value)||ma(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}(t)}static required(t){return CI(t)}static requiredTrue(t){return function SI(i){return!0===i.value?null:{required:!0}}(t)}static email(t){return function DI(i){return ma(i.value)||w9.test(i.value)?null:{email:!0}}(t)}static minLength(t){return function EI(i){return t=>ma(t.value)||!xI(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function AI(i){return t=>xI(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}(t)}static pattern(t){return function TI(i){if(!i)return Dh;let t,e;return"string"==typeof i?(e="","^"!==i.charAt(0)&&(e+="^"),e+=i,"$"!==i.charAt(i.length-1)&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(ma(n.value))return null;const r=n.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return FI(t)}static composeAsync(t){return LI(t)}}function CI(i){return ma(i.value)?{required:!0}:null}function Dh(i){return null}function RI(i){return null!=i}function kI(i){const t=Qu(i)?hi(i):i;return Nb(t),t}function II(i){let t={};return i.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function PI(i,t){return t.map(e=>e(i))}function OI(i){return i.map(t=>function M9(i){return!i.validate}(t)?t:e=>t.validate(e))}function FI(i){if(!i)return null;const t=i.filter(RI);return 0==t.length?null:function(e){return II(PI(e,t))}}function a0(i){return null!=i?FI(OI(i)):null}function LI(i){if(!i)return null;const t=i.filter(RI);return 0==t.length?null:function(e){return yI(PI(e,t).map(kI)).pipe(Dt(II))}}function l0(i){return null!=i?LI(OI(i)):null}function NI(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function BI(i){return i._rawValidators}function VI(i){return i._rawAsyncValidators}function c0(i){return i?Array.isArray(i)?i:[i]:[]}function Xm(i,t){return Array.isArray(i)?i.includes(t):i===t}function HI(i,t){const e=c0(t);return c0(i).forEach(r=>{Xm(e,r)||e.push(r)}),e}function UI(i,t){return c0(t).filter(e=>!Xm(i,e))}class zI{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=a0(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=l0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class _s extends zI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ui extends zI{get formDirective(){return null}get path(){return null}}class GI{constructor(t){this._cd=t}is(t){var e,n,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[t])}}let d0=(()=>{class i extends GI{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(y(_s,2))},i.\u0275dir=H({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&Ke("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))},features:[q]}),i})(),Eh=(()=>{class i extends GI{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(y(Ui,10))},i.\u0275dir=H({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,n){2&e&&Ke("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))("ng-submitted",n.is("submitted"))},features:[q]}),i})();function Ah(i,t){f0(i,t),t.valueAccessor.writeValue(i.value),function k9(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&WI(i,t)})}(i,t),function P9(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function I9(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&WI(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function R9(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function Jm(i,t,e=!0){const n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),tg(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function eg(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function f0(i,t){const e=BI(i);null!==t.validator?i.setValidators(NI(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=VI(i);null!==t.asyncValidator?i.setAsyncValidators(NI(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();eg(t._rawValidators,r),eg(t._rawAsyncValidators,r)}function tg(i,t){let e=!1;if(null!==i){if(null!==t.validator){const r=BI(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.validator);s.length!==r.length&&(e=!0,i.setValidators(s))}}if(null!==t.asyncValidator){const r=VI(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(e=!0,i.setAsyncValidators(s))}}}const n=()=>{};return eg(t._rawValidators,n),eg(t._rawAsyncValidators,n),e}function WI(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function $I(i,t){f0(i,t)}function qI(i,t){i._syncPendingControls(),t.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function ng(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const Th="VALID",ig="INVALID",ld="PENDING",Rh="DISABLED";function _0(i){return(v0(i)?i.validators:i)||null}function YI(i){return Array.isArray(i)?a0(i):i||null}function y0(i,t){return(v0(t)?t.asyncValidators:i)||null}function KI(i){return Array.isArray(i)?l0(i):i||null}function v0(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}const XI=i=>i instanceof cd,b0=i=>i instanceof kh;function QI(i){return XI(i)?i.value:i.getRawValue()}function ZI(i,t){const e=b0(i),n=i.controls;if(!(e?Object.keys(n):n).length)throw new $t(1e3,"");if(!n[t])throw new $t(1001,"")}function JI(i,t){b0(i),i._forEachChild((n,r)=>{if(void 0===t[r])throw new $t(1002,"")})}class x0{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=YI(this._rawValidators),this._composedAsyncValidatorFn=KI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Th}get invalid(){return this.status===ig}get pending(){return this.status==ld}get disabled(){return this.status===Rh}get enabled(){return this.status!==Rh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=YI(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=KI(t)}addValidators(t){this.setValidators(HI(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(HI(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(UI(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(UI(t,this._rawAsyncValidators))}hasValidator(t){return Xm(this._rawValidators,t)}hasAsyncValidator(t){return Xm(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ld,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Rh,this.errors=null,this._forEachChild(n=>{n.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Th,this._forEachChild(n=>{n.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Th||this.status===ld)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rh:Th}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ld,this._hasOwnPendingAsyncValidator=!0;const e=kI(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function N9(i,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let n=i;return t.forEach(r=>{n=b0(n)?n.controls.hasOwnProperty(r)?n.controls[r]:null:(i=>i instanceof V9)(n)&&n.at(r)||null}),n}(this,t,".")}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ue,this.statusChanges=new ue}_calculateStatus(){return this._allControlsDisabled()?Rh:this.errors?ig:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ld)?ld:this._anyControlsHaveStatus(ig)?ig:Th}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){v0(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class cd extends x0{constructor(t=null,e,n){super(_0(e),y0(n,e)),this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ng(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ng(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class kh extends x0{constructor(t,e,n){super(_0(e),y0(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){JI(this,t),Object.keys(t).forEach(n=>{ZI(this,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=QI(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,s)=>{n=e(n,r,s)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class V9 extends x0{constructor(t,e,n){super(_0(e),y0(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){JI(this,t),t.forEach((n,r)=>{ZI(this,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>QI(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const H9={provide:Ui,useExisting:Tt(()=>$s)},Ih=(()=>Promise.resolve(null))();let $s=(()=>{class i extends Ui{constructor(e,n){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new ue,this.form=new kh({},a0(e),l0(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Ih.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Ah(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Ih.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),ng(this._directives,e)})}addFormGroup(e){Ih.then(()=>{const n=this._findContainer(e.path),r=new kh({});$I(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Ih.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){Ih.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,qI(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return i.\u0275fac=function(e){return new(e||i)(y(Kn,10),y(ga,10))},i.\u0275dir=H({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,n){1&e&&Re("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Me([H9]),q]}),i})(),rg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})(),sP=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({}),i})();const w0=new X("NgModelWithFormControlWarning"),Y9={provide:Ui,useExisting:Tt(()=>qs)};let qs=(()=>{class i extends Ui{constructor(e,n){super(),this.validators=e,this.asyncValidators=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ue,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(tg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const n=this.form.get(e.path);return Ah(n,e),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){Jm(e.control||null,e,!1),ng(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,qI(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const n=e.control,r=this.form.get(e.path);n!==r&&(Jm(n||null,e),XI(r)&&(Ah(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const n=this.form.get(e.path);$I(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const n=this.form.get(e.path);n&&function O9(i,t){return tg(i,t)}(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){f0(this.form,this),this._oldForm&&tg(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(e){return new(e||i)(y(Kn,10),y(ga,10))},i.\u0275dir=H({type:i,selectors:[["","formGroup",""]],hostBindings:function(e,n){1&e&&Re("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Me([Y9]),q,jt]}),i})();const Q9={provide:_s,useExisting:Tt(()=>sg)};let sg=(()=>{class i extends _s{constructor(e,n,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new ue,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function m0(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(s=>{s.constructor===Km?e=s:function L9(i){return Object.getPrototypeOf(i.constructor)===pl}(s)?n=s:r=s}),r||n||e||null}(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function p0(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function Zm(i,t){return[...t.path,i]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(e){return new(e||i)(y(Ui,13),y(Kn,10),y(ga,10),y(si,10),y(w0,8))},i.\u0275dir=H({type:i,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Me([Q9]),q,jt]}),i})();const oY={provide:Kn,useExisting:Tt(()=>og),multi:!0};let og=(()=>{class i{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?CI(e):null}registerOnValidatorChange(e){this._onChange=e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,n){2&e&&Ue("required",n.required?"":null)},inputs:{required:"required"},features:[Me([oY])]}),i})(),bP=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[sP]]}),i})(),hY=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[bP]}),i})(),fY=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:w0,useValue:e.warnOnNgModelWithFormControl}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[bP]}),i})();function xP(i,t,e,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(n,r)}const vl=1e3,tr=1001,oi=1003,vn=1006,ya=1008,bl=1009,Bh=1012,ys=1015,Ys=1016,pd=1020,Wr=1023,xl=1026,md=1027,Vh=2300,gd=2301,_d=2400,yd=2401,vs=3e3,Jt=3001,Io="srgb",Ml="srgb-linear",Hh=35044,Uh=35048;class va{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const n=this._listeners[t.type];if(void 0!==n){t.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const Fi=[];for(let i=0;i<256;i++)Fi[i]=(i<16?"0":"")+i.toString(16);let nO=1234567;const Cl=Math.PI/180,zh=180/Math.PI;function wr(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Fi[255&i]+Fi[i>>8&255]+Fi[i>>16&255]+Fi[i>>24&255]+"-"+Fi[255&t]+Fi[t>>8&255]+"-"+Fi[t>>16&15|64]+Fi[t>>24&255]+"-"+Fi[63&e|128]+Fi[e>>8&255]+"-"+Fi[e>>16&255]+Fi[e>>24&255]+Fi[255&n]+Fi[n>>8&255]+Fi[n>>16&255]+Fi[n>>24&255]).toLowerCase()}function Xn(i,t,e){return Math.max(t,Math.min(e,i))}function V0(i,t){return(i%t+t)%t}function Gh(i,t,e){return(1-e)*i+e*t}function H0(i){return 0==(i&i-1)&&0!==i}function iO(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function pg(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}var TK=Object.freeze({__proto__:null,DEG2RAD:Cl,RAD2DEG:zh,generateUUID:wr,clamp:Xn,euclideanModulo:V0,mapLinear:function pK(i,t,e,n,r){return n+(i-t)*(r-n)/(e-t)},inverseLerp:function mK(i,t,e){return i!==t?(e-i)/(t-i):0},lerp:Gh,damp:function gK(i,t,e,n){return Gh(i,t,1-Math.exp(-e*n))},pingpong:function _K(i,t=1){return t-Math.abs(V0(i,2*t)-t)},smoothstep:function yK(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t))*i*(3-2*i)},smootherstep:function vK(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t))*i*i*(i*(6*i-15)+10)},randInt:function bK(i,t){return i+Math.floor(Math.random()*(t-i+1))},randFloat:function xK(i,t){return i+Math.random()*(t-i)},randFloatSpread:function wK(i){return i*(.5-Math.random())},seededRandom:function MK(i){void 0!==i&&(nO=i);let t=nO+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function CK(i){return i*Cl},radToDeg:function SK(i){return i*zh},isPowerOfTwo:H0,ceilPowerOfTwo:iO,floorPowerOfTwo:pg,setQuaternionFromProperEuler:function DK(i,t,e,n,r){const s=Math.cos,o=Math.sin,a=s(e/2),l=o(e/2),c=s((t+n)/2),d=o((t+n)/2),u=s((t-n)/2),h=o((t-n)/2),f=s((n-t)/2),p=o((n-t)/2);switch(r){case"XYX":i.set(a*d,l*u,l*h,a*c);break;case"YZY":i.set(l*h,a*d,l*u,a*c);break;case"ZXZ":i.set(l*u,l*h,a*d,a*c);break;case"XZX":i.set(a*d,l*p,l*f,a*c);break;case"YXY":i.set(l*f,a*d,l*p,a*c);break;case"ZYZ":i.set(l*p,l*f,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:function AK(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}},denormalize:function EK(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}});class ne{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*n-o*r+t.x,this.y=s*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}ne.prototype.isVector2=!0;class Ti{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,s,o,a,l,c){const d=this.elements;return d[0]=t,d[1]=r,d[2]=a,d[3]=e,d[4]=s,d[5]=l,d[6]=n,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],d=n[4],u=n[7],h=n[2],f=n[5],p=n[8],m=r[0],g=r[3],_=r[6],v=r[1],b=r[4],x=r[7],w=r[2],S=r[5],T=r[8];return s[0]=o*m+a*v+l*w,s[3]=o*g+a*b+l*S,s[6]=o*_+a*x+l*T,s[1]=c*m+d*v+u*w,s[4]=c*g+d*b+u*S,s[7]=c*_+d*x+u*T,s[2]=h*m+f*v+p*w,s[5]=h*g+f*b+p*S,s[8]=h*_+f*x+p*T,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8];return e*o*d-e*a*c-n*s*d+n*a*l+r*s*c-r*o*l}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],u=d*o-a*c,h=a*l-d*s,f=c*s-o*l,p=e*u+n*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return t[0]=u*m,t[1]=(r*c-d*n)*m,t[2]=(a*n-r*o)*m,t[3]=h*m,t[4]=(d*e-r*l)*m,t[5]=(r*s-a*e)*m,t[6]=f*m,t[7]=(n*l-c*e)*m,t[8]=(o*e-n*s)*m,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+t,-r*c,r*l,-r*(-c*o+l*a)+a+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],d=r[7];return r[0]=e*s+n*l,r[3]=e*o+n*c,r[6]=e*a+n*d,r[1]=-n*s+e*l,r[4]=-n*o+e*c,r[7]=-n*a+e*d,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function rO(i){for(let t=i.length-1;t>=0;--t)if(i[t]>65535)return!0;return!1}function jh(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function Sl(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function mg(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}Ti.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const U0={[Io]:{[Ml]:Sl},[Ml]:{[Io]:mg}},bs={legacyMode:!0,get workingColorSpace(){return Ml},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,t,e){if(this.legacyMode||t===e||!t||!e)return i;if(U0[t]&&void 0!==U0[t][e]){const n=U0[t][e];return i.r=n(i.r),i.g=n(i.g),i.b=n(i.b),i}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(i,t){return this.convert(i,this.workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this.workingColorSpace)}},sO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bi={r:0,g:0,b:0},xs={h:0,s:0,l:0},gg={h:0,s:0,l:0};function z0(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+6*(t-i)*(2/3-e):i}function _g(i,t){return t.r=i.r,t.g=i.g,t.b=i.b,t}let bd,we=(()=>{class i{constructor(e,n,r){return void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Io){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,bs.toWorkingColorSpace(this,n),this}setRGB(e,n,r,s=Ml){return this.r=e,this.g=n,this.b=r,bs.toWorkingColorSpace(this,s),this}setHSL(e,n,r,s=Ml){if(e=V0(e,1),n=Xn(n,0,1),r=Xn(r,0,1),0===n)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,a=2*r-o;this.r=z0(a,o,e+1/3),this.g=z0(a,o,e),this.b=z0(a,o,e-1/3)}return bs.toWorkingColorSpace(this,s),this}setStyle(e,n=Io){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,bs.toWorkingColorSpace(this,n),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,bs.toWorkingColorSpace(this,n),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(o[1])/360,d=parseInt(o[2],10)/100,u=parseInt(o[3],10)/100;return r(o[4]),this.setHSL(c,d,u,n)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,bs.toWorkingColorSpace(this,n),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,bs.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=Io){const r=sO[e.toLowerCase()];return void 0!==r?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Sl(e.r),this.g=Sl(e.g),this.b=Sl(e.b),this}copyLinearToSRGB(e){return this.r=mg(e.r),this.g=mg(e.g),this.b=mg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Io){return bs.fromWorkingColorSpace(_g(this,bi),e),Xn(255*bi.r,0,255)<<16^Xn(255*bi.g,0,255)<<8^Xn(255*bi.b,0,255)<<0}getHexString(e=Io){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Ml){bs.fromWorkingColorSpace(_g(this,bi),n);const r=bi.r,s=bi.g,o=bi.b,a=Math.max(r,s,o),l=Math.min(r,s,o);let c,d;const u=(l+a)/2;if(l===a)c=0,d=0;else{const h=a-l;switch(d=u<=.5?h/(a+l):h/(2-a-l),a){case r:c=(s-o)/h+(s<o?6:0);break;case s:c=(o-r)/h+2;break;case o:c=(r-s)/h+4}c/=6}return e.h=c,e.s=d,e.l=u,e}getRGB(e,n=Ml){return bs.fromWorkingColorSpace(_g(this,bi),n),e.r=bi.r,e.g=bi.g,e.b=bi.b,e}getStyle(e=Io){return bs.fromWorkingColorSpace(_g(this,bi),e),e!==Io?`color(${e} ${bi.r} ${bi.g} ${bi.b})`:`rgb(${255*bi.r|0},${255*bi.g|0},${255*bi.b|0})`}offsetHSL(e,n,r){return this.getHSL(xs),xs.h+=e,xs.s+=n,xs.l+=r,this.setHSL(xs.h,xs.s,xs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(xs),e.getHSL(gg);const r=Gh(xs.h,gg.h,n),s=Gh(xs.s,gg.s,n),o=Gh(xs.l,gg.l,n);return this.setHSL(r,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return i.NAMES=sO,i})();we.prototype.isColor=!0,we.prototype.r=1,we.prototype.g=1,we.prototype.b=1;class Dl{static getDataURL(t){if(/^data:/i.test(t.src)||"undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===bd&&(bd=jh("canvas")),bd.width=t.width,bd.height=t.height;const n=bd.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=bd}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=jh("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*Sl(s[o]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e[n]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*Sl(e[n]/255)):Sl(e[n]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class xd{constructor(t=null){this.uuid=wr(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(G0(r[o].isDataTexture?r[o].image:r[o]))}else s=G0(r);n.url=s}return e||(t.images[this.uuid]=n),n}}function G0(i){return"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&i instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&i instanceof ImageBitmap?Dl.getDataURL(i):i.data?{data:Array.prototype.slice.call(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}xd.prototype.isSource=!0;let kK=0,zi=(()=>{class i extends va{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=tr,s=tr,o=vn,a=ya,l=Wr,c=bl,d=1,u=vs){super(),Object.defineProperty(this,"id",{value:kK++}),this.uuid=wr(),this.name="",this.source=new xd(e),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new ne(0,0),this.repeat=new ne(1,1),this.center=new ne(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ti,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case vl:e.x=e.x-Math.floor(e.x);break;case tr:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case vl:e.y=e.y-Math.floor(e.y);break;case tr:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i})();zi.prototype.isTexture=!0;class ln{constructor(t=0,e=0,n=0,r=1){this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,s;const o=.01,a=.1,l=t.elements,c=l[0],d=l[4],u=l[8],h=l[1],f=l[5],p=l[9],m=l[2],g=l[6],_=l[10];if(Math.abs(d-h)<o&&Math.abs(u-m)<o&&Math.abs(p-g)<o){if(Math.abs(d+h)<a&&Math.abs(u+m)<a&&Math.abs(p+g)<a&&Math.abs(c+f+_-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const b=(c+1)/2,x=(f+1)/2,w=(_+1)/2,S=(d+h)/4,T=(u+m)/4,I=(p+g)/4;return b>x&&b>w?b<o?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(b),r=S/n,s=T/n):x>w?x<o?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(x),n=S/r,s=I/r):w<o?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(w),n=T/s,r=I/s),this.set(n,r,s,e),this}let v=Math.sqrt((g-p)*(g-p)+(u-m)*(u-m)+(h-d)*(h-d));return Math.abs(v)<.001&&(v=1),this.x=(g-p)/v,this.y=(u-m)/v,this.z=(h-d)/v,this.w=Math.acos((c+f+_-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}ln.prototype.isVector4=!0;class Mr extends va{constructor(t,e,n={}){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new ln(0,0,t,e),this.scissorTest=!1,this.viewport=new ln(0,0,t,e),this.texture=new zi({width:t,height:e,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:vn,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},t.texture.image),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Mr.prototype.isWebGLRenderTarget=!0;class yg extends zi{constructor(t=null,e=1,n=1,r=1){super(null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=oi,this.minFilter=oi,this.wrapR=tr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}yg.prototype.isDataArrayTexture=!0,class IK extends Mr{constructor(t,e,n){super(t,e),this.depth=n,this.texture=new yg(null,t,e,n),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGLArrayRenderTarget=!0;class j0 extends zi{constructor(t=null,e=1,n=1,r=1){super(null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=oi,this.minFilter=oi,this.wrapR=tr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}j0.prototype.isData3DTexture=!0,class PK extends Mr{constructor(t,e,n){super(t,e),this.depth=n,this.texture=new j0(null,t,e,n),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGL3DRenderTarget=!0,class OK extends Mr{constructor(t,e,n,r={}){super(t,e,r);const s=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=t,this.texture[r].image.height=e,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class xi{constructor(t=0,e=0,n=0,r=1){this._x=t,this._y=e,this._z=n,this._w=r}static slerp(t,e,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,r)}static slerpFlat(t,e,n,r,s,o,a){let l=n[r+0],c=n[r+1],d=n[r+2],u=n[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],m=s[o+3];if(0===a)return t[e+0]=l,t[e+1]=c,t[e+2]=d,void(t[e+3]=u);if(1===a)return t[e+0]=h,t[e+1]=f,t[e+2]=p,void(t[e+3]=m);if(u!==m||l!==h||c!==f||d!==p){let g=1-a;const _=l*h+c*f+d*p+u*m,v=_>=0?1:-1,b=1-_*_;if(b>Number.EPSILON){const w=Math.sqrt(b),S=Math.atan2(w,_*v);g=Math.sin(g*S)/w,a=Math.sin(a*S)/w}const x=a*v;if(l=l*g+h*x,c=c*g+f*x,d=d*g+p*x,u=u*g+m*x,g===1-a){const w=1/Math.sqrt(l*l+c*c+d*d+u*u);l*=w,c*=w,d*=w,u*=w}}t[e]=l,t[e+1]=c,t[e+2]=d,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],d=n[r+3],u=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return t[e]=a*p+d*u+l*f-c*h,t[e+1]=l*p+d*h+c*u-a*f,t[e+2]=c*p+d*f+a*h-l*u,t[e+3]=d*p-a*u-l*h-c*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,l=Math.sin,c=a(n/2),d=a(r/2),u=a(s/2),h=l(n/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*d*u+c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u-h*f*p;break;case"YXZ":this._x=h*d*u+c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u+h*f*p;break;case"ZXY":this._x=h*d*u-c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u-h*f*p;break;case"ZYX":this._x=h*d*u-c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u+h*f*p;break;case"YZX":this._x=h*d*u+c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u-h*f*p;break;case"XZY":this._x=h*d*u-c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],s=e[8],o=e[1],a=e[5],l=e[9],c=e[2],d=e[6],u=e[10],h=n+a+u;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(d-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(n>a&&n>u){const f=2*Math.sqrt(1+n-a-u);this._w=(d-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>u){const f=2*Math.sqrt(1+a-n-u);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+d)/f}else{const f=2*Math.sqrt(1+u-n-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Xn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,s=t._z,o=t._w,a=e._x,l=e._y,c=e._z,d=e._w;return this._x=n*d+o*a+r*c-s*l,this._y=r*d+o*l+s*a-n*c,this._z=s*d+o*c+n*l-r*a,this._w=o*d-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-e;return this._w=f*o+e*this._w,this._x=f*n+e*this._x,this._y=f*r+e*this._y,this._z=f*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),u=Math.sin((1-e)*d)/c,h=Math.sin(e*d)/c;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=s*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(s),n*Math.cos(s),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}xi.prototype.isQuaternion=!0;class C{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(oO.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(oO.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*r,this.y=s[1]*e+s[4]*n+s[7]*r,this.z=s[2]*e+s[5]*n+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,s=t.x,o=t.y,a=t.z,l=t.w,c=l*e+o*r-a*n,d=l*n+a*e-s*r,u=l*r+s*n-o*e,h=-s*e-o*n-a*r;return this.x=c*l+h*-s+d*-a-u*-o,this.y=d*l+h*-o+u*-s-c*-a,this.z=u*l+h*-a+c*-o-d*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r,this.y=s[1]*e+s[5]*n+s[9]*r,this.z=s[2]*e+s[6]*n+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,a=e.y,l=e.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return W0.copy(this).projectOnVector(t),this.sub(W0)}reflect(t){return this.sub(W0.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Xn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}C.prototype.isVector3=!0;const W0=new C,oO=new xi;class Cr{constructor(t=new C(1/0,1/0,1/0),e=new C(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.length;l<c;l+=3){const d=t[l],u=t[l+1],h=t[l+2];d<e&&(e=d),u<n&&(n=u),h<r&&(r=h),d>s&&(s=d),u>o&&(o=u),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(s,o,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.count;l<c;l++){const d=t.getX(l),u=t.getY(l),h=t.getZ(l);d<e&&(e=d),u<n&&(n=u),h<r&&(r=h),d>s&&(s=d),u>o&&(o=u),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(s,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=El.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const s=n.attributes.position;for(let o=0,a=s.count;o<a;o++)El.fromBufferAttribute(s,o).applyMatrix4(t.matrixWorld),this.expandByPoint(El)}else null===n.boundingBox&&n.computeBoundingBox(),$0.copy(n.boundingBox),$0.applyMatrix4(t.matrixWorld),this.union($0);const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,El),El.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Wh),vg.subVectors(this.max,Wh),wd.subVectors(t.a,Wh),Md.subVectors(t.b,Wh),Cd.subVectors(t.c,Wh),ba.subVectors(Md,wd),xa.subVectors(Cd,Md),Al.subVectors(wd,Cd);let e=[0,-ba.z,ba.y,0,-xa.z,xa.y,0,-Al.z,Al.y,ba.z,0,-ba.x,xa.z,0,-xa.x,Al.z,0,-Al.x,-ba.y,ba.x,0,-xa.y,xa.x,0,-Al.y,Al.x,0];return!(!q0(e,wd,Md,Cd,vg)||(e=[1,0,0,0,1,0,0,0,1],!q0(e,wd,Md,Cd,vg)))&&(bg.crossVectors(ba,xa),e=[bg.x,bg.y,bg.z],q0(e,wd,Md,Cd,vg))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return El.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(El).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Po[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Po[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Po[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Po[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Po[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Po[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Po[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Po[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Po)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Cr.prototype.isBox3=!0;const Po=[new C,new C,new C,new C,new C,new C,new C,new C],El=new C,$0=new Cr,wd=new C,Md=new C,Cd=new C,ba=new C,xa=new C,Al=new C,Wh=new C,vg=new C,bg=new C,Tl=new C;function q0(i,t,e,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){Tl.fromArray(i,s);const a=r.x*Math.abs(Tl.x)+r.y*Math.abs(Tl.y)+r.z*Math.abs(Tl.z),l=t.dot(Tl),c=e.dot(Tl),d=n.dot(Tl);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const FK=new Cr,aO=new C,xg=new C,Y0=new C;class wa{constructor(t=new C,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):FK.setFromPoints(t).getCenter(n);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){Y0.subVectors(t,this.center);const e=Y0.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),r=.5*(n-this.radius);this.center.add(Y0.multiplyScalar(r/n)),this.radius+=r}return this}union(t){return!0===this.center.equals(t.center)?xg.set(0,0,1).multiplyScalar(t.radius):xg.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(aO.copy(t.center).add(xg)),this.expandByPoint(aO.copy(t.center).sub(xg)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Oo=new C,K0=new C,wg=new C,Ma=new C,X0=new C,Mg=new C,Q0=new C;class Rl{constructor(t=new C,e=new C(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Oo)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Oo.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Oo.copy(this.direction).multiplyScalar(e).add(this.origin),Oo.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){K0.copy(t).add(e).multiplyScalar(.5),wg.copy(e).sub(t).normalize(),Ma.copy(this.origin).sub(K0);const s=.5*t.distanceTo(e),o=-this.direction.dot(wg),a=Ma.dot(this.direction),l=-Ma.dot(wg),c=Ma.lengthSq(),d=Math.abs(1-o*o);let u,h,f,p;if(d>0)if(u=o*l-a,h=o*a-l,p=s*d,u>=0)if(h>=-p)if(h<=p){const m=1/d;u*=m,h*=m,f=u*(u+o*h+2*a)+h*(o*u+h+2*l)+c}else h=s,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;else h=-s,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;else h<=-p?(u=Math.max(0,-(-o*s+a)),h=u>0?-s:Math.min(Math.max(-s,-l),s),f=-u*u+h*(h+2*l)+c):h<=p?(u=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(u=Math.max(0,-(o*s+a)),h=u>0?s:Math.min(Math.max(-s,-l),s),f=-u*u+h*(h+2*l)+c);else h=o>0?-s:s,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(wg).multiplyScalar(h).add(K0),f}intersectSphere(t,e){Oo.subVectors(t.center,this.origin);const n=Oo.dot(this.direction),r=Oo.dot(Oo)-n*n,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return a<0&&l<0?null:this.at(a<0?l:a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,r=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,r=(t.min.x-h.x)*c),d>=0?(s=(t.min.y-h.y)*d,o=(t.max.y-h.y)*d):(s=(t.max.y-h.y)*d,o=(t.min.y-h.y)*d),n>o||s>r||((s>n||n!=n)&&(n=s),(o<r||r!=r)&&(r=o),u>=0?(a=(t.min.z-h.z)*u,l=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,l=(t.min.z-h.z)*u),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,Oo)}intersectTriangle(t,e,n,r,s){X0.subVectors(e,t),Mg.subVectors(n,t),Q0.crossVectors(X0,Mg);let a,o=this.direction.dot(Q0);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Ma.subVectors(this.origin,t);const l=a*this.direction.dot(Mg.crossVectors(Ma,Mg));if(l<0)return null;const c=a*this.direction.dot(X0.cross(Ma));if(c<0||l+c>o)return null;const d=-a*Ma.dot(Q0);return d<0?null:this.at(d/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class $e{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,s,o,a,l,c,d,u,h,f,p,m,g){const _=this.elements;return _[0]=t,_[4]=e,_[8]=n,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=d,_[10]=u,_[14]=h,_[3]=f,_[7]=p,_[11]=m,_[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new $e).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Sd.setFromMatrixColumn(t,0).length(),s=1/Sd.setFromMatrixColumn(t,1).length(),o=1/Sd.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,r=t.y,s=t.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),u=Math.sin(s);if("XYZ"===t.order){const h=o*d,f=o*u,p=a*d,m=a*u;e[0]=l*d,e[4]=-l*u,e[8]=c,e[1]=f+p*c,e[5]=h-m*c,e[9]=-a*l,e[2]=m-h*c,e[6]=p+f*c,e[10]=o*l}else if("YXZ"===t.order){const h=l*d,f=l*u,p=c*d,m=c*u;e[0]=h+m*a,e[4]=p*a-f,e[8]=o*c,e[1]=o*u,e[5]=o*d,e[9]=-a,e[2]=f*a-p,e[6]=m+h*a,e[10]=o*l}else if("ZXY"===t.order){const h=l*d,f=l*u,p=c*d,m=c*u;e[0]=h-m*a,e[4]=-o*u,e[8]=p+f*a,e[1]=f+p*a,e[5]=o*d,e[9]=m-h*a,e[2]=-o*c,e[6]=a,e[10]=o*l}else if("ZYX"===t.order){const h=o*d,f=o*u,p=a*d,m=a*u;e[0]=l*d,e[4]=p*c-f,e[8]=h*c+m,e[1]=l*u,e[5]=m*c+h,e[9]=f*c-p,e[2]=-c,e[6]=a*l,e[10]=o*l}else if("YZX"===t.order){const h=o*l,f=o*c,p=a*l,m=a*c;e[0]=l*d,e[4]=m-h*u,e[8]=p*u+f,e[1]=u,e[5]=o*d,e[9]=-a*d,e[2]=-c*d,e[6]=f*u+p,e[10]=h-m*u}else if("XZY"===t.order){const h=o*l,f=o*c,p=a*l,m=a*c;e[0]=l*d,e[4]=-u,e[8]=c*d,e[1]=h*u+m,e[5]=o*d,e[9]=f*u-p,e[2]=p*u-f,e[6]=a*d,e[10]=m*u+h}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(LK,t,NK)}lookAt(t,e,n){const r=this.elements;return Sr.subVectors(t,e),0===Sr.lengthSq()&&(Sr.z=1),Sr.normalize(),Ca.crossVectors(n,Sr),0===Ca.lengthSq()&&(1===Math.abs(n.z)?Sr.x+=1e-4:Sr.z+=1e-4,Sr.normalize(),Ca.crossVectors(n,Sr)),Ca.normalize(),Cg.crossVectors(Sr,Ca),r[0]=Ca.x,r[4]=Cg.x,r[8]=Sr.x,r[1]=Ca.y,r[5]=Cg.y,r[9]=Sr.y,r[2]=Ca.z,r[6]=Cg.z,r[10]=Sr.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],d=n[1],u=n[5],h=n[9],f=n[13],p=n[2],m=n[6],g=n[10],_=n[14],v=n[3],b=n[7],x=n[11],w=n[15],S=r[0],T=r[4],I=r[8],V=r[12],N=r[1],M=r[5],R=r[9],K=r[13],z=r[2],j=r[6],L=r[10],U=r[14],P=r[3],$=r[7],ee=r[11],pe=r[15];return s[0]=o*S+a*N+l*z+c*P,s[4]=o*T+a*M+l*j+c*$,s[8]=o*I+a*R+l*L+c*ee,s[12]=o*V+a*K+l*U+c*pe,s[1]=d*S+u*N+h*z+f*P,s[5]=d*T+u*M+h*j+f*$,s[9]=d*I+u*R+h*L+f*ee,s[13]=d*V+u*K+h*U+f*pe,s[2]=p*S+m*N+g*z+_*P,s[6]=p*T+m*M+g*j+_*$,s[10]=p*I+m*R+g*L+_*ee,s[14]=p*V+m*K+g*U+_*pe,s[3]=v*S+b*N+x*z+w*P,s[7]=v*T+b*M+x*j+w*$,s[11]=v*I+b*R+x*L+w*ee,s[15]=v*V+b*K+x*U+w*pe,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],o=t[1],a=t[5],l=t[9],c=t[13],d=t[2],u=t[6],h=t[10],f=t[14];return t[3]*(+s*l*u-r*c*u-s*a*h+n*c*h+r*a*f-n*l*f)+t[7]*(+e*l*f-e*c*h+s*o*h-r*o*f+r*c*d-s*l*d)+t[11]*(+e*c*u-e*a*f-s*o*u+n*o*f+s*a*d-n*c*d)+t[15]*(-r*a*d-e*l*u+e*a*h+r*o*u-n*o*h+n*l*d)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],u=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],_=t[15],v=u*g*c-m*h*c+m*l*f-a*g*f-u*l*_+a*h*_,b=p*h*c-d*g*c-p*l*f+o*g*f+d*l*_-o*h*_,x=d*m*c-p*u*c+p*a*f-o*m*f-d*a*_+o*u*_,w=p*u*l-d*m*l-p*a*h+o*m*h+d*a*g-o*u*g,S=e*v+n*b+r*x+s*w;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/S;return t[0]=v*T,t[1]=(m*h*s-u*g*s-m*r*f+n*g*f+u*r*_-n*h*_)*T,t[2]=(a*g*s-m*l*s+m*r*c-n*g*c-a*r*_+n*l*_)*T,t[3]=(u*l*s-a*h*s-u*r*c+n*h*c+a*r*f-n*l*f)*T,t[4]=b*T,t[5]=(d*g*s-p*h*s+p*r*f-e*g*f-d*r*_+e*h*_)*T,t[6]=(p*l*s-o*g*s-p*r*c+e*g*c+o*r*_-e*l*_)*T,t[7]=(o*h*s-d*l*s+d*r*c-e*h*c-o*r*f+e*l*f)*T,t[8]=x*T,t[9]=(p*u*s-d*m*s-p*n*f+e*m*f+d*n*_-e*u*_)*T,t[10]=(o*m*s-p*a*s+p*n*c-e*m*c-o*n*_+e*a*_)*T,t[11]=(d*a*s-o*u*s-d*n*c+e*u*c+o*n*f-e*a*f)*T,t[12]=w*T,t[13]=(d*m*r-p*u*r+p*n*h-e*m*h-d*n*g+e*u*g)*T,t[14]=(p*a*r-o*m*r-p*n*l+e*m*l+o*n*g-e*a*g)*T,t[15]=(o*u*r-d*a*r+d*n*l-e*u*l-o*n*h+e*a*h)*T,this}scale(t){const e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),s=1-n,o=t.x,a=t.y,l=t.z,c=s*o,d=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+n,d*l-r*o,0,c*l-r*a,d*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,s,o){return this.set(1,n,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,s=e._x,o=e._y,a=e._z,l=e._w,c=s+s,d=o+o,u=a+a,h=s*c,f=s*d,p=s*u,m=o*d,g=o*u,_=a*u,v=l*c,b=l*d,x=l*u,w=n.x,S=n.y,T=n.z;return r[0]=(1-(m+_))*w,r[1]=(f+x)*w,r[2]=(p-b)*w,r[3]=0,r[4]=(f-x)*S,r[5]=(1-(h+_))*S,r[6]=(g+v)*S,r[7]=0,r[8]=(p+b)*T,r[9]=(g-v)*T,r[10]=(1-(h+m))*T,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let s=Sd.set(r[0],r[1],r[2]).length();const o=Sd.set(r[4],r[5],r[6]).length(),a=Sd.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],ws.copy(this);const c=1/s,d=1/o,u=1/a;return ws.elements[0]*=c,ws.elements[1]*=c,ws.elements[2]*=c,ws.elements[4]*=d,ws.elements[5]*=d,ws.elements[6]*=d,ws.elements[8]*=u,ws.elements[9]*=u,ws.elements[10]*=u,e.setFromRotationMatrix(ws),n.x=s,n.y=o,n.z=a,this}makePerspective(t,e,n,r,s,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(n-r),d=(e+t)/(e-t),u=(n+r)/(n-r),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(e-t),a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,s,o){const a=this.elements,l=1/(e-t),c=1/(n-r),d=1/(o-s),u=(e+t)*l,h=(n+r)*c,f=(o+s)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}$e.prototype.isMatrix4=!0;const Sd=new C,ws=new $e,LK=new C(0,0,0),NK=new C(1,1,1),Ca=new C,Cg=new C,Sr=new C,lO=new $e,cO=new xi;class kl{constructor(t=0,e=0,n=0,r=kl.DefaultOrder){this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],d=r[9],u=r[2],h=r[6],f=r[10];switch(e){case"XYZ":this._y=Math.asin(Xn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Xn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(Xn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Xn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Xn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Xn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return lO.makeRotationFromQuaternion(t),this.setFromRotationMatrix(lO,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return cO.setFromEuler(this),this.setFromQuaternion(cO,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}kl.prototype.isEuler=!0,kl.DefaultOrder="XYZ",kl.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Z0{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let BK=0;const dO=new C,Dd=new xi,Fo=new $e,Sg=new C,$h=new C,VK=new C,HK=new xi,uO=new C(1,0,0),hO=new C(0,1,0),fO=new C(0,0,1),UK={type:"added"},pO={type:"removed"};class tn extends va{constructor(){super(),Object.defineProperty(this,"id",{value:BK++}),this.uuid=wr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=tn.DefaultUp.clone();const t=new C,e=new kl,n=new xi,r=new C(1,1,1);e._onChange(function s(){n.setFromEuler(e,!1)}),n._onChange(function o(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new $e},normalMatrix:{value:new Ti}}),this.matrix=new $e,this.matrixWorld=new $e,this.matrixAutoUpdate=tn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Z0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Dd.setFromAxisAngle(t,e),this.quaternion.multiply(Dd),this}rotateOnWorldAxis(t,e){return Dd.setFromAxisAngle(t,e),this.quaternion.premultiply(Dd),this}rotateX(t){return this.rotateOnAxis(uO,t)}rotateY(t){return this.rotateOnAxis(hO,t)}rotateZ(t){return this.rotateOnAxis(fO,t)}translateOnAxis(t,e){return dO.copy(t).applyQuaternion(this.quaternion),this.position.add(dO.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(uO,t)}translateY(t){return this.translateOnAxis(hO,t)}translateZ(t){return this.translateOnAxis(fO,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Fo.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Sg.copy(t):Sg.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),$h.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fo.lookAt($h,Sg,this.up):Fo.lookAt(Sg,$h,this.up),this.quaternion.setFromRotationMatrix(Fo),r&&(Fo.extractRotation(r.matrixWorld),Dd.setFromRotationMatrix(Fo),this.quaternion.premultiply(Dd.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(UK)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(pO)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(pO)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Fo.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Fo.multiply(t.parent.matrixWorld)),t.applyMatrix4(Fo),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(t,e);if(void 0!==o)return o}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($h,t,VK),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($h,HK,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function s(a,l){return void 0===a[l.uuid]&&(a[l.uuid]=l.toJSON(t)),l.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(t.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const l=a.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++)s(t.shapes,l[c]);else s(t.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(t.materials,this.material[l]));r.material=a}else r.material=s(t.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++)r.animations.push(s(t.animations,this.animations[a]))}if(e){const a=o(t.geometries),l=o(t.materials),c=o(t.textures),d=o(t.images),u=o(t.shapes),h=o(t.skeletons),f=o(t.animations),p=o(t.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),d.length>0&&(n.images=d),u.length>0&&(n.shapes=u),h.length>0&&(n.skeletons=h),f.length>0&&(n.animations=f),p.length>0&&(n.nodes=p)}return n.object=r,n;function o(a){const l=[];for(const c in a){const d=a[c];delete d.metadata,l.push(d)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++)this.add(t.children[n].clone());return this}}tn.DefaultUp=new C(0,1,0),tn.DefaultMatrixAutoUpdate=!0,tn.prototype.isObject3D=!0;const Ms=new C,Lo=new C,J0=new C,No=new C,Ed=new C,Ad=new C,mO=new C,ew=new C,tw=new C,nw=new C;class ai{constructor(t=new C,e=new C,n=new C){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),Ms.subVectors(t,e),r.cross(Ms);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,n,r,s){Ms.subVectors(r,e),Lo.subVectors(n,e),J0.subVectors(t,e);const o=Ms.dot(Ms),a=Ms.dot(Lo),l=Ms.dot(J0),c=Lo.dot(Lo),d=Lo.dot(J0),u=o*c-a*a;if(0===u)return s.set(-2,-1,-1);const h=1/u,f=(c*l-a*d)*h,p=(o*d-a*l)*h;return s.set(1-f-p,p,f)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,No),No.x>=0&&No.y>=0&&No.x+No.y<=1}static getUV(t,e,n,r,s,o,a,l){return this.getBarycoord(t,e,n,r,No),l.set(0,0),l.addScaledVector(s,No.x),l.addScaledVector(o,No.y),l.addScaledVector(a,No.z),l}static isFrontFacing(t,e,n,r){return Ms.subVectors(n,e),Lo.subVectors(t,e),Ms.cross(Lo).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Ms.subVectors(this.c,this.b),Lo.subVectors(this.a,this.b),.5*Ms.cross(Lo).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ai.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ai.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,s){return ai.getUV(t,this.a,this.b,this.c,e,n,r,s)}containsPoint(t){return ai.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ai.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,s=this.c;let o,a;Ed.subVectors(r,n),Ad.subVectors(s,n),ew.subVectors(t,n);const l=Ed.dot(ew),c=Ad.dot(ew);if(l<=0&&c<=0)return e.copy(n);tw.subVectors(t,r);const d=Ed.dot(tw),u=Ad.dot(tw);if(d>=0&&u<=d)return e.copy(r);const h=l*u-d*c;if(h<=0&&l>=0&&d<=0)return o=l/(l-d),e.copy(n).addScaledVector(Ed,o);nw.subVectors(t,s);const f=Ed.dot(nw),p=Ad.dot(nw);if(p>=0&&f<=p)return e.copy(s);const m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),e.copy(n).addScaledVector(Ad,a);const g=d*p-f*u;if(g<=0&&u-d>=0&&f-p>=0)return mO.subVectors(s,r),a=(u-d)/(u-d+(f-p)),e.copy(r).addScaledVector(mO,a);const _=1/(g+m+h);return o=m*_,a=h*_,e.copy(n).addScaledVector(Ed,o).addScaledVector(Ad,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let zK=0;class Pn extends va{constructor(){super(),Object.defineProperty(this,"id",{value:zK++}),this.uuid=wr(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const s=r(t.textures),o=r(t.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const r=e.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}Pn.prototype.isMaterial=!0,Pn.fromType=function(){return null};class Dr extends Pn{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new we(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}Dr.prototype.isMeshBasicMaterial=!0;const li=new C,Dg=new ne;class hn{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=Hh,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new we),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new ne),e[n++]=o.x,e[n++]=o.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new C),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new ln),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Dg.fromBufferAttribute(this,e),Dg.applyMatrix3(t),this.setXY(e,Dg.x,Dg.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)li.fromBufferAttribute(this,e),li.applyMatrix3(t),this.setXYZ(e,li.x,li.y,li.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)li.fromBufferAttribute(this,e),li.applyMatrix4(t),this.setXYZ(e,li.x,li.y,li.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)li.fromBufferAttribute(this,e),li.applyNormalMatrix(t),this.setXYZ(e,li.x,li.y,li.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)li.fromBufferAttribute(this,e),li.transformDirection(t),this.setXYZ(e,li.x,li.y,li.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,s){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Hh&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}}hn.prototype.isBufferAttribute=!0;class gO extends hn{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class _O extends hn{constructor(t,e,n){super(new Uint32Array(t),e,n)}}(class GK extends hn{constructor(t,e,n){super(new Uint16Array(t),e,n)}}).prototype.isFloat16BufferAttribute=!0;class qe extends hn{constructor(t,e,n){super(new Float32Array(t),e,n)}}let jK=0;const $r=new $e,iw=new tn,Td=new C,Er=new Cr,qh=new Cr,Ri=new C;class mt extends va{constructor(){super(),Object.defineProperty(this,"id",{value:jK++}),this.uuid=wr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(rO(t)?_O:gO)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new Ti).getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return $r.makeRotationFromQuaternion(t),this.applyMatrix4($r),this}rotateX(t){return $r.makeRotationX(t),this.applyMatrix4($r),this}rotateY(t){return $r.makeRotationY(t),this.applyMatrix4($r),this}rotateZ(t){return $r.makeRotationZ(t),this.applyMatrix4($r),this}translate(t,e,n){return $r.makeTranslation(t,e,n),this.applyMatrix4($r),this}scale(t,e,n){return $r.makeScale(t,e,n),this.applyMatrix4($r),this}lookAt(t){return iw.lookAt(t),iw.updateMatrix(),this.applyMatrix4(iw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Td).negate(),this.translate(Td.x,Td.y,Td.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new qe(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Cr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new C(-1/0,-1/0,-1/0),new C(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++)Er.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(Ri.addVectors(this.boundingBox.min,Er.min),this.boundingBox.expandByPoint(Ri),Ri.addVectors(this.boundingBox.max,Er.max),this.boundingBox.expandByPoint(Ri)):(this.boundingBox.expandByPoint(Er.min),this.boundingBox.expandByPoint(Er.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new wa);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new C,1/0);if(t){const n=this.boundingSphere.center;if(Er.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++)qh.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(Ri.addVectors(Er.min,qh.min),Er.expandByPoint(Ri),Ri.addVectors(Er.max,qh.max),Er.expandByPoint(Ri)):(Er.expandByPoint(qh.min),Er.expandByPoint(qh.max));Er.getCenter(n);let r=0;for(let s=0,o=t.count;s<o;s++)Ri.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(Ri));if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)Ri.fromBufferAttribute(a,c),l&&(Td.fromBufferAttribute(t,c),Ri.add(Td)),r=Math.max(r,n.distanceToSquared(Ri))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,s=e.normal.array,o=e.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new hn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let N=0;N<a;N++)c[N]=new C,d[N]=new C;const u=new C,h=new C,f=new C,p=new ne,m=new ne,g=new ne,_=new C,v=new C;function b(N,M,R){u.fromArray(r,3*N),h.fromArray(r,3*M),f.fromArray(r,3*R),p.fromArray(o,2*N),m.fromArray(o,2*M),g.fromArray(o,2*R),h.sub(u),f.sub(u),m.sub(p),g.sub(p);const K=1/(m.x*g.y-g.x*m.y);!isFinite(K)||(_.copy(h).multiplyScalar(g.y).addScaledVector(f,-m.y).multiplyScalar(K),v.copy(f).multiplyScalar(m.x).addScaledVector(h,-g.x).multiplyScalar(K),c[N].add(_),c[M].add(_),c[R].add(_),d[N].add(v),d[M].add(v),d[R].add(v))}let x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(let N=0,M=x.length;N<M;++N){const R=x[N],K=R.start;for(let j=K,L=K+R.count;j<L;j+=3)b(n[j+0],n[j+1],n[j+2])}const w=new C,S=new C,T=new C,I=new C;function V(N){T.fromArray(s,3*N),I.copy(T);const M=c[N];w.copy(M),w.sub(T.multiplyScalar(T.dot(M))).normalize(),S.crossVectors(I,M);const K=S.dot(d[N])<0?-1:1;l[4*N]=w.x,l[4*N+1]=w.y,l[4*N+2]=w.z,l[4*N+3]=K}for(let N=0,M=x.length;N<M;++N){const R=x[N],K=R.start;for(let j=K,L=K+R.count;j<L;j+=3)V(n[j+0]),V(n[j+1]),V(n[j+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new hn(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let h=0,f=n.count;h<f;h++)n.setXYZ(h,0,0,0);const r=new C,s=new C,o=new C,a=new C,l=new C,c=new C,d=new C,u=new C;if(t)for(let h=0,f=t.count;h<f;h+=3){const p=t.getX(h+0),m=t.getX(h+1),g=t.getX(h+2);r.fromBufferAttribute(e,p),s.fromBufferAttribute(e,m),o.fromBufferAttribute(e,g),d.subVectors(o,s),u.subVectors(r,s),d.cross(u),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),a.add(d),l.add(d),c.add(d),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=e.count;h<f;h+=3)r.fromBufferAttribute(e,h+0),s.fromBufferAttribute(e,h+1),o.fromBufferAttribute(e,h+2),d.subVectors(o,s),u.subVectors(r,s),d.cross(u),n.setXYZ(h+0,d.x,d.y,d.z),n.setXYZ(h+1,d.x,d.y,d.z),n.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===t.attributes[r])continue;const o=n[r].array,a=t.attributes[r],l=a.array,c=a.itemSize*e,d=Math.min(l.length,o.length-c);for(let u=0,h=c;u<d;u++,h++)o[h]=l[u]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Ri.fromBufferAttribute(t,e),Ri.normalize(),t.setXYZ(e,Ri.x,Ri.y,Ri.z)}toNonIndexed(){function t(a,l){const c=a.array,d=a.itemSize,u=a.normalized,h=new c.constructor(l.length*d);let f=0,p=0;for(let m=0,g=l.length;m<g;m++){f=a.isInterleavedBufferAttribute?l[m]*a.data.stride+a.offset:l[m]*d;for(let _=0;_<d;_++)h[p++]=c[f++]}return new hn(h,d,u)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new mt,n=this.index.array,r=this.attributes;for(const a in r){const c=t(r[a],n);e.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,u=c.length;d<u;d++){const f=t(c[d],n);l.push(f)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];e.addGroup(c.start,c.count,c.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(t[c]=l[c]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const l in n)t.data.attributes[l]=n[l].toJSON(t.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let u=0,h=c.length;u<h;u++)d.push(c[u].toJSON(t.data));d.length>0&&(r[l]=d,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const c in r)this.setAttribute(c,r[c].clone(e));const s=t.morphAttributes;for(const c in s){const d=[],u=s[c];for(let h=0,f=u.length;h<f;h++)d.push(u[h].clone(e));this.morphAttributes[c]=d}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let c=0,d=o.length;c<d;c++){const u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=t.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}mt.prototype.isBufferGeometry=!0;const yO=new $e,Rd=new Rl,rw=new wa,Sa=new C,Da=new C,Ea=new C,sw=new C,ow=new C,aw=new C,Eg=new C,Ag=new C,Tg=new C,Rg=new ne,kg=new ne,Ig=new ne,lw=new C,Pg=new C;class wi extends tn{constructor(t=new mt,e=new Dr){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),rw.copy(n.boundingSphere),rw.applyMatrix4(s),!1===t.ray.intersectsSphere(rw))||(yO.copy(s).invert(),Rd.copy(t.ray).applyMatrix4(yO),null!==n.boundingBox&&!1===Rd.intersectsBox(n.boundingBox)))return;let o;if(n.isBufferGeometry){const a=n.index,l=n.attributes.position,c=n.morphAttributes.position,d=n.morphTargetsRelative,u=n.attributes.uv,h=n.attributes.uv2,f=n.groups,p=n.drawRange;if(null!==a)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const _=f[m],v=r[_.materialIndex];for(let w=Math.max(_.start,p.start),S=Math.min(a.count,Math.min(_.start+_.count,p.start+p.count));w<S;w+=3){const T=a.getX(w),I=a.getX(w+1),V=a.getX(w+2);o=Og(this,v,t,Rd,l,c,d,u,h,T,I,V),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=_.materialIndex,e.push(o))}}else for(let _=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);_<v;_+=3){const b=a.getX(_),x=a.getX(_+1),w=a.getX(_+2);o=Og(this,r,t,Rd,l,c,d,u,h,b,x,w),o&&(o.faceIndex=Math.floor(_/3),e.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const _=f[m],v=r[_.materialIndex];for(let w=Math.max(_.start,p.start),S=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));w<S;w+=3)o=Og(this,v,t,Rd,l,c,d,u,h,w,w+1,w+2),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=_.materialIndex,e.push(o))}else for(let _=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);_<v;_+=3)o=Og(this,r,t,Rd,l,c,d,u,h,_,_+1,_+2),o&&(o.faceIndex=Math.floor(_/3),e.push(o))}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Og(i,t,e,n,r,s,o,a,l,c,d,u){Sa.fromBufferAttribute(r,c),Da.fromBufferAttribute(r,d),Ea.fromBufferAttribute(r,u);const h=i.morphTargetInfluences;if(s&&h){Eg.set(0,0,0),Ag.set(0,0,0),Tg.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const g=h[p],_=s[p];0!==g&&(sw.fromBufferAttribute(_,c),ow.fromBufferAttribute(_,d),aw.fromBufferAttribute(_,u),o?(Eg.addScaledVector(sw,g),Ag.addScaledVector(ow,g),Tg.addScaledVector(aw,g)):(Eg.addScaledVector(sw.sub(Sa),g),Ag.addScaledVector(ow.sub(Da),g),Tg.addScaledVector(aw.sub(Ea),g)))}Sa.add(Eg),Da.add(Ag),Ea.add(Tg)}i.isSkinnedMesh&&(i.boneTransform(c,Sa),i.boneTransform(d,Da),i.boneTransform(u,Ea));const f=function WK(i,t,e,n,r,s,o,a){let l;if(l=1===t.side?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,2!==t.side,a),null===l)return null;Pg.copy(a),Pg.applyMatrix4(i.matrixWorld);const c=e.ray.origin.distanceTo(Pg);return c<e.near||c>e.far?null:{distance:c,point:Pg.clone(),object:i}}(i,t,e,n,Sa,Da,Ea,lw);if(f){a&&(Rg.fromBufferAttribute(a,c),kg.fromBufferAttribute(a,d),Ig.fromBufferAttribute(a,u),f.uv=ai.getUV(lw,Sa,Da,Ea,Rg,kg,Ig,new ne)),l&&(Rg.fromBufferAttribute(l,c),kg.fromBufferAttribute(l,d),Ig.fromBufferAttribute(l,u),f.uv2=ai.getUV(lw,Sa,Da,Ea,Rg,kg,Ig,new ne));const p={a:c,b:d,c:u,normal:new C,materialIndex:0};ai.getNormal(Sa,Da,Ea,p.normal),f.face=p}return f}wi.prototype.isMesh=!0;class Il extends mt{constructor(t=1,e=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],u=[];let h=0,f=0;function p(m,g,_,v,b,x,w,S,T,I,V){const N=x/T,M=w/I,R=x/2,K=w/2,z=S/2,j=T+1,L=I+1;let U=0,P=0;const $=new C;for(let ee=0;ee<L;ee++){const pe=ee*M-K;for(let se=0;se<j;se++)$[m]=(se*N-R)*v,$[g]=pe*b,$[_]=z,c.push($.x,$.y,$.z),$[m]=0,$[g]=0,$[_]=S>0?1:-1,d.push($.x,$.y,$.z),u.push(se/T),u.push(1-ee/I),U+=1}for(let ee=0;ee<I;ee++)for(let pe=0;pe<T;pe++){const Ge=h+pe+j*(ee+1),ze=h+(pe+1)+j*(ee+1),ct=h+(pe+1)+j*ee;l.push(h+pe+j*ee,Ge,ct),l.push(Ge,ze,ct),P+=6}a.addGroup(f,P,V),f+=P,h+=U}p("z","y","x",-1,-1,n,e,t,o,s,0),p("z","y","x",1,-1,n,e,-t,o,s,1),p("x","z","y",1,1,t,n,e,r,o,2),p("x","z","y",1,-1,t,n,-e,r,o,3),p("x","y","z",1,-1,t,e,n,r,s,4),p("x","y","z",-1,-1,t,e,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new qe(c,3)),this.setAttribute("normal",new qe(d,3)),this.setAttribute("uv",new qe(u,2))}static fromJSON(t){return new Il(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function kd(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const r=i[e][n];t[e][n]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return t}function Gi(i){const t={};for(let e=0;e<i.length;e++){const n=kd(i[e]);for(const r in n)t[r]=n[r]}return t}const $K={clone:kd,merge:Gi};class Cs extends Pn{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=kd(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;e.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}Cs.prototype.isShaderMaterial=!0;class Fg extends tn{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new $e,this.projectionMatrix=new $e,this.projectionMatrixInverse=new $e}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Fg.prototype.isCamera=!0;class Mi extends Fg{constructor(t=50,e=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*zh*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Cl*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*zh*Math.atan(Math.tan(.5*Cl*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,s,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Cl*this.fov)/this.zoom,n=2*e,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,e-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;0!==a&&(s+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}Mi.prototype.isPerspectiveCamera=!0;class cw extends tn{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new Mi(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new C(1,0,0)),this.add(r);const s=new Mi(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new C(-1,0,0)),this.add(s);const o=new Mi(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new C(0,1,0)),this.add(o);const a=new Mi(90,1,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new C(0,-1,0)),this.add(a);const l=new Mi(90,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new C(0,0,1)),this.add(l);const c=new Mi(90,1,t,e);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new C(0,0,-1)),this.add(c)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,a,l,c]=this.children,d=t.getRenderTarget(),u=t.outputEncoding,h=t.toneMapping,f=t.xr.enabled;t.outputEncoding=vs,t.toneMapping=0,t.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,s),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,l),n.texture.generateMipmaps=p,t.setRenderTarget(n,5),t.render(e,c),t.setRenderTarget(d),t.outputEncoding=u,t.toneMapping=h,t.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class Yh extends zi{constructor(t,e,n,r,s,o,a,l,c,d){super(t=void 0!==t?t:[],e=void 0!==e?e:301,n,r,s,o,a,l,c,d),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}Yh.prototype.isCubeTexture=!0;class vO extends Mr{constructor(t,e={}){super(t,t,e);const n={width:t,height:t,depth:1};this.texture=new Yh([n,n,n,n,n,n],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:vn}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Il(5,5,5),s=new Cs({name:"CubemapFromEquirect",uniforms:kd(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=e;const o=new wi(r,s),a=e.minFilter;return e.minFilter===ya&&(e.minFilter=vn),new cw(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(s)}}vO.prototype.isWebGLCubeRenderTarget=!0;const dw=new C,KK=new C,XK=new Ti;class Bo{constructor(t=new C(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=dw.subVectors(n,e).cross(KK.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(dw),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(n).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||XK.getNormalMatrix(t),r=this.coplanarPoint(dw).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Bo.prototype.isPlane=!0;const Od=new wa,Lg=new C;class Ng{constructor(t=new Bo,e=new Bo,n=new Bo,r=new Bo,s=new Bo,o=new Bo){this.planes=[t,e,n,r,s,o]}set(t,e,n,r,s,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],d=n[6],u=n[7],h=n[8],f=n[9],p=n[10],m=n[11],g=n[12],_=n[13],v=n[14],b=n[15];return e[0].setComponents(a-r,u-l,m-h,b-g).normalize(),e[1].setComponents(a+r,u+l,m+h,b+g).normalize(),e[2].setComponents(a+s,u+c,m+f,b+_).normalize(),e[3].setComponents(a-s,u-c,m-f,b-_).normalize(),e[4].setComponents(a-o,u-d,m-p,b-v).normalize(),e[5].setComponents(a+o,u+d,m+p,b+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Od.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Od)}intersectsSprite(t){return Od.center.set(0,0,0),Od.radius=.7071067811865476,Od.applyMatrix4(t.matrixWorld),this.intersectsSphere(Od)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(Lg.x=r.normal.x>0?t.max.x:t.min.x,Lg.y=r.normal.y>0?t.max.y:t.min.y,Lg.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Lg)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function bO(){let i=null,t=!1,e=null,n=null;function r(s,o){e(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){i=s}}}function QK(i,t){const e=t.isWebGL2,n=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=n.get(c);d&&(i.deleteBuffer(d.buffer),n.delete(c))},update:function l(c,d){if(c.isGLBufferAttribute){const h=n.get(c);return void((!h||h.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const u=n.get(c);void 0===u?n.set(c,function r(c,d){const u=c.array,h=c.usage,f=i.createBuffer();let p;if(i.bindBuffer(d,f),i.bufferData(d,u,h),c.onUploadCallback(),u instanceof Float32Array)p=5126;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!e)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=5131}else p=5123;else if(u instanceof Int16Array)p=5122;else if(u instanceof Uint32Array)p=5125;else if(u instanceof Int32Array)p=5124;else if(u instanceof Int8Array)p=5120;else if(u instanceof Uint8Array)p=5121;else{if(!(u instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);p=5121}return{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}(c,d)):u.version<c.version&&(function s(c,d,u){const h=d.array,f=d.updateRange;i.bindBuffer(u,c),-1===f.count?i.bufferSubData(u,0,h):(e?i.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):i.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(u.buffer,c,d),u.version=c.version)}}}class Kh extends mt{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const s=t/2,o=e/2,a=Math.floor(n),l=Math.floor(r),c=a+1,d=l+1,u=t/a,h=e/l,f=[],p=[],m=[],g=[];for(let _=0;_<d;_++){const v=_*h-o;for(let b=0;b<c;b++)p.push(b*u-s,-v,0),m.push(0,0,1),g.push(b/a),g.push(1-_/l)}for(let _=0;_<l;_++)for(let v=0;v<a;v++){const x=v+c*(_+1),w=v+1+c*(_+1),S=v+1+c*_;f.push(v+c*_,x,S),f.push(x,w,S)}this.setIndex(f),this.setAttribute("position",new qe(p,3)),this.setAttribute("normal",new qe(m,3)),this.setAttribute("uv",new qe(g,2))}static fromJSON(t){return new Kh(t.width,t.height,t.widthSegments,t.heightSegments)}}const Ht={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ke={common:{diffuse:{value:new we(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ti},uv2Transform:{value:new Ti},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ne(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new we(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new we(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ti}},sprite:{diffuse:{value:new we(16777215)},opacity:{value:1},center:{value:new ne(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ti}}},Ks={basic:{uniforms:Gi([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.fog]),vertexShader:Ht.meshbasic_vert,fragmentShader:Ht.meshbasic_frag},lambert:{uniforms:Gi([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.fog,ke.lights,{emissive:{value:new we(0)}}]),vertexShader:Ht.meshlambert_vert,fragmentShader:Ht.meshlambert_frag},phong:{uniforms:Gi([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,ke.lights,{emissive:{value:new we(0)},specular:{value:new we(1118481)},shininess:{value:30}}]),vertexShader:Ht.meshphong_vert,fragmentShader:Ht.meshphong_frag},standard:{uniforms:Gi([ke.common,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.roughnessmap,ke.metalnessmap,ke.fog,ke.lights,{emissive:{value:new we(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ht.meshphysical_vert,fragmentShader:Ht.meshphysical_frag},toon:{uniforms:Gi([ke.common,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.gradientmap,ke.fog,ke.lights,{emissive:{value:new we(0)}}]),vertexShader:Ht.meshtoon_vert,fragmentShader:Ht.meshtoon_frag},matcap:{uniforms:Gi([ke.common,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,{matcap:{value:null}}]),vertexShader:Ht.meshmatcap_vert,fragmentShader:Ht.meshmatcap_frag},points:{uniforms:Gi([ke.points,ke.fog]),vertexShader:Ht.points_vert,fragmentShader:Ht.points_frag},dashed:{uniforms:Gi([ke.common,ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ht.linedashed_vert,fragmentShader:Ht.linedashed_frag},depth:{uniforms:Gi([ke.common,ke.displacementmap]),vertexShader:Ht.depth_vert,fragmentShader:Ht.depth_frag},normal:{uniforms:Gi([ke.common,ke.bumpmap,ke.normalmap,ke.displacementmap,{opacity:{value:1}}]),vertexShader:Ht.meshnormal_vert,fragmentShader:Ht.meshnormal_frag},sprite:{uniforms:Gi([ke.sprite,ke.fog]),vertexShader:Ht.sprite_vert,fragmentShader:Ht.sprite_frag},background:{uniforms:{uvTransform:{value:new Ti},t2D:{value:null}},vertexShader:Ht.background_vert,fragmentShader:Ht.background_frag},cube:{uniforms:Gi([ke.envmap,{opacity:{value:1}}]),vertexShader:Ht.cube_vert,fragmentShader:Ht.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ht.equirect_vert,fragmentShader:Ht.equirect_frag},distanceRGBA:{uniforms:Gi([ke.common,ke.displacementmap,{referencePosition:{value:new C},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ht.distanceRGBA_vert,fragmentShader:Ht.distanceRGBA_frag},shadow:{uniforms:Gi([ke.lights,ke.fog,{color:{value:new we(0)},opacity:{value:1}}]),vertexShader:Ht.shadow_vert,fragmentShader:Ht.shadow_frag}};function qQ(i,t,e,n,r,s){const o=new we(0);let l,c,a=!0===r?0:1,d=null,u=0,h=null;function p(m,g){e.buffers.color.setClear(m.r,m.g,m.b,g,s)}return{getClearColor:function(){return o},setClearColor:function(m,g=1){o.set(m),a=g,p(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(m){a=m,p(o,a)},render:function f(m,g){let _=!1,v=!0===g.isScene?g.background:null;v&&v.isTexture&&(v=t.get(v));const b=i.xr,x=b.getSession&&b.getSession();x&&"additive"===x.environmentBlendMode&&(v=null),null===v?p(o,a):v&&v.isColor&&(p(v,1),_=!0),(i.autoClear||_)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),v&&(v.isCubeTexture||306===v.mapping)?(void 0===c&&(c=new wi(new Il(1,1,1),new Cs({name:"BackgroundCubeMaterial",uniforms:kd(Ks.cube.uniforms),vertexShader:Ks.cube.vertexShader,fragmentShader:Ks.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,S,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,(d!==v||u!==v.version||h!==i.toneMapping)&&(c.material.needsUpdate=!0,d=v,u=v.version,h=i.toneMapping),m.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new wi(new Kh(2,2),new Cs({name:"BackgroundMaterial",uniforms:kd(Ks.background.uniforms),vertexShader:Ks.background.vertexShader,fragmentShader:Ks.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(l)),l.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),(d!==v||u!==v.version||h!==i.toneMapping)&&(l.material.needsUpdate=!0,d=v,u=v.version,h=i.toneMapping),m.unshift(l,l.geometry,l.material,0,0,null))}}}function YQ(i,t,e,n){const r=i.getParameter(34921),s=n.isWebGL2?null:t.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,a={},l=g(null);let c=l,d=!1;function f(z){return n.isWebGL2?i.bindVertexArray(z):s.bindVertexArrayOES(z)}function p(z){return n.isWebGL2?i.deleteVertexArray(z):s.deleteVertexArrayOES(z)}function g(z){const j=[],L=[],U=[];for(let P=0;P<r;P++)j[P]=0,L[P]=0,U[P]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:L,attributeDivisors:U,object:z,attributes:{},index:null}}function b(){const z=c.newAttributes;for(let j=0,L=z.length;j<L;j++)z[j]=0}function x(z){w(z,0)}function w(z,j){const U=c.enabledAttributes,P=c.attributeDivisors;c.newAttributes[z]=1,0===U[z]&&(i.enableVertexAttribArray(z),U[z]=1),P[z]!==j&&((n.isWebGL2?i:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,j),P[z]=j)}function S(){const z=c.newAttributes,j=c.enabledAttributes;for(let L=0,U=j.length;L<U;L++)j[L]!==z[L]&&(i.disableVertexAttribArray(L),j[L]=0)}function T(z,j,L,U,P,$){!0!==n.isWebGL2||5124!==L&&5125!==L?i.vertexAttribPointer(z,j,L,U,P,$):i.vertexAttribIPointer(z,j,L,P,$)}function R(){K(),d=!0,c!==l&&(c=l,f(c.object))}function K(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function u(z,j,L,U,P){let $=!1;if(o){const ee=function m(z,j,L){const U=!0===L.wireframe;let P=a[z.id];void 0===P&&(P={},a[z.id]=P);let $=P[j.id];void 0===$&&($={},P[j.id]=$);let ee=$[U];return void 0===ee&&(ee=g(function h(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),$[U]=ee),ee}(U,L,j);c!==ee&&(c=ee,f(c.object)),$=function _(z,j){const L=c.attributes,U=z.attributes;let P=0;for(const $ in U){const ee=L[$],pe=U[$];if(void 0===ee||ee.attribute!==pe||ee.data!==pe.data)return!0;P++}return c.attributesNum!==P||c.index!==j}(U,P),$&&function v(z,j){const L={},U=z.attributes;let P=0;for(const $ in U){const ee=U[$],pe={};pe.attribute=ee,ee.data&&(pe.data=ee.data),L[$]=pe,P++}c.attributes=L,c.attributesNum=P,c.index=j}(U,P)}else{const ee=!0===j.wireframe;(c.geometry!==U.id||c.program!==L.id||c.wireframe!==ee)&&(c.geometry=U.id,c.program=L.id,c.wireframe=ee,$=!0)}!0===z.isInstancedMesh&&($=!0),null!==P&&e.update(P,34963),($||d)&&(d=!1,function I(z,j,L,U){if(!1===n.isWebGL2&&(z.isInstancedMesh||U.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;b();const P=U.attributes,$=L.getAttributes(),ee=j.defaultAttributeValues;for(const pe in $){const se=$[pe];if(se.location>=0){let Ge=P[pe];if(void 0===Ge&&("instanceMatrix"===pe&&z.instanceMatrix&&(Ge=z.instanceMatrix),"instanceColor"===pe&&z.instanceColor&&(Ge=z.instanceColor)),void 0!==Ge){const ze=Ge.normalized,ct=Ge.itemSize,ie=e.get(Ge);if(void 0===ie)continue;const gt=ie.buffer,dt=ie.type,st=ie.bytesPerElement;if(Ge.isInterleavedBufferAttribute){const ye=Ge.data,Ct=ye.stride,re=Ge.offset;if(ye.isInstancedInterleavedBuffer){for(let ae=0;ae<se.locationSize;ae++)w(se.location+ae,ye.meshPerAttribute);!0!==z.isInstancedMesh&&void 0===U._maxInstanceCount&&(U._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let ae=0;ae<se.locationSize;ae++)x(se.location+ae);i.bindBuffer(34962,gt);for(let ae=0;ae<se.locationSize;ae++)T(se.location+ae,ct/se.locationSize,dt,ze,Ct*st,(re+ct/se.locationSize*ae)*st)}else{if(Ge.isInstancedBufferAttribute){for(let ye=0;ye<se.locationSize;ye++)w(se.location+ye,Ge.meshPerAttribute);!0!==z.isInstancedMesh&&void 0===U._maxInstanceCount&&(U._maxInstanceCount=Ge.meshPerAttribute*Ge.count)}else for(let ye=0;ye<se.locationSize;ye++)x(se.location+ye);i.bindBuffer(34962,gt);for(let ye=0;ye<se.locationSize;ye++)T(se.location+ye,ct/se.locationSize,dt,ze,ct*st,ct/se.locationSize*ye*st)}}else if(void 0!==ee){const ze=ee[pe];if(void 0!==ze)switch(ze.length){case 2:i.vertexAttrib2fv(se.location,ze);break;case 3:i.vertexAttrib3fv(se.location,ze);break;case 4:i.vertexAttrib4fv(se.location,ze);break;default:i.vertexAttrib1fv(se.location,ze)}}}}S()}(z,j,L,U),null!==P&&i.bindBuffer(34963,e.get(P).buffer))},reset:R,resetDefaultState:K,dispose:function V(){R();for(const z in a){const j=a[z];for(const L in j){const U=j[L];for(const P in U)p(U[P].object),delete U[P];delete j[L]}delete a[z]}},releaseStatesOfGeometry:function N(z){if(void 0===a[z.id])return;const j=a[z.id];for(const L in j){const U=j[L];for(const P in U)p(U[P].object),delete U[P];delete j[L]}delete a[z.id]},releaseStatesOfProgram:function M(z){for(const j in a){const L=a[j];if(void 0===L[z.id])continue;const U=L[z.id];for(const P in U)p(U[P].object),delete U[P];delete L[z.id]}},initAttributes:b,enableAttribute:x,disableUnusedAttributes:S}}function KQ(i,t,e,n){const r=n.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,d){i.drawArrays(s,c,d),e.update(d,s,1)},this.renderInstances=function l(c,d,u){if(0===u)return;let h,f;if(r)h=i,f="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,c,d,u),e.update(d,s,u)}}function XQ(i,t,e){let n;function s(T){if("highp"===T){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";T="mediump"}return"mediump"===T&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&i instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&i instanceof WebGL2ComputeRenderingContext;let a=void 0!==e.precision?e.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||t.has("WEBGL_draw_buffers"),d=!0===e.logarithmicDepthBuffer,u=i.getParameter(34930),h=i.getParameter(35660),f=i.getParameter(3379),p=i.getParameter(34076),m=i.getParameter(34921),g=i.getParameter(36347),_=i.getParameter(36348),v=i.getParameter(36349),b=h>0,x=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){const T=t.get("EXT_texture_filter_anisotropic");n=i.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:u,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:_,maxFragmentUniforms:v,vertexTextures:b,floatFragmentTextures:x,floatVertexTextures:b&&x,maxSamples:o?i.getParameter(36183):0}}function QQ(i){const t=this;let e=null,n=0,r=!1,s=!1;const o=new Bo,a=new Ti,l={value:null,needsUpdate:!1};function c(){l.value!==e&&(l.value=e,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function d(u,h,f,p){const m=null!==u?u.length:0;let g=null;if(0!==m){if(g=l.value,!0!==p||null===g){const _=f+4*m,v=h.matrixWorldInverse;a.getNormalMatrix(v),(null===g||g.length<_)&&(g=new Float32Array(_));for(let b=0,x=f;b!==m;++b,x+=4)o.copy(u[b]).applyMatrix4(v,a),o.normal.toArray(g,x),g[x+3]=o.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=m,t.numIntersection=0,g}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h,f){const p=0!==u.length||h||0!==n||r;return r=h,e=d(u,f,0),n=u.length,p},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1,c()},this.setState=function(u,h,f){const p=u.clippingPlanes,m=u.clipIntersection,g=u.clipShadows,_=i.get(u);if(!r||null===p||0===p.length||s&&!g)s?d(null):c();else{const v=s?0:n,b=4*v;let x=_.clippingState||null;l.value=x,x=d(p,h,b,f);for(let w=0;w!==b;++w)x[w]=e[w];_.clippingState=x,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=v}}}function ZQ(i){let t=new WeakMap;function e(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=t.get(a);void 0!==l&&(t.delete(a),l.dispose())}return{get:function n(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(t.has(o))return e(t.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new vO(l.height/2);return c.fromEquirectangularTexture(i,o),t.set(o,c),o.addEventListener("dispose",r),e(c.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}Ks.physical={uniforms:Gi([Ks.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ne(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new we(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ne},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new we(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new we(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ht.meshphysical_vert,fragmentShader:Ht.meshphysical_frag};class Xh extends Fg{constructor(t=-1,e=1,n=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-t,o=n+t,a=r+e,l=r-e;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}Xh.prototype.isOrthographicCamera=!0;const xO=[.125,.215,.35,.446,.526,.582],uw=new Xh,wO=new we;let hw=null;const Ol=(1+Math.sqrt(5))/2,Ld=1/Ol,MO=[new C(1,1,1),new C(-1,1,1),new C(1,1,-1),new C(-1,1,-1),new C(0,Ol,Ld),new C(0,Ol,-Ld),new C(Ld,0,Ol),new C(-Ld,0,Ol),new C(Ol,Ld,0),new C(-Ol,Ld,0)];class CO{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){hw=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,n,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=EO(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=DO(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(hw),t.scissorTest=!1,Bg(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(301===t.mapping||302===t.mapping?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),hw=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize-32,n={magFilter:vn,minFilter:vn,generateMipmaps:!1,type:Ys,format:Wr,encoding:vs,depthBuffer:!1},r=SO(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=SO(t,e,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function JQ(i){const t=[],e=[],n=[];let r=i;const s=i-4+1+xO.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);e.push(a);let l=1/a;o>i-4?l=xO[o-i+4-1]:0===o&&(l=0),n.push(l);const c=1/(a-1),d=-c/2,u=1+c/2,h=[d,d,u,d,u,u,d,d,u,u,d,u],f=6,p=6,m=3,g=2,_=1,v=new Float32Array(m*p*f),b=new Float32Array(g*p*f),x=new Float32Array(_*p*f);for(let S=0;S<f;S++){const T=S%3*2/3-1,I=S>2?0:-1;v.set([T,I,0,T+2/3,I,0,T+2/3,I+1,0,T,I,0,T+2/3,I+1,0,T,I+1,0],m*p*S),b.set(h,g*p*S),x.set([S,S,S,S,S,S],_*p*S)}const w=new mt;w.setAttribute("position",new hn(v,m)),w.setAttribute("uv",new hn(b,g)),w.setAttribute("faceIndex",new hn(x,_)),t.push(w),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:n}}(s)),this._blurMaterial=function eZ(i,t,e){const n=new Float32Array(20),r=new C(0,1,0);return new Cs({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new wi(this._lodPlanes[0],t);this._renderer.compile(e,uw)}_sceneToCubeUV(t,e,n,r){const a=new Mi(90,1,e,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,u=d.autoClear,h=d.toneMapping;d.getClearColor(wO),d.toneMapping=0,d.autoClear=!1;const f=new Dr({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new wi(new Il,f);let m=!1;const g=t.background;g?g.isColor&&(f.color.copy(g),t.background=null,m=!0):(f.color.copy(wO),m=!0);for(let _=0;_<6;_++){const v=_%3;0===v?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):1===v?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const b=this._cubeSize;Bg(r,v*b,_>2?b:0,b,b),d.setRenderTarget(r),m&&d.render(p,a),d.render(t,a)}p.geometry.dispose(),p.material.dispose(),d.toneMapping=h,d.autoClear=u,t.background=g}_textureToCubeUV(t,e){const n=this._renderer,r=301===t.mapping||302===t.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=EO()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=DO());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new wi(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const l=this._cubeSize;Bg(e,0,0,3*l,2*l),n.setRenderTarget(e),n.render(o,uw)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(t,r-1,r,s,MO[(r-1)%MO.length])}e.autoClear=n}_blur(t,e,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",s),this._halfBlur(o,t,n,n,r,"longitudinal",s)}_halfBlur(t,e,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new wi(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[n]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,m=s/p,g=isFinite(s)?1+Math.floor(3*m):20;g>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const _=[];let v=0;for(let T=0;T<20;++T){const I=T/m,V=Math.exp(-I*I/2);_.push(V),0===T?v+=V:T<g&&(v+=2*V)}for(let T=0;T<_.length;T++)_[T]=_[T]/v;h.envMap.value=t.texture,h.samples.value=g,h.weights.value=_,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:b}=this;h.dTheta.value=p,h.mipInt.value=b-n;const x=this._sizeLods[r];Bg(e,3*x*(r>b-4?r-b+4:0),4*(this._cubeSize-x),3*x,2*x),l.setRenderTarget(e),l.render(u,uw)}}function SO(i,t,e){const n=new Mr(i,t,e);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Bg(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function DO(){return new Cs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function EO(){return new Cs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function tZ(i){let t=new WeakMap,e=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=t.get(l);void 0!==c&&(t.delete(l),c.dispose())}return{get:function n(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,d=301===l||302===l;if(c||d){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let u=t.get(a);return null===e&&(e=new CO(i)),u=c?e.fromEquirectangular(a,u):e.fromCubemap(a,u),t.set(a,u),u.texture}if(t.has(a))return t.get(a).texture;{const u=a.image;if(c&&u&&u.height>0||d&&u&&function r(a){let l=0;for(let d=0;d<6;d++)void 0!==a[d]&&l++;return 6===l}(u)){null===e&&(e=new CO(i));const h=c?e.fromEquirectangular(a):e.fromCubemap(a);return t.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function nZ(i){const t={};function e(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return t[n]=r,r}return{has:function(n){return null!==e(n)},init:function(n){n.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(n){const r=e(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function iZ(i,t,e,n){const r={},s=new WeakMap;function o(u){const h=u.target;null!==h.index&&t.remove(h.index);for(const p in h.attributes)t.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(t.remove(f),s.delete(h)),n.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,e.memory.geometries--}function c(u){const h=[],f=u.index,p=u.attributes.position;let m=0;if(null!==f){const v=f.array;m=f.version;for(let b=0,x=v.length;b<x;b+=3){const w=v[b+0],S=v[b+1],T=v[b+2];h.push(w,S,S,T,T,w)}}else{m=p.version;for(let b=0,x=p.array.length/3-1;b<x;b+=3){const w=b+0,S=b+1,T=b+2;h.push(w,S,S,T,T,w)}}const g=new(rO(h)?_O:gO)(h,1);g.version=m;const _=s.get(u);_&&t.remove(_),s.set(u,g)}return{get:function a(u,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,e.memory.geometries++),h},update:function l(u){const h=u.attributes;for(const p in h)t.update(h[p],34962);const f=u.morphAttributes;for(const p in f){const m=f[p];for(let g=0,_=m.length;g<_;g++)t.update(m[g],34962)}},getWireframeAttribute:function d(u){const h=s.get(u);if(h){const f=u.index;null!==f&&h.version<f.version&&c(u)}else c(u);return s.get(u)}}}function rZ(i,t,e,n){const r=n.isWebGL2;let s,a,l;this.setMode=function o(h){s=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function d(h,f){i.drawElements(s,f,a,h*l),e.update(f,s,1)},this.renderInstances=function u(h,f,p){if(0===p)return;let m,g;if(r)m=i,g="drawElementsInstanced";else if(m=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[g](s,f,a,h*l,p),e.update(f,s,p)}}function sZ(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function n(s,o,a){switch(e.calls++,o){case 4:e.triangles+=a*(s/3);break;case 1:e.lines+=a*(s/2);break;case 3:e.lines+=a*(s-1);break;case 2:e.lines+=a*s;break;case 0:e.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function oZ(i,t){return i[0]-t[0]}function aZ(i,t){return Math.abs(t[1])-Math.abs(i[1])}function pw(i,t){let e=1;const n=t.isInterleavedBufferAttribute?t.data.array:t.array;n instanceof Int8Array?e=127:n instanceof Int16Array?e=32767:n instanceof Int32Array?e=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",n),i.divideScalar(e)}function lZ(i,t,e){const n={},r=new Float32Array(8),s=new WeakMap,o=new ln,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,d,u,h){const f=c.morphTargetInfluences;if(!0===t.isWebGL2){const p=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,m=void 0!==p?p.length:0;let g=s.get(d);if(void 0===g||g.count!==m){let j=function(){K.dispose(),s.delete(d),d.removeEventListener("dispose",j)};void 0!==g&&g.texture.dispose();const b=void 0!==d.morphAttributes.position,x=void 0!==d.morphAttributes.normal,w=void 0!==d.morphAttributes.color,S=d.morphAttributes.position||[],T=d.morphAttributes.normal||[],I=d.morphAttributes.color||[];let V=0;!0===b&&(V=1),!0===x&&(V=2),!0===w&&(V=3);let N=d.attributes.position.count*V,M=1;N>t.maxTextureSize&&(M=Math.ceil(N/t.maxTextureSize),N=t.maxTextureSize);const R=new Float32Array(N*M*4*m),K=new yg(R,N,M,m);K.type=ys,K.needsUpdate=!0;const z=4*V;for(let L=0;L<m;L++){const U=S[L],P=T[L],$=I[L],ee=N*M*4*L;for(let pe=0;pe<U.count;pe++){const se=pe*z;!0===b&&(o.fromBufferAttribute(U,pe),!0===U.normalized&&pw(o,U),R[ee+se+0]=o.x,R[ee+se+1]=o.y,R[ee+se+2]=o.z,R[ee+se+3]=0),!0===x&&(o.fromBufferAttribute(P,pe),!0===P.normalized&&pw(o,P),R[ee+se+4]=o.x,R[ee+se+5]=o.y,R[ee+se+6]=o.z,R[ee+se+7]=0),!0===w&&(o.fromBufferAttribute($,pe),!0===$.normalized&&pw(o,$),R[ee+se+8]=o.x,R[ee+se+9]=o.y,R[ee+se+10]=o.z,R[ee+se+11]=4===$.itemSize?o.w:1)}}g={count:m,texture:K,size:new ne(N,M)},s.set(d,g),d.addEventListener("dispose",j)}let _=0;for(let b=0;b<f.length;b++)_+=f[b];const v=d.morphTargetsRelative?1:1-_;h.getUniforms().setValue(i,"morphTargetBaseInfluence",v),h.getUniforms().setValue(i,"morphTargetInfluences",f),h.getUniforms().setValue(i,"morphTargetsTexture",g.texture,e),h.getUniforms().setValue(i,"morphTargetsTextureSize",g.size)}else{const p=void 0===f?0:f.length;let m=n[d.id];if(void 0===m||m.length!==p){m=[];for(let x=0;x<p;x++)m[x]=[x,0];n[d.id]=m}for(let x=0;x<p;x++){const w=m[x];w[0]=x,w[1]=f[x]}m.sort(aZ);for(let x=0;x<8;x++)x<p&&m[x][1]?(a[x][0]=m[x][0],a[x][1]=m[x][1]):(a[x][0]=Number.MAX_SAFE_INTEGER,a[x][1]=0);a.sort(oZ);const g=d.morphAttributes.position,_=d.morphAttributes.normal;let v=0;for(let x=0;x<8;x++){const w=a[x],S=w[0],T=w[1];S!==Number.MAX_SAFE_INTEGER&&T?(g&&d.getAttribute("morphTarget"+x)!==g[S]&&d.setAttribute("morphTarget"+x,g[S]),_&&d.getAttribute("morphNormal"+x)!==_[S]&&d.setAttribute("morphNormal"+x,_[S]),r[x]=T,v+=T):(g&&!0===d.hasAttribute("morphTarget"+x)&&d.deleteAttribute("morphTarget"+x),_&&!0===d.hasAttribute("morphNormal"+x)&&d.deleteAttribute("morphNormal"+x),r[x]=0)}const b=d.morphTargetsRelative?1:1-v;h.getUniforms().setValue(i,"morphTargetBaseInfluence",b),h.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function cZ(i,t,e,n){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),e.remove(c.instanceMatrix),null!==c.instanceColor&&e.remove(c.instanceColor)}return{update:function s(l){const c=n.render.frame,u=t.get(l,l.geometry);return r.get(u)!==c&&(t.update(u),r.set(u,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),e.update(l.instanceMatrix,34962),null!==l.instanceColor&&e.update(l.instanceColor,34962)),u},dispose:function o(){r=new WeakMap}}}const AO=new zi,TO=new yg,RO=new j0,kO=new Yh,IO=[],PO=[],OO=new Float32Array(16),FO=new Float32Array(9),LO=new Float32Array(4);function Nd(i,t,e){const n=i[0];if(n<=0||n>0)return i;const r=t*e;let s=IO[r];if(void 0===s&&(s=new Float32Array(r),IO[r]=s),0!==t){n.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=e,i[o].toArray(s,a)}return s}function nr(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function ji(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function Vg(i,t){let e=PO[t];void 0===e&&(e=new Int32Array(t),PO[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function dZ(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function uZ(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(nr(e,t))return;i.uniform2fv(this.addr,t),ji(e,t)}}function hZ(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(nr(e,t))return;i.uniform3fv(this.addr,t),ji(e,t)}}function fZ(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(nr(e,t))return;i.uniform4fv(this.addr,t),ji(e,t)}}function pZ(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(nr(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),ji(e,t)}else{if(nr(e,n))return;LO.set(n),i.uniformMatrix2fv(this.addr,!1,LO),ji(e,n)}}function mZ(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(nr(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),ji(e,t)}else{if(nr(e,n))return;FO.set(n),i.uniformMatrix3fv(this.addr,!1,FO),ji(e,n)}}function gZ(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(nr(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),ji(e,t)}else{if(nr(e,n))return;OO.set(n),i.uniformMatrix4fv(this.addr,!1,OO),ji(e,n)}}function _Z(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function yZ(i,t){const e=this.cache;nr(e,t)||(i.uniform2iv(this.addr,t),ji(e,t))}function vZ(i,t){const e=this.cache;nr(e,t)||(i.uniform3iv(this.addr,t),ji(e,t))}function bZ(i,t){const e=this.cache;nr(e,t)||(i.uniform4iv(this.addr,t),ji(e,t))}function xZ(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function wZ(i,t){const e=this.cache;nr(e,t)||(i.uniform2uiv(this.addr,t),ji(e,t))}function MZ(i,t){const e=this.cache;nr(e,t)||(i.uniform3uiv(this.addr,t),ji(e,t))}function CZ(i,t){const e=this.cache;nr(e,t)||(i.uniform4uiv(this.addr,t),ji(e,t))}function SZ(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2D(t||AO,r)}function DZ(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||RO,r)}function EZ(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||kO,r)}function AZ(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||TO,r)}function RZ(i,t){i.uniform1fv(this.addr,t)}function kZ(i,t){const e=Nd(t,this.size,2);i.uniform2fv(this.addr,e)}function IZ(i,t){const e=Nd(t,this.size,3);i.uniform3fv(this.addr,e)}function PZ(i,t){const e=Nd(t,this.size,4);i.uniform4fv(this.addr,e)}function OZ(i,t){const e=Nd(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function FZ(i,t){const e=Nd(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function LZ(i,t){const e=Nd(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function NZ(i,t){i.uniform1iv(this.addr,t)}function BZ(i,t){i.uniform2iv(this.addr,t)}function VZ(i,t){i.uniform3iv(this.addr,t)}function HZ(i,t){i.uniform4iv(this.addr,t)}function UZ(i,t){i.uniform1uiv(this.addr,t)}function zZ(i,t){i.uniform2uiv(this.addr,t)}function GZ(i,t){i.uniform3uiv(this.addr,t)}function jZ(i,t){i.uniform4uiv(this.addr,t)}function WZ(i,t,e){const n=t.length,r=Vg(e,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)e.setTexture2D(t[s]||AO,r[s])}function $Z(i,t,e){const n=t.length,r=Vg(e,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)e.setTexture3D(t[s]||RO,r[s])}function qZ(i,t,e){const n=t.length,r=Vg(e,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)e.setTextureCube(t[s]||kO,r[s])}function YZ(i,t,e){const n=t.length,r=Vg(e,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)e.setTexture2DArray(t[s]||TO,r[s])}function XZ(i,t,e){this.id=i,this.addr=e,this.cache=[],this.setValue=function TZ(i){switch(i){case 5126:return dZ;case 35664:return uZ;case 35665:return hZ;case 35666:return fZ;case 35674:return pZ;case 35675:return mZ;case 35676:return gZ;case 5124:case 35670:return _Z;case 35667:case 35671:return yZ;case 35668:case 35672:return vZ;case 35669:case 35673:return bZ;case 5125:return xZ;case 36294:return wZ;case 36295:return MZ;case 36296:return CZ;case 35678:case 36198:case 36298:case 36306:case 35682:return SZ;case 35679:case 36299:case 36307:return DZ;case 35680:case 36300:case 36308:case 36293:return EZ;case 36289:case 36303:case 36311:case 36292:return AZ}}(t.type)}function NO(i,t,e){this.id=i,this.addr=e,this.cache=[],this.size=t.size,this.setValue=function KZ(i){switch(i){case 5126:return RZ;case 35664:return kZ;case 35665:return IZ;case 35666:return PZ;case 35674:return OZ;case 35675:return FZ;case 35676:return LZ;case 5124:case 35670:return NZ;case 35667:case 35671:return BZ;case 35668:case 35672:return VZ;case 35669:case 35673:return HZ;case 5125:return UZ;case 36294:return zZ;case 36295:return GZ;case 36296:return jZ;case 35678:case 36198:case 36298:case 36306:case 35682:return WZ;case 35679:case 36299:case 36307:return $Z;case 35680:case 36300:case 36308:case 36293:return qZ;case 36289:case 36303:case 36311:case 36292:return YZ}}(t.type)}function BO(i){this.id=i,this.seq=[],this.map={}}NO.prototype.updateCache=function(i){const t=this.cache;i instanceof Float32Array&&t.length!==i.length&&(this.cache=new Float32Array(i.length)),ji(t,i)},BO.prototype.setValue=function(i,t,e){const n=this.seq;for(let r=0,s=n.length;r!==s;++r){const o=n[r];o.setValue(i,t[o.id],e)}};const mw=/(\w+)(\])?(\[|\.)?/g;function VO(i,t){i.seq.push(t),i.map[t.id]=t}function QZ(i,t,e){const n=i.name,r=n.length;for(mw.lastIndex=0;;){const s=mw.exec(n),o=mw.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){VO(e,void 0===c?new XZ(a,i,t):new NO(a,i,t));break}{let u=e.map[a];void 0===u&&(u=new BO(a),VO(e,u)),e=u}}}function Aa(i,t){this.seq=[],this.map={};const e=i.getProgramParameter(t,35718);for(let n=0;n<e;++n){const r=i.getActiveUniform(t,n);QZ(r,i.getUniformLocation(t,r.name),this)}}function HO(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}Aa.prototype.setValue=function(i,t,e,n){const r=this.map[t];void 0!==r&&r.setValue(i,e,n)},Aa.prototype.setOptional=function(i,t,e){const n=t[e];void 0!==n&&this.setValue(i,e,n)},Aa.upload=function(i,t,e,n){for(let r=0,s=t.length;r!==s;++r){const o=t[r],a=e[o.id];!1!==a.needsUpdate&&o.setValue(i,a.value,n)}},Aa.seqWithValue=function(i,t){const e=[];for(let n=0,r=i.length;n!==r;++n){const s=i[n];s.id in t&&e.push(s)}return e};let ZZ=0;function UO(i,t,e){const n=i.getShaderParameter(t,35713),r=i.getShaderInfoLog(t).trim();if(n&&""===r)return"";const s=parseInt(/ERROR: 0:(\d+)/.exec(r)[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function JZ(i,t){const e=i.split("\n"),n=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++)n.push(o+1+": "+e[o]);return n.join("\n")}(i.getShaderSource(t),s)}function tJ(i,t){const e=function eJ(i){switch(i){case vs:return["Linear","( value )"];case Jt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(t);return"vec4 "+i+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function nJ(i,t){let e;switch(t){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="OptimizedCineon";break;case 4:e="ACESFilmic";break;case 5:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function Qh(i){return""!==i}function zO(i,t){return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function GO(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const oJ=/^[ \t]*#include +<([\w\d./]+)>/gm;function gw(i){return i.replace(oJ,aJ)}function aJ(i,t){const e=Ht[t];if(void 0===e)throw new Error("Can not resolve #include <"+t+">");return gw(e)}const lJ=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,cJ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function jO(i){return i.replace(cJ,WO).replace(lJ,dJ)}function dJ(i,t,e,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),WO(0,t,e,n)}function WO(i,t,e,n){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function $O(i){let t="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?t+="\n#define HIGH_PRECISION":"mediump"===i.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(t+="\n#define LOW_PRECISION"),t}function gJ(i,t,e,n){const r=i.getContext(),s=e.defines;let o=e.vertexShader,a=e.fragmentShader;const l=function uJ(i){let t="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(e),c=function hJ(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),d=function fJ(i){let t="ENVMAP_MODE_REFLECTION";return i.envMap&&302===i.envMapMode&&(t="ENVMAP_MODE_REFRACTION"),t}(e),u=function pJ(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(e),h=function mJ(i){const t=i.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t/32+1)+3,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}(e),f=e.isWebGL2?"":function iJ(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Qh).join("\n")}(e),p=function rJ(i){const t=[];for(const e in i){const n=i[e];!1!==n&&t.push("#define "+e+" "+n)}return t.join("\n")}(s),m=r.createProgram();let g,_,v=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(g=[p].filter(Qh).join("\n"),g.length>0&&(g+="\n"),_=[f,p].filter(Qh).join("\n"),_.length>0&&(_+="\n")):(g=[$O(e),"#define SHADER_NAME "+e.shaderName,p,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+e.maxBones,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Qh).join("\n"),_=[f,$O(e),"#define SHADER_NAME "+e.shaderName,p,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+c:"",e.envMap?"#define "+d:"",e.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==e.toneMapping?"#define TONE_MAPPING":"",0!==e.toneMapping?Ht.tonemapping_pars_fragment:"",0!==e.toneMapping?nJ("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Ht.encodings_pars_fragment,tJ("linearToOutputTexel",e.outputEncoding),e.depthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(Qh).join("\n")),o=gw(o),o=zO(o,e),o=GO(o,e),a=gw(a),a=zO(a,e),a=GO(a,e),o=jO(o),a=jO(a),e.isWebGL2&&!0!==e.isRawShaderMaterial&&(v="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,_=["#define varying in","300 es"===e.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===e.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const x=v+_+a,w=HO(r,35633,v+g+o),S=HO(r,35632,x);if(r.attachShader(m,w),r.attachShader(m,S),void 0!==e.index0AttributeName?r.bindAttribLocation(m,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),i.debug.checkShaderErrors){const V=r.getProgramInfoLog(m).trim(),N=r.getShaderInfoLog(w).trim(),M=r.getShaderInfoLog(S).trim();let R=!0,K=!0;if(!1===r.getProgramParameter(m,35714)){R=!1;const z=UO(r,w,"vertex"),j=UO(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+V+"\n"+z+"\n"+j)}else""!==V?console.warn("THREE.WebGLProgram: Program Info Log:",V):(""===N||""===M)&&(K=!1);K&&(this.diagnostics={runnable:R,programLog:V,vertexShader:{log:N,prefix:g},fragmentShader:{log:M,prefix:_}})}let T,I;return r.deleteShader(w),r.deleteShader(S),this.getUniforms=function(){return void 0===T&&(T=new Aa(r,m)),T},this.getAttributes=function(){return void 0===I&&(I=function sJ(i,t){const e={},n=i.getProgramParameter(t,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(t,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),e[o]={type:s.type,location:i.getAttribLocation(t,o),locationSize:a}}return e}(r,m)),I},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=e.shaderName,this.id=ZZ++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=S,this}let _J=0;class yJ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}_getShaderStage(t){const e=this.shaderCache;if(!1===e.has(t)){const n=new vJ(t);e.set(t,n)}return e.get(t)}}class vJ{constructor(t){this.id=_J++,this.code=t,this.usedTimes=0}}function bJ(i,t,e,n,r,s,o){const a=new Z0,l=new yJ,c=[],d=r.isWebGL2,u=r.logarithmicDepthBuffer,h=r.floatVertexTextures,f=r.maxVertexUniforms,p=r.vertexTextures;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function v(M,R,K,z,j){const L=z.fog,U=j.geometry,$=(M.isMeshStandardMaterial?e:t).get(M.envMap||(M.isMeshStandardMaterial?z.environment:null)),ee=$&&306===$.mapping?$.image.height:null,pe=g[M.type],se=j.isSkinnedMesh?function _(M){const K=M.skeleton.bones;if(h)return 1024;{const j=Math.floor((f-20)/4),L=Math.min(j,K.length);return L<K.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+K.length+" bones. This GPU supports "+L+"."),0):L}}(j):0;null!==M.precision&&(m=r.getMaxPrecision(M.precision),m!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",m,"instead."));const Ge=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,ze=void 0!==Ge?Ge.length:0;let ie,gt,dt,st,ct=0;if(void 0!==U.morphAttributes.position&&(ct=1),void 0!==U.morphAttributes.normal&&(ct=2),void 0!==U.morphAttributes.color&&(ct=3),pe){const be=Ks[pe];ie=be.vertexShader,gt=be.fragmentShader}else ie=M.vertexShader,gt=M.fragmentShader,l.update(M),dt=l.getVertexShaderID(M),st=l.getFragmentShaderID(M);const ye=i.getRenderTarget(),re=M.clearcoat>0;return{isWebGL2:d,shaderID:pe,shaderName:M.type,vertexShader:ie,fragmentShader:gt,defines:M.defines,customVertexShaderID:dt,customFragmentShaderID:st,isRawShaderMaterial:!0===M.isRawShaderMaterial,glslVersion:M.glslVersion,precision:m,instancing:!0===j.isInstancedMesh,instancingColor:!0===j.isInstancedMesh&&null!==j.instanceColor,supportsVertexTextures:p,outputEncoding:null===ye?i.outputEncoding:!0===ye.isXRRenderTarget?ye.texture.encoding:vs,map:!!M.map,matcap:!!M.matcap,envMap:!!$,envMapMode:$&&$.mapping,envMapCubeUVHeight:ee,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:1===M.normalMapType,tangentSpaceNormalMap:0===M.normalMapType,decodeVideoTexture:!!M.map&&!0===M.map.isVideoTexture&&M.map.encoding===Jt,clearcoat:re,clearcoatMap:re&&!!M.clearcoatMap,clearcoatRoughnessMap:re&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:re&&!!M.clearcoatNormalMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:!1===M.transparent&&1===M.blending,alphaMap:!!M.alphaMap,alphaTest:M.alphaTest>0,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!U.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:!0===M.vertexColors&&!!U.attributes.color&&4===U.attributes.color.itemSize,vertexUvs:!!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatMap||M.clearcoatRoughnessMap||M.clearcoatNormalMap||M.displacementMap||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheenColorMap||M.sheenRoughnessMap),uvsVertexOnly:!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatNormalMap||M.transmission>0||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheen>0||M.sheenColorMap||M.sheenRoughnessMap||!M.displacementMap),fog:!!L,useFog:M.fog,fogExp2:L&&L.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===j.isSkinnedMesh&&se>0,maxBones:se,useVertexTexture:h,morphTargets:void 0!==U.morphAttributes.position,morphNormals:void 0!==U.morphAttributes.normal,morphColors:void 0!==U.morphAttributes.color,morphTargetsCount:ze,morphTextureStride:ct,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:i.shadowMap.enabled&&K.length>0,shadowMapType:i.shadowMap.type,toneMapping:M.toneMapped?i.toneMapping:0,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:2===M.side,flipSided:1===M.side,depthPacking:void 0!==M.depthPacking&&M.depthPacking,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||n.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}},getProgramCacheKey:function b(M){const R=[];if(M.shaderID?R.push(M.shaderID):(R.push(M.customVertexShaderID),R.push(M.customFragmentShaderID)),void 0!==M.defines)for(const K in M.defines)R.push(K),R.push(M.defines[K]);return!1===M.isRawShaderMaterial&&(function x(M,R){M.push(R.precision),M.push(R.outputEncoding),M.push(R.envMapMode),M.push(R.envMapCubeUVHeight),M.push(R.combine),M.push(R.vertexUvs),M.push(R.fogExp2),M.push(R.sizeAttenuation),M.push(R.maxBones),M.push(R.morphTargetsCount),M.push(R.morphAttributeCount),M.push(R.numDirLights),M.push(R.numPointLights),M.push(R.numSpotLights),M.push(R.numHemiLights),M.push(R.numRectAreaLights),M.push(R.numDirLightShadows),M.push(R.numPointLightShadows),M.push(R.numSpotLightShadows),M.push(R.shadowMapType),M.push(R.toneMapping),M.push(R.numClippingPlanes),M.push(R.numClipIntersection)}(R,M),function w(M,R){a.disableAll(),R.isWebGL2&&a.enable(0),R.supportsVertexTextures&&a.enable(1),R.instancing&&a.enable(2),R.instancingColor&&a.enable(3),R.map&&a.enable(4),R.matcap&&a.enable(5),R.envMap&&a.enable(6),R.lightMap&&a.enable(7),R.aoMap&&a.enable(8),R.emissiveMap&&a.enable(9),R.bumpMap&&a.enable(10),R.normalMap&&a.enable(11),R.objectSpaceNormalMap&&a.enable(12),R.tangentSpaceNormalMap&&a.enable(13),R.clearcoat&&a.enable(14),R.clearcoatMap&&a.enable(15),R.clearcoatRoughnessMap&&a.enable(16),R.clearcoatNormalMap&&a.enable(17),R.displacementMap&&a.enable(18),R.specularMap&&a.enable(19),R.roughnessMap&&a.enable(20),R.metalnessMap&&a.enable(21),R.gradientMap&&a.enable(22),R.alphaMap&&a.enable(23),R.alphaTest&&a.enable(24),R.vertexColors&&a.enable(25),R.vertexAlphas&&a.enable(26),R.vertexUvs&&a.enable(27),R.vertexTangents&&a.enable(28),R.uvsVertexOnly&&a.enable(29),R.fog&&a.enable(30),M.push(a.mask),a.disableAll(),R.useFog&&a.enable(0),R.flatShading&&a.enable(1),R.logarithmicDepthBuffer&&a.enable(2),R.skinning&&a.enable(3),R.useVertexTexture&&a.enable(4),R.morphTargets&&a.enable(5),R.morphNormals&&a.enable(6),R.morphColors&&a.enable(7),R.premultipliedAlpha&&a.enable(8),R.shadowMapEnabled&&a.enable(9),R.physicallyCorrectLights&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.depthPacking&&a.enable(13),R.dithering&&a.enable(14),R.specularIntensityMap&&a.enable(15),R.specularColorMap&&a.enable(16),R.transmission&&a.enable(17),R.transmissionMap&&a.enable(18),R.thicknessMap&&a.enable(19),R.sheen&&a.enable(20),R.sheenColorMap&&a.enable(21),R.sheenRoughnessMap&&a.enable(22),R.decodeVideoTexture&&a.enable(23),R.opaque&&a.enable(24),M.push(a.mask)}(R,M),R.push(i.outputEncoding)),R.push(M.customProgramCacheKey),R.join()},getUniforms:function S(M){const R=g[M.type];let K;return K=R?$K.clone(Ks[R].uniforms):M.uniforms,K},acquireProgram:function T(M,R){let K;for(let z=0,j=c.length;z<j;z++){const L=c[z];if(L.cacheKey===R){K=L,++K.usedTimes;break}}return void 0===K&&(K=new gJ(i,R,M,s),c.push(K)),K},releaseProgram:function I(M){if(0==--M.usedTimes){const R=c.indexOf(M);c[R]=c[c.length-1],c.pop(),M.destroy()}},releaseShaderCache:function V(M){l.remove(M)},programs:c,dispose:function N(){l.dispose()}}}function xJ(){let i=new WeakMap;return{get:function t(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function e(s){i.delete(s)},update:function n(s,o,a){i.get(s)[o]=a},dispose:function r(){i=new WeakMap}}}function wJ(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function qO(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function YO(){const i=[];let t=0;const e=[],n=[],r=[];function o(u,h,f,p,m,g){let _=i[t];return void 0===_?(_={id:u.id,object:u,geometry:h,material:f,groupOrder:p,renderOrder:u.renderOrder,z:m,group:g},i[t]=_):(_.id=u.id,_.object=u,_.geometry=h,_.material=f,_.groupOrder=p,_.renderOrder=u.renderOrder,_.z=m,_.group=g),t++,_}return{opaque:e,transmissive:n,transparent:r,init:function s(){t=0,e.length=0,n.length=0,r.length=0},push:function a(u,h,f,p,m,g){const _=o(u,h,f,p,m,g);f.transmission>0?n.push(_):!0===f.transparent?r.push(_):e.push(_)},unshift:function l(u,h,f,p,m,g){const _=o(u,h,f,p,m,g);f.transmission>0?n.unshift(_):!0===f.transparent?r.unshift(_):e.unshift(_)},finish:function d(){for(let u=t,h=i.length;u<h;u++){const f=i[u];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(u,h){e.length>1&&e.sort(u||wJ),n.length>1&&n.sort(h||qO),r.length>1&&r.sort(h||qO)}}}function MJ(){let i=new WeakMap;return{get:function t(n,r){let s;return!1===i.has(n)?(s=new YO,i.set(n,[s])):r>=i.get(n).length?(s=new YO,i.get(n).push(s)):s=i.get(n)[r],s},dispose:function e(){i=new WeakMap}}}function CJ(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new C,color:new we};break;case"SpotLight":e={position:new C,direction:new C,color:new we,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new C,color:new we,distance:0,decay:0};break;case"HemisphereLight":e={direction:new C,skyColor:new we,groundColor:new we};break;case"RectAreaLight":e={color:new we,position:new C,halfWidth:new C,halfHeight:new C}}return i[t.id]=e,e}}}let DJ=0;function EJ(i,t){return(t.castShadow?1:0)-(i.castShadow?1:0)}function AJ(i,t){const e=new CJ,n=function SJ(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ne};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ne,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e,e}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)r.probe.push(new C);const s=new C,o=new $e,a=new $e;return{setup:function l(d,u){let h=0,f=0,p=0;for(let V=0;V<9;V++)r.probe[V].set(0,0,0);let m=0,g=0,_=0,v=0,b=0,x=0,w=0,S=0;d.sort(EJ);const T=!0!==u?Math.PI:1;for(let V=0,N=d.length;V<N;V++){const M=d[V],R=M.color,K=M.intensity,z=M.distance,j=M.shadow&&M.shadow.map?M.shadow.map.texture:null;if(M.isAmbientLight)h+=R.r*K*T,f+=R.g*K*T,p+=R.b*K*T;else if(M.isLightProbe)for(let L=0;L<9;L++)r.probe[L].addScaledVector(M.sh.coefficients[L],K);else if(M.isDirectionalLight){const L=e.get(M);if(L.color.copy(M.color).multiplyScalar(M.intensity*T),M.castShadow){const U=M.shadow,P=n.get(M);P.shadowBias=U.bias,P.shadowNormalBias=U.normalBias,P.shadowRadius=U.radius,P.shadowMapSize=U.mapSize,r.directionalShadow[m]=P,r.directionalShadowMap[m]=j,r.directionalShadowMatrix[m]=M.shadow.matrix,x++}r.directional[m]=L,m++}else if(M.isSpotLight){const L=e.get(M);if(L.position.setFromMatrixPosition(M.matrixWorld),L.color.copy(R).multiplyScalar(K*T),L.distance=z,L.coneCos=Math.cos(M.angle),L.penumbraCos=Math.cos(M.angle*(1-M.penumbra)),L.decay=M.decay,M.castShadow){const U=M.shadow,P=n.get(M);P.shadowBias=U.bias,P.shadowNormalBias=U.normalBias,P.shadowRadius=U.radius,P.shadowMapSize=U.mapSize,r.spotShadow[_]=P,r.spotShadowMap[_]=j,r.spotShadowMatrix[_]=M.shadow.matrix,S++}r.spot[_]=L,_++}else if(M.isRectAreaLight){const L=e.get(M);L.color.copy(R).multiplyScalar(K),L.halfWidth.set(.5*M.width,0,0),L.halfHeight.set(0,.5*M.height,0),r.rectArea[v]=L,v++}else if(M.isPointLight){const L=e.get(M);if(L.color.copy(M.color).multiplyScalar(M.intensity*T),L.distance=M.distance,L.decay=M.decay,M.castShadow){const U=M.shadow,P=n.get(M);P.shadowBias=U.bias,P.shadowNormalBias=U.normalBias,P.shadowRadius=U.radius,P.shadowMapSize=U.mapSize,P.shadowCameraNear=U.camera.near,P.shadowCameraFar=U.camera.far,r.pointShadow[g]=P,r.pointShadowMap[g]=j,r.pointShadowMatrix[g]=M.shadow.matrix,w++}r.point[g]=L,g++}else if(M.isHemisphereLight){const L=e.get(M);L.skyColor.copy(M.color).multiplyScalar(K*T),L.groundColor.copy(M.groundColor).multiplyScalar(K*T),r.hemi[b]=L,b++}}v>0&&(t.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=ke.LTC_FLOAT_1,r.rectAreaLTC2=ke.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=ke.LTC_HALF_1,r.rectAreaLTC2=ke.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;const I=r.hash;(I.directionalLength!==m||I.pointLength!==g||I.spotLength!==_||I.rectAreaLength!==v||I.hemiLength!==b||I.numDirectionalShadows!==x||I.numPointShadows!==w||I.numSpotShadows!==S)&&(r.directional.length=m,r.spot.length=_,r.rectArea.length=v,r.point.length=g,r.hemi.length=b,r.directionalShadow.length=x,r.directionalShadowMap.length=x,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=x,r.pointShadowMatrix.length=w,r.spotShadowMatrix.length=S,I.directionalLength=m,I.pointLength=g,I.spotLength=_,I.rectAreaLength=v,I.hemiLength=b,I.numDirectionalShadows=x,I.numPointShadows=w,I.numSpotShadows=S,r.version=DJ++)},setupView:function c(d,u){let h=0,f=0,p=0,m=0,g=0;const _=u.matrixWorldInverse;for(let v=0,b=d.length;v<b;v++){const x=d[v];if(x.isDirectionalLight){const w=r.directional[h];w.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(_),h++}else if(x.isSpotLight){const w=r.spot[p];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(_),w.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(_),p++}else if(x.isRectAreaLight){const w=r.rectArea[m];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(_),a.identity(),o.copy(x.matrixWorld),o.premultiply(_),a.extractRotation(o),w.halfWidth.set(.5*x.width,0,0),w.halfHeight.set(0,.5*x.height,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),m++}else if(x.isPointLight){const w=r.point[f];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(_),f++}else if(x.isHemisphereLight){const w=r.hemi[g];w.direction.setFromMatrixPosition(x.matrixWorld),w.direction.transformDirection(_),w.direction.normalize(),g++}}},state:r}}function KO(i,t){const e=new AJ(i,t),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:e},setupLights:function l(u){e.setup(n,u)},setupLightsView:function c(u){e.setupView(n,u)},pushLight:function o(u){n.push(u)},pushShadow:function a(u){r.push(u)}}}function TJ(i,t){let e=new WeakMap;return{get:function n(s,o=0){let a;return!1===e.has(s)?(a=new KO(i,t),e.set(s,[a])):o>=e.get(s).length?(a=new KO(i,t),e.get(s).push(a)):a=e.get(s)[o],a},dispose:function r(){e=new WeakMap}}}class _w extends Pn{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}_w.prototype.isMeshDepthMaterial=!0;class yw extends Pn{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new C,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function XO(i,t,e){let n=new Ng;const r=new ne,s=new ne,o=new ln,a=new _w({depthPacking:3201}),l=new yw,c={},d=e.maxTextureSize,u={0:1,1:0,2:2},h=new Cs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ne},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new mt;p.setAttribute("position",new hn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new wi(p,h),g=this;function _(x,w){const S=t.update(m);h.defines.VSM_SAMPLES!==x.blurSamples&&(h.defines.VSM_SAMPLES=x.blurSamples,f.defines.VSM_SAMPLES=x.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),h.uniforms.shadow_pass.value=x.map.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,i.setRenderTarget(x.mapPass),i.clear(),i.renderBufferDirect(w,null,S,h,m,null),f.uniforms.shadow_pass.value=x.mapPass.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,i.setRenderTarget(x.map),i.clear(),i.renderBufferDirect(w,null,S,f,m,null)}function v(x,w,S,T,I,V){let N=null;const M=!0===S.isPointLight?x.customDistanceMaterial:x.customDepthMaterial;if(N=void 0!==M?M:!0===S.isPointLight?l:a,i.localClippingEnabled&&!0===w.clipShadows&&0!==w.clippingPlanes.length||w.displacementMap&&0!==w.displacementScale||w.alphaMap&&w.alphaTest>0){const R=N.uuid,K=w.uuid;let z=c[R];void 0===z&&(z={},c[R]=z);let j=z[K];void 0===j&&(j=N.clone(),z[K]=j),N=j}return N.visible=w.visible,N.wireframe=w.wireframe,N.side=3===V?null!==w.shadowSide?w.shadowSide:w.side:null!==w.shadowSide?w.shadowSide:u[w.side],N.alphaMap=w.alphaMap,N.alphaTest=w.alphaTest,N.clipShadows=w.clipShadows,N.clippingPlanes=w.clippingPlanes,N.clipIntersection=w.clipIntersection,N.displacementMap=w.displacementMap,N.displacementScale=w.displacementScale,N.displacementBias=w.displacementBias,N.wireframeLinewidth=w.wireframeLinewidth,N.linewidth=w.linewidth,!0===S.isPointLight&&!0===N.isMeshDistanceMaterial&&(N.referencePosition.setFromMatrixPosition(S.matrixWorld),N.nearDistance=T,N.farDistance=I),N}function b(x,w,S,T,I){if(!1===x.visible)return;if(x.layers.test(w.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&3===I)&&(!x.frustumCulled||n.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,x.matrixWorld);const M=t.update(x),R=x.material;if(Array.isArray(R)){const K=M.groups;for(let z=0,j=K.length;z<j;z++){const L=K[z],U=R[L.materialIndex];if(U&&U.visible){const P=v(x,U,T,S.near,S.far,I);i.renderBufferDirect(S,null,M,P,x,L)}}}else if(R.visible){const K=v(x,R,T,S.near,S.far,I);i.renderBufferDirect(S,null,M,K,x,null)}}const N=x.children;for(let M=0,R=N.length;M<R;M++)b(N[M],w,S,T,I)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(x,w,S){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===x.length)return;const T=i.getRenderTarget(),I=i.getActiveCubeFace(),V=i.getActiveMipmapLevel(),N=i.state;N.setBlending(0),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);for(let M=0,R=x.length;M<R;M++){const K=x[M],z=K.shadow;if(void 0===z){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(!1===z.autoUpdate&&!1===z.needsUpdate)continue;r.copy(z.mapSize);const j=z.getFrameExtents();r.multiply(j),s.copy(z.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/j.x),r.x=s.x*j.x,z.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/j.y),r.y=s.y*j.y,z.mapSize.y=s.y)),null===z.map&&!z.isPointLightShadow&&3===this.type&&(z.map=new Mr(r.x,r.y),z.map.texture.name=K.name+".shadowMap",z.mapPass=new Mr(r.x,r.y),z.camera.updateProjectionMatrix()),null===z.map&&(z.map=new Mr(r.x,r.y,{minFilter:oi,magFilter:oi,format:Wr}),z.map.texture.name=K.name+".shadowMap",z.camera.updateProjectionMatrix()),i.setRenderTarget(z.map),i.clear();const L=z.getViewportCount();for(let U=0;U<L;U++){const P=z.getViewport(U);o.set(s.x*P.x,s.y*P.y,s.x*P.z,s.y*P.w),N.viewport(o),z.updateMatrices(K,U),n=z.getFrustum(),b(w,S,z.camera,K,this.type)}!z.isPointLightShadow&&3===this.type&&_(z,S),z.needsUpdate=!1}g.needsUpdate=!1,i.setRenderTarget(T,I,V)}}function IJ(i,t,e){const n=e.isWebGL2,a=new function r(){let B=!1;const Se=new ln;let Ce=null;const _t=new ln(0,0,0,0);return{setMask:function(Le){Ce!==Le&&!B&&(i.colorMask(Le,Le,Le,Le),Ce=Le)},setLocked:function(Le){B=Le},setClear:function(Le,tt,Ae,At,Dn){!0===Dn&&(Le*=At,tt*=At,Ae*=At),Se.set(Le,tt,Ae,At),!1===_t.equals(Se)&&(i.clearColor(Le,tt,Ae,At),_t.copy(Se))},reset:function(){B=!1,Ce=null,_t.set(-1,0,0,0)}}},l=new function s(){let B=!1,Se=null,Ce=null,_t=null;return{setTest:function(Le){Le?ct(2929):ie(2929)},setMask:function(Le){Se!==Le&&!B&&(i.depthMask(Le),Se=Le)},setFunc:function(Le){if(Ce!==Le){if(Le)switch(Le){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}else i.depthFunc(515);Ce=Le}},setLocked:function(Le){B=Le},setClear:function(Le){_t!==Le&&(i.clearDepth(Le),_t=Le)},reset:function(){B=!1,Se=null,Ce=null,_t=null}}},c=new function o(){let B=!1,Se=null,Ce=null,_t=null,Le=null,tt=null,Ae=null,At=null,Dn=null;return{setTest:function(Kt){B||(Kt?ct(2960):ie(2960))},setMask:function(Kt){Se!==Kt&&!B&&(i.stencilMask(Kt),Se=Kt)},setFunc:function(Kt,co,uo){(Ce!==Kt||_t!==co||Le!==uo)&&(i.stencilFunc(Kt,co,uo),Ce=Kt,_t=co,Le=uo)},setOp:function(Kt,co,uo){(tt!==Kt||Ae!==co||At!==uo)&&(i.stencilOp(Kt,co,uo),tt=Kt,Ae=co,At=uo)},setLocked:function(Kt){B=Kt},setClear:function(Kt){Dn!==Kt&&(i.clearStencil(Kt),Dn=Kt)},reset:function(){B=!1,Se=null,Ce=null,_t=null,Le=null,tt=null,Ae=null,At=null,Dn=null}}};let d={},u={},h=new WeakMap,f=[],p=null,m=!1,g=null,_=null,v=null,b=null,x=null,w=null,S=null,T=!1,I=null,V=null,N=null,M=null,R=null;const K=i.getParameter(35661);let z=!1,j=0;const L=i.getParameter(7938);-1!==L.indexOf("WebGL")?(j=parseFloat(/^WebGL (\d)/.exec(L)[1]),z=j>=1):-1!==L.indexOf("OpenGL ES")&&(j=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),z=j>=2);let U=null,P={};const $=i.getParameter(3088),ee=i.getParameter(2978),pe=(new ln).fromArray($),se=(new ln).fromArray(ee);function Ge(B,Se,Ce){const _t=new Uint8Array(4),Le=i.createTexture();i.bindTexture(B,Le),i.texParameteri(B,10241,9728),i.texParameteri(B,10240,9728);for(let tt=0;tt<Ce;tt++)i.texImage2D(Se+tt,0,6408,1,1,0,6408,5121,_t);return Le}const ze={};function ct(B){!0!==d[B]&&(i.enable(B),d[B]=!0)}function ie(B){!1!==d[B]&&(i.disable(B),d[B]=!1)}ze[3553]=Ge(3553,3553,1),ze[34067]=Ge(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ct(2929),l.setFunc(3),be(!1),je(1),ct(2884),re(0);const ye={100:32774,101:32778,102:32779};if(n)ye[103]=32775,ye[104]=32776;else{const B=t.get("EXT_blend_minmax");null!==B&&(ye[103]=B.MIN_EXT,ye[104]=B.MAX_EXT)}const Ct={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function re(B,Se,Ce,_t,Le,tt,Ae,At){if(0!==B){if(!1===m&&(ct(3042),m=!0),5===B)Le=Le||Se,tt=tt||Ce,Ae=Ae||_t,(Se!==_||Le!==x)&&(i.blendEquationSeparate(ye[Se],ye[Le]),_=Se,x=Le),(Ce!==v||_t!==b||tt!==w||Ae!==S)&&(i.blendFuncSeparate(Ct[Ce],Ct[_t],Ct[tt],Ct[Ae]),v=Ce,b=_t,w=tt,S=Ae),g=B,T=null;else if(B!==g||At!==T){if((100!==_||100!==x)&&(i.blendEquation(32774),_=100,x=100),At)switch(B){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",B)}else switch(B){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",B)}v=null,b=null,w=null,S=null,g=B,T=At}}else!0===m&&(ie(3042),m=!1)}function be(B){I!==B&&(i.frontFace(B?2304:2305),I=B)}function je(B){0!==B?(ct(2884),B!==V&&i.cullFace(1===B?1029:2===B?1028:1032)):ie(2884),V=B}function St(B,Se,Ce){B?(ct(32823),(M!==Se||R!==Ce)&&(i.polygonOffset(Se,Ce),M=Se,R=Ce)):ie(32823)}function ot(B){void 0===B&&(B=33984+K-1),U!==B&&(i.activeTexture(B),U=B)}return{buffers:{color:a,depth:l,stencil:c},enable:ct,disable:ie,bindFramebuffer:function gt(B,Se){return u[B]!==Se&&(i.bindFramebuffer(B,Se),u[B]=Se,n&&(36009===B&&(u[36160]=Se),36160===B&&(u[36009]=Se)),!0)},drawBuffers:function dt(B,Se){let Ce=f,_t=!1;if(B)if(Ce=h.get(Se),void 0===Ce&&(Ce=[],h.set(Se,Ce)),B.isWebGLMultipleRenderTargets){const Le=B.texture;if(Ce.length!==Le.length||36064!==Ce[0]){for(let tt=0,Ae=Le.length;tt<Ae;tt++)Ce[tt]=36064+tt;Ce.length=Le.length,_t=!0}}else 36064!==Ce[0]&&(Ce[0]=36064,_t=!0);else 1029!==Ce[0]&&(Ce[0]=1029,_t=!0);_t&&(e.isWebGL2?i.drawBuffers(Ce):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ce))},useProgram:function st(B){return p!==B&&(i.useProgram(B),p=B,!0)},setBlending:re,setMaterial:function ae(B,Se){2===B.side?ie(2884):ct(2884);let Ce=1===B.side;Se&&(Ce=!Ce),be(Ce),1===B.blending&&!1===B.transparent?re(0):re(B.blending,B.blendEquation,B.blendSrc,B.blendDst,B.blendEquationAlpha,B.blendSrcAlpha,B.blendDstAlpha,B.premultipliedAlpha),l.setFunc(B.depthFunc),l.setTest(B.depthTest),l.setMask(B.depthWrite),a.setMask(B.colorWrite);const _t=B.stencilWrite;c.setTest(_t),_t&&(c.setMask(B.stencilWriteMask),c.setFunc(B.stencilFunc,B.stencilRef,B.stencilFuncMask),c.setOp(B.stencilFail,B.stencilZFail,B.stencilZPass)),St(B.polygonOffset,B.polygonOffsetFactor,B.polygonOffsetUnits),!0===B.alphaToCoverage?ct(32926):ie(32926)},setFlipSided:be,setCullFace:je,setLineWidth:function Oe(B){B!==N&&(z&&i.lineWidth(B),N=B)},setPolygonOffset:St,setScissorTest:function pt(B){B?ct(3089):ie(3089)},activeTexture:ot,bindTexture:function xn(B,Se){null===U&&ot();let Ce=P[U];void 0===Ce&&(Ce={type:void 0,texture:void 0},P[U]=Ce),(Ce.type!==B||Ce.texture!==Se)&&(i.bindTexture(B,Se||ze[B]),Ce.type=B,Ce.texture=Se)},unbindTexture:function nn(){const B=P[U];void 0!==B&&void 0!==B.type&&(i.bindTexture(B.type,null),B.type=void 0,B.texture=void 0)},compressedTexImage2D:function k(){try{i.compressedTexImage2D.apply(i,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},texImage2D:function at(){try{i.texImage2D.apply(i,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},texImage3D:function E(){try{i.texImage3D.apply(i,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},texStorage2D:function Ie(){try{i.texStorage2D.apply(i,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},texStorage3D:function Ve(){try{i.texStorage3D.apply(i,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},texSubImage2D:function D(){try{i.texSubImage2D.apply(i,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},texSubImage3D:function Q(){try{i.texSubImage3D.apply(i,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},compressedTexSubImage2D:function me(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(B){console.error("THREE.WebGLState:",B)}},scissor:function _e(B){!1===pe.equals(B)&&(i.scissor(B.x,B.y,B.z,B.w),pe.copy(B))},viewport:function Ze(B){!1===se.equals(B)&&(i.viewport(B.x,B.y,B.z,B.w),se.copy(B))},reset:function Ee(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},U=null,P={},u={},h=new WeakMap,f=[],p=null,m=!1,g=null,_=null,v=null,b=null,x=null,w=null,S=null,T=!1,I=null,V=null,N=null,M=null,R=null,pe.set(0,0,i.canvas.width,i.canvas.height),se.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),c.reset()}}}function PJ(i,t,e,n,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,d=r.maxTextureSize,u=r.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let _=!1;try{_="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(k){}function v(k,D){return _?new OffscreenCanvas(k,D):jh("canvas")}function b(k,D,Q,me){let Ie=1;if((k.width>me||k.height>me)&&(Ie=me/Math.max(k.width,k.height)),Ie<1||!0===D){if("undefined"!=typeof HTMLImageElement&&k instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&k instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&k instanceof ImageBitmap){const Ve=D?pg:Math.floor,at=Ve(Ie*k.width),E=Ve(Ie*k.height);void 0===m&&(m=v(at,E));const _e=Q?v(at,E):m;return _e.width=at,_e.height=E,_e.getContext("2d").drawImage(k,0,0,at,E),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+k.width+"x"+k.height+") to ("+at+"x"+E+")."),_e}return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+k.width+"x"+k.height+")."),k}return k}function x(k){return H0(k.width)&&H0(k.height)}function S(k,D){return k.generateMipmaps&&D&&k.minFilter!==oi&&k.minFilter!==vn}function T(k){i.generateMipmap(k)}function I(k,D,Q,me,Ie=!1){if(!1===a)return D;if(null!==k){if(void 0!==i[k])return i[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let Ve=D;return 6403===D&&(5126===Q&&(Ve=33326),5131===Q&&(Ve=33325),5121===Q&&(Ve=33321)),33319===D&&(5126===Q&&(Ve=33328),5131===Q&&(Ve=33327),5121===Q&&(Ve=33323)),6408===D&&(5126===Q&&(Ve=34836),5131===Q&&(Ve=34842),5121===Q&&(Ve=me===Jt&&!1===Ie?35907:32856),32819===Q&&(Ve=32854),32820===Q&&(Ve=32855)),(33325===Ve||33326===Ve||33327===Ve||33328===Ve||34842===Ve||34836===Ve)&&t.get("EXT_color_buffer_float"),Ve}function V(k,D,Q){return!0===S(k,Q)||k.isFramebufferTexture&&k.minFilter!==oi&&k.minFilter!==vn?Math.log2(Math.max(D.width,D.height))+1:void 0!==k.mipmaps&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?D.mipmaps.length:1}function N(k){return k===oi||1004===k||1005===k?9728:9729}function M(k){const D=k.target;D.removeEventListener("dispose",M),function K(k){const D=n.get(k);if(void 0===D.__webglInit)return;const Q=k.source,me=g.get(Q);if(me){const Ie=me[D.__cacheKey];Ie.usedTimes--,0===Ie.usedTimes&&z(k),0===Object.keys(me).length&&g.delete(Q)}n.remove(k)}(D),D.isVideoTexture&&p.delete(D)}function R(k){const D=k.target;D.removeEventListener("dispose",R),function j(k){const D=k.texture,Q=n.get(k),me=n.get(D);if(void 0!==me.__webglTexture&&(i.deleteTexture(me.__webglTexture),o.memory.textures--),k.depthTexture&&k.depthTexture.dispose(),k.isWebGLCubeRenderTarget)for(let Ie=0;Ie<6;Ie++)i.deleteFramebuffer(Q.__webglFramebuffer[Ie]),Q.__webglDepthbuffer&&i.deleteRenderbuffer(Q.__webglDepthbuffer[Ie]);else i.deleteFramebuffer(Q.__webglFramebuffer),Q.__webglDepthbuffer&&i.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer&&i.deleteRenderbuffer(Q.__webglColorRenderbuffer),Q.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Q.__webglDepthRenderbuffer);if(k.isWebGLMultipleRenderTargets)for(let Ie=0,Ve=D.length;Ie<Ve;Ie++){const at=n.get(D[Ie]);at.__webglTexture&&(i.deleteTexture(at.__webglTexture),o.memory.textures--),n.remove(D[Ie])}n.remove(D),n.remove(k)}(D)}function z(k){const D=n.get(k);i.deleteTexture(D.__webglTexture),delete g.get(k.source)[D.__cacheKey],o.memory.textures--}let L=0;function ee(k,D){const Q=n.get(k);if(k.isVideoTexture&&function xn(k){const D=o.render.frame;p.get(k)!==D&&(p.set(k,D),k.update())}(k),!1===k.isRenderTargetTexture&&k.version>0&&Q.__version!==k.version){const me=k.image;if(null===me)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==me.complete)return void dt(Q,k,D);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.activeTexture(33984+D),e.bindTexture(3553,Q.__webglTexture)}const ze={[vl]:10497,[tr]:33071,1002:33648},ct={[oi]:9728,1004:9984,1005:9986,[vn]:9729,1007:9985,[ya]:9987};function ie(k,D,Q){if(Q?(i.texParameteri(k,10242,ze[D.wrapS]),i.texParameteri(k,10243,ze[D.wrapT]),(32879===k||35866===k)&&i.texParameteri(k,32882,ze[D.wrapR]),i.texParameteri(k,10240,ct[D.magFilter]),i.texParameteri(k,10241,ct[D.minFilter])):(i.texParameteri(k,10242,33071),i.texParameteri(k,10243,33071),(32879===k||35866===k)&&i.texParameteri(k,32882,33071),(D.wrapS!==tr||D.wrapT!==tr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(k,10240,N(D.magFilter)),i.texParameteri(k,10241,N(D.minFilter)),D.minFilter!==oi&&D.minFilter!==vn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const me=t.get("EXT_texture_filter_anisotropic");if(D.type===ys&&!1===t.has("OES_texture_float_linear")||!1===a&&D.type===Ys&&!1===t.has("OES_texture_half_float_linear"))return;(D.anisotropy>1||n.get(D).__currentAnisotropy)&&(i.texParameterf(k,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),n.get(D).__currentAnisotropy=D.anisotropy)}}function gt(k,D){let Q=!1;void 0===k.__webglInit&&(k.__webglInit=!0,D.addEventListener("dispose",M));const me=D.source;let Ie=g.get(me);void 0===Ie&&(Ie={},g.set(me,Ie));const Ve=function $(k){const D=[];return D.push(k.wrapS),D.push(k.wrapT),D.push(k.magFilter),D.push(k.minFilter),D.push(k.anisotropy),D.push(k.internalFormat),D.push(k.format),D.push(k.type),D.push(k.generateMipmaps),D.push(k.premultiplyAlpha),D.push(k.flipY),D.push(k.unpackAlignment),D.push(k.encoding),D.join()}(D);if(Ve!==k.__cacheKey){void 0===Ie[Ve]&&(Ie[Ve]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,Q=!0),Ie[Ve].usedTimes++;const at=Ie[k.__cacheKey];void 0!==at&&(Ie[k.__cacheKey].usedTimes--,0===at.usedTimes&&z(D)),k.__cacheKey=Ve,k.__webglTexture=Ie[Ve].texture}return Q}function dt(k,D,Q){let me=3553;D.isDataArrayTexture&&(me=35866),D.isData3DTexture&&(me=32879);const Ie=gt(k,D),Ve=D.source;if(e.activeTexture(33984+Q),e.bindTexture(me,k.__webglTexture),Ve.version!==Ve.__currentVersion||!0===Ie){i.pixelStorei(37440,D.flipY),i.pixelStorei(37441,D.premultiplyAlpha),i.pixelStorei(3317,D.unpackAlignment),i.pixelStorei(37443,0);const at=function w(k){return!a&&(k.wrapS!==tr||k.wrapT!==tr||k.minFilter!==oi&&k.minFilter!==vn)}(D)&&!1===x(D.image);let E=b(D.image,at,!1,d);E=nn(D,E);const _e=x(E)||a,Ze=s.convert(D.format,D.encoding);let Se,Ee=s.convert(D.type),B=I(D.internalFormat,Ze,Ee,D.encoding,D.isVideoTexture);ie(me,D,_e);const Ce=D.mipmaps,_t=a&&!0!==D.isVideoTexture,Le=void 0===k.__version,tt=V(D,E,_e);if(D.isDepthTexture)B=6402,a?B=D.type===ys?36012:1014===D.type?33190:D.type===pd?35056:33189:D.type===ys&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===xl&&6402===B&&D.type!==Bh&&1014!==D.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=Bh,Ee=s.convert(D.type)),D.format===md&&6402===B&&(B=34041,D.type!==pd&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=pd,Ee=s.convert(D.type))),_t&&Le?e.texStorage2D(3553,1,B,E.width,E.height):e.texImage2D(3553,0,B,E.width,E.height,0,Ze,Ee,null);else if(D.isDataTexture)if(Ce.length>0&&_e){_t&&Le&&e.texStorage2D(3553,tt,B,Ce[0].width,Ce[0].height);for(let Ae=0,At=Ce.length;Ae<At;Ae++)Se=Ce[Ae],_t?e.texSubImage2D(3553,Ae,0,0,Se.width,Se.height,Ze,Ee,Se.data):e.texImage2D(3553,Ae,B,Se.width,Se.height,0,Ze,Ee,Se.data);D.generateMipmaps=!1}else _t?(Le&&e.texStorage2D(3553,tt,B,E.width,E.height),e.texSubImage2D(3553,0,0,0,E.width,E.height,Ze,Ee,E.data)):e.texImage2D(3553,0,B,E.width,E.height,0,Ze,Ee,E.data);else if(D.isCompressedTexture){_t&&Le&&e.texStorage2D(3553,tt,B,Ce[0].width,Ce[0].height);for(let Ae=0,At=Ce.length;Ae<At;Ae++)Se=Ce[Ae],D.format!==Wr?null!==Ze?_t?e.compressedTexSubImage2D(3553,Ae,0,0,Se.width,Se.height,Ze,Se.data):e.compressedTexImage2D(3553,Ae,B,Se.width,Se.height,0,Se.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_t?e.texSubImage2D(3553,Ae,0,0,Se.width,Se.height,Ze,Ee,Se.data):e.texImage2D(3553,Ae,B,Se.width,Se.height,0,Ze,Ee,Se.data)}else if(D.isDataArrayTexture)_t?(Le&&e.texStorage3D(35866,tt,B,E.width,E.height,E.depth),e.texSubImage3D(35866,0,0,0,0,E.width,E.height,E.depth,Ze,Ee,E.data)):e.texImage3D(35866,0,B,E.width,E.height,E.depth,0,Ze,Ee,E.data);else if(D.isData3DTexture)_t?(Le&&e.texStorage3D(32879,tt,B,E.width,E.height,E.depth),e.texSubImage3D(32879,0,0,0,0,E.width,E.height,E.depth,Ze,Ee,E.data)):e.texImage3D(32879,0,B,E.width,E.height,E.depth,0,Ze,Ee,E.data);else if(D.isFramebufferTexture)_t&&Le?e.texStorage2D(3553,tt,B,E.width,E.height):e.texImage2D(3553,0,B,E.width,E.height,0,Ze,Ee,null);else if(Ce.length>0&&_e){_t&&Le&&e.texStorage2D(3553,tt,B,Ce[0].width,Ce[0].height);for(let Ae=0,At=Ce.length;Ae<At;Ae++)Se=Ce[Ae],_t?e.texSubImage2D(3553,Ae,0,0,Ze,Ee,Se):e.texImage2D(3553,Ae,B,Ze,Ee,Se);D.generateMipmaps=!1}else _t?(Le&&e.texStorage2D(3553,tt,B,E.width,E.height),e.texSubImage2D(3553,0,0,0,Ze,Ee,E)):e.texImage2D(3553,0,B,Ze,Ee,E);S(D,_e)&&T(me),Ve.__currentVersion=Ve.version,D.onUpdate&&D.onUpdate(D)}k.__version=D.version}function ye(k,D,Q,me,Ie){const Ve=s.convert(Q.format,Q.encoding),at=s.convert(Q.type),E=I(Q.internalFormat,Ve,at,Q.encoding);n.get(D).__hasExternalTextures||(32879===Ie||35866===Ie?e.texImage3D(Ie,0,E,D.width,D.height,D.depth,0,Ve,at,null):e.texImage2D(Ie,0,E,D.width,D.height,0,Ve,at,null)),e.bindFramebuffer(36160,k),ot(D)?h.framebufferTexture2DMultisampleEXT(36160,me,Ie,n.get(Q).__webglTexture,0,pt(D)):i.framebufferTexture2D(36160,me,Ie,n.get(Q).__webglTexture,0),e.bindFramebuffer(36160,null)}function Ct(k,D,Q){if(i.bindRenderbuffer(36161,k),D.depthBuffer&&!D.stencilBuffer){let me=33189;if(Q||ot(D)){const Ie=D.depthTexture;Ie&&Ie.isDepthTexture&&(Ie.type===ys?me=36012:1014===Ie.type&&(me=33190));const Ve=pt(D);ot(D)?h.renderbufferStorageMultisampleEXT(36161,Ve,me,D.width,D.height):i.renderbufferStorageMultisample(36161,Ve,me,D.width,D.height)}else i.renderbufferStorage(36161,me,D.width,D.height);i.framebufferRenderbuffer(36160,36096,36161,k)}else if(D.depthBuffer&&D.stencilBuffer){const me=pt(D);Q&&!1===ot(D)?i.renderbufferStorageMultisample(36161,me,35056,D.width,D.height):ot(D)?h.renderbufferStorageMultisampleEXT(36161,me,35056,D.width,D.height):i.renderbufferStorage(36161,34041,D.width,D.height),i.framebufferRenderbuffer(36160,33306,36161,k)}else{const me=!0===D.isWebGLMultipleRenderTargets?D.texture[0]:D.texture,Ie=s.convert(me.format,me.encoding),Ve=s.convert(me.type),at=I(me.internalFormat,Ie,Ve,me.encoding),E=pt(D);Q&&!1===ot(D)?i.renderbufferStorageMultisample(36161,E,at,D.width,D.height):ot(D)?h.renderbufferStorageMultisampleEXT(36161,E,at,D.width,D.height):i.renderbufferStorage(36161,at,D.width,D.height)}i.bindRenderbuffer(36161,null)}function ae(k){const D=n.get(k),Q=!0===k.isWebGLCubeRenderTarget;if(k.depthTexture&&!D.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");!function re(k,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,k),!D.depthTexture||!D.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),ee(D.depthTexture,0);const me=n.get(D.depthTexture).__webglTexture,Ie=pt(D);if(D.depthTexture.format===xl)ot(D)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,me,0,Ie):i.framebufferTexture2D(36160,36096,3553,me,0);else{if(D.depthTexture.format!==md)throw new Error("Unknown depthTexture format");ot(D)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,me,0,Ie):i.framebufferTexture2D(36160,33306,3553,me,0)}}(D.__webglFramebuffer,k)}else if(Q){D.__webglDepthbuffer=[];for(let me=0;me<6;me++)e.bindFramebuffer(36160,D.__webglFramebuffer[me]),D.__webglDepthbuffer[me]=i.createRenderbuffer(),Ct(D.__webglDepthbuffer[me],k,!1)}else e.bindFramebuffer(36160,D.__webglFramebuffer),D.__webglDepthbuffer=i.createRenderbuffer(),Ct(D.__webglDepthbuffer,k,!1);e.bindFramebuffer(36160,null)}function pt(k){return Math.min(u,k.samples)}function ot(k){const D=n.get(k);return a&&k.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==D.__useRenderToTexture}function nn(k,D){const Q=k.encoding,me=k.format,Ie=k.type;return!0===k.isCompressedTexture||!0===k.isVideoTexture||1035===k.format||Q!==vs&&(Q===Jt?!1===a?!0===t.has("EXT_sRGB")&&me===Wr?(k.format=1035,k.minFilter=vn,k.generateMipmaps=!1):D=Dl.sRGBToLinear(D):(me!==Wr||Ie!==bl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Q)),D}this.allocateTextureUnit=function P(){const k=L;return k>=l&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+l),L+=1,k},this.resetTextureUnits=function U(){L=0},this.setTexture2D=ee,this.setTexture2DArray=function pe(k,D){const Q=n.get(k);k.version>0&&Q.__version!==k.version?dt(Q,k,D):(e.activeTexture(33984+D),e.bindTexture(35866,Q.__webglTexture))},this.setTexture3D=function se(k,D){const Q=n.get(k);k.version>0&&Q.__version!==k.version?dt(Q,k,D):(e.activeTexture(33984+D),e.bindTexture(32879,Q.__webglTexture))},this.setTextureCube=function Ge(k,D){const Q=n.get(k);k.version>0&&Q.__version!==k.version?function st(k,D,Q){if(6!==D.image.length)return;const me=gt(k,D),Ie=D.source;if(e.activeTexture(33984+Q),e.bindTexture(34067,k.__webglTexture),Ie.version!==Ie.__currentVersion||!0===me){i.pixelStorei(37440,D.flipY),i.pixelStorei(37441,D.premultiplyAlpha),i.pixelStorei(3317,D.unpackAlignment),i.pixelStorei(37443,0);const Ve=D.isCompressedTexture||D.image[0].isCompressedTexture,at=D.image[0]&&D.image[0].isDataTexture,E=[];for(let Ae=0;Ae<6;Ae++)E[Ae]=Ve||at?at?D.image[Ae].image:D.image[Ae]:b(D.image[Ae],!1,!0,c),E[Ae]=nn(D,E[Ae]);const _e=E[0],Ze=x(_e)||a,Ee=s.convert(D.format,D.encoding),B=s.convert(D.type),Se=I(D.internalFormat,Ee,B,D.encoding),Ce=a&&!0!==D.isVideoTexture,_t=void 0===k.__version;let tt,Le=V(D,_e,Ze);if(ie(34067,D,Ze),Ve){Ce&&_t&&e.texStorage2D(34067,Le,Se,_e.width,_e.height);for(let Ae=0;Ae<6;Ae++){tt=E[Ae].mipmaps;for(let At=0;At<tt.length;At++){const Dn=tt[At];D.format!==Wr?null!==Ee?Ce?e.compressedTexSubImage2D(34069+Ae,At,0,0,Dn.width,Dn.height,Ee,Dn.data):e.compressedTexImage2D(34069+Ae,At,Se,Dn.width,Dn.height,0,Dn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ce?e.texSubImage2D(34069+Ae,At,0,0,Dn.width,Dn.height,Ee,B,Dn.data):e.texImage2D(34069+Ae,At,Se,Dn.width,Dn.height,0,Ee,B,Dn.data)}}}else{tt=D.mipmaps,Ce&&_t&&(tt.length>0&&Le++,e.texStorage2D(34067,Le,Se,E[0].width,E[0].height));for(let Ae=0;Ae<6;Ae++)if(at){Ce?e.texSubImage2D(34069+Ae,0,0,0,E[Ae].width,E[Ae].height,Ee,B,E[Ae].data):e.texImage2D(34069+Ae,0,Se,E[Ae].width,E[Ae].height,0,Ee,B,E[Ae].data);for(let At=0;At<tt.length;At++){const Kt=tt[At].image[Ae].image;Ce?e.texSubImage2D(34069+Ae,At+1,0,0,Kt.width,Kt.height,Ee,B,Kt.data):e.texImage2D(34069+Ae,At+1,Se,Kt.width,Kt.height,0,Ee,B,Kt.data)}}else{Ce?e.texSubImage2D(34069+Ae,0,0,0,Ee,B,E[Ae]):e.texImage2D(34069+Ae,0,Se,Ee,B,E[Ae]);for(let At=0;At<tt.length;At++){const Dn=tt[At];Ce?e.texSubImage2D(34069+Ae,At+1,0,0,Ee,B,Dn.image[Ae]):e.texImage2D(34069+Ae,At+1,Se,Ee,B,Dn.image[Ae])}}}S(D,Ze)&&T(34067),Ie.__currentVersion=Ie.version,D.onUpdate&&D.onUpdate(D)}k.__version=D.version}(Q,k,D):(e.activeTexture(33984+D),e.bindTexture(34067,Q.__webglTexture))},this.rebindTextures=function be(k,D,Q){const me=n.get(k);void 0!==D&&ye(me.__webglFramebuffer,k,k.texture,36064,3553),void 0!==Q&&ae(k)},this.setupRenderTarget=function je(k){const D=k.texture,Q=n.get(k),me=n.get(D);k.addEventListener("dispose",R),!0!==k.isWebGLMultipleRenderTargets&&(void 0===me.__webglTexture&&(me.__webglTexture=i.createTexture()),me.__version=D.version,o.memory.textures++);const Ie=!0===k.isWebGLCubeRenderTarget,Ve=!0===k.isWebGLMultipleRenderTargets,at=x(k)||a;if(Ie){Q.__webglFramebuffer=[];for(let E=0;E<6;E++)Q.__webglFramebuffer[E]=i.createFramebuffer()}else if(Q.__webglFramebuffer=i.createFramebuffer(),Ve)if(r.drawBuffers){const E=k.texture;for(let _e=0,Ze=E.length;_e<Ze;_e++){const Ee=n.get(E[_e]);void 0===Ee.__webglTexture&&(Ee.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(a&&k.samples>0&&!1===ot(k)){Q.__webglMultisampledFramebuffer=i.createFramebuffer(),Q.__webglColorRenderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,Q.__webglColorRenderbuffer);const E=s.convert(D.format,D.encoding),_e=s.convert(D.type),Ze=I(D.internalFormat,E,_e,D.encoding),Ee=pt(k);i.renderbufferStorageMultisample(36161,Ee,Ze,k.width,k.height),e.bindFramebuffer(36160,Q.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064,36161,Q.__webglColorRenderbuffer),i.bindRenderbuffer(36161,null),k.depthBuffer&&(Q.__webglDepthRenderbuffer=i.createRenderbuffer(),Ct(Q.__webglDepthRenderbuffer,k,!0)),e.bindFramebuffer(36160,null)}if(Ie){e.bindTexture(34067,me.__webglTexture),ie(34067,D,at);for(let E=0;E<6;E++)ye(Q.__webglFramebuffer[E],k,D,36064,34069+E);S(D,at)&&T(34067),e.unbindTexture()}else if(Ve){const E=k.texture;for(let _e=0,Ze=E.length;_e<Ze;_e++){const Ee=E[_e],B=n.get(Ee);e.bindTexture(3553,B.__webglTexture),ie(3553,Ee,at),ye(Q.__webglFramebuffer,k,Ee,36064+_e,3553),S(Ee,at)&&T(3553)}e.unbindTexture()}else{let E=3553;(k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(a?E=k.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(E,me.__webglTexture),ie(E,D,at),ye(Q.__webglFramebuffer,k,D,36064,E),S(D,at)&&T(E),e.unbindTexture()}k.depthBuffer&&ae(k)},this.updateRenderTargetMipmap=function Oe(k){const D=x(k)||a,Q=!0===k.isWebGLMultipleRenderTargets?k.texture:[k.texture];for(let me=0,Ie=Q.length;me<Ie;me++){const Ve=Q[me];if(S(Ve,D)){const at=k.isWebGLCubeRenderTarget?34067:3553,E=n.get(Ve).__webglTexture;e.bindTexture(at,E),T(at),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function St(k){if(a&&k.samples>0&&!1===ot(k)){const D=k.width,Q=k.height;let me=16384;const Ie=[36064],Ve=k.stencilBuffer?33306:36096;k.depthBuffer&&Ie.push(Ve);const at=n.get(k),E=void 0!==at.__ignoreDepthValues&&at.__ignoreDepthValues;!1===E&&(k.depthBuffer&&(me|=256),k.stencilBuffer&&(me|=1024)),e.bindFramebuffer(36008,at.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,at.__webglFramebuffer),!0===E&&(i.invalidateFramebuffer(36008,[Ve]),i.invalidateFramebuffer(36009,[Ve])),i.blitFramebuffer(0,0,D,Q,0,0,D,Q,me,9728),f&&i.invalidateFramebuffer(36008,Ie),e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,at.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ae,this.setupFrameBufferTexture=ye,this.useMultisampledRTT=ot}function OJ(i,t,e){const n=e.isWebGL2;return{convert:function r(s,o=null){let a;if(s===bl)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(s===Bh)return 5123;if(1013===s)return 5124;if(1014===s)return 5125;if(s===ys)return 5126;if(s===Ys)return n?5131:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===Wr)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===xl)return 6402;if(s===md)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===Jt){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===Jt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===Jt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===Jt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===pd?n?34042:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}yw.prototype.isMeshDistanceMaterial=!0;class QO extends Mi{constructor(t=[]){super(),this.cameras=t}}QO.prototype.isArrayCamera=!0;class Vo extends tn{constructor(){super(),this.type="Group"}}Vo.prototype.isGroup=!0;const FJ={type:"move"};class vw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Vo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Vo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new C,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new C),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Vo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new C,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new C),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==a&&(r=e.getPose(t.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(FJ))),c&&t.hand){o=!0;for(const m of t.hand.values()){const g=e.getJointPose(m,n);if(void 0===c.joints[m.jointName]){const v=new Vo;v.matrixAutoUpdate=!1,v.visible=!1,c.joints[m.jointName]=v,c.add(v)}const _=c.joints[m.jointName];null!==g&&(_.matrix.fromArray(g.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=g.radius),_.visible=null!==g}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==l&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}}class ZO extends zi{constructor(t,e,n,r,s,o,a,l,c,d){if((d=void 0!==d?d:xl)!==xl&&d!==md)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&d===xl&&(n=Bh),void 0===n&&d===md&&(n=pd),super(null,r,s,o,a,l,d,n,c),this.image={width:t,height:e},this.magFilter=void 0!==a?a:oi,this.minFilter=void 0!==l?l:oi,this.flipY=!1,this.generateMipmaps=!1}}ZO.prototype.isDepthTexture=!0;class LJ extends va{constructor(t,e){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=null,c=null,d=null,u=null,h=null;const f=e.getContextAttributes();let p=null,m=null;const g=[],_=new Map,v=new Mi;v.layers.enable(1),v.viewport=new ln;const b=new Mi;b.layers.enable(2),b.viewport=new ln;const x=[v,b],w=new QO;w.layers.enable(1),w.layers.enable(2);let S=null,T=null;function I(P){const $=_.get(P.inputSource);$&&$.dispatchEvent({type:P.type,data:P.inputSource})}function V(){_.forEach(function(P,$){P.disconnect($)}),_.clear(),S=null,T=null,t.setRenderTarget(p),u=null,d=null,c=null,r=null,m=null,U.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function N(P){const $=r.inputSources;for(let ee=0;ee<g.length;ee++)_.set($[ee],g[ee]);for(let ee=0;ee<P.removed.length;ee++){const pe=P.removed[ee],se=_.get(pe);se&&(se.dispatchEvent({type:"disconnected",data:pe}),_.delete(pe))}for(let ee=0;ee<P.added.length;ee++){const pe=P.added[ee],se=_.get(pe);se&&se.dispatchEvent({type:"connected",data:pe})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(P){let $=g[P];return void 0===$&&($=new vw,g[P]=$),$.getTargetRaySpace()},this.getControllerGrip=function(P){let $=g[P];return void 0===$&&($=new vw,g[P]=$),$.getGripSpace()},this.getHand=function(P){let $=g[P];return void 0===$&&($=new vw,g[P]=$),$.getHandSpace()},this.setFramebufferScaleFactor=function(P){s=P,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(P){a=P,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==d?d:u},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=function(){var P=function pY(i){return function(){var t=this,e=arguments;return new Promise(function(n,r){var s=i.apply(t,e);function o(l){xP(s,n,r,o,a,"next",l)}function a(l){xP(s,n,r,o,a,"throw",l)}o(void 0)})}}(function*($){if(r=$,null!==r){if(p=t.getRenderTarget(),r.addEventListener("select",I),r.addEventListener("selectstart",I),r.addEventListener("selectend",I),r.addEventListener("squeeze",I),r.addEventListener("squeezestart",I),r.addEventListener("squeezeend",I),r.addEventListener("end",V),r.addEventListener("inputsourceschange",N),!0!==f.xrCompatible&&(yield e.makeXRCompatible()),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2)u=new XRWebGLLayer(r,e,{antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:u}),m=new Mr(u.framebufferWidth,u.framebufferHeight,{format:Wr,type:bl,encoding:t.outputEncoding});else{let ee=null,pe=null,se=null;f.depth&&(se=f.stencil?35056:33190,ee=f.stencil?md:xl,pe=f.stencil?pd:Bh);const Ge={colorFormat:t.outputEncoding===Jt?35907:32856,depthFormat:se,scaleFactor:s};c=new XRWebGLBinding(r,e),d=c.createProjectionLayer(Ge),r.updateRenderState({layers:[d]}),m=new Mr(d.textureWidth,d.textureHeight,{format:Wr,type:bl,depthTexture:new ZO(d.textureWidth,d.textureHeight,pe,void 0,void 0,void 0,void 0,void 0,void 0,ee),stencilBuffer:f.stencil,encoding:t.outputEncoding,samples:f.antialias?4:0}),t.properties.get(m).__ignoreDepthValues=d.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),o=yield r.requestReferenceSpace(a),U.setContext(r),U.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function($){return P.apply(this,arguments)}}();const M=new C,R=new C;function z(P,$){null===$?P.matrixWorld.copy(P.matrix):P.matrixWorld.multiplyMatrices($.matrixWorld,P.matrix),P.matrixWorldInverse.copy(P.matrixWorld).invert()}this.updateCamera=function(P){if(null===r)return;w.near=b.near=v.near=P.near,w.far=b.far=v.far=P.far,(S!==w.near||T!==w.far)&&(r.updateRenderState({depthNear:w.near,depthFar:w.far}),S=w.near,T=w.far);const $=P.parent,ee=w.cameras;z(w,$);for(let se=0;se<ee.length;se++)z(ee[se],$);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),P.position.copy(w.position),P.quaternion.copy(w.quaternion),P.scale.copy(w.scale),P.matrix.copy(w.matrix),P.matrixWorld.copy(w.matrixWorld);const pe=P.children;for(let se=0,Ge=pe.length;se<Ge;se++)pe[se].updateMatrixWorld(!0);2===ee.length?function K(P,$,ee){M.setFromMatrixPosition($.matrixWorld),R.setFromMatrixPosition(ee.matrixWorld);const pe=M.distanceTo(R),se=$.projectionMatrix.elements,Ge=ee.projectionMatrix.elements,ze=se[14]/(se[10]-1),ct=se[14]/(se[10]+1),ie=(se[9]+1)/se[5],gt=(se[9]-1)/se[5],dt=(se[8]-1)/se[0],st=(Ge[8]+1)/Ge[0],ye=ze*dt,Ct=ze*st,re=pe/(-dt+st),ae=re*-dt;$.matrixWorld.decompose(P.position,P.quaternion,P.scale),P.translateX(ae),P.translateZ(re),P.matrixWorld.compose(P.position,P.quaternion,P.scale),P.matrixWorldInverse.copy(P.matrixWorld).invert();const be=ze+re,je=ct+re;P.projectionMatrix.makePerspective(ye-ae,Ct+(pe-ae),ie*ct/je*be,gt*ct/je*be,be,je)}(w,v,b):w.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==u?u.fixedFoveation:void 0},this.setFoveation=function(P){null!==d&&(d.fixedFoveation=P),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=P)};let j=null;const U=new bO;U.setAnimationLoop(function L(P,$){if(l=$.getViewerPose(o),h=$,null!==l){const pe=l.views;null!==u&&(t.setRenderTargetFramebuffer(m,u.framebuffer),t.setRenderTarget(m));let se=!1;pe.length!==w.cameras.length&&(w.cameras.length=0,se=!0);for(let Ge=0;Ge<pe.length;Ge++){const ze=pe[Ge];let ct=null;if(null!==u)ct=u.getViewport(ze);else{const gt=c.getViewSubImage(d,ze);ct=gt.viewport,0===Ge&&(t.setRenderTargetTextures(m,gt.colorTexture,d.ignoreDepthValues?void 0:gt.depthStencilTexture),t.setRenderTarget(m))}const ie=x[Ge];ie.matrix.fromArray(ze.transform.matrix),ie.projectionMatrix.fromArray(ze.projectionMatrix),ie.viewport.set(ct.x,ct.y,ct.width,ct.height),0===Ge&&w.matrix.copy(ie.matrix),!0===se&&w.cameras.push(ie)}}const ee=r.inputSources;for(let pe=0;pe<g.length;pe++)g[pe].update(ee[pe],$,o);j&&j(P,$),h=null}),this.setAnimationLoop=function(P){j=P},this.dispose=function(){}}}function NJ(i,t){function r(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,1===g.side&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),1===g.side&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const _=t.get(g).envMap;if(_&&(m.envMap.value=_,m.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const x=!0!==i.physicallyCorrectLights?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*x}let v,b;g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity),g.map?v=g.map:g.specularMap?v=g.specularMap:g.displacementMap?v=g.displacementMap:g.normalMap?v=g.normalMap:g.bumpMap?v=g.bumpMap:g.roughnessMap?v=g.roughnessMap:g.metalnessMap?v=g.metalnessMap:g.alphaMap?v=g.alphaMap:g.emissiveMap?v=g.emissiveMap:g.clearcoatMap?v=g.clearcoatMap:g.clearcoatNormalMap?v=g.clearcoatNormalMap:g.clearcoatRoughnessMap?v=g.clearcoatRoughnessMap:g.specularIntensityMap?v=g.specularIntensityMap:g.specularColorMap?v=g.specularColorMap:g.transmissionMap?v=g.transmissionMap:g.thicknessMap?v=g.thicknessMap:g.sheenColorMap?v=g.sheenColorMap:g.sheenRoughnessMap&&(v=g.sheenRoughnessMap),void 0!==v&&(v.isWebGLRenderTarget&&(v=v.texture),!0===v.matrixAutoUpdate&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix)),g.aoMap?b=g.aoMap:g.lightMap&&(b=g.lightMap),void 0!==b&&(b.isWebGLRenderTarget&&(b=b.texture),!0===b.matrixAutoUpdate&&b.updateMatrix(),m.uv2Transform.value.copy(b.matrix))}return{refreshFogUniforms:function e(m,g){m.fogColor.value.copy(g.color),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)},refreshMaterialUniforms:function n(m,g,_,v,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(m,g):g.isMeshToonMaterial?(r(m,g),function d(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}(m,g)):g.isMeshPhongMaterial?(r(m,g),function c(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}(m,g)):g.isMeshStandardMaterial?(r(m,g),function u(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}(m,g),g.isMeshPhysicalMaterial&&function h(m,g,_){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,1===g.side&&m.clearcoatNormalScale.value.negate())),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=_.texture,m.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}(m,g,b)):g.isMeshMatcapMaterial?(r(m,g),function f(m,g){g.matcap&&(m.matcap.value=g.matcap)}(m,g)):g.isMeshDepthMaterial?r(m,g):g.isMeshDistanceMaterial?(r(m,g),function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}(m,g)):g.isMeshNormalMaterial?r(m,g):g.isLineBasicMaterial?(function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}(m,g),g.isLineDashedMaterial&&function o(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}(m,g)):g.isPointsMaterial?function a(m,g,_,v){let b;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*_,m.scale.value=.5*v,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?b=g.map:g.alphaMap&&(b=g.alphaMap),void 0!==b&&(!0===b.matrixAutoUpdate&&b.updateMatrix(),m.uvTransform.value.copy(b.matrix))}(m,g,_,v):g.isSpriteMaterial?function l(m,g){let _;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?_=g.map:g.alphaMap&&(_=g.alphaMap),void 0!==_&&(!0===_.matrixAutoUpdate&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix))}(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function cn(i={}){const t=void 0!==i.canvas?i.canvas:function BJ(){const i=jh("canvas");return i.style.display="block",i}(),e=void 0!==i.context?i.context:null,n=void 0===i.depth||i.depth,r=void 0===i.stencil||i.stencil,s=void 0!==i.antialias&&i.antialias,o=void 0===i.premultipliedAlpha||i.premultipliedAlpha,a=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,l=void 0!==i.powerPreference?i.powerPreference:"default",c=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat;let d;d=void 0!==i.context?e.getContextAttributes().alpha:void 0!==i.alpha&&i.alpha;let u=null,h=null;const f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=vs,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let g=!1,_=0,v=0,b=null,x=-1,w=null;const S=new ln,T=new ln;let I=null,V=t.width,N=t.height,M=1,R=null,K=null;const z=new ln(0,0,V,N),j=new ln(0,0,V,N);let L=!1;const U=new Ng;let P=!1,$=!1,ee=null;const pe=new $e,se=new ne,Ge=new C,ze={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ct(){return null===b?M:1}let dt,st,ye,Ct,re,ae,be,je,Oe,St,pt,ot,xn,nn,k,D,Q,me,Ie,Ve,at,E,_e,ie=e;function gt(A,W){for(let Z=0;Z<A.length;Z++){const le=t.getContext(A[Z],W);if(null!==le)return le}return null}try{const A={alpha:!0,depth:n,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r139"),t.addEventListener("webglcontextlost",B,!1),t.addEventListener("webglcontextrestored",Se,!1),null===ie){const W=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&W.shift(),ie=gt(W,A),null===ie)throw gt(W)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ie.getShaderPrecisionFormat&&(ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(A){throw console.error("THREE.WebGLRenderer: "+A.message),A}function Ze(){dt=new nZ(ie),st=new XQ(ie,dt,i),dt.init(st),E=new OJ(ie,dt,st),ye=new IJ(ie,dt,st),Ct=new sZ(ie),re=new xJ,ae=new PJ(ie,dt,ye,re,st,E,Ct),be=new ZQ(m),je=new tZ(m),Oe=new QK(ie,st),_e=new YQ(ie,dt,Oe,st),St=new iZ(ie,Oe,Ct,_e),pt=new cZ(ie,St,Oe,Ct),Ie=new lZ(ie,st,ae),D=new QQ(re),ot=new bJ(m,be,je,dt,st,_e,D),xn=new NJ(m,re),nn=new MJ,k=new TJ(dt,st),me=new qQ(m,be,ye,pt,d,o),Q=new XO(m,pt,st),Ve=new KQ(ie,dt,Ct,st),at=new rZ(ie,dt,Ct,st),Ct.programs=ot.programs,m.capabilities=st,m.extensions=dt,m.properties=re,m.renderLists=nn,m.shadowMap=Q,m.state=ye,m.info=Ct}Ze();const Ee=new LJ(m,ie);function B(A){A.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Se(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const A=Ct.autoReset,W=Q.enabled,Z=Q.autoUpdate,Y=Q.needsUpdate,le=Q.type;Ze(),Ct.autoReset=A,Q.enabled=W,Q.autoUpdate=Z,Q.needsUpdate=Y,Q.type=le}function Ce(A){const W=A.target;W.removeEventListener("dispose",Ce),function _t(A){(function Le(A){const W=re.get(A).programs;void 0!==W&&(W.forEach(function(Z){ot.releaseProgram(Z)}),A.isShaderMaterial&&ot.releaseShaderCache(A))})(A),re.remove(A)}(W)}this.xr=Ee,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const A=dt.get("WEBGL_lose_context");A&&A.loseContext()},this.forceContextRestore=function(){const A=dt.get("WEBGL_lose_context");A&&A.restoreContext()},this.getPixelRatio=function(){return M},this.setPixelRatio=function(A){void 0!==A&&(M=A,this.setSize(V,N,!1))},this.getSize=function(A){return A.set(V,N)},this.setSize=function(A,W,Z){Ee.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(V=A,N=W,t.width=Math.floor(A*M),t.height=Math.floor(W*M),!1!==Z&&(t.style.width=A+"px",t.style.height=W+"px"),this.setViewport(0,0,A,W))},this.getDrawingBufferSize=function(A){return A.set(V*M,N*M).floor()},this.setDrawingBufferSize=function(A,W,Z){V=A,N=W,M=Z,t.width=Math.floor(A*Z),t.height=Math.floor(W*Z),this.setViewport(0,0,A,W)},this.getCurrentViewport=function(A){return A.copy(S)},this.getViewport=function(A){return A.copy(z)},this.setViewport=function(A,W,Z,Y){A.isVector4?z.set(A.x,A.y,A.z,A.w):z.set(A,W,Z,Y),ye.viewport(S.copy(z).multiplyScalar(M).floor())},this.getScissor=function(A){return A.copy(j)},this.setScissor=function(A,W,Z,Y){A.isVector4?j.set(A.x,A.y,A.z,A.w):j.set(A,W,Z,Y),ye.scissor(T.copy(j).multiplyScalar(M).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(A){ye.setScissorTest(L=A)},this.setOpaqueSort=function(A){R=A},this.setTransparentSort=function(A){K=A},this.getClearColor=function(A){return A.copy(me.getClearColor())},this.setClearColor=function(){me.setClearColor.apply(me,arguments)},this.getClearAlpha=function(){return me.getClearAlpha()},this.setClearAlpha=function(){me.setClearAlpha.apply(me,arguments)},this.clear=function(A=!0,W=!0,Z=!0){let Y=0;A&&(Y|=16384),W&&(Y|=256),Z&&(Y|=1024),ie.clear(Y)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",B,!1),t.removeEventListener("webglcontextrestored",Se,!1),nn.dispose(),k.dispose(),re.dispose(),be.dispose(),je.dispose(),pt.dispose(),_e.dispose(),ot.dispose(),Ee.dispose(),Ee.removeEventListener("sessionstart",At),Ee.removeEventListener("sessionend",Dn),ee&&(ee.dispose(),ee=null),Kt.stop()},this.renderBufferDirect=function(A,W,Z,Y,le,xt){null===W&&(W=ze);const Ot=le.isMesh&&le.matrixWorld.determinant()<0,Bt=function Eme(A,W,Z,Y,le){!0!==W.isScene&&(W=ze),ae.resetTextureUnits();const xt=W.fog,Bt=null===b?m.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:vs,Ft=(Y.isMeshStandardMaterial?je:be).get(Y.envMap||(Y.isMeshStandardMaterial?W.environment:null)),dn=!0===Y.vertexColors&&!!Z.attributes.color&&4===Z.attributes.color.itemSize,Qt=!!Y.normalMap&&!!Z.attributes.tangent,en=!!Z.morphAttributes.position,Wn=!!Z.morphAttributes.normal,sc=!!Z.morphAttributes.color,gu=Y.toneMapped?m.toneMapping:0,_u=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,ho=void 0!==_u?_u.length:0,rn=re.get(Y),yu=h.state.lights;!0!==P||!0!==$&&A===w||D.setState(Y,A,A===w&&Y.id===x);let ui=!1;Y.version===rn.__version?(rn.needsLights&&rn.lightsStateVersion!==yu.state.version||rn.outputEncoding!==Bt||le.isInstancedMesh&&!1===rn.instancing||!le.isInstancedMesh&&!0===rn.instancing||le.isSkinnedMesh&&!1===rn.skinning||!le.isSkinnedMesh&&!0===rn.skinning||rn.envMap!==Ft||Y.fog&&rn.fog!==xt||void 0!==rn.numClippingPlanes&&(rn.numClippingPlanes!==D.numPlanes||rn.numIntersection!==D.numIntersection)||rn.vertexAlphas!==dn||rn.vertexTangents!==Qt||rn.morphTargets!==en||rn.morphNormals!==Wn||rn.morphColors!==sc||rn.toneMapping!==gu||!0===st.isWebGL2&&rn.morphTargetsCount!==ho)&&(ui=!0):(ui=!0,rn.__version=Y.version);let fo=rn.currentProgram;!0===ui&&(fo=gS(Y,W,le));let Wa=!1,tp=!1,_S=!1;const $i=fo.getUniforms(),np=rn.uniforms;if(ye.useProgram(fo.program)&&(Wa=!0,tp=!0,_S=!0),Y.id!==x&&(x=Y.id,tp=!0),Wa||w!==A){if($i.setValue(ie,"projectionMatrix",A.projectionMatrix),st.logarithmicDepthBuffer&&$i.setValue(ie,"logDepthBufFC",2/(Math.log(A.far+1)/Math.LN2)),w!==A&&(w=A,tp=!0,_S=!0),Y.isShaderMaterial||Y.isMeshPhongMaterial||Y.isMeshToonMaterial||Y.isMeshStandardMaterial||Y.envMap){const ks=$i.map.cameraPosition;void 0!==ks&&ks.setValue(ie,Ge.setFromMatrixPosition(A.matrixWorld))}(Y.isMeshPhongMaterial||Y.isMeshToonMaterial||Y.isMeshLambertMaterial||Y.isMeshBasicMaterial||Y.isMeshStandardMaterial||Y.isShaderMaterial)&&$i.setValue(ie,"isOrthographic",!0===A.isOrthographicCamera),(Y.isMeshPhongMaterial||Y.isMeshToonMaterial||Y.isMeshLambertMaterial||Y.isMeshBasicMaterial||Y.isMeshStandardMaterial||Y.isShaderMaterial||Y.isShadowMaterial||le.isSkinnedMesh)&&$i.setValue(ie,"viewMatrix",A.matrixWorldInverse)}if(le.isSkinnedMesh){$i.setOptional(ie,le,"bindMatrix"),$i.setOptional(ie,le,"bindMatrixInverse");const ks=le.skeleton;ks&&(st.floatVertexTextures?(null===ks.boneTexture&&ks.computeBoneTexture(),$i.setValue(ie,"boneTexture",ks.boneTexture,ae),$i.setValue(ie,"boneTextureSize",ks.boneTextureSize)):$i.setOptional(ie,ks,"boneMatrices"))}const yS=Z.morphAttributes;return(void 0!==yS.position||void 0!==yS.normal||void 0!==yS.color&&!0===st.isWebGL2)&&Ie.update(le,Z,Y,fo),(tp||rn.receiveShadow!==le.receiveShadow)&&(rn.receiveShadow=le.receiveShadow,$i.setValue(ie,"receiveShadow",le.receiveShadow)),tp&&($i.setValue(ie,"toneMappingExposure",m.toneMappingExposure),rn.needsLights&&function Ame(A,W){A.ambientLightColor.needsUpdate=W,A.lightProbe.needsUpdate=W,A.directionalLights.needsUpdate=W,A.directionalLightShadows.needsUpdate=W,A.pointLights.needsUpdate=W,A.pointLightShadows.needsUpdate=W,A.spotLights.needsUpdate=W,A.spotLightShadows.needsUpdate=W,A.rectAreaLights.needsUpdate=W,A.hemisphereLights.needsUpdate=W}(np,_S),xt&&Y.fog&&xn.refreshFogUniforms(np,xt),xn.refreshMaterialUniforms(np,Y,M,N,ee),Aa.upload(ie,rn.uniformsList,np,ae)),Y.isShaderMaterial&&!0===Y.uniformsNeedUpdate&&(Aa.upload(ie,rn.uniformsList,np,ae),Y.uniformsNeedUpdate=!1),Y.isSpriteMaterial&&$i.setValue(ie,"center",le.center),$i.setValue(ie,"modelViewMatrix",le.modelViewMatrix),$i.setValue(ie,"normalMatrix",le.normalMatrix),$i.setValue(ie,"modelMatrix",le.matrixWorld),fo}(A,W,Z,Y,le);ye.setMaterial(Y,Ot);let Ft=Z.index;const dn=Z.attributes.position;if(null===Ft){if(void 0===dn||0===dn.count)return}else if(0===Ft.count)return;let Qt=1;!0===Y.wireframe&&(Ft=St.getWireframeAttribute(Z),Qt=2),_e.setup(le,Y,Bt,Z,Ft);let en,Wn=Ve;null!==Ft&&(en=Oe.get(Ft),Wn=at,Wn.setIndex(en));const sc=null!==Ft?Ft.count:dn.count,gu=Z.drawRange.start*Qt,_u=Z.drawRange.count*Qt,ho=null!==xt?xt.start*Qt:0,rn=null!==xt?xt.count*Qt:1/0,yu=Math.max(gu,ho),ui=Math.min(sc,gu+_u,ho+rn)-1,fo=Math.max(0,ui-yu+1);if(0!==fo){if(le.isMesh)!0===Y.wireframe?(ye.setLineWidth(Y.wireframeLinewidth*ct()),Wn.setMode(1)):Wn.setMode(4);else if(le.isLine){let Wa=Y.linewidth;void 0===Wa&&(Wa=1),ye.setLineWidth(Wa*ct()),Wn.setMode(le.isLineSegments?1:le.isLineLoop?2:3)}else le.isPoints?Wn.setMode(0):le.isSprite&&Wn.setMode(4);if(le.isInstancedMesh)Wn.renderInstances(yu,fo,le.count);else if(Z.isInstancedBufferGeometry){const Wa=Math.min(Z.instanceCount,Z._maxInstanceCount);Wn.renderInstances(yu,fo,Wa)}else Wn.render(yu,fo)}},this.compile=function(A,W){h=k.get(A),h.init(),p.push(h),A.traverseVisible(function(Z){Z.isLight&&Z.layers.test(W.layers)&&(h.pushLight(Z),Z.castShadow&&h.pushShadow(Z))}),h.setupLights(m.physicallyCorrectLights),A.traverse(function(Z){const Y=Z.material;if(Y)if(Array.isArray(Y))for(let le=0;le<Y.length;le++)gS(Y[le],A,Z);else gS(Y,A,Z)}),p.pop(),h=null};let tt=null;function At(){Kt.stop()}function Dn(){Kt.start()}const Kt=new bO;function co(A,W,Z,Y){if(!1===A.visible)return;if(A.layers.test(W.layers))if(A.isGroup)Z=A.renderOrder;else if(A.isLOD)!0===A.autoUpdate&&A.update(W);else if(A.isLight)h.pushLight(A),A.castShadow&&h.pushShadow(A);else if(A.isSprite){if(!A.frustumCulled||U.intersectsSprite(A)){Y&&Ge.setFromMatrixPosition(A.matrixWorld).applyMatrix4(pe);const Ot=pt.update(A),Bt=A.material;Bt.visible&&u.push(A,Ot,Bt,Z,Ge.z,null)}}else if((A.isMesh||A.isLine||A.isPoints)&&(A.isSkinnedMesh&&A.skeleton.frame!==Ct.render.frame&&(A.skeleton.update(),A.skeleton.frame=Ct.render.frame),!A.frustumCulled||U.intersectsObject(A))){Y&&Ge.setFromMatrixPosition(A.matrixWorld).applyMatrix4(pe);const Ot=pt.update(A),Bt=A.material;if(Array.isArray(Bt)){const Ft=Ot.groups;for(let dn=0,Qt=Ft.length;dn<Qt;dn++){const en=Ft[dn],Wn=Bt[en.materialIndex];Wn&&Wn.visible&&u.push(A,Ot,Wn,Z,Ge.z,en)}}else Bt.visible&&u.push(A,Ot,Bt,Z,Ge.z,null)}const xt=A.children;for(let Ot=0,Bt=xt.length;Ot<Bt;Ot++)co(xt[Ot],W,Z,Y)}function uo(A,W,Z,Y){const le=A.opaque,xt=A.transmissive,Ot=A.transparent;h.setupLightsView(Z),xt.length>0&&function Sme(A,W,Z){const Y=st.isWebGL2;null===ee&&(ee=new Mr(1,1,{generateMipmaps:!0,type:null!==E.convert(Ys)?Ys:bl,minFilter:ya,samples:Y&&!0===s?4:0})),m.getDrawingBufferSize(se),Y?ee.setSize(se.x,se.y):ee.setSize(pg(se.x),pg(se.y));const le=m.getRenderTarget();m.setRenderTarget(ee),m.clear();const xt=m.toneMapping;m.toneMapping=0,Uy(A,W,Z),m.toneMapping=xt,ae.updateMultisampleRenderTarget(ee),ae.updateRenderTargetMipmap(ee),m.setRenderTarget(le)}(le,W,Z),Y&&ye.viewport(S.copy(Y)),le.length>0&&Uy(le,W,Z),xt.length>0&&Uy(xt,W,Z),Ot.length>0&&Uy(Ot,W,Z),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function Uy(A,W,Z){const Y=!0===W.isScene?W.overrideMaterial:null;for(let le=0,xt=A.length;le<xt;le++){const Ot=A[le],Bt=Ot.object,Ft=Ot.geometry,dn=null===Y?Ot.material:Y,Qt=Ot.group;Bt.layers.test(Z.layers)&&Dme(Bt,W,Z,Ft,dn,Qt)}}function Dme(A,W,Z,Y,le,xt){A.onBeforeRender(m,W,Z,Y,le,xt),A.modelViewMatrix.multiplyMatrices(Z.matrixWorldInverse,A.matrixWorld),A.normalMatrix.getNormalMatrix(A.modelViewMatrix),le.onBeforeRender(m,W,Z,Y,A,xt),!0===le.transparent&&2===le.side?(le.side=1,le.needsUpdate=!0,m.renderBufferDirect(Z,W,Y,le,A,xt),le.side=0,le.needsUpdate=!0,m.renderBufferDirect(Z,W,Y,le,A,xt),le.side=2):m.renderBufferDirect(Z,W,Y,le,A,xt),A.onAfterRender(m,W,Z,Y,le,xt)}function gS(A,W,Z){!0!==W.isScene&&(W=ze);const Y=re.get(A),le=h.state.lights,Ot=le.state.version,Bt=ot.getParameters(A,le.state,h.state.shadowsArray,W,Z),Ft=ot.getProgramCacheKey(Bt);let dn=Y.programs;Y.environment=A.isMeshStandardMaterial?W.environment:null,Y.fog=W.fog,Y.envMap=(A.isMeshStandardMaterial?je:be).get(A.envMap||Y.environment),void 0===dn&&(A.addEventListener("dispose",Ce),dn=new Map,Y.programs=dn);let Qt=dn.get(Ft);if(void 0!==Qt){if(Y.currentProgram===Qt&&Y.lightsStateVersion===Ot)return Z3(A,Bt),Qt}else Bt.uniforms=ot.getUniforms(A),A.onBuild(Z,Bt,m),A.onBeforeCompile(Bt,m),Qt=ot.acquireProgram(Bt,Ft),dn.set(Ft,Qt),Y.uniforms=Bt.uniforms;const en=Y.uniforms;(!A.isShaderMaterial&&!A.isRawShaderMaterial||!0===A.clipping)&&(en.clippingPlanes=D.uniform),Z3(A,Bt),Y.needsLights=function Tme(A){return A.isMeshLambertMaterial||A.isMeshToonMaterial||A.isMeshPhongMaterial||A.isMeshStandardMaterial||A.isShadowMaterial||A.isShaderMaterial&&!0===A.lights}(A),Y.lightsStateVersion=Ot,Y.needsLights&&(en.ambientLightColor.value=le.state.ambient,en.lightProbe.value=le.state.probe,en.directionalLights.value=le.state.directional,en.directionalLightShadows.value=le.state.directionalShadow,en.spotLights.value=le.state.spot,en.spotLightShadows.value=le.state.spotShadow,en.rectAreaLights.value=le.state.rectArea,en.ltc_1.value=le.state.rectAreaLTC1,en.ltc_2.value=le.state.rectAreaLTC2,en.pointLights.value=le.state.point,en.pointLightShadows.value=le.state.pointShadow,en.hemisphereLights.value=le.state.hemi,en.directionalShadowMap.value=le.state.directionalShadowMap,en.directionalShadowMatrix.value=le.state.directionalShadowMatrix,en.spotShadowMap.value=le.state.spotShadowMap,en.spotShadowMatrix.value=le.state.spotShadowMatrix,en.pointShadowMap.value=le.state.pointShadowMap,en.pointShadowMatrix.value=le.state.pointShadowMatrix);const Wn=Qt.getUniforms(),sc=Aa.seqWithValue(Wn.seq,en);return Y.currentProgram=Qt,Y.uniformsList=sc,Qt}function Z3(A,W){const Z=re.get(A);Z.outputEncoding=W.outputEncoding,Z.instancing=W.instancing,Z.skinning=W.skinning,Z.morphTargets=W.morphTargets,Z.morphNormals=W.morphNormals,Z.morphColors=W.morphColors,Z.morphTargetsCount=W.morphTargetsCount,Z.numClippingPlanes=W.numClippingPlanes,Z.numIntersection=W.numClipIntersection,Z.vertexAlphas=W.vertexAlphas,Z.vertexTangents=W.vertexTangents,Z.toneMapping=W.toneMapping}Kt.setAnimationLoop(function Ae(A){tt&&tt(A)}),"undefined"!=typeof self&&Kt.setContext(self),this.setAnimationLoop=function(A){tt=A,Ee.setAnimationLoop(A),null===A?Kt.stop():Kt.start()},Ee.addEventListener("sessionstart",At),Ee.addEventListener("sessionend",Dn),this.render=function(A,W){if(void 0===W||!0===W.isCamera){if(!0!==g){if(!0===A.autoUpdate&&A.updateMatrixWorld(),null===W.parent&&W.updateMatrixWorld(),!0===Ee.enabled&&!0===Ee.isPresenting&&(!0===Ee.cameraAutoUpdate&&Ee.updateCamera(W),W=Ee.getCamera()),!0===A.isScene&&A.onBeforeRender(m,A,W,b),h=k.get(A,p.length),h.init(),p.push(h),pe.multiplyMatrices(W.projectionMatrix,W.matrixWorldInverse),U.setFromProjectionMatrix(pe),$=this.localClippingEnabled,P=D.init(this.clippingPlanes,$,W),u=nn.get(A,f.length),u.init(),f.push(u),co(A,W,0,m.sortObjects),u.finish(),!0===m.sortObjects&&u.sort(R,K),!0===P&&D.beginShadows(),Q.render(h.state.shadowsArray,A,W),!0===P&&D.endShadows(),!0===this.info.autoReset&&this.info.reset(),me.render(u,A),h.setupLights(m.physicallyCorrectLights),W.isArrayCamera){const Y=W.cameras;for(let le=0,xt=Y.length;le<xt;le++){const Ot=Y[le];uo(u,A,Ot,Ot.viewport)}}else uo(u,A,W);null!==b&&(ae.updateMultisampleRenderTarget(b),ae.updateRenderTargetMipmap(b)),!0===A.isScene&&A.onAfterRender(m,A,W),_e.resetDefaultState(),x=-1,w=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),u=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(A,W,Z){re.get(A.texture).__webglTexture=W,re.get(A.depthTexture).__webglTexture=Z;const Y=re.get(A);Y.__hasExternalTextures=!0,Y.__hasExternalTextures&&(Y.__autoAllocateDepthBuffer=void 0===Z,Y.__autoAllocateDepthBuffer||!0===dt.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Y.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(A,W){const Z=re.get(A);Z.__webglFramebuffer=W,Z.__useDefaultFramebuffer=void 0===W},this.setRenderTarget=function(A,W=0,Z=0){b=A,_=W,v=Z;let Y=!0;if(A){const Ft=re.get(A);void 0!==Ft.__useDefaultFramebuffer?(ye.bindFramebuffer(36160,null),Y=!1):void 0===Ft.__webglFramebuffer?ae.setupRenderTarget(A):Ft.__hasExternalTextures&&ae.rebindTextures(A,re.get(A.texture).__webglTexture,re.get(A.depthTexture).__webglTexture)}let le=null,xt=!1,Ot=!1;if(A){const Ft=A.texture;(Ft.isData3DTexture||Ft.isDataArrayTexture)&&(Ot=!0);const dn=re.get(A).__webglFramebuffer;A.isWebGLCubeRenderTarget?(le=dn[W],xt=!0):le=st.isWebGL2&&A.samples>0&&!1===ae.useMultisampledRTT(A)?re.get(A).__webglMultisampledFramebuffer:dn,S.copy(A.viewport),T.copy(A.scissor),I=A.scissorTest}else S.copy(z).multiplyScalar(M).floor(),T.copy(j).multiplyScalar(M).floor(),I=L;if(ye.bindFramebuffer(36160,le)&&st.drawBuffers&&Y&&ye.drawBuffers(A,le),ye.viewport(S),ye.scissor(T),ye.setScissorTest(I),xt){const Ft=re.get(A.texture);ie.framebufferTexture2D(36160,36064,34069+W,Ft.__webglTexture,Z)}else if(Ot){const Ft=re.get(A.texture);ie.framebufferTextureLayer(36160,36064,Ft.__webglTexture,Z||0,W||0)}x=-1},this.readRenderTargetPixels=function(A,W,Z,Y,le,xt,Ot){if(!A||!A.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Bt=re.get(A).__webglFramebuffer;if(A.isWebGLCubeRenderTarget&&void 0!==Ot&&(Bt=Bt[Ot]),Bt){ye.bindFramebuffer(36160,Bt);try{const Ft=A.texture,dn=Ft.format,Qt=Ft.type;if(dn!==Wr&&E.convert(dn)!==ie.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const en=Qt===Ys&&(dt.has("EXT_color_buffer_half_float")||st.isWebGL2&&dt.has("EXT_color_buffer_float"));if(!(Qt===bl||E.convert(Qt)===ie.getParameter(35738)||Qt===ys&&(st.isWebGL2||dt.has("OES_texture_float")||dt.has("WEBGL_color_buffer_float"))||en))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");W>=0&&W<=A.width-Y&&Z>=0&&Z<=A.height-le&&ie.readPixels(W,Z,Y,le,E.convert(dn),E.convert(Qt),xt)}finally{const Ft=null!==b?re.get(b).__webglFramebuffer:null;ye.bindFramebuffer(36160,Ft)}}},this.copyFramebufferToTexture=function(A,W,Z=0){if(!0!==W.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const Y=Math.pow(2,-Z),le=Math.floor(W.image.width*Y),xt=Math.floor(W.image.height*Y);ae.setTexture2D(W,0),ie.copyTexSubImage2D(3553,Z,0,0,A.x,A.y,le,xt),ye.unbindTexture()},this.copyTextureToTexture=function(A,W,Z,Y=0){const le=W.image.width,xt=W.image.height,Ot=E.convert(Z.format),Bt=E.convert(Z.type);ae.setTexture2D(Z,0),ie.pixelStorei(37440,Z.flipY),ie.pixelStorei(37441,Z.premultiplyAlpha),ie.pixelStorei(3317,Z.unpackAlignment),W.isDataTexture?ie.texSubImage2D(3553,Y,A.x,A.y,le,xt,Ot,Bt,W.image.data):W.isCompressedTexture?ie.compressedTexSubImage2D(3553,Y,A.x,A.y,W.mipmaps[0].width,W.mipmaps[0].height,Ot,W.mipmaps[0].data):ie.texSubImage2D(3553,Y,A.x,A.y,Ot,Bt,W.image),0===Y&&Z.generateMipmaps&&ie.generateMipmap(3553),ye.unbindTexture()},this.copyTextureToTexture3D=function(A,W,Z,Y,le=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const xt=A.max.x-A.min.x+1,Ot=A.max.y-A.min.y+1,Bt=A.max.z-A.min.z+1,Ft=E.convert(Y.format),dn=E.convert(Y.type);let Qt;if(Y.isData3DTexture)ae.setTexture3D(Y,0),Qt=32879;else{if(!Y.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ae.setTexture2DArray(Y,0),Qt=35866}ie.pixelStorei(37440,Y.flipY),ie.pixelStorei(37441,Y.premultiplyAlpha),ie.pixelStorei(3317,Y.unpackAlignment);const en=ie.getParameter(3314),Wn=ie.getParameter(32878),sc=ie.getParameter(3316),gu=ie.getParameter(3315),_u=ie.getParameter(32877),ho=Z.isCompressedTexture?Z.mipmaps[0]:Z.image;ie.pixelStorei(3314,ho.width),ie.pixelStorei(32878,ho.height),ie.pixelStorei(3316,A.min.x),ie.pixelStorei(3315,A.min.y),ie.pixelStorei(32877,A.min.z),Z.isDataTexture||Z.isData3DTexture?ie.texSubImage3D(Qt,le,W.x,W.y,W.z,xt,Ot,Bt,Ft,dn,ho.data):Z.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ie.compressedTexSubImage3D(Qt,le,W.x,W.y,W.z,xt,Ot,Bt,Ft,ho.data)):ie.texSubImage3D(Qt,le,W.x,W.y,W.z,xt,Ot,Bt,Ft,dn,ho),ie.pixelStorei(3314,en),ie.pixelStorei(32878,Wn),ie.pixelStorei(3316,sc),ie.pixelStorei(3315,gu),ie.pixelStorei(32877,_u),0===le&&Y.generateMipmaps&&ie.generateMipmap(Qt),ye.unbindTexture()},this.initTexture=function(A){ae.setTexture2D(A,0),ye.unbindTexture()},this.resetState=function(){_=0,v=0,b=null,ye.reset(),_e.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}cn.prototype.isWebGLRenderer=!0,class VJ extends cn{}.prototype.isWebGL1Renderer=!0;class Hg{constructor(t,e=25e-5){this.name="",this.color=new we(t),this.density=e}clone(){return new Hg(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Hg.prototype.isFogExp2=!0;class Ug{constructor(t,e=1,n=1e3){this.name="",this.color=new we(t),this.near=e,this.far=n}clone(){return new Ug(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Ug.prototype.isFog=!0;class zg extends tn{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}zg.prototype.isScene=!0;class Fl{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Hh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=wr()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,s=this.stride;r<s;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=wr()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=wr()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Fl.prototype.isInterleavedBuffer=!0;const ir=new C;class Ta{constructor(t,e,n,r=!1){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)ir.fromBufferAttribute(this,e),ir.applyMatrix4(t),this.setXYZ(e,ir.x,ir.y,ir.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)ir.fromBufferAttribute(this,e),ir.applyNormalMatrix(t),this.setXYZ(e,ir.x,ir.y,ir.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)ir.fromBufferAttribute(this,e),ir.transformDirection(t),this.setXYZ(e,ir.x,ir.y,ir.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,s){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=s,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return new hn(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Ta(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Ta.prototype.isInterleavedBufferAttribute=!0;class bw extends Pn{constructor(t){super(),this.type="SpriteMaterial",this.color=new we(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}let Bd;bw.prototype.isSpriteMaterial=!0;const Zh=new C,Vd=new C,Hd=new C,Ud=new ne,Jh=new ne,JO=new $e,Gg=new C,ef=new C,jg=new C,eF=new ne,xw=new ne,tF=new ne;function Wg(i,t,e,n,r,s){Ud.subVectors(i,e).addScalar(.5).multiply(n),void 0!==r?(Jh.x=s*Ud.x-r*Ud.y,Jh.y=r*Ud.x+s*Ud.y):Jh.copy(Ud),i.copy(t),i.x+=Jh.x,i.y+=Jh.y,i.applyMatrix4(JO)}(class nF extends tn{constructor(t){if(super(),this.type="Sprite",void 0===Bd){Bd=new mt;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Fl(e,5);Bd.setIndex([0,1,2,0,2,3]),Bd.setAttribute("position",new Ta(n,3,0,!1)),Bd.setAttribute("uv",new Ta(n,2,3,!1))}this.geometry=Bd,this.material=void 0!==t?t:new bw,this.center=new ne(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Vd.setFromMatrixScale(this.matrixWorld),JO.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Hd.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Vd.multiplyScalar(-Hd.z);const n=this.material.rotation;let r,s;0!==n&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;Wg(Gg.set(-.5,-.5,0),Hd,o,Vd,r,s),Wg(ef.set(.5,-.5,0),Hd,o,Vd,r,s),Wg(jg.set(.5,.5,0),Hd,o,Vd,r,s),eF.set(0,0),xw.set(1,0),tF.set(1,1);let a=t.ray.intersectTriangle(Gg,ef,jg,!1,Zh);if(null===a&&(Wg(ef.set(-.5,.5,0),Hd,o,Vd,r,s),xw.set(0,1),a=t.ray.intersectTriangle(Gg,jg,ef,!1,Zh),null===a))return;const l=t.ray.origin.distanceTo(Zh);l<t.near||l>t.far||e.push({distance:l,point:Zh.clone(),uv:ai.getUV(Zh,Gg,ef,jg,eF,xw,tF,new ne),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}).prototype.isSprite=!0;const rF=new C,sF=new ln,oF=new ln,UJ=new C,aF=new $e;class qg extends wi{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new $e,this.bindMatrixInverse=new $e}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new ln,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,r=this.geometry;sF.fromBufferAttribute(r.attributes.skinIndex,t),oF.fromBufferAttribute(r.attributes.skinWeight,t),rF.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const o=oF.getComponent(s);if(0!==o){const a=sF.getComponent(s);aF.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(UJ.copy(rF).applyMatrix4(aF),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}qg.prototype.isSkinnedMesh=!0;class Yg extends tn{constructor(){super(),this.type="Bone"}}Yg.prototype.isBone=!0;class zd extends zi{constructor(t=null,e=1,n=1,r,s,o,a,l,c=oi,d=oi,u,h){super(null,o,a,l,c,d,r,s,u,h),this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}zd.prototype.isDataTexture=!0;const lF=new $e,zJ=new $e;class Kg{constructor(t=[],e=[]){this.uuid=wr(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new $e)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new $e;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=t.length;s<o;s++)lF.multiplyMatrices(t[s]?t[s].matrixWorld:zJ,e[s]),lF.toArray(n,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new Kg(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=iO(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new zd(e,t,t,Wr,ys);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];if(r.name===t)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const s=t.bones[n];let o=e[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Yg),this.bones.push(o),this.boneInverses.push((new $e).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,s=e.length;r<s;r++)t.bones.push(e[r].uuid),t.boneInverses.push(n[r].toArray());return t}}class Gd extends hn{constructor(t,e,n,r=1){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,n),this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}Gd.prototype.isInstancedBufferAttribute=!0;const cF=new $e,dF=new $e,Xg=[],tf=new wi;(class uF extends wi{constructor(t,e,n){super(t,e),this.instanceMatrix=new Gd(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,r=this.count;if(tf.geometry=this.geometry,tf.material=this.material,void 0!==tf.material)for(let s=0;s<r;s++){this.getMatrixAt(s,cF),dF.multiplyMatrices(n,cF),tf.matrixWorld=dF,tf.raycast(t,Xg);for(let o=0,a=Xg.length;o<a;o++){const l=Xg[o];l.instanceId=s,l.object=this,e.push(l)}Xg.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new Gd(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class ki extends Pn{constructor(t){super(),this.type="LineBasicMaterial",this.color=new we(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}ki.prototype.isLineBasicMaterial=!0;const hF=new C,fF=new C,pF=new $e,ww=new Rl,Qg=new wa;class Ra extends tn{constructor(t=new mt,e=new ki){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let r=1,s=e.count;r<s;r++)hF.fromBufferAttribute(e,r-1),fF.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=hF.distanceTo(fF);t.setAttribute("lineDistance",new qe(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Qg.copy(n.boundingSphere),Qg.applyMatrix4(r),Qg.radius+=s,!1===t.ray.intersectsSphere(Qg))return;pF.copy(r).invert(),ww.copy(t.ray).applyMatrix4(pF);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new C,d=new C,u=new C,h=new C,f=this.isLineSegments?2:1;if(n.isBufferGeometry){const p=n.index,g=n.attributes.position;if(null!==p)for(let b=Math.max(0,o.start),x=Math.min(p.count,o.start+o.count)-1;b<x;b+=f){const w=p.getX(b),S=p.getX(b+1);if(c.fromBufferAttribute(g,w),d.fromBufferAttribute(g,S),ww.distanceSqToSegment(c,d,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const I=t.ray.origin.distanceTo(h);I<t.near||I>t.far||e.push({distance:I,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}else for(let b=Math.max(0,o.start),x=Math.min(g.count,o.start+o.count)-1;b<x;b+=f){if(c.fromBufferAttribute(g,b),d.fromBufferAttribute(g,b+1),ww.distanceSqToSegment(c,d,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const S=t.ray.origin.distanceTo(h);S<t.near||S>t.far||e.push({distance:S,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Ra.prototype.isLine=!0;const mF=new C,gF=new C;class Ll extends Ra{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let r=0,s=e.count;r<s;r+=2)mF.fromBufferAttribute(e,r),gF.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+mF.distanceTo(gF);t.setAttribute("lineDistance",new qe(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Ll.prototype.isLineSegments=!0;class Mw extends Ra{constructor(t,e){super(t,e),this.type="LineLoop"}}Mw.prototype.isLineLoop=!0;class Zg extends Pn{constructor(t){super(),this.type="PointsMaterial",this.color=new we(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}Zg.prototype.isPointsMaterial=!0;const _F=new $e,Cw=new Rl,Jg=new wa,e_=new C;class Sw extends tn{constructor(t=new mt,e=new Zg){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Jg.copy(n.boundingSphere),Jg.applyMatrix4(r),Jg.radius+=s,!1===t.ray.intersectsSphere(Jg))return;_F.copy(r).invert(),Cw.copy(t.ray).applyMatrix4(_F);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(n.isBufferGeometry){const c=n.index,u=n.attributes.position;if(null!==c)for(let p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);p<m;p++){const g=c.getX(p);e_.fromBufferAttribute(u,g),yF(e_,g,l,r,t,e,this)}else for(let p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);p<m;p++)e_.fromBufferAttribute(u,p),yF(e_,p,l,r,t,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function yF(i,t,e,n,r,s,o){const a=Cw.distanceSqToPoint(i);if(a<e){const l=new C;Cw.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:o})}}Sw.prototype.isPoints=!0,class GJ extends zi{constructor(t,e,n,r,s,o,a,l,c){super(t,e,n,r,s,o,a,l,c),this.minFilter=void 0!==o?o:vn,this.magFilter=void 0!==s?s:vn,this.generateMipmaps=!1;const d=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function u(){d.needsUpdate=!0,t.requestVideoFrameCallback(u)})}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t==0&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class jJ extends zi{constructor(t,e,n){super({width:t,height:e}),this.format=n,this.magFilter=oi,this.minFilter=oi,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class vF extends zi{constructor(t,e,n,r,s,o,a,l,c,d,u,h){super(null,o,a,l,c,d,r,s,u,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class WJ extends zi{constructor(t,e,n,r,s,o,a,l,c){super(t,e,n,r,s,o,a,l,c),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;class qr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),s+=n.distanceTo(r),e.push(s),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const s=n.length;let o;o=e||t*n[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(s-1);const d=n[r];return(r+(o-d)/(n[r+1]-d))/(s-1)}getTangent(t,e){const n=1e-4;let r=t-n,s=t+n;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=e||(o.isVector2?new ne:new C);return l.copy(a).sub(o).normalize(),l}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new C,r=[],s=[],o=[],a=new C,l=new $e;for(let f=0;f<=t;f++)r[f]=this.getTangentAt(f/t,new C);s[0]=new C,o[0]=new C;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);d<=c&&(c=d,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=t;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Xn(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(!0===e){let f=Math.acos(Xn(s[0].dot(s[t]),-1,1));f/=t,r[0].dot(a.crossVectors(s[0],s[t]))>0&&(f=-f);for(let p=1;p<=t;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class t_ extends qr{constructor(t=0,e=0,n=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(t,e){const n=e||new ne,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+t*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const d=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*d-f*u+this.aX,c=h*u+f*d+this.aY}return n.set(l,c)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}t_.prototype.isEllipseCurve=!0;class bF extends t_{constructor(t,e,n,r,s,o){super(t,e,n,n,r,s,o),this.type="ArcCurve"}}function Dw(){let i=0,t=0,e=0,n=0;function r(s,o,a,l){i=s,t=a,e=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,u){let h=(o-s)/c-(a-s)/(c+d)+(a-o)/d,f=(a-o)/d-(l-o)/(d+u)+(l-a)/u;h*=d,f*=d,r(o,a,h,f)},calc:function(s){const o=s*s;return i+t*s+e*o+n*(o*s)}}}bF.prototype.isArcCurve=!0;const n_=new C,Ew=new Dw,Aw=new Dw,Tw=new Dw;class xF extends qr{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new C){const n=e,r=this.points,s=r.length,o=(s-(this.closed?0:1))*t;let c,d,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(n_.subVectors(r[0],r[1]).add(r[0]),c=n_);const u=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(n_.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=n_),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let p=Math.pow(c.distanceToSquared(u),f),m=Math.pow(u.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(d),f);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),Ew.initNonuniformCatmullRom(c.x,u.x,h.x,d.x,p,m,g),Aw.initNonuniformCatmullRom(c.y,u.y,h.y,d.y,p,m,g),Tw.initNonuniformCatmullRom(c.z,u.z,h.z,d.z,p,m,g)}else"catmullrom"===this.curveType&&(Ew.initCatmullRom(c.x,u.x,h.x,d.x,this.tension),Aw.initCatmullRom(c.y,u.y,h.y,d.y,this.tension),Tw.initCatmullRom(c.z,u.z,h.z,d.z,this.tension));return n.set(Ew.calc(l),Aw.calc(l),Tw.calc(l)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new C).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function wF(i,t,e,n,r){const s=.5*(n-t),o=.5*(r-e),a=i*i;return(2*e-2*n+s+o)*(i*a)+(-3*e+3*n-2*s-o)*a+s*i+e}function nf(i,t,e,n){return function $J(i,t){const e=1-i;return e*e*t}(i,t)+function qJ(i,t){return 2*(1-i)*i*t}(i,e)+function YJ(i,t){return i*i*t}(i,n)}function rf(i,t,e,n,r){return function KJ(i,t){const e=1-i;return e*e*e*t}(i,t)+function XJ(i,t){const e=1-i;return 3*e*e*i*t}(i,e)+function QJ(i,t){return 3*(1-i)*i*i*t}(i,n)+function ZJ(i,t){return i*i*i*t}(i,r)}xF.prototype.isCatmullRomCurve3=!0;class Rw extends qr{constructor(t=new ne,e=new ne,n=new ne,r=new ne){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new ne){const n=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(rf(t,r.x,s.x,o.x,a.x),rf(t,r.y,s.y,o.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Rw.prototype.isCubicBezierCurve=!0;class MF extends qr{constructor(t=new C,e=new C,n=new C,r=new C){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new C){const n=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(rf(t,r.x,s.x,o.x,a.x),rf(t,r.y,s.y,o.y,a.y),rf(t,r.z,s.z,o.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}MF.prototype.isCubicBezierCurve3=!0;class i_ extends qr{constructor(t=new ne,e=new ne){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new ne){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new ne;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}i_.prototype.isLineCurve=!0;class kw extends qr{constructor(t=new ne,e=new ne,n=new ne){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new ne){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(nf(t,r.x,s.x,o.x),nf(t,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}kw.prototype.isQuadraticBezierCurve=!0;class Iw extends qr{constructor(t=new C,e=new C,n=new C){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new C){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(nf(t,r.x,s.x,o.x),nf(t,r.y,s.y,o.y),nf(t,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Iw.prototype.isQuadraticBezierCurve3=!0;class Pw extends qr{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new ne){const n=e,r=this.points,s=(r.length-1)*t,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],d=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(wF(a,l.x,c.x,d.x,u.x),wF(a,l.y,c.y,d.y,u.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new ne).fromArray(r))}return this}}Pw.prototype.isSplineCurve=!0;var Ow=Object.freeze({__proto__:null,ArcCurve:bF,CatmullRomCurve3:xF,CubicBezierCurve:Rw,CubicBezierCurve3:MF,EllipseCurve:t_,LineCurve:i_,LineCurve3:class JJ extends qr{constructor(t=new C,e=new C){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new C){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:kw,QuadraticBezierCurve3:Iw,SplineCurve:Pw});class eee extends qr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new i_(e,t))}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t);for(let c=0;c<l.length;c++){const d=l[c];n&&n.equals(d)||(e.push(d),n=d)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const r=t.curves[e];this.curves.push((new Ow[r.type]).fromJSON(r))}return this}}class sf extends eee{constructor(t){super(),this.type="Path",this.currentPoint=new ne,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new i_(this.currentPoint.clone(),new ne(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const s=new kw(this.currentPoint.clone(),new ne(t,e),new ne(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,s,o){const a=new Rw(this.currentPoint.clone(),new ne(t,e),new ne(n,r),new ne(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Pw(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,s,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o),this}absarc(t,e,n,r,s,o){return this.absellipse(t,e,n,n,r,s,o),this}ellipse(t,e,n,r,s,o,a,l){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o,a,l),this}absellipse(t,e,n,r,s,o,a,l){const c=new t_(t,e,n,r,s,o,a,l);if(this.curves.length>0){const u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}new C,new C,new C,new ai;class Ho extends sf{constructor(t){super(t),this.uuid=wr(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const r=t.holes[e];this.holes.push((new sf).fromJSON(r))}return this}}function SF(i,t,e,n,r){let s,o;if(r===function _ee(i,t,e,n){let r=0;for(let s=t,o=e-n;s<e;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}(i,t,e,n)>0)for(s=t;s<e;s+=n)o=AF(s,i[s],i[s+1],o);else for(s=e-n;s>=t;s-=n)o=AF(s,i[s],i[s+1],o);return o&&u_(o,o.next)&&(df(o),o=o.next),o}function Ia(i,t){if(!i)return i;t||(t=i);let n,e=i;do{if(n=!1,e.steiner||!u_(e,e.next)&&0!==On(e.prev,e,e.next))e=e.next;else{if(df(e),e=t=e.prev,e===e.next)break;n=!0}}while(n||e!==t);return t}function lf(i,t,e,n,r,s,o){if(!i)return;!o&&s&&function uee(i,t,e,n){let r=i;do{null===r.z&&(r.z=Lw(r.x,r.y,t,e,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,function hee(i){let t,e,n,r,s,o,a,l,c=1;do{for(e=i,i=null,s=null,o=0;e;){for(o++,n=e,a=0,t=0;t<c&&(a++,n=n.nextZ,n);t++);for(l=c;a>0||l>0&&n;)0!==a&&(0===l||!n||e.z<=n.z)?(r=e,e=e.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;e=n}s.nextZ=null,c*=2}while(o>1)}(r)}(i,n,r,s);let l,c,a=i;for(;i.prev!==i.next;)if(l=i.prev,c=i.next,s?iee(i,n,r,s):nee(i))t.push(l.i/e),t.push(i.i/e),t.push(c.i/e),df(i),i=c.next,a=c.next;else if((i=c)===a){o?1===o?lf(i=ree(Ia(i),t,e),t,e,n,r,s,2):2===o&&see(i,t,e,n,r,s):lf(Ia(i),t,e,n,r,s,1);break}}function nee(i){const t=i.prev,e=i,n=i.next;if(On(t,e,n)>=0)return!1;let r=i.next.next;for(;r!==i.prev;){if(Wd(t.x,t.y,e.x,e.y,n.x,n.y,r.x,r.y)&&On(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function iee(i,t,e,n){const r=i.prev,s=i,o=i.next;if(On(r,s,o)>=0)return!1;const c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,d=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,u=Lw(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,t,e,n),h=Lw(c,d,t,e,n);let f=i.prevZ,p=i.nextZ;for(;f&&f.z>=u&&p&&p.z<=h;){if(f!==i.prev&&f!==i.next&&Wd(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&On(f.prev,f,f.next)>=0||(f=f.prevZ,p!==i.prev&&p!==i.next&&Wd(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&On(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=u;){if(f!==i.prev&&f!==i.next&&Wd(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&On(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==i.prev&&p!==i.next&&Wd(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&On(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function ree(i,t,e){let n=i;do{const r=n.prev,s=n.next.next;!u_(r,s)&&DF(r,n,n.next,s)&&cf(r,s)&&cf(s,r)&&(t.push(r.i/e),t.push(n.i/e),t.push(s.i/e),df(n),df(n.next),n=i=s),n=n.next}while(n!==i);return Ia(n)}function see(i,t,e,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&pee(o,a)){let l=EF(o,a);return o=Ia(o,o.next),l=Ia(l,l.next),lf(o,t,e,n,r,s),void lf(l,t,e,n,r,s)}a=a.next}o=o.next}while(o!==i)}function aee(i,t){return i.x-t.x}function lee(i,t){if(t=function cee(i,t){let e=t;const n=i.x,r=i.y;let o,s=-1/0;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){const h=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(h<=n&&h>s){if(s=h,h===n){if(r===e.y)return e;if(r===e.next.y)return e.next}o=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!o)return null;if(n===s)return o;const a=o,l=o.x,c=o.y;let u,d=1/0;e=o;do{n>=e.x&&e.x>=l&&n!==e.x&&Wd(r<c?n:s,r,l,c,r<c?s:n,r,e.x,e.y)&&(u=Math.abs(r-e.y)/(n-e.x),cf(e,i)&&(u<d||u===d&&(e.x>o.x||e.x===o.x&&dee(o,e)))&&(o=e,d=u)),e=e.next}while(e!==a);return o}(i,t),t){const e=EF(t,i);Ia(t,t.next),Ia(e,e.next)}}function dee(i,t){return On(i.prev,i,t.prev)<0&&On(t.next,i,i.next)<0}function Lw(i,t,e,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-e)*r)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function fee(i){let t=i,e=i;do{(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next}while(t!==i);return e}function Wd(i,t,e,n,r,s,o,a){return(r-o)*(t-a)-(i-o)*(s-a)>=0&&(i-o)*(n-a)-(e-o)*(t-a)>=0&&(e-o)*(s-a)-(r-o)*(n-a)>=0}function pee(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function mee(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&DF(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}(i,t)&&(cf(i,t)&&cf(t,i)&&function gee(i,t){let e=i,n=!1;const r=(i.x+t.x)/2,s=(i.y+t.y)/2;do{e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next}while(e!==i);return n}(i,t)&&(On(i.prev,i,t.prev)||On(i,t.prev,t))||u_(i,t)&&On(i.prev,i,i.next)>0&&On(t.prev,t,t.next)>0)}function On(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function u_(i,t){return i.x===t.x&&i.y===t.y}function DF(i,t,e,n){const r=f_(On(i,t,e)),s=f_(On(i,t,n)),o=f_(On(e,n,i)),a=f_(On(e,n,t));return!!(r!==s&&o!==a||0===r&&h_(i,e,t)||0===s&&h_(i,n,t)||0===o&&h_(e,i,n)||0===a&&h_(e,t,n))}function h_(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function f_(i){return i>0?1:i<0?-1:0}function cf(i,t){return On(i.prev,i,i.next)<0?On(i,t,i.next)>=0&&On(i,i.prev,t)>=0:On(i,t,i.prev)<0||On(i,i.next,t)<0}function EF(i,t){const e=new Nw(i.i,i.x,i.y),n=new Nw(t.i,t.x,t.y),r=i.next,s=t.prev;return i.next=t,t.prev=i,e.next=r,r.prev=e,n.next=e,e.prev=n,s.next=n,n.prev=s,n}function AF(i,t,e,n){const r=new Nw(i,t,e);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function df(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Nw(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Uo{static area(t){const e=t.length;let n=0;for(let r=e-1,s=0;s<e;r=s++)n+=t[r].x*t[s].y-t[s].x*t[r].y;return.5*n}static isClockWise(t){return Uo.area(t)<0}static triangulateShape(t,e){const n=[],r=[],s=[];TF(t),RF(n,t);let o=t.length;e.forEach(TF);for(let l=0;l<e.length;l++)r.push(o),o+=e[l].length,RF(n,e[l]);const a=function(i,t,e=2){const n=t&&t.length,r=n?t[0]*e:i.length;let s=SF(i,0,r,e,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,d,u,h,f;if(n&&(s=function oee(i,t,e,n){const r=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;s++)a=t[s]*n,l=s<o-1?t[s+1]*n:i.length,c=SF(i,a,l,n,!1),c===c.next&&(c.steiner=!0),r.push(fee(c));for(r.sort(aee),s=0;s<r.length;s++)lee(r[s],e),e=Ia(e,e.next);return e}(i,t,s,e)),i.length>80*e){a=c=i[0],l=d=i[1];for(let p=e;p<r;p+=e)u=i[p],h=i[p+1],u<a&&(a=u),h<l&&(l=h),u>c&&(c=u),h>d&&(d=h);f=Math.max(c-a,d-l),f=0!==f?1/f:0}return lf(s,o,e,a,l,f),o}(n,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function TF(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function RF(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class Pa extends mt{constructor(t=new Ho([new ne(.5,.5),new ne(-.5,.5),new ne(-.5,-.5),new ne(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],s=[];for(let a=0,l=t.length;a<l;a++)o(t[a]);function o(a){const l=[],c=void 0!==e.curveSegments?e.curveSegments:12,d=void 0!==e.steps?e.steps:1;let u=void 0!==e.depth?e.depth:1,h=void 0===e.bevelEnabled||e.bevelEnabled,f=void 0!==e.bevelThickness?e.bevelThickness:.2,p=void 0!==e.bevelSize?e.bevelSize:f-.1,m=void 0!==e.bevelOffset?e.bevelOffset:0,g=void 0!==e.bevelSegments?e.bevelSegments:3;const _=e.extrudePath,v=void 0!==e.UVGenerator?e.UVGenerator:yee;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=e.amount);let b,w,S,T,I,x=!1;_&&(b=_.getSpacedPoints(d),x=!0,h=!1,w=_.computeFrenetFrames(d,!1),S=new C,T=new C,I=new C),h||(g=0,f=0,p=0,m=0);const V=a.extractPoints(c);let N=V.shape;const M=V.holes;if(!Uo.isClockWise(N)){N=N.reverse();for(let re=0,ae=M.length;re<ae;re++){const be=M[re];Uo.isClockWise(be)&&(M[re]=be.reverse())}}const K=Uo.triangulateShape(N,M),z=N;for(let re=0,ae=M.length;re<ae;re++)N=N.concat(M[re]);function j(re,ae,be){return ae||console.error("THREE.ExtrudeGeometry: vec does not exist"),ae.clone().multiplyScalar(be).add(re)}const L=N.length,U=K.length;function P(re,ae,be){let je,Oe,St;const pt=re.x-ae.x,ot=re.y-ae.y,xn=be.x-re.x,nn=be.y-re.y,k=pt*pt+ot*ot;if(Math.abs(pt*nn-ot*xn)>Number.EPSILON){const Q=Math.sqrt(k),me=Math.sqrt(xn*xn+nn*nn),Ie=ae.x-ot/Q,Ve=ae.y+pt/Q,_e=((be.x-nn/me-Ie)*nn-(be.y+xn/me-Ve)*xn)/(pt*nn-ot*xn);je=Ie+pt*_e-re.x,Oe=Ve+ot*_e-re.y;const Ze=je*je+Oe*Oe;if(Ze<=2)return new ne(je,Oe);St=Math.sqrt(Ze/2)}else{let Q=!1;pt>Number.EPSILON?xn>Number.EPSILON&&(Q=!0):pt<-Number.EPSILON?xn<-Number.EPSILON&&(Q=!0):Math.sign(ot)===Math.sign(nn)&&(Q=!0),Q?(je=-ot,Oe=pt,St=Math.sqrt(k)):(je=pt,Oe=ot,St=Math.sqrt(k/2))}return new ne(je/St,Oe/St)}const $=[];for(let re=0,ae=z.length,be=ae-1,je=re+1;re<ae;re++,be++,je++)be===ae&&(be=0),je===ae&&(je=0),$[re]=P(z[re],z[be],z[je]);const ee=[];let pe,se=$.concat();for(let re=0,ae=M.length;re<ae;re++){const be=M[re];pe=[];for(let je=0,Oe=be.length,St=Oe-1,pt=je+1;je<Oe;je++,St++,pt++)St===Oe&&(St=0),pt===Oe&&(pt=0),pe[je]=P(be[je],be[St],be[pt]);ee.push(pe),se=se.concat(pe)}for(let re=0;re<g;re++){const ae=re/g,be=f*Math.cos(ae*Math.PI/2),je=p*Math.sin(ae*Math.PI/2)+m;for(let Oe=0,St=z.length;Oe<St;Oe++){const pt=j(z[Oe],$[Oe],je);gt(pt.x,pt.y,-be)}for(let Oe=0,St=M.length;Oe<St;Oe++){const pt=M[Oe];pe=ee[Oe];for(let ot=0,xn=pt.length;ot<xn;ot++){const nn=j(pt[ot],pe[ot],je);gt(nn.x,nn.y,-be)}}}const Ge=p+m;for(let re=0;re<L;re++){const ae=h?j(N[re],se[re],Ge):N[re];x?(T.copy(w.normals[0]).multiplyScalar(ae.x),S.copy(w.binormals[0]).multiplyScalar(ae.y),I.copy(b[0]).add(T).add(S),gt(I.x,I.y,I.z)):gt(ae.x,ae.y,0)}for(let re=1;re<=d;re++)for(let ae=0;ae<L;ae++){const be=h?j(N[ae],se[ae],Ge):N[ae];x?(T.copy(w.normals[re]).multiplyScalar(be.x),S.copy(w.binormals[re]).multiplyScalar(be.y),I.copy(b[re]).add(T).add(S),gt(I.x,I.y,I.z)):gt(be.x,be.y,u/d*re)}for(let re=g-1;re>=0;re--){const ae=re/g,be=f*Math.cos(ae*Math.PI/2),je=p*Math.sin(ae*Math.PI/2)+m;for(let Oe=0,St=z.length;Oe<St;Oe++){const pt=j(z[Oe],$[Oe],je);gt(pt.x,pt.y,u+be)}for(let Oe=0,St=M.length;Oe<St;Oe++){const pt=M[Oe];pe=ee[Oe];for(let ot=0,xn=pt.length;ot<xn;ot++){const nn=j(pt[ot],pe[ot],je);x?gt(nn.x,nn.y+b[d-1].y,b[d-1].x+be):gt(nn.x,nn.y,u+be)}}}function ie(re,ae){let be=re.length;for(;--be>=0;){const je=be;let Oe=be-1;Oe<0&&(Oe=re.length-1);for(let St=0,pt=d+2*g;St<pt;St++){const ot=L*St,xn=L*(St+1);st(ae+je+ot,ae+Oe+ot,ae+Oe+xn,ae+je+xn)}}}function gt(re,ae,be){l.push(re),l.push(ae),l.push(be)}function dt(re,ae,be){ye(re),ye(ae),ye(be);const je=r.length/3,Oe=v.generateTopUV(n,r,je-3,je-2,je-1);Ct(Oe[0]),Ct(Oe[1]),Ct(Oe[2])}function st(re,ae,be,je){ye(re),ye(ae),ye(je),ye(ae),ye(be),ye(je);const Oe=r.length/3,St=v.generateSideWallUV(n,r,Oe-6,Oe-3,Oe-2,Oe-1);Ct(St[0]),Ct(St[1]),Ct(St[3]),Ct(St[1]),Ct(St[2]),Ct(St[3])}function ye(re){r.push(l[3*re+0]),r.push(l[3*re+1]),r.push(l[3*re+2])}function Ct(re){s.push(re.x),s.push(re.y)}(function ze(){const re=r.length/3;if(h){let ae=0,be=L*ae;for(let je=0;je<U;je++){const Oe=K[je];dt(Oe[2]+be,Oe[1]+be,Oe[0]+be)}ae=d+2*g,be=L*ae;for(let je=0;je<U;je++){const Oe=K[je];dt(Oe[0]+be,Oe[1]+be,Oe[2]+be)}}else{for(let ae=0;ae<U;ae++){const be=K[ae];dt(be[2],be[1],be[0])}for(let ae=0;ae<U;ae++){const be=K[ae];dt(be[0]+L*d,be[1]+L*d,be[2]+L*d)}}n.addGroup(re,r.length/3-re,0)})(),function ct(){const re=r.length/3;let ae=0;ie(z,ae),ae+=z.length;for(let be=0,je=M.length;be<je;be++){const Oe=M[be];ie(Oe,ae),ae+=Oe.length}n.addGroup(re,r.length/3-re,1)}()}this.setAttribute("position",new qe(r,3)),this.setAttribute("uv",new qe(s,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function vee(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++)e.shapes.push(i[n].uuid);else e.shapes.push(i.uuid);return void 0!==t.extrudePath&&(e.options.extrudePath=t.extrudePath.toJSON()),e}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let s=0,o=t.shapes.length;s<o;s++)n.push(e[t.shapes[s]]);const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new Ow[r.type]).fromJSON(r)),new Pa(n,t.options)}}const yee={generateTopUV:function(i,t,e,n,r){const a=t[3*n],l=t[3*n+1],c=t[3*r],d=t[3*r+1];return[new ne(t[3*e],t[3*e+1]),new ne(a,l),new ne(c,d)]},generateSideWallUV:function(i,t,e,n,r,s){const o=t[3*e],a=t[3*e+1],l=t[3*e+2],c=t[3*n],d=t[3*n+1],u=t[3*n+2],h=t[3*r],f=t[3*r+1],p=t[3*r+2],m=t[3*s],g=t[3*s+1],_=t[3*s+2];return Math.abs(a-d)<Math.abs(o-c)?[new ne(o,1-l),new ne(c,1-u),new ne(h,1-p),new ne(m,1-_)]:[new ne(a,1-l),new ne(d,1-u),new ne(f,1-p),new ne(g,1-_)]}};class hf extends mt{constructor(t=new Ho([new ne(0,.5),new ne(-.5,-.5),new ne(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],s=[],o=[];let a=0,l=0;if(!1===Array.isArray(t))c(t);else for(let d=0;d<t.length;d++)c(t[d]),this.addGroup(a,l,d),a+=l,l=0;function c(d){const u=r.length/3,h=d.extractPoints(e);let f=h.shape;const p=h.holes;!1===Uo.isClockWise(f)&&(f=f.reverse());for(let g=0,_=p.length;g<_;g++){const v=p[g];!0===Uo.isClockWise(v)&&(p[g]=v.reverse())}const m=Uo.triangulateShape(f,p);for(let g=0,_=p.length;g<_;g++)f=f.concat(p[g]);for(let g=0,_=f.length;g<_;g++){const v=f[g];r.push(v.x,v.y,0),s.push(0,0,1),o.push(v.x,v.y)}for(let g=0,_=m.length;g<_;g++){const v=m[g];n.push(v[0]+u,v[1]+u,v[2]+u),l+=3}}this.setIndex(n),this.setAttribute("position",new qe(r,3)),this.setAttribute("normal",new qe(s,3)),this.setAttribute("uv",new qe(o,2))}toJSON(){const t=super.toJSON();return function bee(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,n=i.length;e<n;e++)t.shapes.push(i[e].uuid);else t.shapes.push(i.uuid);return t}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let r=0,s=t.shapes.length;r<s;r++)n.push(e[t.shapes[r]]);return new hf(n,t.curveSegments)}}class OF extends Pn{constructor(t){super(),this.type="ShadowMaterial",this.color=new we(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}OF.prototype.isShadowMaterial=!0;class FF extends Cs{constructor(t){super(t),this.type="RawShaderMaterial"}}FF.prototype.isRawShaderMaterial=!0;class $d extends Pn{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new we(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new we(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}$d.prototype.isMeshStandardMaterial=!0;class Oa extends $d{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ne(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Xn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenColor=new we(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new we(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new we(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}Oa.prototype.isMeshPhysicalMaterial=!0;class LF extends Pn{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new we(16777215),this.specular=new we(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new we(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}LF.prototype.isMeshPhongMaterial=!0;class NF extends Pn{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new we(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new we(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}NF.prototype.isMeshToonMaterial=!0;class BF extends Pn{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}BF.prototype.isMeshNormalMaterial=!0;class VF extends Pn{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new we(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new we(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}VF.prototype.isMeshLambertMaterial=!0;class HF extends Pn{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new we(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}HF.prototype.isMeshMatcapMaterial=!0;class UF extends ki{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}UF.prototype.isLineDashedMaterial=!0;const xee={ShadowMaterial:OF,SpriteMaterial:bw,RawShaderMaterial:FF,ShaderMaterial:Cs,PointsMaterial:Zg,MeshPhysicalMaterial:Oa,MeshStandardMaterial:$d,MeshPhongMaterial:LF,MeshToonMaterial:NF,MeshNormalMaterial:BF,MeshLambertMaterial:VF,MeshDepthMaterial:_w,MeshDistanceMaterial:yw,MeshBasicMaterial:Dr,MeshMatcapMaterial:HF,LineDashedMaterial:UF,LineBasicMaterial:ki,Material:Pn};Pn.fromType=function(i){return new xee[i]};const An={arraySlice:function(i,t,e){return An.isTypedArray(i)?new i.constructor(i.subarray(t,void 0!==e?e:i.length)):i.slice(t,e)},convertArray:function(i,t,e){return!i||!e&&i.constructor===t?i:"number"==typeof t.BYTES_PER_ELEMENT?new t(i):Array.prototype.slice.call(i)},isTypedArray:function(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)},getKeyframeOrder:function(i){const e=i.length,n=new Array(e);for(let r=0;r!==e;++r)n[r]=r;return n.sort(function t(r,s){return i[r]-i[s]}),n},sortedArray:function(i,t,e){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=e[s]*t;for(let l=0;l!==t;++l)r[o++]=i[a+l]}return r},flattenJSON:function(i,t,e,n){let r=1,s=i[0];for(;void 0!==s&&void 0===s[n];)s=i[r++];if(void 0===s)return;let o=s[n];if(void 0!==o)if(Array.isArray(o))do{o=s[n],void 0!==o&&(t.push(s.time),e.push.apply(e,o)),s=i[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[n],void 0!==o&&(t.push(s.time),o.toArray(e,e.length)),s=i[r++]}while(void 0!==s);else do{o=s[n],void 0!==o&&(t.push(s.time),e.push(o)),s=i[r++]}while(void 0!==s)},subclip:function(i,t,e,n,r=30){const s=i.clone();s.name=t;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],d=c.getValueSize(),u=[],h=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<e||p>=n)){u.push(c.times[f]);for(let m=0;m<d;++m)h.push(c.values[f*d+m])}}0!==u.length&&(c.times=An.convertArray(u,c.times.constructor),c.values=An.convertArray(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(i,t=0,e=i,n=30){n<=0&&(n=30);const r=e.tracks.length,s=t/n;for(let o=0;o<r;++o){const a=e.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=i.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(void 0===c)continue;let d=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=u/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const p=a.times.length-1;let m;if(s<=a.times[0])m=An.arraySlice(a.values,d,u-d);else if(s>=a.times[p]){const _=p*u+d;m=An.arraySlice(a.values,_,_+u-d)}else{const _=a.createInterpolant(),v=d,b=u-d;_.evaluate(s),m=An.arraySlice(_.resultBuffer,v,b)}"quaternion"===l&&(new xi).fromArray(m).normalize().conjugate().toArray(m);const g=c.times.length;for(let _=0;_<g;++_){const v=_*f+h;if("quaternion"===l)xi.multiplyQuaternionsFlat(c.values,v,m,0,c.values,v);else{const b=f-2*h;for(let x=0;x<b;++x)c.values[v+x]-=m[x]}}}return i.blendMode=2501,i}};class zo{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],s=e[n-1];e:{t:{let o;n:{i:if(!(t<r)){for(let a=n+2;;){if(void 0===r){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,s)}if(n===a)break;if(s=r,r=e[++n],t<r)break t}o=e.length;break n}if(t>=s)break e;{const a=e[1];t<a&&(n=2,s=a);for(let l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===l)break;if(r=s,s=e[--n-1],t>=s)break t}o=n,n=0}}for(;n<o;){const a=n+o>>>1;t<e[a]?o=a:n=a+1}if(r=e[n],s=e[n-1],void 0===s)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,s,t)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=n[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}zo.prototype.beforeStart_=zo.prototype.copySampleValue_,zo.prototype.afterEnd_=zo.prototype.copySampleValue_;class wee extends zo{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:_d,endingEnd:_d}}intervalChanged_(t,e,n){const r=this.parameterPositions;let s=t-2,o=t+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case yd:s=t,a=2*e-n;break;case 2402:s=r.length-2,a=e+r[s]-r[s+1];break;default:s=t,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case yd:o=t,l=2*n-e;break;case 2402:o=1,l=n+r[1]-r[0];break;default:o=t-1,l=e}const c=.5*(n-e),d=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(l-n),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(n-e)/(r-e),m=p*p,g=m*p,_=-h*g+2*h*m-h*p,v=(1+h)*g+(-1.5-2*h)*m+(-.5+h)*p+1,b=(-1-f)*g+(1.5+f)*m+.5*p,x=f*g-f*m;for(let w=0;w!==a;++w)s[w]=_*o[d+w]+v*o[c+w]+b*o[l+w]+x*o[u+w];return s}}class zF extends zo{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,d=(n-e)/(r-e),u=1-d;for(let h=0;h!==a;++h)s[h]=o[c+h]*u+o[l+h]*d;return s}}class Mee extends zo{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class Xs{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=An.convertArray(e,this.TimeBufferType),this.values=An.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:An.convertArray(t.times,Array),values:An.convertArray(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Mee(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new zF(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new wee(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Vh:e=this.InterpolantFactoryMethodDiscrete;break;case gd:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Vh;case this.InterpolantFactoryMethodLinear:return gd;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<t;)++s;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=An.arraySlice(n,s,o),this.values=An.arraySlice(this.values,s*a,o*a)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),t=!1;break}o=l}if(void 0!==r&&An.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}return t}optimize(){const t=An.arraySlice(this.times),e=An.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=t[a];if(c!==t[a+1]&&(1!==a||c!==t[0]))if(r)l=!0;else{const u=a*n,h=u-n,f=u+n;for(let p=0;p!==n;++p){const m=e[u+p];if(m!==e[h+p]||m!==e[f+p]){l=!0;break}}}if(l){if(a!==o){t[o]=t[a];const u=a*n,h=o*n;for(let f=0;f!==n;++f)e[h+f]=e[u+f]}++o}}if(s>0){t[o]=t[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)e[l+c]=e[a+c];++o}return o!==t.length?(this.times=An.arraySlice(t,0,o),this.values=An.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=An.arraySlice(this.times,0),e=An.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}Xs.prototype.TimeBufferType=Float32Array,Xs.prototype.ValueBufferType=Float32Array,Xs.prototype.DefaultInterpolation=gd;class qd extends Xs{}qd.prototype.ValueTypeName="bool",qd.prototype.ValueBufferType=Array,qd.prototype.DefaultInterpolation=Vh,qd.prototype.InterpolantFactoryMethodLinear=void 0,qd.prototype.InterpolantFactoryMethodSmooth=void 0;class GF extends Xs{}GF.prototype.ValueTypeName="color";class pf extends Xs{}pf.prototype.ValueTypeName="number";class Cee extends zo{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-e)/(r-e);let c=t*a;for(let d=c+a;c!==d;c+=4)xi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Nl extends Xs{InterpolantFactoryMethodLinear(t){return new Cee(this.times,this.values,this.getValueSize(),t)}}Nl.prototype.ValueTypeName="quaternion",Nl.prototype.DefaultInterpolation=gd,Nl.prototype.InterpolantFactoryMethodSmooth=void 0;class Yd extends Xs{}Yd.prototype.ValueTypeName="string",Yd.prototype.ValueBufferType=Array,Yd.prototype.DefaultInterpolation=Vh,Yd.prototype.InterpolantFactoryMethodLinear=void 0,Yd.prototype.InterpolantFactoryMethodSmooth=void 0;class mf extends Xs{}mf.prototype.ValueTypeName="vector";class gf{constructor(t,e=-1,n,r=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=wr(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let o=0,a=n.length;o!==a;++o)e.push(Dee(n[o]).scale(r));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,o=n.length;s!==o;++s)e.push(Xs.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const s=e.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=An.getKeyframeOrder(l);l=An.sortedArray(l,1,d),c=An.sortedArray(c,1,d),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new pf(".morphTargetInfluences["+e[a].name+"]",l,c).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const r=t;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=t.length;a<l;a++){const c=t[a],d=c.name.match(s);if(d&&d.length>1){const u=d[1];let h=r[u];h||(r[u]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,h,f,p,m){if(0!==f.length){const g=[],_=[];An.flattenJSON(f,g,_,p),0!==g.length&&m.push(new u(h,g,_))}},r=[],s=t.name||"default",o=t.fps||30,a=t.blendMode;let l=t.length||-1;const c=t.hierarchy||[];for(let u=0;u<c.length;u++){const h=c[u].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)f[h[p].morphTargets[m]]=-1;for(const m in f){const g=[],_=[];for(let v=0;v!==h[p].morphTargets.length;++v){const b=h[p];g.push(b.time),_.push(b.morphTarget===m?1:0)}r.push(new pf(".morphTargetInfluence["+m+"]",g,_))}l=f.length*o}else{const f=".bones["+e[u].name+"]";n(mf,f+".position",h,"pos",r),n(Nl,f+".quaternion",h,"rot",r),n(mf,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let e=0;for(let n=0,r=this.tracks.length;n!==r;++n){const s=this.tracks[n];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Dee(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function See(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return pf;case"vector":case"vector2":case"vector3":case"vector4":return mf;case"color":return GF;case"quaternion":return Nl;case"bool":case"boolean":return qd;case"string":return Yd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){const e=[],n=[];An.flattenJSON(i.keys,e,n,"value"),i.times=e,i.values=n}return void 0!==t.parse?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const Kd={enabled:!1,files:{},add:function(i,t){!1!==this.enabled&&(this.files[i]=t)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class Bw{constructor(t,e,n){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(d){a++,!1===s&&void 0!==r.onStart&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,void 0!==r.onProgress&&r.onProgress(d,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(d){void 0!==r.onError&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,u){return c.push(d,u),this},this.removeHandler=function(d){const u=c.indexOf(d);return-1!==u&&c.splice(u,2),this},this.getHandler=function(d){for(let u=0,h=c.length;u<h;u+=2){const f=c[u],p=c[u+1];if(f.global&&(f.lastIndex=0),f.test(d))return p}return null}}}const Eee=new Bw;class Qs{constructor(t){this.manager=void 0!==t?t:Eee,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(r,s){n.load(t,r,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Go={};class Zs extends Qs{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=Kd.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(void 0!==Go[t])return void Go[t].push({onLoad:e,onProgress:n,onError:r});Go[t]=[],Go[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===c.body||void 0===c.body.getReader)return c;const d=Go[t],u=c.body.getReader(),h=c.headers.get("Content-Length"),f=h?parseInt(h):0,p=0!==f;let m=0;const g=new ReadableStream({start(_){!function v(){u.read().then(({done:b,value:x})=>{if(b)_.close();else{m+=x.byteLength;const w=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let S=0,T=d.length;S<T;S++){const I=d[S];I.onProgress&&I.onProgress(w)}_.enqueue(x),v()}})}()}});return new Response(g)}throw Error(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>(new DOMParser).parseFromString(d,a));case"json":return c.json();default:if(void 0===a)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{Kd.add(t,c);const d=Go[t];delete Go[t];for(let u=0,h=d.length;u<h;u++){const f=d[u];f.onLoad&&f.onLoad(c)}}).catch(c=>{const d=Go[t];if(void 0===d)throw this.manager.itemError(t),c;delete Go[t];for(let u=0,h=d.length;u<h;u++){const f=d[u];f.onError&&f.onError(c)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class b_ extends Qs{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=Kd.get(t);if(void 0!==o)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;const a=jh("img");function l(){d(),Kd.add(t,this),e&&e(this),s.manager.itemEnd(t)}function c(u){d(),r&&r(u),s.manager.itemError(t),s.manager.itemEnd(t)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(t),a.src=t,a}}class Aee extends Qs{constructor(t){super(t)}load(t,e,n,r){const s=new Yh,o=new b_(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(t[c],function(d){s.images[c]=d,a++,6===a&&(s.needsUpdate=!0,e&&e(s))},void 0,r)}for(let c=0;c<t.length;++c)l(c);return s}}class Tee extends Qs{constructor(t){super(t)}load(t,e,n,r){const s=this,o=new zd,a=new Zs(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(t,function(l){const c=s.parse(l);!c||(void 0!==c.image?o.image=c.image:void 0!==c.data&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=void 0!==c.wrapS?c.wrapS:tr,o.wrapT=void 0!==c.wrapT?c.wrapT:tr,o.magFilter=void 0!==c.magFilter?c.magFilter:vn,o.minFilter=void 0!==c.minFilter?c.minFilter:vn,o.anisotropy=void 0!==c.anisotropy?c.anisotropy:1,void 0!==c.encoding&&(o.encoding=c.encoding),void 0!==c.flipY&&(o.flipY=c.flipY),void 0!==c.format&&(o.format=c.format),void 0!==c.type&&(o.type=c.type),void 0!==c.mipmaps&&(o.mipmaps=c.mipmaps,o.minFilter=ya),1===c.mipmapCount&&(o.minFilter=vn),void 0!==c.generateMipmaps&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,e&&e(o,c))},n,r),o}}class jF extends Qs{constructor(t){super(t)}load(t,e,n,r){const s=new zi,o=new b_(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(a){s.image=a,s.needsUpdate=!0,void 0!==e&&e(s)},n,r),s}}class Js extends tn{constructor(t,e=1){super(),this.type="Light",this.color=new we(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}Js.prototype.isLight=!0;class Vw extends Js{constructor(t,e,n){super(t,n),this.type="HemisphereLight",this.position.copy(tn.DefaultUp),this.updateMatrix(),this.groundColor=new we(e)}copy(t){return Js.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}Vw.prototype.isHemisphereLight=!0;const WF=new $e,$F=new C,qF=new C;class Hw{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ne(512,512),this.map=null,this.mapPass=null,this.matrix=new $e,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ng,this._frameExtents=new ne(1,1),this._viewportCount=1,this._viewports=[new ln(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;$F.setFromMatrixPosition(t.matrixWorld),e.position.copy($F),qF.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(qF),e.updateMatrixWorld(),WF.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(WF),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class YF extends Hw{constructor(){super(new Mi(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,n=2*zh*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}YF.prototype.isSpotLightShadow=!0;class Uw extends Js{constructor(t,e,n=0,r=Math.PI/3,s=0,o=1){super(t,e),this.type="SpotLight",this.position.copy(tn.DefaultUp),this.updateMatrix(),this.target=new tn,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new YF}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}Uw.prototype.isSpotLight=!0;const KF=new $e,_f=new C,zw=new C;class XF extends Hw{constructor(){super(new Mi(90,1,.5,500)),this._frameExtents=new ne(4,2),this._viewportCount=6,this._viewports=[new ln(2,1,1,1),new ln(0,1,1,1),new ln(3,1,1,1),new ln(1,1,1,1),new ln(3,0,1,1),new ln(1,0,1,1)],this._cubeDirections=[new C(1,0,0),new C(-1,0,0),new C(0,0,1),new C(0,0,-1),new C(0,1,0),new C(0,-1,0)],this._cubeUps=[new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,0,1),new C(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,s=t.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),_f.setFromMatrixPosition(t.matrixWorld),n.position.copy(_f),zw.copy(n.position),zw.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(zw),n.updateMatrixWorld(),r.makeTranslation(-_f.x,-_f.y,-_f.z),KF.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(KF)}}XF.prototype.isPointLightShadow=!0;class Gw extends Js{constructor(t,e,n=0,r=1){super(t,e),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new XF}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}Gw.prototype.isPointLight=!0;class QF extends Hw{constructor(){super(new Xh(-5,5,5,-5,.5,500))}}QF.prototype.isDirectionalLightShadow=!0;class jw extends Js{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(tn.DefaultUp),this.updateMatrix(),this.target=new tn,this.shadow=new QF}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}jw.prototype.isDirectionalLight=!0;class Ww extends Js{constructor(t,e){super(t,e),this.type="AmbientLight"}}Ww.prototype.isAmbientLight=!0;(class ZF extends Js{constructor(t,e,n=10,r=10){super(t,e),this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}).prototype.isRectAreaLight=!0;class JF{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new C)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*s),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*s*1.092548),e.addScaledVector(o[6],.315392*(3*s*s-1)),e.addScaledVector(o[7],n*s*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*s),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*s),e.addScaledVector(o[6],.743125*s*s-.247708),e.addScaledVector(o[7],.858086*n*s),e.addScaledVector(o[8],.429043*(n*n-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}toArray(t=[],e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const n=t.x,r=t.y,s=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*s,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*s,e[6]=.315392*(3*s*s-1),e[7]=1.092548*n*s,e[8]=.546274*(n*n-r*r)}}JF.prototype.isSphericalHarmonics3=!0;class x_ extends Js{constructor(t=new JF,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}x_.prototype.isLightProbe=!0;class eo{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(n){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}(class eL extends mt{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}).prototype.isInstancedBufferGeometry=!0;class iL extends Qs{constructor(t){super(t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=Kd.get(t);if(void 0!==o)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Kd.add(t,l),e&&e(l),s.manager.itemEnd(t)}).catch(function(l){r&&r(l),s.manager.itemError(t),s.manager.itemEnd(t)}),s.manager.itemStart(t)}}let w_;iL.prototype.isImageBitmapLoader=!0;class Pee extends Qs{constructor(t){super(t)}load(t,e,n,r){const s=this,o=new Zs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(a){try{const l=a.slice(0);(void 0===w_&&(w_=new(window.AudioContext||window.webkitAudioContext)),w_).decodeAudioData(l,function(d){e(d)})}catch(l){r?r(l):console.error(l),s.manager.itemError(t)}},n,r)}}(class Oee extends x_{constructor(t,e,n=1){super(void 0,n);const r=(new we).set(t),s=(new we).set(e),o=new C(r.r,r.g,r.b),a=new C(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}).prototype.isHemisphereLightProbe=!0,class Fee extends x_{constructor(t,e=1){super(void 0,e);const n=(new we).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class aL{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=lL(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=lL();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function lL(){return("undefined"==typeof performance?Date:performance).now()}class Hee{constructor(t,e,n){let r,s,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,r=this.valueSize,s=t*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)n[s+a]=n[a];o=e}else o+=e,this._mixBufferRegion(n,s,0,e/o,r);this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,r=t*e+e,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(n,r,e*this._origIndex,1-s,e),o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let l=e,c=e+e;l!==c;++l)if(n[l]!==n[l+e]){a.setValue(n,r);break}}saveOriginalState(){const e=this.buffer,n=this.valueSize,r=n*this._origIndex;this.binding.getValue(e,r);for(let s=n,o=r;s!==o;++s)e[s]=e[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)t[e+o]=t[n+o]}_slerp(t,e,n,r){xi.slerpFlat(t,e,t,e,t,n,r)}_slerpAdditive(t,e,n,r,s){const o=this._workIndex*s;xi.multiplyQuaternionsFlat(t,o,t,e,t,n),xi.slerpFlat(t,e,t,e,t,o,r)}_lerp(t,e,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=e+a;t[l]=t[l]*o+t[n+a]*r}}_lerpAdditive(t,e,n,r,s){for(let o=0;o!==s;++o){const a=e+o;t[a]=t[a]+t[n+o]*r}}}const $w="\\[\\]\\.:\\/",Uee=new RegExp("["+$w+"]","g"),qw="[^"+$w+"]",zee="[^"+$w.replace("\\.","")+"]",Gee=/((?:WC+[\/:])*)/.source.replace("WC",qw),jee=/(WCOD+)?/.source.replace("WCOD",zee),Wee=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qw),$ee=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qw),qee=new RegExp("^"+Gee+jee+Wee+$ee+"$"),Yee=["material","materials","bones"];class Kee{constructor(t,e,n){const r=n||bn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}let bn=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Uee,"")}static parseTrackName(e){const n=qee.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==Yee.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[n++]=r[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let d=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===d){d=u;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==d){if(void 0===e[d])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[d]}}const a=e[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",e);let l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=Kee,i})();bn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},bn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},bn.prototype.GetterByBindingType=[bn.prototype._getValue_direct,bn.prototype._getValue_array,bn.prototype._getValue_arrayElement,bn.prototype._getValue_toArray],bn.prototype.SetterByBindingTypeAndVersioning=[[bn.prototype._setValue_direct,bn.prototype._setValue_direct_setNeedsUpdate,bn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[bn.prototype._setValue_array,bn.prototype._setValue_array_setNeedsUpdate,bn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[bn.prototype._setValue_arrayElement,bn.prototype._setValue_arrayElement_setNeedsUpdate,bn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[bn.prototype._setValue_fromArray,bn.prototype._setValue_fromArray_setNeedsUpdate,bn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Qee{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const s=e.tracks,o=s.length,a=new Array(o),l={endingStart:_d,endingEnd:_d};for(let c=0;c!==o;++c){const d=s[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const r=this._clip.duration,s=t._clip.duration,a=r/s;t.warp(1,s/r,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+n,c[0]=t/o,c[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const s=this._startTime;if(null!==s){const l=(t-s)*n;if(l<0||0===n)return;this._startTime=null,e=n*l}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(o),c[d].accumulateAdditive(a);else for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(o),c[d].accumulate(r,a)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,s=this._loopCount;const o=2202===n;if(0===t)return-1===s?r:o&&1==(1&s)?e-r:r;if(2200===n){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===s&&(t>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const a=Math.floor(r/e);r-=e*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===l){const c=t<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=yd,r.endingEnd=yd):(r.endingStart=t?this.zeroSlopeAtStart?yd:_d:2402,r.endingEnd=e?this.zeroSlopeAtEnd?yd:_d:2402)}_scheduleFading(t,e,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=e,a[1]=s+t,l[1]=n,this}}class uL extends va{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,s=r.length,o=t._propertyBindings,a=t._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let d=c[l];void 0===d&&(d={},c[l]=d);for(let u=0;u!==s;++u){const h=r[u],f=h.name;let p=d[f];if(void 0!==p)++p.referenceCount,o[u]=p;else{if(p=o[u],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}p=new Hee(bn.create(n,f,e&&e._propertyBindings[u].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[u]=p}a[u].resultBuffer=p.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const n=(t._localRoot||this._root).uuid,r=t._clip.uuid,s=this._actionsByClip[r];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,r,n)}const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const s=e[n];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const s=e[n];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const r=this._actions,s=this._actionsByClip;let o=s[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=o;else{const a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const s=t._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],d=t._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===l.length&&delete o[s],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const s=e[n];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=n,e[n]=s}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=n,e[n]=s}_addInactiveBinding(t,e,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[e];void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=s.length,s.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],l=e[e.length-1],c=t._cacheIndex;l._cacheIndex=c,e[c]=l,e.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=n,e[n]=s}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=n,e[n]=s}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new zF(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,s=e[r];t.__cacheIndex=r,e[r]=t,s.__cacheIndex=n,e[n]=s}clipAction(t,e,n){const r=e||this._root,s=r.uuid;let o="string"==typeof t?gf.findByName(r,t):t;const a=null!==o?o.uuid:t,l=this._actionsByClip[a];let c=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==l){const u=l.actionByRoot[s];if(void 0!==u&&u.blendMode===n)return u;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const d=new Qee(this,o,e,n);return this._bindAction(d,c),this._addInactiveAction(d,a,s),d}existingAction(t,e){const n=e||this._root,r=n.uuid,s="string"==typeof t?gf.findByName(n,t):t,a=this._actionsByClip[s?s.uuid:t];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const t=this._actions;for(let n=this._nActiveActions-1;n>=0;--n)t[n].stop();return this}update(t){const e=this._actions,n=this._nActiveActions,r=this.time+=t*=this.timeScale,s=Math.sign(t),o=this._accuIndex^=1;for(let c=0;c!==n;++c)e[c]._update(r,t,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,s=r[n];if(void 0!==s){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const d=c._cacheIndex,u=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=d,e[d]=u,e.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot[e];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName[e];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}uL.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Yw{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new Yw(void 0===this.value.clone?this.value:this.value.clone())}}(class Zee extends Fl{constructor(t,e,n=1){super(t,e),this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}).prototype.isInstancedInterleavedBuffer=!0;class fL{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Xn(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const pL=new ne;class yf{constructor(t=new ne(1/0,1/0),e=new ne(-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=pL.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return pL.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}yf.prototype.isBox2=!0;const Fa=new C,C_=new $e,Xw=new $e;function _L(i){const t=[];!0===i.isBone&&t.push(i);for(let e=0;e<i.children.length;e++)t.push.apply(t,_L(i.children[e]));return t}class T_{static toHalfFloat(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Xn(t,-65504,65504),CL[0]=t;const e=SL[0],n=e>>23&511;return Ss[n]+((8388607&e)>>Ds[n])}static fromHalfFloat(t){const e=t>>10;return SL[0]=Zw[DL[e]+(1023&t)]+Xd[e],CL[0]}}const ML=new ArrayBuffer(4),CL=new Float32Array(ML),SL=new Uint32Array(ML),Ss=new Uint32Array(512),Ds=new Uint32Array(512);for(let i=0;i<256;++i){const t=i-127;t<-27?(Ss[i]=0,Ss[256|i]=32768,Ds[i]=24,Ds[256|i]=24):t<-14?(Ss[i]=1024>>-t-14,Ss[256|i]=1024>>-t-14|32768,Ds[i]=-t-1,Ds[256|i]=-t-1):t<=15?(Ss[i]=t+15<<10,Ss[256|i]=t+15<<10|32768,Ds[i]=13,Ds[256|i]=13):t<128?(Ss[i]=31744,Ss[256|i]=64512,Ds[i]=24,Ds[256|i]=24):(Ss[i]=31744,Ss[256|i]=64512,Ds[i]=13,Ds[256|i]=13)}const Zw=new Uint32Array(2048),Xd=new Uint32Array(64),DL=new Uint32Array(64);for(let i=1;i<1024;++i){let t=i<<13,e=0;for(;0==(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,Zw[i]=t|e}for(let i=1024;i<2048;++i)Zw[i]=939524096+(i-1024<<13);for(let i=1;i<31;++i)Xd[i]=i<<23;Xd[31]=1199570944,Xd[32]=2147483648;for(let i=33;i<63;++i)Xd[i]=2147483648+(i-32<<23);Xd[63]=3347054592;for(let i=1;i<64;++i)32!==i&&(DL[i]=1024);qr.create=function(i,t){return console.log("THREE.Curve.create() has been deprecated"),i.prototype=Object.create(qr.prototype),i.prototype.constructor=i,i.prototype.getPoint=t,i},sf.prototype.fromPoints=function(i){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(i)},class ite extends Ll{constructor(t=10,e=10,n=4473924,r=8947848){n=new we(n),r=new we(r);const s=e/2,o=t/e,a=t/2,l=[],c=[];for(let h=0,f=0,p=-a;h<=e;h++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const m=h===s?n:r;m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3}const d=new mt;d.setAttribute("position",new qe(l,3)),d.setAttribute("color",new qe(c,3)),super(d,new ki({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class tte extends Ll{constructor(t){const e=_L(t),n=new mt,r=[],s=[],o=new we(0,0,1),a=new we(0,1,0);for(let c=0;c<e.length;c++){const d=e[c];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new qe(r,3)),n.setAttribute("color",new qe(s,3)),super(n,new ki({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");Xw.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<e.length;s++){const a=e[s];a.parent&&a.parent.isBone&&(C_.multiplyMatrices(Xw,a.matrixWorld),Fa.setFromMatrixPosition(C_),r.setXYZ(o,Fa.x,Fa.y,Fa.z),C_.multiplyMatrices(Xw,a.parent.matrixWorld),Fa.setFromMatrixPosition(C_),r.setXYZ(o+1,Fa.x,Fa.y,Fa.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Qs.prototype.extractUrlBase=function(i){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),eo.extractUrlBase(i)},Qs.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},yf.prototype.center=function(i){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(i)},yf.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},yf.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},yf.prototype.size=function(i){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(i)},Cr.prototype.center=function(i){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(i)},Cr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Cr.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},Cr.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},Cr.prototype.size=function(i){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(i)},kl.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},wa.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ng.prototype.setFromMatrix=function(i){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(i)},Ti.prototype.flattenToArrayOffset=function(i,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,t)},Ti.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},Ti.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Ti.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},Ti.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Ti.prototype.getInverse=function(i){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},$e.prototype.extractPosition=function(i){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(i)},$e.prototype.flattenToArrayOffset=function(i,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,t)},$e.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new C).setFromMatrixColumn(this,3)},$e.prototype.setRotationFromQuaternion=function(i){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(i)},$e.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},$e.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},$e.prototype.multiplyVector4=function(i){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},$e.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},$e.prototype.rotateAxis=function(i){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),i.transformDirection(this)},$e.prototype.crossVector=function(i){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},$e.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},$e.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},$e.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},$e.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},$e.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},$e.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},$e.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},$e.prototype.makeFrustum=function(i,t,e,n,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(i,t,n,e,r,s)},$e.prototype.getInverse=function(i){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},Bo.prototype.isIntersectionLine=function(i){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(i)},xi.prototype.multiplyVector3=function(i){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),i.applyQuaternion(this)},xi.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Rl.prototype.isIntersectionBox=function(i){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},Rl.prototype.isIntersectionPlane=function(i){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(i)},Rl.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},ai.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},ai.prototype.barycoordFromPoint=function(i,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(i,t)},ai.prototype.midpoint=function(i){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(i)},ai.prototypenormal=function(i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(i)},ai.prototype.plane=function(i){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(i)},ai.barycoordFromPoint=function(i,t,e,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ai.getBarycoord(i,t,e,n,r)},ai.normal=function(i,t,e,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ai.getNormal(i,t,e,n)},Ho.prototype.extractAllPoints=function(i){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(i)},Ho.prototype.extrude=function(i){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Pa(this,i)},Ho.prototype.makeGeometry=function(i){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new hf(this,i)},ne.prototype.fromAttribute=function(i,t,e){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,t,e)},ne.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},ne.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},C.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},C.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},C.prototype.getPositionFromMatrix=function(i){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(i)},C.prototype.getScaleFromMatrix=function(i){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(i)},C.prototype.getColumnFromMatrix=function(i,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,i)},C.prototype.applyProjection=function(i){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(i)},C.prototype.fromAttribute=function(i,t,e){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,t,e)},C.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},C.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ln.prototype.fromAttribute=function(i,t,e){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,t,e)},ln.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},tn.prototype.getChildByName=function(i){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(i)},tn.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},tn.prototype.translate=function(i,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,i)},tn.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},tn.prototype.applyMatrix=function(i){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},Object.defineProperties(tn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(i){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=i}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),wi.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(wi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),qg.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Mi.prototype.setLens=function(i,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(i)},Object.defineProperties(Js.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(i){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=i}},shadowCameraLeft:{set:function(i){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=i}},shadowCameraRight:{set:function(i){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=i}},shadowCameraTop:{set:function(i){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=i}},shadowCameraBottom:{set:function(i){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=i}},shadowCameraNear:{set:function(i){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=i}},shadowCameraFar:{set:function(i){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=i}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(i){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=i}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(i){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=i}},shadowMapHeight:{set:function(i){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=i}}}),Object.defineProperties(hn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Uh},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Uh)}}}),hn.prototype.setDynamic=function(i){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?Uh:Hh),this},hn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},hn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},mt.prototype.addIndex=function(i){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(i)},mt.prototype.addAttribute=function(i,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===i?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(i,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(i,new hn(arguments[1],arguments[2])))},mt.prototype.addDrawCall=function(i,t,e){void 0!==e&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(i,t)},mt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},mt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},mt.prototype.removeAttribute=function(i){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(i)},mt.prototype.applyMatrix=function(i){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},Object.defineProperties(mt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Fl.prototype.setDynamic=function(i){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?Uh:Hh),this},Fl.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Pa.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Pa.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Pa.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},zg.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Yw.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Pn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new we}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(i){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(i){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=i}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Cs.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(i){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=i}}}),cn.prototype.clearTarget=function(i,t,e,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(i),this.clear(t,e,n)},cn.prototype.animate=function(i){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(i)},cn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},cn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},cn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},cn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},cn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},cn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},cn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},cn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},cn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},cn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},cn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},cn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},cn.prototype.enableScissorTest=function(i){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(i)},cn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},cn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},cn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},cn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},cn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},cn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},cn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},cn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},cn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},cn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(cn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=i}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=i}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(i){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===i?Jt:vs}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(XO.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Mr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=i}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=i}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=i}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=i}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(i){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=i}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(i){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=i}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(i){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=i}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(i){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=i}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(i){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=i}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(i){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=i}}}),class Nee extends tn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}.prototype.load=function(i){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new Pee).load(i,function(n){t.setBuffer(n)}),this},cw.prototype.updateCubeMap=function(i,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(i,t)},cw.prototype.clear=function(i,t,e,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(i,t,e,n)},Dl.crossOrigin=void 0,Dl.loadTexture=function(i,t,e,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new jF;r.setCrossOrigin(this.crossOrigin);const s=r.load(i,e,void 0,n);return t&&(s.mapping=t),s},Dl.loadTextureCube=function(i,t,e,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new Aee;r.setCrossOrigin(this.crossOrigin);const s=r.load(i,e,void 0,n);return t&&(s.mapping=t),s},Dl.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Dl.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"139"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="139");class rte extends Qs{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new lte(e)}),this.register(function(e){return new pte(e)}),this.register(function(e){return new mte(e)}),this.register(function(e){return new cte(e)}),this.register(function(e){return new dte(e)}),this.register(function(e){return new ute(e)}),this.register(function(e){return new hte(e)}),this.register(function(e){return new fte(e)}),this.register(function(e){return new ote(e)}),this.register(function(e){return new gte(e)})}load(t,e,n,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:eo.extractUrlBase(t),this.manager.itemStart(t);const a=function(c){r?r(c):console.error(c),s.manager.itemError(t),s.manager.itemEnd(t)},l=new Zs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(c){try{s.parse(c,o,function(d){e(d),s.manager.itemEnd(t)},a)}catch(d){a(d)}},n,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,r){let s;const o={},a={};if("string"==typeof t)s=t;else if(eo.decodeText(new Uint8Array(t,0,4))===EL){try{o[Wt.KHR_BINARY_GLTF]=new _te(t)}catch(u){return void(r&&r(u))}s=o[Wt.KHR_BINARY_GLTF].content}else s=eo.decodeText(new Uint8Array(t));const l=JSON.parse(s);if(void 0===l.asset||l.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new Rte(l,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const u=this.pluginCallbacks[d](c);a[u.name]=u,o[u.name]=!0}if(l.extensionsUsed)for(let d=0;d<l.extensionsUsed.length;++d){const u=l.extensionsUsed[d],h=l.extensionsRequired||[];switch(u){case Wt.KHR_MATERIALS_UNLIT:o[u]=new ate;break;case Wt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[u]=new bte;break;case Wt.KHR_DRACO_MESH_COMPRESSION:o[u]=new yte(l,this.dracoLoader);break;case Wt.KHR_TEXTURE_TRANSFORM:o[u]=new vte;break;case Wt.KHR_MESH_QUANTIZATION:o[u]=new xte;break;default:h.indexOf(u)>=0&&void 0===a[u]&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(t,e){const n=this;return new Promise(function(r,s){n.parse(t,e,r,s)})}}function ste(){let i={};return{get:function(t){return i[t]},add:function(t,e){i[t]=e},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const Wt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class ote{constructor(t){this.parser=t,this.name=Wt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,r=e.length;n<r;n++){const s=e[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let r=e.cache.get(n);if(r)return r;const s=e.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t];let c;const d=new we(16777215);void 0!==l.color&&d.fromArray(l.color);const u=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new jw(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Gw(d),c.distance=u;break;case"spot":c=new Uw(d),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,void 0!==l.intensity&&(c.intensity=l.intensity),c.name=e.createUniqueName(l.name||"light_"+t),r=Promise.resolve(c),e.cache.add(n,r),r}createNodeAttachment(t){const e=this,n=this.parser,s=n.json.nodes[t],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return n._getNodeRef(e.cache,a,l)})}}class ate{constructor(){this.name=Wt.KHR_MATERIALS_UNLIT}getMaterialType(){return Dr}extendParams(t,e,n){const r=[];t.color=new we(1,1,1),t.opacity=1;const s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;t.color.fromArray(o),t.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(t,"map",s.baseColorTexture,Jt))}return Promise.all(r)}}class lte{constructor(t){this.parser=t,this.name=Wt.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Oa:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(e.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(n.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(n.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(n.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new ne(a,a)}return Promise.all(s)}}class cte{constructor(t){this.parser=t,this.name=Wt.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Oa:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];e.sheenColor=new we(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&e.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(e.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(n.assignTexture(e,"sheenColorMap",o.sheenColorTexture,Jt)),void 0!==o.sheenRoughnessTexture&&s.push(n.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class dte{constructor(t){this.parser=t,this.name=Wt.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Oa:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(n.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class ute{constructor(t){this.parser=t,this.name=Wt.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Oa:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(n.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return e.attenuationColor=new we(a[0],a[1],a[2]),Promise.all(s)}}class hte{constructor(t){this.parser=t,this.name=Wt.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Oa:null}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return e.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class fte{constructor(t){this.parser=t,this.name=Wt.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Oa:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(n.assignTexture(e,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return e.specularColor=new we(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(n.assignTexture(e,"specularColorMap",o.specularColorTexture,Jt)),Promise.all(s)}}class pte{constructor(t){this.parser=t,this.name=Wt.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s.source,o)}}class mte{constructor(t){this.parser=t,this.name=Wt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;const o=s.extensions[e],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(t,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class gte{constructor(t){this.name=Wt.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,d=r.count,u=r.byteStride,h=new ArrayBuffer(d*u),f=new Uint8Array(a[0],l,c);return o.decodeGltfBuffer(new Uint8Array(h),d,u,f,r.mode,r.filter),h})}return null}}const EL="glTF";class _te{constructor(t){this.name=Wt.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:eo.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==EL)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(t,12);let s=0;for(;s<n;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,1313821514===a){const l=new Uint8Array(t,12+s,o);this.content=eo.decodeText(l)}else if(5130562===a){const l=12+s;this.body=t.slice(l,l+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class yte{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Wt.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,r=this.dracoLoader,s=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},l={},c={};for(const d in o){const u=eM[d]||d.toLowerCase();a[u]=o[d]}for(const d in t.attributes){const u=eM[d]||d.toLowerCase();if(void 0!==o[d]){const h=n.accessors[t.attributes[d]];c[u]=bf[h.componentType],l[u]=!0===h.normalized}}return e.getDependency("bufferView",s).then(function(d){return new Promise(function(u){r.decodeDracoFile(d,function(h){for(const f in h.attributes){const p=h.attributes[f],m=l[f];void 0!==m&&(p.normalized=m)}u(h)},a,c)})})}}class vte{constructor(){this.name=Wt.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class Jw extends $d{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new we).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class bte{constructor(){this.name=Wt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return Jw}extendParams(t,e,n){const r=e.extensions[this.name];t.color=new we(1,1,1),t.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;t.color.fromArray(o),t.opacity=o[3]}if(void 0!==r.diffuseTexture&&s.push(n.assignTexture(t,"map",r.diffuseTexture,Jt)),t.emissive=new we(0,0,0),t.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,t.specular=new we(1,1,1),Array.isArray(r.specularFactor)&&t.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const o=r.specularGlossinessTexture;s.push(n.assignTexture(t,"glossinessMap",o)),s.push(n.assignTexture(t,"specularMap",o,Jt))}return Promise.all(s)}createMaterial(t){const e=new Jw(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=0,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e}}class xte{constructor(){this.name=Wt.KHR_MESH_QUANTIZATION}}class Gl extends zo{constructor(t,e,n,r){super(t,e,n,r)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r*3+r;for(let o=0;o!==r;o++)e[o]=n[s+o];return e}}Gl.prototype.beforeStart_=Gl.prototype.copySampleValue_,Gl.prototype.afterEnd_=Gl.prototype.copySampleValue_,Gl.prototype.interpolate_=function(i,t,e,n){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,c=n-t,d=(e-t)/c,u=d*d,h=u*d,f=i*l,p=f-l,m=-2*h+3*u,g=h-u,_=1-m,v=g-u+d;for(let b=0;b!==o;b++)r[b]=_*s[p+b+o]+v*(s[p+b+a]*c)+m*s[f+b+o]+g*(s[f+b]*c);return r};const wte=new xi;class Mte extends Gl{interpolate_(t,e,n,r){const s=super.interpolate_(t,e,n,r);return wte.fromArray(s).normalize().toArray(s),s}}const bf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},TL={9728:oi,9729:vn,9984:1004,9985:1007,9986:1005,9987:ya},RL={33071:tr,33648:1002,10497:vl},kL={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},eM={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},La={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Cte={CUBICSPLINE:void 0,LINEAR:gd,STEP:Vh};function xf(i,t,e){for(const n in e.extensions)void 0===i[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function jl(i,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(i.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Ete(i,t){if(i.updateMorphTargets(),void 0!==t.weights)for(let e=0,n=t.weights.length;e<n;e++)i.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(i.morphTargetInfluences.length===e.length){i.morphTargetDictionary={};for(let n=0,r=e.length;n<r;n++)i.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Ate(i){const t=i.extensions&&i.extensions[Wt.KHR_DRACO_MESH_COMPRESSION];let e;return e=t?"draco:"+t.bufferView+":"+t.indices+":"+IL(t.attributes):i.indices+":"+IL(i.attributes)+":"+i.mode,e}function IL(i){let t="";const e=Object.keys(i).sort();for(let n=0,r=e.length;n<r;n++)t+=e[n]+":"+i[e[n]]+";";return t}function nM(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Rte{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new ste,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={},this.textureLoader="undefined"!=typeof createImageBitmap&&!1===/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?new iL(this.options.manager):new jF(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Zs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};xf(s,a,r),jl(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){t(a)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=e.length;r<s;r++){const o=e[r].joints;for(let a=0,l=o.length;a<l;a++)t[o[a]].isBone=!0}for(let r=0,s=t.length;r<s;r++){const o=t[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(n[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,d]of o.children.entries())s(d,a.children[c])};return s(n,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const r=t(e[n]);if(r)return r}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let r=0;r<e.length;r++){const s=t(e[r]);s&&n.push(s)}return n}getDependency(t,e){const n=t+":"+e;let r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this.loadNode(e);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this.loadAnimation(e);break;case"camera":r=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this;e=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(s,o){return n.getDependency(t,o)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[Wt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(eo.resolveURL(e.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const s=e.byteOffset||0;return n.slice(s,s+(e.byteLength||0))})}loadAccessor(t){const e=this,n=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=kL[r.type],c=bf[r.componentType],d=c.BYTES_PER_ELEMENT,h=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let m,g;if(f&&f!==d*l){const _=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let b=e.cache.get(v);b||(m=new c(a,_*f,r.count*f/d),b=new Fl(m,f/d),e.cache.add(v,b)),g=new Ta(b,l,h%f/d,p)}else m=null===a?new c(r.count*l):new c(a,h,r.count*l),g=new hn(m,l,p);if(void 0!==r.sparse){const x=r.sparse.values.byteOffset||0,w=new(0,bf[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*kL.SCALAR),S=new c(o[2],x,r.sparse.count*l);null!==a&&(g=new hn(g.array.slice(),g.itemSize,g.normalized));for(let T=0,I=w.length;T<I;T++){const V=w[T];if(g.setX(V,S[T*l]),l>=2&&g.setY(V,S[T*l+1]),l>=3&&g.setZ(V,S[T*l+2]),l>=4&&g.setW(V,S[T*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(t){const e=this.json,s=e.textures[t].source,o=e.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(t,s,a)}loadTextureImage(t,e,n){const r=this,s=this.json,o=s.textures[t],a=s.images[e],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(e,n).then(function(d){d.flipY=!1,o.name&&(d.name=o.name);const h=(s.samplers||{})[o.sampler]||{};return d.magFilter=TL[h.magFilter]||vn,d.minFilter=TL[h.minFilter]||ya,d.wrapS=RL[h.wrapS]||vl,d.wrapT=RL[h.wrapT]||vl,r.associations.set(d,{textures:t}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(t,e){const r=this.json,s=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(u=>u.clone());const o=r.images[t],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(u){c=!0;const h=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(u){return new Promise(function(h,f){let p=h;!0===e.isImageBitmapLoader&&(p=function(m){const g=new zi(m);g.needsUpdate=!0,h(g)}),e.load(eo.resolveURL(u,s.path),p,void 0,f)})}).then(function(u){return!0===c&&a.revokeObjectURL(l),u.userData.mimeType=o.mimeType||function Tte(i){return i.search(/\.jpe?g($|\?)/i)>0||0===i.search(/^data\:image\/jpeg/)?"image/jpeg":i.search(/\.webp($|\?)/i)>0||0===i.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[t]=d,d}assignTexture(t,e,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(void 0!==n.texCoord&&0!=n.texCoord&&!("aoMap"===e&&1==n.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+e+" not yet supported."),s.extensions[Wt.KHR_TEXTURE_TRANSFORM]){const a=void 0!==n.extensions?n.extensions[Wt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Wt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.encoding=r),t[e]=o,o})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const r=void 0===e.attributes.tangent,s=void 0!==e.attributes.color,o=void 0===e.attributes.normal;if(t.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Zg,Pn.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(t.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new ki,Pn.prototype.copy.call(l,n),l.color.copy(n.color),this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=n}getMaterialType(){return $d}loadMaterial(t){const e=this,r=this.extensions,s=this.json.materials[t];let o;const a={},l=s.extensions||{},c=[];if(l[Wt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=r[Wt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=u.getMaterialType(),c.push(u.extendParams(a,s,e))}else if(l[Wt.KHR_MATERIALS_UNLIT]){const u=r[Wt.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,s,e))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new we(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}void 0!==u.baseColorTexture&&c.push(e.assignTexture(a,"map",u.baseColorTexture,Jt)),a.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,a.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture&&(c.push(e.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(e.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(t)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(t,a)})))}!0===s.doubleSided&&(a.side=2);const d=s.alphaMode||"OPAQUE";if("BLEND"===d?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===d&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==Dr&&(c.push(e.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ne(1,1),void 0!==s.normalTexture.scale)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}return void 0!==s.occlusionTexture&&o!==Dr&&(c.push(e.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==Dr&&(a.emissive=(new we).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==Dr&&c.push(e.assignTexture(a,"emissiveMap",s.emissiveTexture,Jt)),Promise.all(c).then(function(){let u;return u=o===Jw?r[Wt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),s.name&&(u.name=s.name),jl(u,s),e.associations.set(u,{materials:t}),s.extensions&&xf(r,u,s),u})}createUniqueName(t){const e=bn.sanitizeNodeName(t||"");let n=e;for(let r=1;this.nodeNamesUsed[n];++r)n=e+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(t){const e=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[Wt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(l){return OL(l,a,e)})}const o=[];for(let a=0,l=t.length;a<l;a++){const c=t[a],d=Ate(c),u=r[d];if(u)o.push(u.promise);else{let h;h=c.extensions&&c.extensions[Wt.KHR_DRACO_MESH_COMPRESSION]?s(c):OL(new mt,c,e),r[d]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(t){const e=this,r=this.extensions,s=this.json.meshes[t],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const d=void 0===o[l].material?(void 0===(i=this.cache).DefaultMaterial&&(i.DefaultMaterial=new $d({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),i.DefaultMaterial):this.getDependency("material",o[l].material);a.push(d)}var i;return a.push(e.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],u=[];for(let f=0,p=d.length;f<p;f++){const m=d[f],g=o[f];let _;const v=c[f];if(4===g.mode||5===g.mode||6===g.mode||void 0===g.mode)_=!0===s.isSkinnedMesh?new qg(m,v):new wi(m,v),!0===_.isSkinnedMesh&&!_.geometry.attributes.skinWeight.normalized&&_.normalizeSkinWeights(),5===g.mode?_.geometry=FL(_.geometry,1):6===g.mode&&(_.geometry=FL(_.geometry,2));else if(1===g.mode)_=new Ll(m,v);else if(3===g.mode)_=new Ra(m,v);else if(2===g.mode)_=new Mw(m,v);else{if(0!==g.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);_=new Sw(m,v)}Object.keys(_.geometry.morphAttributes).length>0&&Ete(_,s),_.name=e.createUniqueName(s.name||"mesh_"+t),jl(_,s),g.extensions&&xf(r,_,g),e.assignFinalMaterial(_),u.push(_)}for(let f=0,p=u.length;f<p;f++)e.associations.set(u[f],{meshes:t,primitives:f});if(1===u.length)return u[0];const h=new Vo;e.associations.set(h,{meshes:t});for(let f=0,p=u.length;f<p;f++)h.add(u[f]);return h})}loadCamera(t){let e;const n=this.json.cameras[t],r=n[n.type];if(r)return"perspective"===n.type?e=new Mi(TK.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(e=new Xh(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),jl(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then(function(r){return n.inverseBindMatrices=r,n})}loadAnimation(t){const n=this.json.animations[t],r=[],s=[],o=[],a=[],l=[];for(let c=0,d=n.channels.length;c<d;c++){const u=n.channels[c],h=n.samplers[u.sampler],f=u.target,m=void 0!==n.parameters?n.parameters[h.input]:h.input,g=void 0!==n.parameters?n.parameters[h.output]:h.output;r.push(this.getDependency("node",void 0!==f.node?f.node:f.id)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",g)),a.push(h),l.push(f)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[0],u=c[1],h=c[2],f=c[3],p=c[4],m=[];for(let _=0,v=d.length;_<v;_++){const b=d[_],x=u[_],w=h[_],S=f[_],T=p[_];if(void 0===b)continue;let I;switch(b.updateMatrix(),b.matrixAutoUpdate=!0,La[T.path]){case La.weights:I=pf;break;case La.rotation:I=Nl;break;default:I=mf}const V=b.name?b.name:b.uuid,N=void 0!==S.interpolation?Cte[S.interpolation]:gd,M=[];La[T.path]===La.weights?b.traverse(function(K){K.morphTargetInfluences&&M.push(K.name?K.name:K.uuid)}):M.push(V);let R=w.array;if(w.normalized){const K=nM(R.constructor),z=new Float32Array(R.length);for(let j=0,L=R.length;j<L;j++)z[j]=R[j]*K;R=z}for(let K=0,z=M.length;K<z;K++){const j=new I(M[K]+"."+La[T.path],x.array,R,N);"CUBICSPLINE"===S.interpolation&&(j.createInterpolant=function(U){return new(this instanceof Nl?Mte:Gl)(this.times,this.values,this.getValueSize()/3,U)},j.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(j)}}return new gf(n.name?n.name:"animation_"+t,void 0,m)})}createNodeMesh(t){const n=this,r=this.json.nodes[t];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(t){const n=this.extensions,r=this,s=this.json.nodes[t],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(t)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(t)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(l=!0===s.isBone?new Yg:a.length>1?new Vo:1===a.length?a[0]:new tn,l!==a[0])for(let c=0,d=a.length;c<d;c++)l.add(a[c]);if(s.name&&(l.userData.name=s.name,l.name=o),jl(l,s),s.extensions&&xf(n,l,s),void 0!==s.matrix){const c=new $e;c.fromArray(s.matrix),l.applyMatrix4(c)}else void 0!==s.translation&&l.position.fromArray(s.translation),void 0!==s.rotation&&l.quaternion.fromArray(s.rotation),void 0!==s.scale&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=t,l})}loadScene(t){const e=this.json,n=this.extensions,r=this.json.scenes[t],s=this,o=new Vo;r.name&&(o.name=s.createUniqueName(r.name)),jl(o,r),r.extensions&&xf(n,o,r);const a=r.nodes||[],l=[];for(let c=0,d=a.length;c<d;c++)l.push(PL(a[c],o,e,s));return Promise.all(l).then(function(){return s.associations=(d=>{const u=new Map;for(const[h,f]of s.associations)(h instanceof Pn||h instanceof zi)&&u.set(h,f);return d.traverse(h=>{const f=s.associations.get(h);null!=f&&u.set(h,f)}),u})(o),o})}}function PL(i,t,e,n){const r=e.nodes[i];return n.getDependency("node",i).then(function(s){if(void 0===r.skin)return s;let o;return n.getDependency("skin",r.skin).then(function(a){o=a;const l=[];for(let c=0,d=o.joints.length;c<d;c++)l.push(n.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const c=[],d=[];for(let u=0,h=a.length;u<h;u++){const f=a[u];if(f){c.push(f);const p=new $e;void 0!==o.inverseBindMatrices&&p.fromArray(o.inverseBindMatrices.array,16*u),d.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[u])}l.bind(new Kg(c,d),l.matrixWorld)}),s})}).then(function(s){t.add(s);const o=[];if(r.children){const a=r.children;for(let l=0,c=a.length;l<c;l++)o.push(PL(a[l],s,e,n))}return Promise.all(o)})}function OL(i,t,e){const n=t.attributes,r=[];function s(o,a){return e.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=eM[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(void 0!==t.indices&&!i.index){const o=e.getDependency("accessor",t.indices).then(function(a){i.setIndex(a)});r.push(o)}return jl(i,t),function kte(i,t,e){const n=t.attributes,r=new Cr;if(void 0===n.POSITION)return;{const a=e.json.accessors[n.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new C(l[0],l[1],l[2]),new C(c[0],c[1],c[2])),a.normalized){const d=nM(bf[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}const s=t.targets;if(void 0!==s){const a=new C,l=new C;for(let c=0,d=s.length;c<d;c++){const u=s[c];if(void 0!==u.POSITION){const h=e.json.accessors[u.POSITION],f=h.min,p=h.max;if(void 0!==f&&void 0!==p){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const m=nM(bf[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new wa;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}(i,t,e),Promise.all(r).then(function(){return void 0!==t.targets?function Dte(i,t,e){let n=!1,r=!1,s=!1;for(let c=0,d=t.length;c<d;c++){const u=t[c];if(void 0!==u.POSITION&&(n=!0),void 0!==u.NORMAL&&(r=!0),void 0!==u.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,d=t.length;c<d;c++){const u=t[c];if(n){const h=void 0!==u.POSITION?e.getDependency("accessor",u.POSITION):i.attributes.position;o.push(h)}if(r){const h=void 0!==u.NORMAL?e.getDependency("accessor",u.NORMAL):i.attributes.normal;a.push(h)}if(s){const h=void 0!==u.COLOR_0?e.getDependency("accessor",u.COLOR_0):i.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[1],h=c[2];return n&&(i.morphAttributes.position=c[0]),r&&(i.morphAttributes.normal=u),s&&(i.morphAttributes.color=h),i.morphTargetsRelative=!0,i})}(i,t.targets,e):i})}function FL(i,t){let e=i.getIndex();if(null===e){const o=[],a=i.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i;for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),e=i.getIndex()}const n=e.count-2,r=[];if(2===t)for(let o=1;o<=n;o++)r.push(e.getX(0)),r.push(e.getX(o)),r.push(e.getX(o+1));else for(let o=0;o<n;o++)o%2==0?(r.push(e.getX(o)),r.push(e.getX(o+1)),r.push(e.getX(o+2))):(r.push(e.getX(o+2)),r.push(e.getX(o+1)),r.push(e.getX(o)));r.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s}const LL={type:"change"},iM={type:"start"},NL={type:"end"};class Ite extends va{constructor(t,e){super(),void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new C,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(E){E.addEventListener("keydown",nn),this._domElementKeyEvents=E},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(LL),n.update(),s=r.NONE},this.update=function(){const E=new C,_e=(new xi).setFromUnitVectors(t.up,new C(0,1,0)),Ze=_e.clone().invert(),Ee=new C,B=new xi,Se=2*Math.PI;return function(){const _t=n.object.position;E.copy(_t).sub(n.target),E.applyQuaternion(_e),a.setFromVector3(E),n.autoRotate&&s===r.NONE&&V(function T(){return 2*Math.PI/60/60*n.autoRotateSpeed}()),n.enableDamping?(a.theta+=l.theta*n.dampingFactor,a.phi+=l.phi*n.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Le=n.minAzimuthAngle,tt=n.maxAzimuthAngle;return isFinite(Le)&&isFinite(tt)&&(Le<-Math.PI?Le+=Se:Le>Math.PI&&(Le-=Se),tt<-Math.PI?tt+=Se:tt>Math.PI&&(tt-=Se),a.theta=Le<=tt?Math.max(Le,Math.min(tt,a.theta)):a.theta>(Le+tt)/2?Math.max(Le,a.theta):Math.min(tt,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),E.setFromSpherical(a),E.applyQuaternion(Ze),_t.copy(n.target).add(E),n.object.lookAt(n.target),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),d.set(0,0,0)),c=1,!!(u||Ee.distanceToSquared(n.object.position)>o||8*(1-B.dot(n.object.quaternion))>o)&&(n.dispatchEvent(LL),Ee.copy(n.object.position),B.copy(n.object.quaternion),u=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Q),n.domElement.removeEventListener("pointerdown",be),n.domElement.removeEventListener("pointercancel",St),n.domElement.removeEventListener("wheel",xn),n.domElement.removeEventListener("pointermove",je),n.domElement.removeEventListener("pointerup",Oe),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",nn)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new fL,l=new fL;let c=1;const d=new C;let u=!1;const h=new ne,f=new ne,p=new ne,m=new ne,g=new ne,_=new ne,v=new ne,b=new ne,x=new ne,w=[],S={};function I(){return Math.pow(.95,n.zoomSpeed)}function V(E){l.theta-=E}function N(E){l.phi-=E}const M=function(){const E=new C;return function(Ze,Ee){E.setFromMatrixColumn(Ee,0),E.multiplyScalar(-Ze),d.add(E)}}(),R=function(){const E=new C;return function(Ze,Ee){!0===n.screenSpacePanning?E.setFromMatrixColumn(Ee,1):(E.setFromMatrixColumn(Ee,0),E.crossVectors(n.object.up,E)),E.multiplyScalar(Ze),d.add(E)}}(),K=function(){const E=new C;return function(Ze,Ee){const B=n.domElement;if(n.object.isPerspectiveCamera){E.copy(n.object.position).sub(n.target);let Ce=E.length();Ce*=Math.tan(n.object.fov/2*Math.PI/180),M(2*Ze*Ce/B.clientHeight,n.object.matrix),R(2*Ee*Ce/B.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(M(Ze*(n.object.right-n.object.left)/n.object.zoom/B.clientWidth,n.object.matrix),R(Ee*(n.object.top-n.object.bottom)/n.object.zoom/B.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function z(E){n.object.isPerspectiveCamera?c/=E:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*E)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function j(E){n.object.isPerspectiveCamera?c*=E:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/E)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(E){h.set(E.clientX,E.clientY)}function P(E){m.set(E.clientX,E.clientY)}function ze(){1===w.length?h.set(w[0].pageX,w[0].pageY):h.set(.5*(w[0].pageX+w[1].pageX),.5*(w[0].pageY+w[1].pageY))}function ct(){1===w.length?m.set(w[0].pageX,w[0].pageY):m.set(.5*(w[0].pageX+w[1].pageX),.5*(w[0].pageY+w[1].pageY))}function ie(){const E=w[0].pageX-w[1].pageX,_e=w[0].pageY-w[1].pageY,Ze=Math.sqrt(E*E+_e*_e);v.set(0,Ze)}function st(E){if(1==w.length)f.set(E.pageX,E.pageY);else{const Ze=at(E);f.set(.5*(E.pageX+Ze.x),.5*(E.pageY+Ze.y))}p.subVectors(f,h).multiplyScalar(n.rotateSpeed);const _e=n.domElement;V(2*Math.PI*p.x/_e.clientHeight),N(2*Math.PI*p.y/_e.clientHeight),h.copy(f)}function ye(E){if(1===w.length)g.set(E.pageX,E.pageY);else{const _e=at(E);g.set(.5*(E.pageX+_e.x),.5*(E.pageY+_e.y))}_.subVectors(g,m).multiplyScalar(n.panSpeed),K(_.x,_.y),m.copy(g)}function Ct(E){const _e=at(E),Ze=E.pageX-_e.x,Ee=E.pageY-_e.y,B=Math.sqrt(Ze*Ze+Ee*Ee);b.set(0,B),x.set(0,Math.pow(b.y/v.y,n.zoomSpeed)),z(x.y),v.copy(b)}function be(E){!1!==n.enabled&&(0===w.length&&(n.domElement.setPointerCapture(E.pointerId),n.domElement.addEventListener("pointermove",je),n.domElement.addEventListener("pointerup",Oe)),function me(E){w.push(E)}(E),"touch"===E.pointerType?function k(E){switch(Ve(E),w.length){case 1:switch(n.touches.ONE){case 0:if(!1===n.enableRotate)return;ze(),s=r.TOUCH_ROTATE;break;case 1:if(!1===n.enablePan)return;ct(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(n.touches.TWO){case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;(function gt(){n.enableZoom&&ie(),n.enablePan&&ct()})(),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function dt(){n.enableZoom&&ie(),n.enableRotate&&ze()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(iM)}(E):function pt(E){let _e;switch(E.button){case 0:_e=n.mouseButtons.LEFT;break;case 1:_e=n.mouseButtons.MIDDLE;break;case 2:_e=n.mouseButtons.RIGHT;break;default:_e=-1}switch(_e){case 1:if(!1===n.enableZoom)return;(function U(E){v.set(E.clientX,E.clientY)})(E),s=r.DOLLY;break;case 0:if(E.ctrlKey||E.metaKey||E.shiftKey){if(!1===n.enablePan)return;P(E),s=r.PAN}else{if(!1===n.enableRotate)return;L(E),s=r.ROTATE}break;case 2:if(E.ctrlKey||E.metaKey||E.shiftKey){if(!1===n.enableRotate)return;L(E),s=r.ROTATE}else{if(!1===n.enablePan)return;P(E),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(iM)}(E))}function je(E){!1!==n.enabled&&("touch"===E.pointerType?function D(E){switch(Ve(E),s){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;st(E),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;ye(E),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;(function re(E){n.enableZoom&&Ct(E),n.enablePan&&ye(E)})(E),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function ae(E){n.enableZoom&&Ct(E),n.enableRotate&&st(E)})(E),n.update();break;default:s=r.NONE}}(E):function ot(E){if(!1!==n.enabled)switch(s){case r.ROTATE:if(!1===n.enableRotate)return;!function $(E){f.set(E.clientX,E.clientY),p.subVectors(f,h).multiplyScalar(n.rotateSpeed);const _e=n.domElement;V(2*Math.PI*p.x/_e.clientHeight),N(2*Math.PI*p.y/_e.clientHeight),h.copy(f),n.update()}(E);break;case r.DOLLY:if(!1===n.enableZoom)return;!function ee(E){b.set(E.clientX,E.clientY),x.subVectors(b,v),x.y>0?z(I()):x.y<0&&j(I()),v.copy(b),n.update()}(E);break;case r.PAN:if(!1===n.enablePan)return;!function pe(E){g.set(E.clientX,E.clientY),_.subVectors(g,m).multiplyScalar(n.panSpeed),K(_.x,_.y),m.copy(g),n.update()}(E)}}(E))}function Oe(E){Ie(E),0===w.length&&(n.domElement.releasePointerCapture(E.pointerId),n.domElement.removeEventListener("pointermove",je),n.domElement.removeEventListener("pointerup",Oe)),n.dispatchEvent(NL),s=r.NONE}function St(E){Ie(E)}function xn(E){!1===n.enabled||!1===n.enableZoom||s!==r.NONE||(E.preventDefault(),n.dispatchEvent(iM),function se(E){E.deltaY<0?j(I()):E.deltaY>0&&z(I()),n.update()}(E),n.dispatchEvent(NL))}function nn(E){!1===n.enabled||!1===n.enablePan||function Ge(E){let _e=!1;switch(E.code){case n.keys.UP:K(0,n.keyPanSpeed),_e=!0;break;case n.keys.BOTTOM:K(0,-n.keyPanSpeed),_e=!0;break;case n.keys.LEFT:K(n.keyPanSpeed,0),_e=!0;break;case n.keys.RIGHT:K(-n.keyPanSpeed,0),_e=!0}_e&&(E.preventDefault(),n.update())}(E)}function Q(E){!1!==n.enabled&&E.preventDefault()}function Ie(E){delete S[E.pointerId];for(let _e=0;_e<w.length;_e++)if(w[_e].pointerId==E.pointerId)return void w.splice(_e,1)}function Ve(E){let _e=S[E.pointerId];void 0===_e&&(_e=new ne,S[E.pointerId]=_e),_e.set(E.pageX,E.pageY)}function at(E){return S[(E.pointerId===w[0].pointerId?w[1]:w[0]).pointerId]}n.domElement.addEventListener("contextmenu",Q),n.domElement.addEventListener("pointerdown",be),n.domElement.addEventListener("pointercancel",St),n.domElement.addEventListener("wheel",xn,{passive:!1}),this.update()}}class Pte extends Tee{constructor(t){super(t),this.type=Ys}parse(t){const a=function(b,x){switch(b){case 1:console.error("THREE.RGBELoader Read Error: "+(x||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(x||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(x||""));break;default:console.error("THREE.RGBELoader: Error: "+(x||""))}return-1},h=function(b,x,w){x=x||1024;let T=b.pos,I=-1,V=0,N="",M=String.fromCharCode.apply(null,new Uint16Array(b.subarray(T,T+128)));for(;0>(I=M.indexOf("\n"))&&V<x&&T<b.byteLength;)N+=M,V+=M.length,T+=128,M+=String.fromCharCode.apply(null,new Uint16Array(b.subarray(T,T+128)));return-1<I&&(!1!==w&&(b.pos+=V+I+1),N+M.slice(0,I))},m=function(b,x,w,S){const I=Math.pow(2,b[x+3]-128)/255;w[S+0]=b[x+0]*I,w[S+1]=b[x+1]*I,w[S+2]=b[x+2]*I,w[S+3]=1},g=function(b,x,w,S){const I=Math.pow(2,b[x+3]-128)/255;w[S+0]=T_.toHalfFloat(Math.min(b[x+0]*I,65504)),w[S+1]=T_.toHalfFloat(Math.min(b[x+1]*I,65504)),w[S+2]=T_.toHalfFloat(Math.min(b[x+2]*I,65504)),w[S+3]=T_.toHalfFloat(1)},_=new Uint8Array(t);_.pos=0;const v=function(b){const w=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,S=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,T=/^\s*FORMAT=(\S+)\s*$/,I=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,V={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let N,M;if(b.pos>=b.byteLength||!(N=h(b)))return a(1,"no header found");if(!(M=N.match(/^#\?(\S+)/)))return a(3,"bad initial token");for(V.valid|=1,V.programtype=M[1],V.string+=N+"\n";N=h(b),!1!==N;)if(V.string+=N+"\n","#"!==N.charAt(0)){if((M=N.match(w))&&(V.gamma=parseFloat(M[1])),(M=N.match(S))&&(V.exposure=parseFloat(M[1])),(M=N.match(T))&&(V.valid|=2,V.format=M[1]),(M=N.match(I))&&(V.valid|=4,V.height=parseInt(M[1],10),V.width=parseInt(M[2],10)),2&V.valid&&4&V.valid)break}else V.comments+=N+"\n";return 2&V.valid?4&V.valid?V:a(3,"missing image size specifier"):a(3,"missing format specifier")}(_);if(-1!==v){const b=v.width,x=v.height,w=function(b,x,w){const S=x;if(S<8||S>32767||2!==b[0]||2!==b[1]||128&b[2])return new Uint8Array(b);if(S!==(b[2]<<8|b[3]))return a(3,"wrong scanline width");const T=new Uint8Array(4*x*w);if(!T.length)return a(4,"unable to allocate buffer space");let I=0,V=0;const N=4*S,M=new Uint8Array(4),R=new Uint8Array(N);let K=w;for(;K>0&&V<b.byteLength;){if(V+4>b.byteLength)return a(1);if(M[0]=b[V++],M[1]=b[V++],M[2]=b[V++],M[3]=b[V++],2!=M[0]||2!=M[1]||(M[2]<<8|M[3])!=S)return a(3,"bad rgbe scanline format");let j,z=0;for(;z<N&&V<b.byteLength;){j=b[V++];const U=j>128;if(U&&(j-=128),0===j||z+j>N)return a(3,"bad scanline data");if(U){const P=b[V++];for(let $=0;$<j;$++)R[z++]=P}else R.set(b.subarray(V,V+j),z),z+=j,V+=j}const L=S;for(let U=0;U<L;U++){let P=0;T[I]=R[U+P],P+=S,T[I+1]=R[U+P],P+=S,T[I+2]=R[U+P],P+=S,T[I+3]=R[U+P],I+=4}K--}return T}(_.subarray(_.pos),b,x);if(-1!==w){let S,T,I,V;switch(this.type){case ys:V=w.length/4;const N=new Float32Array(4*V);for(let R=0;R<V;R++)m(w,4*R,N,4*R);S=N,I=ys;break;case Ys:V=w.length/4;const M=new Uint16Array(4*V);for(let R=0;R<V;R++)g(w,4*R,M,4*R);S=M,I=Ys;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:b,height:x,data:S,header:v.string,gamma:v.gamma,exposure:v.exposure,format:T,type:I}}}return null}setDataType(t){return this.type=t,this}load(t,e,n,r){return super.load(t,function s(o,a){switch(o.type){case ys:case Ys:o.encoding=vs,o.minFilter=vn,o.magFilter=vn,o.generateMipmaps=!1,o.flipY=!0}e&&e(o,a)},n,r)}}let rM=(()=>{class i{constructor(){this.deltaX=.01,this.deltaY=.01,this.deltaZ=.01,this.far=100,this.fov=35,this.gammaFactor=2.2,this.gammaOutput=!0,this.near=1,this.physicallyCorrectLights=!0,this.sceneBackground=9419988,this.renderer=new cn({antialias:!0}),this.clock=new aL,this.mixers=new Array,this.modelPosition=new C(0,-1,0),this.modelScale=new C(.01,.01,.01),this.loadingManager=new Bw,this.directionalLightOptions={color:15524284,intensity:20},this.hemisphereOptions={skyColor:16772785,groundColor:32800,intensity:4},this.createCamera=()=>{this.camera=new Mi(this.fov,this.aspect,this.near,this.far),this.camera.position.set(7,4,9.5)},this.createControls=()=>this.controls=new Ite(this.camera,this.container),this.createLight=()=>{this.hemisphere=new Vw(this.hemisphereOptions.skyColor,this.hemisphereOptions.groundColor,this.hemisphereOptions.intensity),this.mainLight=new Ww(this.directionalLightOptions.color,this.directionalLightOptions.intensity),this.mainLight.position.set(-7,-4,-9.5),this.scene.add(this.hemisphere)},this.createModels=(e,n,r)=>{this.loader=new rte(this.loadingManager);const s=o=>{const a=o.scene.children[0];a.position.copy(n),a.scale.copy(r);const l=o.animations[0];if(l){const c=new uL(a);this.mixers.push(c),c.clipAction(l).play()}this.scene.add(a),console.log(this.scene)};this.loader.load(e,o=>{s(o)},()=>{},o=>console.log(o))},this.onWindowResize=()=>{this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer&&this.renderer.setSize(this.container.clientWidth,this.container.clientHeight)},this.createRenderer=()=>{this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=Jt,this.container.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize)},this.update=()=>{const e=this.clock.getDelta();this.mixers.forEach(n=>n.update(e))},this.render=()=>this.renderer.render(this.scene,this.camera),this.start=()=>this.renderer.setAnimationLoop(()=>{this.update(),this.render()}),this.stop=()=>this.renderer.setAnimationLoop(()=>{}),this.initialize=(e,n)=>{this.container=e,this.scene=new zg,this.scene.background=new we(this.sceneBackground),this.aspect=e.clientWidth/e.clientHeight,this.createCamera(),this.createControls(),this.createLight(),this.initializeLoadingManager(),this.createModels(n.modelUrl,n.modelPosition,n.modelScale),this.createRenderer(),this.setEnviromentLighting().then(r=>{this.scene.environment=r}),this.start()}}setEnviromentLighting(){return new Promise((e,n)=>{new Pte(this.loadingManager).load("./assets/hdr/venice_sunset.hdr",r=>{r.mapping=303,e(r)})})}initializeLoadingManager(){this.loadingManager.onStart=(e,n,r)=>{var s,o;console.log("Started loading file: "+e+".\nLoaded "+n+" of "+r+" files."),(null===(o=null===(s=this.container)||void 0===s?void 0:s.parentElement)||void 0===o?void 0:o.lastChild).classList.remove("fade-out")},this.loadingManager.onLoad=()=>{var e,n;console.log("Loading complete!"),(null===(n=null===(e=this.container)||void 0===e?void 0:e.parentElement)||void 0===n?void 0:n.lastChild).classList.add("fade-out")},this.loadingManager.onProgress=(e,n,r)=>{console.log("Loaded:",Math.round(n/r*100)+"%")},this.loadingManager.onError=e=>{console.log("There was an error loading "+e)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const Ote=new X("cdk-dir-doc",{providedIn:"root",factory:function Fte(){return Mc(nt)}}),Lte=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Un=(()=>{class i{constructor(e){if(this.value="ltr",this.change=new ue,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function Nte(i){const t=(null==i?void 0:i.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Lte.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(G(Ote,8))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Wl=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({}),i})();function BL(i){for(let t in i){let e=i[t]||"";switch(t){case"display":i.display="flex"===e?["-webkit-flex","flex"]:"inline-flex"===e?["-webkit-inline-flex","inline-flex"]:e;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":i["-webkit-"+t]=e;break;case"flex-direction":e=e||"row",i["-webkit-flex-direction"]=e,i["flex-direction"]=e;break;case"order":i.order=i["-webkit-"+t]=isNaN(+e)?"0":e}}return i}const sM="inline",R_=["row","column","row-reverse","column-reverse"];function VL(i){let[t,e,n]=HL(i);return function Vte(i,t=null,e=!1){return{display:e?"inline-flex":"flex","box-sizing":"border-box","flex-direction":i,"flex-wrap":t||null}}(t,e,n)}function HL(i){var t;i=null!==(t=null==i?void 0:i.toLowerCase())&&void 0!==t?t:"";let[e,n,r]=i.split(" ");return R_.find(s=>s===e)||(e=R_[0]),n===sM&&(n=r!==sM?r:"",r=sM),[e,Bte(n),!!r]}function wf(i){let[t]=HL(i);return t.indexOf("row")>-1}function Bte(i){if(i)switch(i.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":i="wrap-reverse";break;case"no":case"none":case"nowrap":i="nowrap";break;default:i="wrap"}return i}function Wo(i,...t){if(null==i)throw TypeError("Cannot convert undefined or null to object");for(let e of t)if(null!=e)for(let n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i}const Ute={provide:cx,useFactory:function Hte(i,t){return()=>{if(cl(t)){const e=Array.from(i.querySelectorAll(`[class*=${UL}]`)),n=/\bflex-layout-.+?\b/g;e.forEach(r=>{r.classList.contains(`${UL}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(n,"")})}}},deps:[nt,xr],multi:!0},UL="flex-layout-";let oM=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[Ute]}),i})();class $l{constructor(t=!1,e="all",n="",r="",s=0){this.matches=t,this.mediaQuery=e,this.mqAlias=n,this.suffix=r,this.priority=s,this.property=""}clone(){return new $l(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let zte=(()=>{class i{constructor(){this.stylesheet=new Map}addStyleToElement(e,n,r){const s=this.stylesheet.get(e);s?s.set(n,r):this.stylesheet.set(e,new Map([[n,r]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(e,n){const r=this.stylesheet.get(e);let s="";if(r){const o=r.get(n);("number"==typeof o||"string"==typeof o)&&(s=o+"")}return s}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const aM={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Es=new X("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>aM}),Qd=new X("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),lM=new X("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function zL(i,t){return i=i?i.clone():new $l,t&&(i.mqAlias=t.alias,i.mediaQuery=t.mediaQuery,i.suffix=t.suffix,i.priority=t.priority),i}class zn{constructor(){this.shouldCache=!0}sideEffect(t,e,n){}}let Sn=(()=>{class i{constructor(e,n,r,s){this._serverStylesheet=e,this._serverModuleLoaded=n,this._platformId=r,this.layoutConfig=s}applyStyleToElement(e,n,r=null){let s={};"string"==typeof n&&(s[n]=r,n=s),s=this.layoutConfig.disableVendorPrefixes?n:BL(n),this._applyMultiValueStyleToElement(s,e)}applyStyleToElements(e,n=[]){const r=this.layoutConfig.disableVendorPrefixes?e:BL(e);n.forEach(s=>{this._applyMultiValueStyleToElement(r,s)})}getFlowDirection(e){const n="flex-direction";let r=this.lookupStyle(e,n);return[r||"row",this.lookupInlineStyle(e,n)||nd(this._platformId)&&this._serverModuleLoaded?r:""]}hasWrap(e){return"wrap"===this.lookupStyle(e,"flex-wrap")}lookupAttributeValue(e,n){var r;return null!==(r=e.getAttribute(n))&&void 0!==r?r:""}lookupInlineStyle(e,n){return cl(this._platformId)?e.style.getPropertyValue(n):function Gte(i,t){var e;return null!==(e=GL(i)[t])&&void 0!==e?e:""}(e,n)}lookupStyle(e,n,r=!1){let s="";return e&&((s=this.lookupInlineStyle(e,n))||(cl(this._platformId)?r||(s=getComputedStyle(e).getPropertyValue(n)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(e,n)))),s?s.trim():""}_applyMultiValueStyleToElement(e,n){Object.keys(e).sort().forEach(r=>{const s=e[r],o=Array.isArray(s)?s:[s];o.sort();for(let a of o)a=a?a+"":"",cl(this._platformId)||!this._serverModuleLoaded?cl(this._platformId)?n.style.setProperty(r,a):jte(n,r,a):this._serverStylesheet.addStyleToElement(n,r,a)})}}return i.\u0275fac=function(e){return new(e||i)(G(zte),G(Qd),G(xr),G(Es))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function jte(i,t,e){t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const n=GL(i);n[t]=null!=e?e:"",function Wte(i,t){let e="";for(const n in t)t[n]&&(e+=`${n}:${t[n]};`);i.setAttribute("style",e)}(i,n)}function GL(i){const t={},e=i.getAttribute("style");if(e){const n=e.split(/;+/g);for(let r=0;r<n.length;r++){const s=n[r].trim();if(s.length>0){const o=s.indexOf(":");if(-1===o)throw new Error(`Invalid CSS style: ${s}`);t[s.substr(0,o).trim()]=s.substr(o+1).trim()}}}return t}function Mf(i,t){return(t&&t.priority||0)-(i&&i.priority||0)}function $te(i,t){return(i.priority||0)-(t.priority||0)}let cM=(()=>{class i{constructor(e,n,r){this._zone=e,this._platformId=n,this._document=r,this.source=new Ji(new $l(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const e=[];return this.registry.forEach((n,r)=>{n.matches&&e.push(r)}),e}isActive(e){var n;const r=this.registry.get(e);return null!==(n=null==r?void 0:r.matches)&&void 0!==n?n:this.registerQuery(e).some(s=>s.matches)}observe(e,n=!1){if(e&&e.length){const r=this._observable$.pipe(an(o=>!n||e.indexOf(o.mediaQuery)>-1));return gn(new Xt(o=>{const a=this.registerQuery(e);if(a.length){const l=a.pop();a.forEach(c=>{o.next(c)}),this.source.next(l)}o.complete()}),r)}return this._observable$}registerQuery(e){const n=Array.isArray(e)?e:[e],r=[];return function qte(i,t){const e=i.filter(n=>!jL[n]);if(e.length>0){const n=e.join(", ");try{const r=t.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(t.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${n} {.fx-query-test{ }}\n`)),t.head.appendChild(r),e.forEach(s=>jL[s]=r)}catch(r){console.error(r)}}}(n,this._document),n.forEach(s=>{const o=l=>{this._zone.run(()=>this.source.next(new $l(l.matches,s)))};let a=this.registry.get(s);a||(a=this.buildMQL(s),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(s,a)),a.matches&&r.push(new $l(!0,s))}),r}ngOnDestroy(){let e;for(;e=this.pendingRemoveListenerFns.pop();)e()}buildMQL(e){return function Yte(i,t){return t&&window.matchMedia("all").addListener?window.matchMedia(i):{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(e,cl(this._platformId))}}return i.\u0275fac=function(e){return new(e||i)(G(Xe),G(xr),G(nt))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const jL={},Kte=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],WL="(orientation: portrait) and (max-width: 599.98px)",$L="(orientation: landscape) and (max-width: 959.98px)",qL="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",YL="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",KL="(orientation: portrait) and (min-width: 840px)",XL="(orientation: landscape) and (min-width: 1280px)",$o={HANDSET:`${WL}, ${$L}`,TABLET:`${qL} , ${YL}`,WEB:`${KL}, ${XL} `,HANDSET_PORTRAIT:`${WL}`,TABLET_PORTRAIT:`${qL} `,WEB_PORTRAIT:`${KL}`,HANDSET_LANDSCAPE:`${$L}`,TABLET_LANDSCAPE:`${YL}`,WEB_LANDSCAPE:`${XL}`},Xte=[{alias:"handset",priority:2e3,mediaQuery:$o.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:$o.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:$o.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:$o.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:$o.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:$o.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:$o.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:$o.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:$o.WEB_PORTRAIT,overlapping:!0}],Qte=/(\.|-|_)/g;function Zte(i){let t=i.length>0?i.charAt(0):"",e=i.length>1?i.slice(1):"";return t.toUpperCase()+e}const nne=new X("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const i=Mc(lM),t=Mc(Es),e=[].concat.apply([],(i||[]).map(r=>Array.isArray(r)?r:[r]));return function tne(i,t=[]){const e={};return i.forEach(n=>{e[n.alias]=n}),t.forEach(n=>{e[n.alias]?Wo(e[n.alias],n):e[n.alias]=n}),function ene(i){return i.forEach(t=>{t.suffix||(t.suffix=function Jte(i){return i.replace(Qte,"|").split("|").map(Zte).join("")}(t.alias),t.overlapping=!!t.overlapping)}),i}(Object.keys(e).map(n=>e[n]))}((t.disableDefaultBps?[]:Kte).concat(t.addOrientationBps?Xte:[]),e)}});let dM=(()=>{class i{constructor(e){this.findByMap=new Map,this.items=[...e].sort($te)}findByAlias(e){return e?this.findWithPredicate(e,n=>n.alias===e):null}findByQuery(e){return this.findWithPredicate(e,n=>n.mediaQuery===e)}get overlappings(){return this.items.filter(e=>e.overlapping)}get aliases(){return this.items.map(e=>e.alias)}get suffixes(){return this.items.map(e=>{var n;return null!==(n=null==e?void 0:e.suffix)&&void 0!==n?n:""})}findWithPredicate(e,n){var r;let s=this.findByMap.get(e);return s||(s=null!==(r=this.items.find(n))&&void 0!==r?r:null,this.findByMap.set(e,s)),null!=s?s:null}}return i.\u0275fac=function(e){return new(e||i)(G(nne))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Zd="print",ine={alias:Zd,mediaQuery:Zd,priority:1e3};let rne=(()=>{class i{constructor(e,n,r){this.breakpoints=e,this.layoutConfig=n,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new sne,this.deactivations=[]}withPrintQuery(e){return[...e,Zd]}isPrintEvent(e){return e.mediaQuery.startsWith(Zd)}get printAlias(){var e;return[...null!==(e=this.layoutConfig.printWithBreakpoints)&&void 0!==e?e:[]]}get printBreakPoints(){return this.printAlias.map(e=>this.breakpoints.findByAlias(e)).filter(e=>null!==e)}getEventBreakpoints({mediaQuery:e}){const n=this.breakpoints.findByQuery(e);return(n?[...this.printBreakPoints,n]:this.printBreakPoints).sort(Mf)}updateEvent(e){var n;let r=this.breakpoints.findByQuery(e.mediaQuery);return this.isPrintEvent(e)&&(r=this.getEventBreakpoints(e)[0],e.mediaQuery=null!==(n=null==r?void 0:r.mediaQuery)&&void 0!==n?n:""),zL(e,r)}registerBeforeAfterPrintHooks(e){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const n=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(e,this.getEventBreakpoints(new $l(!0,Zd))),e.updateStyles())},r=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(e),e.updateStyles())};this._document.defaultView.addEventListener("beforeprint",n),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(n),this.afterPrintEventListeners.push(r)}interceptEvents(e){return n=>{this.isPrintEvent(n)?n.matches&&!this.isPrinting?(this.startPrinting(e,this.getEventBreakpoints(n)),e.updateStyles()):!n.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(e),e.updateStyles()):this.collectActivations(e,n)}}blockPropagation(){return e=>!(this.isPrinting||this.isPrintEvent(e))}startPrinting(e,n){this.isPrinting=!0,this.formerActivations=e.activatedBreakpoints,e.activatedBreakpoints=this.queue.addPrintBreakpoints(n)}stopPrinting(e){e.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(e,n){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!n.matches){const r=this.breakpoints.findByQuery(n.mediaQuery);if(r){const s=this.formerActivations&&this.formerActivations.includes(r),o=!this.formerActivations&&e.activatedBreakpoints.includes(r);(s||o)&&(this.deactivations.push(r),this.deactivations.sort(Mf))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("beforeprint",e)),this.afterPrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("afterprint",e)))}}return i.\u0275fac=function(e){return new(e||i)(G(dM),G(Es),G(nt))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class sne{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(t){return t.push(ine),t.sort(Mf),t.forEach(e=>this.addBreakpoint(e)),this.printBreakpoints}addBreakpoint(t){t&&void 0===this.printBreakpoints.find(n=>n.mediaQuery===t.mediaQuery)&&(this.printBreakpoints=function one(i){var t;return null!==(t=null==i?void 0:i.mediaQuery.startsWith(Zd))&&void 0!==t&&t}(t)?[t,...this.printBreakpoints]:[...this.printBreakpoints,t])}clear(){this.printBreakpoints=[]}}let Tn=(()=>{class i{constructor(e,n,r){this.matchMedia=e,this.breakpoints=n,this.hook=r,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new ge,this.observeActivations()}get activatedAlias(){var e,n;return null!==(n=null===(e=this.activatedBreakpoints[0])||void 0===e?void 0:e.alias)&&void 0!==n?n:""}set activatedBreakpoints(e){this._activatedBreakpoints=[...e]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(e){this._useFallbacks=e}onMediaChange(e){const n=this.findByQuery(e.mediaQuery);if(n){e=zL(e,n);const r=this.activatedBreakpoints.indexOf(n);e.matches&&-1===r?(this._activatedBreakpoints.push(n),this._activatedBreakpoints.sort(Mf),this.updateStyles()):!e.matches&&-1!==r&&(this._activatedBreakpoints.splice(r,1),this._activatedBreakpoints.sort(Mf),this.updateStyles())}}init(e,n,r,s,o=[]){QL(this.updateMap,e,n,r),QL(this.clearMap,e,n,s),this.buildElementKeyMap(e,n),this.watchExtraTriggers(e,n,o)}getValue(e,n,r){const s=this.elementMap.get(e);if(s){const o=void 0!==r?s.get(r):this.getActivatedValues(s,n);if(o)return o.get(n)}}hasValue(e,n){const r=this.elementMap.get(e);if(r){const s=this.getActivatedValues(r,n);if(s)return void 0!==s.get(n)||!1}return!1}setValue(e,n,r,s){var o;let a=this.elementMap.get(e);if(a){const c=(null!==(o=a.get(s))&&void 0!==o?o:new Map).set(n,r);a.set(s,c),this.elementMap.set(e,a)}else a=(new Map).set(s,(new Map).set(n,r)),this.elementMap.set(e,a);const l=this.getValue(e,n);void 0!==l&&this.updateElement(e,n,l)}trackValue(e,n){return this.subject.asObservable().pipe(an(r=>r.element===e&&r.key===n))}updateStyles(){this.elementMap.forEach((e,n)=>{const r=new Set(this.elementKeyMap.get(n));let s=this.getActivatedValues(e);s&&s.forEach((o,a)=>{this.updateElement(n,a,o),r.delete(a)}),r.forEach(o=>{if(s=this.getActivatedValues(e,o),s){const a=s.get(o);this.updateElement(n,o,a)}else this.clearElement(n,o)})})}clearElement(e,n){const r=this.clearMap.get(e);if(r){const s=r.get(n);s&&(s(),this.subject.next({element:e,key:n,value:""}))}}updateElement(e,n,r){const s=this.updateMap.get(e);if(s){const o=s.get(n);o&&(o(r),this.subject.next({element:e,key:n,value:r}))}}releaseElement(e){const n=this.watcherMap.get(e);n&&(n.forEach(s=>s.unsubscribe()),this.watcherMap.delete(e));const r=this.elementMap.get(e);r&&(r.forEach((s,o)=>r.delete(o)),this.elementMap.delete(e))}triggerUpdate(e,n){const r=this.elementMap.get(e);if(r){const s=this.getActivatedValues(r,n);s&&(n?this.updateElement(e,n,s.get(n)):s.forEach((o,a)=>this.updateElement(e,a,o)))}}buildElementKeyMap(e,n){let r=this.elementKeyMap.get(e);r||(r=new Set,this.elementKeyMap.set(e,r)),r.add(n)}watchExtraTriggers(e,n,r){if(r&&r.length){let s=this.watcherMap.get(e);if(s||(s=new Map,this.watcherMap.set(e,s)),!s.get(n)){const a=gn(...r).subscribe(()=>{const l=this.getValue(e,n);this.updateElement(e,n,l)});s.set(n,a)}}}findByQuery(e){return this.breakpoints.findByQuery(e)}getActivatedValues(e,n){for(let s=0;s<this.activatedBreakpoints.length;s++){const a=e.get(this.activatedBreakpoints[s].alias);if(a&&(void 0===n||a.has(n)&&null!=a.get(n)))return a}if(!this._useFallbacks)return;const r=e.get("");return void 0===n||r&&r.has(n)?r:void 0}observeActivations(){const e=this.breakpoints.items.map(n=>n.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(e)).pipe(vi(this.hook.interceptEvents(this)),an(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return i.\u0275fac=function(e){return new(e||i)(G(cM),G(dM),G(rne))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function QL(i,t,e,n){var r;if(void 0!==n){const s=null!==(r=i.get(t))&&void 0!==r?r:new Map;s.set(e,n),i.set(t,s)}}let Fn=(()=>{class i{constructor(e,n,r,s){this.elementRef=e,this.styleBuilder=n,this.styler=r,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new ge,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,this.marshal.activatedAlias)}ngOnChanges(e){Object.keys(e).forEach(n=>{if(-1!==this.inputs.indexOf(n)){const r=n.split(".").slice(1).join(".");this.setValue(e[n].currentValue,r)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(e=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),e)}addStyles(e,n){const r=this.styleBuilder,s=r.shouldCache;let o=this.styleCache.get(e);(!o||!s)&&(o=r.buildStyles(e,n),s&&this.styleCache.set(e,o)),this.mru=Object.assign({},o),this.applyStyleToElement(o),r.sideEffect(e,o,n)}clearStyles(){Object.keys(this.mru).forEach(e=>{this.mru[e]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(e,n=!1){if(e){const[r,s]=this.styler.getFlowDirection(e);if(!s&&n){const o=VL(r);this.styler.applyStyleToElements(o,[e])}return r.trim()}return"row"}hasWrap(e){return this.styler.hasWrap(e)}applyStyleToElement(e,n,r=this.nativeElement){this.styler.applyStyleToElement(r,e,n)}setValue(e,n){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,n)}updateWithValue(e){this.currentValue!==e&&(this.addStyles(e),this.currentValue=e)}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(zn),y(Sn),y(Tn))},i.\u0275dir=H({type:i,features:[jt]}),i})();function ZL(i,t="1",e="1"){let n=[t,e,i],r=i.indexOf("calc");if(r>0){n[2]=JL(i.substring(r).trim());let s=i.substr(0,r).trim().split(" ");2==s.length&&(n[0]=s[0],n[1]=s[1])}else if(0==r)n[2]=JL(i.trim());else{let s=i.split(" ");n=3===s.length?s:[t,e,i]}return n}function JL(i){return i.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}function k_(i,t){if(void 0===t)return i;const e=n=>{const r=+n.slice(0,-"x".length);return i.endsWith("x")&&!isNaN(r)?`${r*t.value}${t.unit}`:i};return i.includes(" ")?i.split(" ").map(e).join(" "):e(i)}function it(i){return Rn((t,e)=>{cr(i).subscribe(new wn(e,()=>e.complete(),ac)),!e.closed&&t.subscribe(e)})}let cne=(()=>{class i extends zn{buildStyles(e,{display:n}){const r=VL(e);return Object.assign(Object.assign({},r),{display:"none"===n?n:r.display})}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=xe(i)))(n||i)}}(),i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const dne=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let une=(()=>{class i extends Fn{constructor(e,n,r,s,o){super(e,r,n,s),this._config=o,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(e){var n;const s=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=null!==(n=tN.get(s))&&void 0!==n?n:new Map,tN.set(s,this.styleCache),this.currentValue!==e&&(this.addStyles(e,{display:s}),this.currentValue=e)}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Sn),y(cne),y(Tn),y(Es))},i.\u0275dir=H({type:i,features:[q]}),i})(),Cf=(()=>{class i extends une{constructor(){super(...arguments),this.inputs=dne}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=xe(i)))(n||i)}}(),i.\u0275dir=H({type:i,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[q]}),i})();const tN=new Map,nN={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let hne=(()=>{class i extends zn{constructor(e,n){super(),this._styler=e,this._config=n}buildStyles(e,n){return e.endsWith(I_)?function bne(i,t){const[e,n]=i.split(" "),s=c=>`-${c}`;let o="0px",a=s(null!=n?n:e),l="0px";return"rtl"===t?l=s(e):o=s(e),{margin:`0px ${o} ${a} ${l}`}}(e=k_(e=e.slice(0,e.indexOf(I_)),this._config.multiplier),n.directionality):{}}sideEffect(e,n,r){const s=r.items;if(e.endsWith(I_)){const o=function vne(i,t){const[e,n]=i.split(" ");let s="0px",a="0px";return"rtl"===t?a=e:s=e,{padding:`0px ${s} ${null!=n?n:e} ${a}`}}(e=k_(e=e.slice(0,e.indexOf(I_)),this._config.multiplier),r.directionality);this._styler.applyStyleToElements(o,r.items)}else{e=k_(e,this._config.multiplier),e=this.addFallbackUnit(e);const o=s.pop(),a=function xne(i,t){const e=iN(t.directionality,t.layout),n=Object.assign({},nN);return n[e]=i,n}(e,r);this._styler.applyStyleToElements(a,s),this._styler.applyStyleToElements(nN,[o])}}addFallbackUnit(e){return isNaN(+e)?e:`${e}${this._config.defaultUnit}`}}return i.\u0275fac=function(e){return new(e||i)(G(Sn),G(Es))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const fne=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let pne=(()=>{class i extends Fn{constructor(e,n,r,s,o,a){super(e,o,s,a),this.zone=n,this.directionality=r,this.styleUtils=s,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new ge;const l=[this.directionality.change,this.observerSubject.asObservable()];this.init(l),this.marshal.trackValue(this.nativeElement,"layout").pipe(it(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const e=this.nativeElement.children,n=[];for(let r=e.length;r--;)n[r]=e[r];return n}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(e){const r=e.value.split(" ");this.layout=r[0],R_.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(e){const n=this.childrenNodes.filter(r=>1===r.nodeType&&this.willDisplay(r)).sort((r,s)=>{const o=+this.styler.lookupStyle(r,"order"),a=+this.styler.lookupStyle(s,"order");return isNaN(o)||isNaN(a)||o===a?0:o>a?1:-1});if(n.length>0){const r=this.directionality.value,s=this.layout;"row"===s&&"rtl"===r?this.styleCache=mne:"row"===s&&"rtl"!==r?this.styleCache=_ne:"column"===s&&"rtl"===r?this.styleCache=gne:"column"===s&&"rtl"!==r&&(this.styleCache=yne),this.addStyles(e,{directionality:r,items:n,layout:s})}}clearStyles(){const e=Object.keys(this.mru).length>0,n=e?"padding":iN(this.directionality.value,this.layout);e&&super.clearStyles(),this.styleUtils.applyStyleToElements({[n]:""},this.childrenNodes)}willDisplay(e){const n=this.marshal.getValue(e,"show-hide");return!0===n||void 0===n&&"none"!==this.styleUtils.lookupStyle(e,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{"undefined"!=typeof MutationObserver&&(this.observer=new MutationObserver(e=>{e.some(r=>r.addedNodes&&r.addedNodes.length>0||r.removedNodes&&r.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Xe),y(Un),y(Sn),y(hne),y(Tn))},i.\u0275dir=H({type:i,features:[q]}),i})(),uM=(()=>{class i extends pne{constructor(){super(...arguments),this.inputs=fne}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=xe(i)))(n||i)}}(),i.\u0275dir=H({type:i,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[q]}),i})();const mne=new Map,gne=new Map,_ne=new Map,yne=new Map,I_=" grid";function iN(i,t){switch(t){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":default:return"rtl"===i?"margin-left":"margin-right";case"row-reverse":return"rtl"===i?"margin-right":"margin-left"}}let wne=(()=>{class i extends zn{constructor(e){super(),this.layoutConfig=e}buildStyles(e,n){let[r,s,...o]=e.split(" "),a=o.join(" ");const l=n.direction.indexOf("column")>-1?"column":"row",c=wf(l)?"max-width":"max-height",d=wf(l)?"min-width":"min-height",u=String(a).indexOf("calc")>-1,h=u||"auto"===a,f=String(a).indexOf("%")>-1&&!u,p=String(a).indexOf("px")>-1||String(a).indexOf("rem")>-1||String(a).indexOf("em")>-1||String(a).indexOf("vw")>-1||String(a).indexOf("vh")>-1;let m=u||p;r="0"==r?0:r,s="0"==s?0:s;const g=!r&&!s;let _={};const v={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(a||""){case"":const b=!1!==this.layoutConfig.useColumnBasisZero;a="row"===l?"0%":b?"0.000000001px":"auto";break;case"initial":case"nogrow":r=0,a="auto";break;case"grow":a="100%";break;case"noshrink":s=0,a="auto";break;case"auto":break;case"none":r=0,s=0,a="auto";break;default:!m&&!f&&!isNaN(a)&&(a+="%"),"0%"===a&&(m=!0),"0px"===a&&(a="0%"),_=Wo(v,u?{"flex-grow":r,"flex-shrink":s,"flex-basis":m?a:"100%"}:{flex:`${r} ${s} ${m?a:"100%"}`})}return _.flex||_["flex-grow"]||(_=Wo(v,u?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`})),"0%"!==a&&"0px"!==a&&"0.000000001px"!==a&&"auto"!==a&&(_[d]=g||m&&r?a:null,_[c]=g||!h&&s?a:null),_[d]||_[c]?n.hasWrap&&(_[u?"flex-basis":"flex"]=_[c]?u?_[c]:`${r} ${s} ${_[c]}`:u?_[d]:`${r} ${s} ${_[d]}`):_=Wo(v,u?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`}),Wo(_,{"box-sizing":"border-box"})}}return i.\u0275fac=function(e){return new(e||i)(G(Es))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Mne=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let Cne=(()=>{class i extends Fn{constructor(e,n,r,s,o){super(e,s,n,o),this.layoutConfig=r,this.marshal=o,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(e){this.flexShrink=e||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(e){this.flexGrow=e||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(it(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(it(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(e){const r=e.value.split(" ");this.direction=r[0],this.wrap=void 0!==r[1]&&"wrap"===r[1],this.triggerUpdate()}updateWithValue(e){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const r=this.direction,s=r.startsWith("row"),o=this.wrap;s&&o?this.styleCache=Ene:s&&!o?this.styleCache=Sne:!s&&o?this.styleCache=Ane:!s&&!o&&(this.styleCache=Dne);const l=ZL(String(e).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(l.join(" "),{direction:r,hasWrap:o})}triggerReflow(){const e=this.activatedValue;if(void 0!==e){const n=ZL(e+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,n.join(" "))}}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Sn),y(Es),y(wne),y(Tn))},i.\u0275dir=H({type:i,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[q]}),i})(),Sf=(()=>{class i extends Cne{constructor(){super(...arguments),this.inputs=Mne}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=xe(i)))(n||i)}}(),i.\u0275dir=H({type:i,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[q]}),i})();const Sne=new Map,Dne=new Map,Ene=new Map,Ane=new Map;let Qne=(()=>{class i extends zn{buildStyles(e,n){const r={},[s,o]=e.split(" ");switch(s){case"center":r["justify-content"]="center";break;case"space-around":r["justify-content"]="space-around";break;case"space-between":r["justify-content"]="space-between";break;case"space-evenly":r["justify-content"]="space-evenly";break;case"end":case"flex-end":r["justify-content"]="flex-end";break;default:r["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":r["align-items"]=r["align-content"]="flex-start";break;case"center":r["align-items"]=r["align-content"]="center";break;case"end":case"flex-end":r["align-items"]=r["align-content"]="flex-end";break;case"space-between":r["align-content"]="space-between",r["align-items"]="stretch";break;case"space-around":r["align-content"]="space-around",r["align-items"]="stretch";break;case"baseline":r["align-content"]="stretch",r["align-items"]="baseline";break;default:r["align-items"]=r["align-content"]="stretch"}return Wo(r,{display:n.inline?"inline-flex":"flex","flex-direction":n.layout,"box-sizing":"border-box","max-width":"stretch"===o?wf(n.layout)?null:"100%":null,"max-height":"stretch"===o&&wf(n.layout)?"100%":null})}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=xe(i)))(n||i)}}(),i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Zne=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let Jne=(()=>{class i extends Fn{constructor(e,n,r,s){super(e,r,n,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(it(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(e){const n=this.layout||"row",r=this.inline;"row"===n&&r?this.styleCache=rie:"row"!==n||r?"row-reverse"===n&&r?this.styleCache=oie:"row-reverse"!==n||r?"column"===n&&r?this.styleCache=sie:"column"!==n||r?"column-reverse"===n&&r?this.styleCache=aie:"column-reverse"===n&&!r&&(this.styleCache=iie):this.styleCache=tie:this.styleCache=nie:this.styleCache=eie,this.addStyles(e,{layout:n,inline:r})}onLayoutChange(e){const n=e.value.split(" ");this.layout=n[0],this.inline=e.value.includes("inline"),R_.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Sn),y(Qne),y(Tn))},i.\u0275dir=H({type:i,features:[q]}),i})(),hM=(()=>{class i extends Jne{constructor(){super(...arguments),this.inputs=Zne}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=xe(i)))(n||i)}}(),i.\u0275dir=H({type:i,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[q]}),i})();const eie=new Map,tie=new Map,nie=new Map,iie=new Map,rie=new Map,sie=new Map,oie=new Map,aie=new Map;let rN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[oM,Wl]]}),i})();function ve(i){return null!=i&&"false"!=`${i}`}function Ii(i,t=0){return function lie(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):t}function sN(i){return Array.isArray(i)?i:[i]}function ci(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Ci(i){return i instanceof de?i.nativeElement:i}class die extends yt{constructor(t,e){super()}schedule(t,e=0){return this}}const P_={setInterval(...i){const{delegate:t}=P_;return((null==t?void 0:t.setInterval)||setInterval)(...i)},clearInterval(i){const{delegate:t}=P_;return((null==t?void 0:t.clearInterval)||clearInterval)(i)},delegate:void 0};class fM extends die{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return P_.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;P_.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,oc(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const oN={now:()=>(oN.delegate||Date).now(),delegate:void 0};class Df{constructor(t,e=Df.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}Df.now=oN.now;class pM extends Df{constructor(t,e=Df.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const O_=new pM(fM),aN=O_;function mM(i,t=O_){return Rn((e,n)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,n.next(c)}};function l(){const c=o+i,d=t.now();if(d<c)return r=this.schedule(void 0,c-d),void n.add(r);a()}e.subscribe(new wn(n,c=>{s=c,o=t.now(),r||(r=t.schedule(l,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{s=r=null}))})}let gM,lN=(()=>{class i{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),uie=(()=>{class i{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,n)=>this._cleanupObserver(n))}observe(e){const n=Ci(e);return new Xt(r=>{const o=this._observeElement(n).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(n)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const n=new ge,r=this._mutationObserverFactory.create(s=>n.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:n,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:n,stream:r}=this._observedElements.get(e);n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}}}return i.\u0275fac=function(e){return new(e||i)(G(lN))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),F_=(()=>{class i{constructor(e,n,r){this._contentObserver=e,this._elementRef=n,this._ngZone=r,this.event=new ue,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=ve(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Ii(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(mM(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(y(uie),y(de),y(Xe))},i.\u0275dir=H({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),Ef=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[lN]}),i})();try{gM="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(i){gM=!1}let Af,L_,ql,_M,Si=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?cl(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!gM)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(G(xr))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function As(i){return function hie(){if(null==Af&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Af=!0}))}finally{Af=Af||!1}return Af}()?i:!!i.capture}function uN(){if(null==ql){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ql=!1,ql;if("scrollBehavior"in document.documentElement.style)ql=!0;else{const i=Element.prototype.scrollTo;ql=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return ql}function Tf(){if("object"!=typeof document||!document)return 0;if(null==L_){const i=document.createElement("div"),t=i.style;i.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",i.appendChild(e),document.body.appendChild(i),L_=0,0===i.scrollLeft&&(i.scrollLeft=1,L_=0===i.scrollLeft?1:2),i.remove()}return L_}function N_(i){if(function fie(){if(null==_M){const i="undefined"!=typeof document?document.head:null;_M=!(!i||!i.createShadowRoot&&!i.attachShadow)}return _M}()){const t=i.getRootNode?i.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function hN(){let i="undefined"!=typeof document&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const t=i.shadowRoot.activeElement;if(t===i)break;i=t}return i}function Yr(i){return i.composedPath?i.composedPath()[0]:i.target}function yM(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function Di(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function If(i,t=Jo){return i=null!=i?i:Cie,Rn((e,n)=>{let r,s=!0;e.subscribe(new wn(n,o=>{const a=t(o);(s||!i(r,a))&&(s=!1,r=a,n.next(o))}))})}function Cie(i,t){return i===t}class mN{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ge,this._typeaheadSubscription=yt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new ge,this.change=new ge,t instanceof da&&t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(vi(e=>this._pressedLetters.push(e)),mM(t),an(()=>this._pressedLetters.length>0),Dt(()=>this._pressedLetters.join(""))).subscribe(e=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const s=(this._activeItemIndex+r)%n.length,o=n[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Di(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),r=e[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const r=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof da?this._items.toArray():this._items}}class Eie extends mN{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class U_ extends mN{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let gN=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function Tie(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function Aie(i){try{return i.frameElement}catch(t){return null}}(function Nie(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(n&&(-1===yN(n)||!this.isVisible(n)))return!1;let r=e.nodeName.toLowerCase(),s=yN(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Fie(i){let t=i.nodeName.toLowerCase(),e="input"===t&&i.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function Lie(i){return!function kie(i){return function Pie(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function Rie(i){let t=i.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(i)||function Iie(i){return function Oie(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||_N(i))}(e)&&!this.isDisabled(e)&&((null==n?void 0:n.ignoreVisibility)||this.isVisible(e))}}return i.\u0275fac=function(e){return new(e||i)(G(Si))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function _N(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let t=i.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function yN(i){if(!_N(i))return null;const t=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class Bie{constructor(t,e,n,r,s=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return null==n||n.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=0;n<e.length;n++){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=e.length-1;n>=0;n--){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(fn(1)).subscribe(t)}}let vN=(()=>{class i{constructor(e,n,r){this._checker=e,this._ngZone=n,this._document=r}create(e,n=!1){return new Bie(e,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(e){return new(e||i)(G(gN),G(Xe),G(nt))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Vie=(()=>{class i{constructor(e,n,r){this._elementRef=e,this._focusTrapFactory=n,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=ve(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=ve(e)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const n=e.autoCapture;n&&!n.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=hN(),this.focusTrap.focusInitialElementWhenReady()}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(vN),y(nt))},i.\u0275dir=H({type:i,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[jt]}),i})();function xM(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function wM(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const Hie=new X("cdk-input-modality-detector-options"),Uie={ignoreKeys:[18,17,224,91,16]},iu=As({passive:!0,capture:!0});let zie=(()=>{class i{constructor(e,n,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Ji(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Yr(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(xM(o)?"keyboard":"mouse"),this._mostRecentTarget=Yr(o))},this._onTouchstart=o=>{wM(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Yr(o))},this._options=Object.assign(Object.assign({},Uie),s),this.modalityDetected=this._modality.pipe(function Mie(i){return an((t,e)=>i<=e)}(1)),this.modalityChanged=this.modalityDetected.pipe(If()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,iu),r.addEventListener("mousedown",this._onMousedown,iu),r.addEventListener("touchstart",this._onTouchstart,iu)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,iu),document.removeEventListener("mousedown",this._onMousedown,iu),document.removeEventListener("touchstart",this._onTouchstart,iu))}}return i.\u0275fac=function(e){return new(e||i)(G(Si),G(Xe),G(nt),G(Hie,8))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Gie=new X("liveAnnouncerElement",{providedIn:"root",factory:function jie(){return null}}),Wie=new X("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let $ie=(()=>{class i{constructor(e,n,r,s){this._ngZone=n,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...n){const r=this._defaultOptions;let s,o;return 1===n.length&&"number"==typeof n[0]?o=n[0]:[s,o]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var e,n;clearTimeout(this._previousTimeout),null===(e=this._liveElement)||void 0===e||e.remove(),this._liveElement=null,null===(n=this._currentResolve)||void 0===n||n.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",n=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return i.\u0275fac=function(e){return new(e||i)(G(Gie,8),G(Xe),G(nt),G(Wie,8))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const qie=new X("cdk-focus-monitor-default-options"),z_=As({passive:!0,capture:!0});let no=(()=>{class i{constructor(e,n,r,s,o){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ge,this._rootNodeFocusAndBlurListener=a=>{const l=Yr(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let d=l;d;d=d.parentElement)c.call(this,a,d)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(e,n=!1){const r=Ci(e);if(!this._platform.isBrowser||1!==r.nodeType)return Qe(null);const s=N_(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;const a={checkChildren:n,subject:new ge,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const n=Ci(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){const s=Ci(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused","touch"===n),e.classList.toggle("cdk-keyboard-focused","keyboard"===n),e.classList.toggle("cdk-mouse-focused","mouse"===n),e.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,n){const r=this._elementInfo.get(n),s=Yr(e);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(e,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r.subject,null))}_emitOrigin(e,n){this._ngZone.run(()=>e.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,z_),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,z_)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(it(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,z_),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,z_),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r.subject,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){const n=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&n.push([s,r])}),n}}return i.\u0275fac=function(e){return new(e||i)(G(Xe),G(Si),G(zie),G(nt,8),G(qie,8))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),MM=(()=>{class i{constructor(e,n){this._elementRef=e,this._focusMonitor=n,this.cdkFocusChange=new ue}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(n=>this.cdkFocusChange.emit(n))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(no))},i.\u0275dir=H({type:i,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),i})();const xN="cdk-high-contrast-black-on-white",wN="cdk-high-contrast-white-on-black",CM="cdk-high-contrast-active";let MN=(()=>{class i{constructor(e,n){this._platform=e,this._document=n}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(CM),e.remove(xN),e.remove(wN),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?(e.add(CM),e.add(xN)):2===n&&(e.add(CM),e.add(wN))}}}return i.\u0275fac=function(e){return new(e||i)(G(Si),G(nt))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),G_=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(e){return new(e||i)(G(MN))},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[Ef]]}),i})();class CN{}const qo="*";function Gn(i,t){return{type:7,name:i,definitions:t,options:{}}}function Yt(i,t=null){return{type:4,styles:t,timings:i}}function DN(i,t=null){return{type:2,steps:i,options:t}}function Be(i){return{type:6,styles:i,offset:null}}function Pt(i,t,e){return{type:0,name:i,styles:t,options:e}}function Yl(i){return{type:5,steps:i}}function zt(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function j_(i=null){return{type:9,options:i}}function W_(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function EN(i){Promise.resolve(null).then(i)}class ru{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){EN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class AN{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?EN(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}function TN(){return"undefined"!=typeof window&&void 0!==window.document}function DM(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Na(i){switch(i.length){case 0:return new ru;case 1:return i[0];default:return new AN(i)}}function RN(i,t,e,n,r={},s={}){const o=[],a=[];let l=-1,c=null;if(n.forEach(d=>{const u=d.offset,h=u==l,f=h&&c||{};Object.keys(d).forEach(p=>{let m=p,g=d[p];if("offset"!==p)switch(m=t.normalizePropertyName(m,o),g){case"!":g=r[p];break;case qo:g=s[p];break;default:g=t.normalizeStyleValue(p,m,g,o)}f[m]=g}),h||a.push(f),c=f,l=u}),o.length){const d="\n - ";throw new Error(`Unable to animate due to the following errors:${d}${o.join(d)}`)}return a}function EM(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&AM(e,"start",i)));break;case"done":i.onDone(()=>n(e&&AM(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&AM(e,"destroy",i)))}}function AM(i,t,e){const n=e.totalTime,s=TM(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,null==n?i.totalTime:n,!!e.disabled),o=i._data;return null!=o&&(s._data=o),s}function TM(i,t,e,n,r="",s=0,o){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function Tr(i,t,e){let n;return i instanceof Map?(n=i.get(t),n||i.set(t,n=e)):(n=i[t],n||(n=i[t]=e)),n}function kN(i){const t=i.indexOf(":");return[i.substring(1,t),i.substr(t+1)]}let RM=(i,t)=>!1,IN=(i,t,e)=>[];(DM()||"undefined"!=typeof Element)&&(RM=TN()?(i,t)=>{for(;t&&t!==document.documentElement;){if(t===i)return!0;t=t.parentNode||t.host}return!1}:(i,t)=>i.contains(t),IN=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]});let Kl=null,PN=!1;function kM(i){Kl||(Kl=function Xie(){return"undefined"!=typeof document?document.body:null}()||{},PN=!!Kl.style&&"WebkitAppearance"in Kl.style);let t=!0;return Kl.style&&!function Kie(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in Kl.style,!t&&PN&&(t="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in Kl.style)),t}const IM=RM,PM=IN;function ON(i){const t={};return Object.keys(i).forEach(e=>{const n=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[n]=i[e]}),t}let FN=(()=>{class i{validateStyleProperty(e){return kM(e)}matchesElement(e,n){return!1}containsElement(e,n){return IM(e,n)}query(e,n,r){return PM(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,o,a=[],l){return new ru(r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})(),OM=(()=>{class i{}return i.NOOP=new FN,i})();const FM="ng-enter",$_="ng-leave",q_="ng-trigger",Y_=".ng-trigger",NN="ng-animating",LM=".ng-animating";function Xl(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:NM(parseFloat(t[1]),t[2])}function NM(i,t){return"s"===t?1e3*i:i}function K_(i,t,e){return i.hasOwnProperty("duration")?i:function Jie(i,t,e){let r,s=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(`The provided timing value "${i}" is invalid.`),{duration:0,delay:0,easing:""};r=NM(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=NM(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=i;if(!e){let a=!1,l=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),a=!0),s<0&&(t.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&t.splice(l,0,`The provided timing value "${i}" is invalid.`)}return{duration:r,delay:s,easing:o}}(i,t,e)}function su(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function Ba(i,t,e={}){if(t)for(let n in i)e[n]=i[n];else su(i,e);return e}function VN(i,t,e){return e?t+":"+e+";":""}function HN(i){let t="";for(let e=0;e<i.style.length;e++){const n=i.style.item(e);t+=VN(0,n,i.style.getPropertyValue(n))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=VN(0,nre(e),i.style[e]));i.setAttribute("style",t)}function io(i,t,e){i.style&&(Object.keys(t).forEach(n=>{const r=VM(n);e&&!e.hasOwnProperty(n)&&(e[n]=i.style[r]),i.style[r]=t[n]}),DM()&&HN(i))}function Ql(i,t){i.style&&(Object.keys(t).forEach(e=>{const n=VM(e);i.style[n]=""}),DM()&&HN(i))}function Pf(i){return Array.isArray(i)?1==i.length?i[0]:DN(i):i}const BM=new RegExp("{{\\s*(.+?)\\s*}}","g");function UN(i){let t=[];if("string"==typeof i){let e;for(;e=BM.exec(i);)t.push(e[1]);BM.lastIndex=0}return t}function X_(i,t,e){const n=i.toString(),r=n.replace(BM,(s,o)=>{let a=t[o];return t.hasOwnProperty(o)||(e.push(`Please provide a value for the animation param ${o}`),a=""),a.toString()});return r==n?i:r}function Q_(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const tre=/-+([a-z0-9])/g;function VM(i){return i.replace(tre,(...t)=>t[1].toUpperCase())}function nre(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function zN(i,t){return 0===i||0===t}function GN(i,t,e){const n=Object.keys(e);if(n.length&&t.length){let s=t[0],o=[];if(n.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=e[a]}),o.length)for(var r=1;r<t.length;r++){let a=t[r];o.forEach(function(l){a[l]=HM(i,l)})}}return t}function Rr(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function HM(i,t){return window.getComputedStyle(i)[t]}function ire(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function rre(i,t,e){if(":"==i[0]){const l=function sre(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(`The transition alias value "${i}" is not supported`),"* => *"}}(i,e);if("function"==typeof l)return void t.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(`The provided transition expression "${i}" is not supported`),t;const r=n[1],s=n[2],o=n[3];t.push(jN(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&t.push(jN(o,r))}(n,e,t)):e.push(i),e}const J_=new Set(["true","1"]),ey=new Set(["false","0"]);function jN(i,t){const e=J_.has(i)||ey.has(i),n=J_.has(t)||ey.has(t);return(r,s)=>{let o="*"==i||i==r,a="*"==t||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?J_.has(i):ey.has(i)),!a&&n&&"boolean"==typeof s&&(a=s?J_.has(t):ey.has(t)),o&&a}}const ore=new RegExp("s*:selfs*,?","g");function UM(i,t,e){return new are(i).build(t,e)}class are{constructor(t){this._driver=t}build(t,e){const n=new dre(e);return this._resetContextStyleTimingState(n),Rr(this,Pf(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,s.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);n+=l.queryCount,r+=l.depCount,o.push(l)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};if(n.styles.forEach(a=>{if(ty(a)){const l=a;Object.keys(l).forEach(c=>{UN(l[c]).forEach(d=>{o.hasOwnProperty(d)||s.add(d)})})}}),s.size){const a=Q_(s.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${a.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Rr(this,Pf(t.animation),e);return{type:1,matchers:ire(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Zl(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>Rr(this,n,e)),options:Zl(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=n;const a=Rr(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:s,options:Zl(t.options)}}visitAnimate(t,e){const n=function hre(i,t){let e=null;if(i.hasOwnProperty("duration"))e=i;else if("number"==typeof i)return zM(K_(i,t).duration,0,"");const n=i;if(n.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=zM(0,0,"");return s.dynamic=!0,s.strValue=n,s}return e=e||K_(n,t),zM(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:Be({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=Be(c)}e.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(o=>{"string"==typeof o?o==qo?n.push(o):e.errors.push(`The provided style string value ${o} is not allowed.`):n.push(o)}):n.push(t.styles);let r=!1,s=null;return n.forEach(o=>{if(ty(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!r)for(let c in a)if(a[c].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:s,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void e.errors.push(`The provided animation property "${a}" is not a supported CSS property for animations`);const l=e.collectedStyles[e.currentQuerySelector],c=l[a];let d=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(e.errors.push(`The CSS property "${a}" that exists between the times of "${c.startTime}ms" and "${c.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${r}ms"`),d=!1),s=c.startTime),d&&(l[a]={startTime:s,endTime:r}),e.options&&function ere(i,t,e){const n=t.params||{},r=UN(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(o[a],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let s=0;const o=[];let a=!1,l=!1,c=0;const d=t.steps.map(_=>{const v=this._makeStyleAst(_,e);let b=null!=v.offset?v.offset:function ure(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(ty(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(ty(i)&&i.hasOwnProperty("offset")){const e=i;t=parseFloat(e.offset),delete e.offset}return t}(v.styles),x=0;return null!=b&&(s++,x=v.offset=b),l=l||x<0||x>1,a=a||x<c,c=x,o.push(x),v});l&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");const u=t.steps.length;let h=0;s>0&&s<u?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(h=1/(u-1));const f=u-1,p=e.currentTime,m=e.currentAnimateTimings,g=m.duration;return d.forEach((_,v)=>{const b=h>0?v==f?1:h*v:o[v],x=b*g;e.currentTime=p+m.delay+x,m.duration=x,this._validateStyleAst(_,e),_.offset=b,n.styles.push(_)}),n}visitReference(t,e){return{type:8,animation:Rr(this,Pf(t.animation),e),options:Zl(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Zl(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Zl(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function lre(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(ore,"")),i=i.replace(/@\*/g,Y_).replace(/@\w+/g,e=>Y_+"-"+e.substr(1)).replace(/:animating/g,LM),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,Tr(e.collectedStyles,e.currentQuerySelector,{});const a=Rr(this,Pf(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:Zl(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:K_(t.timings,e.errors,!0);return{type:12,animation:Rr(this,Pf(t.animation),e),timings:n,options:null}}}class dre{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function ty(i){return!Array.isArray(i)&&"object"==typeof i}function Zl(i){return i?(i=su(i)).params&&(i.params=function cre(i){return i?su(i):null}(i.params)):i={},i}function zM(i,t,e){return{duration:i,delay:t,easing:e}}function GM(i,t,e,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class ny{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const mre=new RegExp(":enter","g"),_re=new RegExp(":leave","g");function jM(i,t,e,n,r,s={},o={},a,l,c=[]){return(new yre).buildKeyframes(i,t,e,n,r,s,o,a,l,c)}class yre{buildKeyframes(t,e,n,r,s,o,a,l,c,d=[]){c=c||new ny;const u=new WM(t,e,c,r,s,d,[]);u.options=l,u.currentTimeline.setStyles([o],null,u.errors,l),Rr(this,n,u);const h=u.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let p=h.length-1;p>=0;p--){const m=h[p];if(m.element===e){f=m;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,u.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[GM(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const o=null!=n.duration?Xl(n.duration):null,a=null!=n.delay?Xl(n.delay):null;return 0!==o&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Rr(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=iy);const o=Xl(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Rr(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Xl(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);s&&a.delayNextStep(s),Rr(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return K_(e.params?X_(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,a=e.createSubContext().currentTimeline;a.easing=n.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Xl(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=iy);let o=n;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{e.currentQueryIndex=d;const u=e.createSubContext(t.options,c);s&&u.delayNextStep(s),c===e.element&&(l=u.currentTimeline),Rr(this,t.animation,u),u.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,u.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const d=e.currentTimeline;l&&d.delayNextStep(l);const u=d.currentTime;Rr(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const iy={};class WM{constructor(t,e,n,r,s,o,a,l){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=iy,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new ry(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Xl(n.duration)),null!=n.delay&&(r.delay=Xl(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=X_(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new WM(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=iy,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},s=new vre(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(mre,"."+this._enterClassName)).replace(_re,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&0==a.length&&o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),a}}class ry{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new ry(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||qo,this._currentKeyframe[e]=qo}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const s=r&&r.params||{},o=function bre(i,t){const e={};let n;return i.forEach(r=>{"*"===r?(n=n||Object.keys(t),n.forEach(s=>{e[s]=qo})):Ba(r,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=X_(o[a],s,n);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:qo),this._updateStyle(a,l)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(n=>{this._currentKeyframe[n]=t[n]}),Object.keys(this._localTimelineStyles).forEach(n=>{this._currentKeyframe.hasOwnProperty(n)||(this._currentKeyframe[n]=this._localTimelineStyles[n])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Ba(a,!0);Object.keys(c).forEach(d=>{const u=c[d];"!"==u?t.add(d):u==qo&&e.add(d)}),n||(c.offset=l/this.duration),r.push(c)});const s=t.size?Q_(t.values()):[],o=e.size?Q_(e.values()):[];if(n){const a=r[0],l=su(a);a.offset=0,l.offset=1,r=[a,l]}return GM(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class vre extends ry{constructor(t,e,n,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=n+e,a=e/o,l=Ba(t[0],!1);l.offset=0,s.push(l);const c=Ba(t[0],!1);c.offset=qN(a),s.push(c);const d=t.length-1;for(let u=1;u<=d;u++){let h=Ba(t[u],!1);h.offset=qN((e+h.offset*n)/o),s.push(h)}n=o,e=0,r="",t=s}return GM(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function qN(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class $M{}class xre extends $M{normalizePropertyName(t,e){return VM(t)}normalizeStyleValue(t,e,n,r){let s="";const o=n.toString().trim();if(wre[e]&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+s}}const wre=(()=>function Mre(i){const t={};return i.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function YN(i,t,e,n,r,s,o,a,l,c,d,u,h){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:u,errors:h}}const qM={};class KN{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function Cre(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],s=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return s?s.buildStyles(e,n):o}build(t,e,n,r,s,o,a,l,c,d){const u=[],h=this.ast.options&&this.ast.options.params||qM,p=this.buildStyles(n,a&&a.params||qM,u),m=l&&l.params||qM,g=this.buildStyles(r,m,u),_=new Set,v=new Map,b=new Map,x="void"===r,w={params:Object.assign(Object.assign({},h),m)},S=d?[]:jM(t,e,this.ast.animation,s,o,p,g,w,c,u);let T=0;if(S.forEach(V=>{T=Math.max(V.duration+V.delay,T)}),u.length)return YN(e,this._triggerName,n,r,x,p,g,[],[],v,b,T,u);S.forEach(V=>{const N=V.element,M=Tr(v,N,{});V.preStyleProps.forEach(K=>M[K]=!0);const R=Tr(b,N,{});V.postStyleProps.forEach(K=>R[K]=!0),N!==e&&_.add(N)});const I=Q_(_.values());return YN(e,this._triggerName,n,r,x,p,g,S,I,v,b,T)}}class Sre{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n={},r=su(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=X_(l,r,e));const c=this.normalizer.normalizePropertyName(a,e);l=this.normalizer.normalizeStyleValue(a,c,l,e),n[c]=l})}}),n}}class Ere{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new Sre(r.style,r.options&&r.options.params||{},n)}),XN(this.states,"true","1"),XN(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new KN(t,r,this.states))}),this.fallbackTransition=function Are(i,t,e){return new KN(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(o=>o.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function XN(i,t,e){i.hasOwnProperty(t)?i.hasOwnProperty(e)||(i[e]=i[t]):i.hasOwnProperty(e)&&(i[t]=i[e])}const Tre=new ny;class Rre{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=UM(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,s=RN(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations[t];let o;const a=new Map;if(s?(o=jM(this._driver,e,s,FM,$_,{},{},n,Tre,r),o.forEach(d=>{const u=Tr(a,d.element,{});d.postStyleProps.forEach(h=>u[h]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);a.forEach((d,u)=>{Object.keys(d).forEach(h=>{d[h]=this._driver.computeStyle(u,h,qo)})});const c=Na(o.map(d=>{const u=a.get(d.element);return this._buildPlayer(d,{},u)}));return this._playersById[t]=c,c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const s=TM(e,"","","");return EM(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const QN="ng-animate-queued",YM="ng-animate-disabled",Fre=[],ZN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Lre={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Kr="__ng_removed";class KM{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function Hre(i){return null!=i?i:null}(n?t.value:t),n){const s=su(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const Of="void",XM=new KM(Of);class Nre{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Xr(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function Ure(i){return"start"==i||"done"==i}(n))throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);const s=Tr(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=Tr(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Xr(t,q_),Xr(t,q_+"-"+e),a[e]=XM),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),o=new QM(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Xr(t,q_),Xr(t,q_+"-"+e),this._engine.statesByElement.set(t,a={}));let l=a[e];const c=new KM(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[e]=c,l||(l=XM),c.value!==Of&&l.value===c.value){if(!function jre(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(l.params,c.params)){const m=[],g=s.matchStyles(l.value,l.params,m),_=s.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{Ql(t,g),io(t,_)})}return}const h=Tr(this._engine.playersByElement,t,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==e&&m.queued&&m.destroy()});let f=s.matchTransition(l.value,c.value,t,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Xr(t,QN),o.onStart(()=>{ou(t,QN)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);const g=this._engine.playersByElement.get(t);if(g){let _=g.indexOf(o);_>=0&&g.splice(_,1)}}),this.players.push(o),h.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Y_,!0);n.forEach(r=>{if(r[Kr])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(l=>{if(o.set(l,s[l].value),this._triggers[l]){const c=this.trigger(t,l,Of,r);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),n&&Na(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers[o].fallbackTransition,c=n[o]||XM,d=new KM(Of),u=new QM(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Kr];(!s||s===ZN)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Xr(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=TM(s,n.triggerName,n.fromState.value,n.toState.value);l._data=t,EM(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class Bre{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new Nre(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let s=n;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,e)){this._namespaceList.splice(s+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const r=Object.keys(n);for(let s=0;s<r.length;s++){const o=n[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&e.add(a)}}}return e}trigger(t,e,n,r){if(sy(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!sy(e))return;const s=e[Kr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Xr(t,YM)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ou(t,YM))}removeNode(t,e,n,r){if(sy(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[Kr]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return sy(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,Y_,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,LM,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Na(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const n=t[Kr];if(n&&n.setForRemoval){if(t[Kr]=ZN,n.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(YM))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Xr(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?Na(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new ny,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(L=>{d.add(L);const U=this.driver.query(L,".ng-animate-queued",!0);for(let P=0;P<U.length;P++)d.add(U[P])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=t2(h,this.collectedEnterElements),p=new Map;let m=0;f.forEach((L,U)=>{const P=FM+m++;p.set(U,P),L.forEach($=>Xr($,P))});const g=[],_=new Set,v=new Set;for(let L=0;L<this.collectedLeaveElements.length;L++){const U=this.collectedLeaveElements[L],P=U[Kr];P&&P.setForRemoval&&(g.push(U),_.add(U),P.hasAnimation?this.driver.query(U,".ng-star-inserted",!0).forEach($=>_.add($)):v.add(U))}const b=new Map,x=t2(h,Array.from(_));x.forEach((L,U)=>{const P=$_+m++;b.set(U,P),L.forEach($=>Xr($,P))}),t.push(()=>{f.forEach((L,U)=>{const P=p.get(U);L.forEach($=>ou($,P))}),x.forEach((L,U)=>{const P=b.get(U);L.forEach($=>ou($,P))}),g.forEach(L=>{this.processLeaveNode(L)})});const w=[],S=[];for(let L=this._namespaceList.length-1;L>=0;L--)this._namespaceList[L].drainQueuedTransitions(e).forEach(P=>{const $=P.player,ee=P.element;if(w.push($),this.collectedEnterElements.length){const gt=ee[Kr];if(gt&&gt.setForMove){if(gt.previousTriggersValues&&gt.previousTriggersValues.has(P.triggerName)){const dt=gt.previousTriggersValues.get(P.triggerName),st=this.statesByElement.get(P.element);st&&st[P.triggerName]&&(st[P.triggerName].value=dt)}return void $.destroy()}}const pe=!u||!this.driver.containsElement(u,ee),se=b.get(ee),Ge=p.get(ee),ze=this._buildInstruction(P,n,Ge,se,pe);if(ze.errors&&ze.errors.length)return void S.push(ze);if(pe)return $.onStart(()=>Ql(ee,ze.fromStyles)),$.onDestroy(()=>io(ee,ze.toStyles)),void r.push($);if(P.isFallbackTransition)return $.onStart(()=>Ql(ee,ze.fromStyles)),$.onDestroy(()=>io(ee,ze.toStyles)),void r.push($);const ct=[];ze.timelines.forEach(gt=>{gt.stretchStartingKeyframe=!0,this.disabledNodes.has(gt.element)||ct.push(gt)}),ze.timelines=ct,n.append(ee,ze.timelines),o.push({instruction:ze,player:$,element:ee}),ze.queriedElements.forEach(gt=>Tr(a,gt,[]).push($)),ze.preStyleProps.forEach((gt,dt)=>{const st=Object.keys(gt);if(st.length){let ye=l.get(dt);ye||l.set(dt,ye=new Set),st.forEach(Ct=>ye.add(Ct))}}),ze.postStyleProps.forEach((gt,dt)=>{const st=Object.keys(gt);let ye=c.get(dt);ye||c.set(dt,ye=new Set),st.forEach(Ct=>ye.add(Ct))})});if(S.length){const L=[];S.forEach(U=>{L.push(`@${U.triggerName} has failed due to:\n`),U.errors.forEach(P=>L.push(`- ${P}\n`))}),w.forEach(U=>U.destroy()),this.reportError(L)}const T=new Map,I=new Map;o.forEach(L=>{const U=L.element;n.has(U)&&(I.set(U,U),this._beforeAnimationBuild(L.player.namespaceId,L.instruction,T))}),r.forEach(L=>{const U=L.element;this._getPreviousPlayers(U,!1,L.namespaceId,L.triggerName,null).forEach($=>{Tr(T,U,[]).push($),$.destroy()})});const V=g.filter(L=>r2(L,l,c)),N=new Map;e2(N,this.driver,v,c,qo).forEach(L=>{r2(L,l,c)&&V.push(L)});const R=new Map;f.forEach((L,U)=>{e2(R,this.driver,new Set(L),l,"!")}),V.forEach(L=>{const U=N.get(L),P=R.get(L);N.set(L,Object.assign(Object.assign({},U),P))});const K=[],z=[],j={};o.forEach(L=>{const{element:U,player:P,instruction:$}=L;if(n.has(U)){if(d.has(U))return P.onDestroy(()=>io(U,$.toStyles)),P.disabled=!0,P.overrideTotalTime($.totalTime),void r.push(P);let ee=j;if(I.size>1){let se=U;const Ge=[];for(;se=se.parentNode;){const ze=I.get(se);if(ze){ee=ze;break}Ge.push(se)}Ge.forEach(ze=>I.set(ze,ee))}const pe=this._buildAnimation(P.namespaceId,$,T,s,R,N);if(P.setRealPlayer(pe),ee===j)K.push(P);else{const se=this.playersByElement.get(ee);se&&se.length&&(P.parentPlayer=Na(se)),r.push(P)}}else Ql(U,$.fromStyles),P.onDestroy(()=>io(U,$.toStyles)),z.push(P),d.has(U)&&r.push(P)}),z.forEach(L=>{const U=s.get(L.element);if(U&&U.length){const P=Na(U);L.setRealPlayer(P)}}),r.forEach(L=>{L.parentPlayer?L.syncPlayerEvents(L.parentPlayer):L.destroy()});for(let L=0;L<g.length;L++){const U=g[L],P=U[Kr];if(ou(U,$_),P&&P.hasAnimation)continue;let $=[];if(a.size){let pe=a.get(U);pe&&pe.length&&$.push(...pe);let se=this.driver.query(U,LM,!0);for(let Ge=0;Ge<se.length;Ge++){let ze=a.get(se[Ge]);ze&&ze.length&&$.push(...ze)}}const ee=$.filter(pe=>!pe.destroyed);ee.length?zre(this,U,ee):this.processLeaveNode(U)}return g.length=0,K.forEach(L=>{this.players.push(L),L.onDone(()=>{L.destroy();const U=this.players.indexOf(L);this.players.splice(U,1)}),L.play()}),K}elementContainsData(t,e){let n=!1;const r=e[Kr];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==Of;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,n){const s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,d=c!==s,u=Tr(n,c,[]);this._getPreviousPlayers(c,d,o,a,e.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),u.push(f)})}Ql(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){const a=e.triggerName,l=e.element,c=[],d=new Set,u=new Set,h=e.timelines.map(p=>{const m=p.element;d.add(m);const g=m[Kr];if(g&&g.removedBeforeQueried)return new ru(p.duration,p.delay);const _=m!==l,v=function Gre(i){const t=[];return n2(i,t),t}((n.get(m)||Fre).map(T=>T.getRealPlayer())).filter(T=>!!T.element&&T.element===m),b=s.get(m),x=o.get(m),w=RN(0,this._normalizer,0,p.keyframes,b,x),S=this._buildPlayer(p,w,v);if(p.subTimeline&&r&&u.add(m),_){const T=new QM(t,a,m);T.setRealPlayer(S),c.push(T)}return S});c.forEach(p=>{Tr(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function Vre(i,t,e){let n;if(i instanceof Map){if(n=i.get(t),n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}}else if(n=i[t],n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&delete i[t]}return n}(this.playersByQueriedElement,p.element,p))}),d.forEach(p=>Xr(p,NN));const f=Na(h);return f.onDestroy(()=>{d.forEach(p=>ou(p,NN)),io(l,e.toStyles)}),u.forEach(p=>{Tr(r,p,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new ru(t.duration,t.delay)}}class QM{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new ru,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>EM(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Tr(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function sy(i){return i&&1===i.nodeType}function JN(i,t){const e=i.style.display;return i.style.display=null!=t?t:"none",e}function e2(i,t,e,n,r){const s=[];e.forEach(l=>s.push(JN(l)));const o=[];n.forEach((l,c)=>{const d={};l.forEach(u=>{const h=d[u]=t.computeStyle(c,u,r);(!h||0==h.length)&&(c[Kr]=Lre,o.push(c))}),i.set(c,d)});let a=0;return e.forEach(l=>JN(l,s[a++])),o}function t2(i,t){const e=new Map;if(i.forEach(a=>e.set(a,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return t.forEach(a=>{const l=o(a);1!==l&&e.get(l).push(a)}),e}function Xr(i,t){var e;null===(e=i.classList)||void 0===e||e.add(t)}function ou(i,t){var e;null===(e=i.classList)||void 0===e||e.remove(t)}function zre(i,t,e){Na(e).onDone(()=>i.processLeaveNode(t))}function n2(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof AN?n2(n.players,t):t.push(n)}}function r2(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}class oy{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Bre(t,e,n),this._timelineEngine=new Rre(t,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,n,r,s){const o=t+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=UM(this._driver,s,l);if(l.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${l.join("\n - ")}`);a=function Dre(i,t,e){return new Ere(i,t,e)}(r,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[s,o]=kN(n);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[o,a]=kN(n);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function s2(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=ZM(t[0]),t.length>1&&(n=ZM(t[t.length-1]))):t&&(e=ZM(t)),e||n?new Wre(i,e,n):null}let Wre=(()=>{class i{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&io(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(io(this._element,this._initialStyles),this._endStyles&&(io(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(Ql(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ql(this._element,this._endStyles),this._endStyles=null),io(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function ZM(i){let t=null;const e=Object.keys(i);for(let n=0;n<e.length;n++){const r=e[n];$re(r)&&(t=t||{},t[r]=i[r])}return t}function $re(i){return"display"===i||"position"===i}const o2="animation",a2="animationend";class Kre{constructor(t,e,n,r,s,o,a){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=s,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=l=>this._handleCallback(l)}apply(){(function Xre(i,t){const e=eC(i,"").trim();let n=0;e.length&&(n=function Zre(i,t){let e=0;for(let n=0;n<i.length;n++)i.charAt(n)===t&&e++;return e}(e,",")+1,t=`${e}, ${t}`),ay(i,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),d2(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){l2(this._element,this._name,"paused")}resume(){l2(this._element,this._name,"running")}setPosition(t){const e=c2(this._element,this._name);this._position=t*this._duration,ay(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),d2(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function Qre(i,t){const n=eC(i,"").split(","),r=JM(n,t);r>=0&&(n.splice(r,1),ay(i,"",n.join(",")))}(this._element,this._name))}}function l2(i,t,e){ay(i,"PlayState",e,c2(i,t))}function c2(i,t){const e=eC(i,"");return e.indexOf(",")>0?JM(e.split(","),t):JM([e],t)}function JM(i,t){for(let e=0;e<i.length;e++)if(i[e].indexOf(t)>=0)return e;return-1}function d2(i,t,e){e?i.removeEventListener(a2,t):i.addEventListener(a2,t)}function ay(i,t,e,n){const r=o2+t;if(null!=n){const s=i.style[r];if(s.length){const o=s.split(",");o[n]=e,e=o.join(",")}}i.style[r]=e}function eC(i,t){return i.style[o2+t]||""}class u2{constructor(t,e,n,r,s,o,a,l){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=s,this._finalStyles=a,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+s,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Kre(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:HM(this.element,n))})}this.currentSnapshot=t}}class tse extends ru{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=ON(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class f2{constructor(){this._count=0}validateStyleProperty(t){return kM(t)}matchesElement(t,e){return!1}containsElement(t,e){return IM(t,e)}query(t,e,n){return PM(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(a=>ON(a));let r=`@keyframes ${e} {\n`,s="";n.forEach(a=>{s=" ";const l=parseFloat(a.offset);r+=`${s}${100*l}% {\n`,s+=" ",Object.keys(a).forEach(c=>{const d=a[c];switch(c){case"offset":return;case"easing":return void(d&&(r+=`${s}animation-timing-function: ${d};\n`));default:return void(r+=`${s}${c}: ${d};\n`)}}),r+=`${s}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,s,o=[],a){const l=o.filter(g=>g instanceof u2),c={};zN(n,r)&&l.forEach(g=>{let _=g.currentSnapshot;Object.keys(_).forEach(v=>c[v]=_[v])});const d=function rse(i){let t={};return i&&(Array.isArray(i)?i:[i]).forEach(n=>{Object.keys(n).forEach(r=>{"offset"==r||"easing"==r||(t[r]=n[r])})}),t}(e=GN(t,e,c));if(0==n)return new tse(t,d);const u="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,u,e);(function ise(i){var t;const e=null===(t=i.getRootNode)||void 0===t?void 0:t.call(i);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(t).appendChild(h);const p=s2(t,e),m=new u2(t,e,u,n,r,s,d,p);return m.onDestroy(()=>function sse(i){i.parentNode.removeChild(i)}(h)),m}}class m2{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(n=>{"offset"!=n&&(t[n]=this._finished?e[n]:HM(this.element,n))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class ose{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(g2().toString()),this._cssKeyframesDriver=new f2}validateStyleProperty(t){return kM(t)}matchesElement(t,e){return!1}containsElement(t,e){return IM(t,e)}query(t,e,n){return PM(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,s,o=[],a){if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,s,o);const d={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(d.easing=s);const u={},h=o.filter(p=>p instanceof m2);zN(n,r)&&h.forEach(p=>{let m=p.currentSnapshot;Object.keys(m).forEach(g=>u[g]=m[g])});const f=s2(t,e=GN(t,e=e.map(p=>Ba(p,!1)),u));return new m2(t,e,d,f)}}function g2(){return TN()&&Element.prototype.animate||{}}let lse=(()=>{class i extends CN{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:is.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?DN(e):e;return _2(this._renderer,null,n,"register",[r]),new cse(n,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(G(ih),G(nt))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();class cse extends class Yie{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new dse(this._id,t,e||{},this._renderer)}}class dse{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return _2(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function _2(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const y2="@.disabled";let use=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(e,n){const s=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let d=this._rendererCache.get(s);return d||(d=new v2("",s,this.engine),this._rendererCache.set(s,d)),d}const o=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(o,a,e,d.name,d)};return n.data.animation.forEach(l),new hse(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(G(ih),G(oy),G(Xe))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();class v2{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==y2?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class hse extends v2{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==y2?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function fse(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=e.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function pse(i){const t=i.indexOf(".");return[i.substring(0,t),i.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(t,e,n)}}let mse=(()=>{class i extends oy{constructor(e,n,r){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(G(nt),G(OM),G($M))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const jn=new X("AnimationModuleType"),b2=[{provide:CN,useClass:lse},{provide:$M,useFactory:function _se(){return new xre}},{provide:oy,useClass:mse},{provide:ih,useFactory:function yse(i,t,e){return new use(i,t,e)},deps:[Em,oy,Xe]}],x2=[{provide:OM,useFactory:function gse(){return function ase(){return"function"==typeof g2()}()?new ose:new f2}},{provide:jn,useValue:"BrowserAnimations"},...b2],vse=[{provide:OM,useClass:FN},{provide:jn,useValue:"NoopAnimations"},...b2];let bse=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?vse:x2}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:x2,imports:[ak]}),i})();function xse(i,t){if(1&i&&Ne(0,"mat-pseudo-checkbox",4),2&i){const e=Je();te("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function wse(i,t){if(1&i&&(O(0,"span",5),et(1),F()),2&i){const e=Je();J(1),Br("(",e.group.label,")")}}const Mse=["*"],Sse=new X("mat-sanity-checks",{providedIn:"root",factory:function Cse(){return!0}});let He=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!yM()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return i.\u0275fac=function(e){return new(e||i)(G(MN),G(Sse,8),G(nt))},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[Wl],Wl]}),i})();function Yo(i){return class extends i{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=ve(t)}}}function ro(i,t){return class extends i{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const n=e||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function Qr(i){return class extends i{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=ve(t)}}}function Va(i,t=0){return class extends i{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Ii(e):this.defaultTabIndex}}}function iC(i){return class extends i{constructor(...t){super(...t),this.stateChanges=new ge,this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}const Dse=new X("MAT_DATE_LOCALE",{providedIn:"root",factory:function Ese(){return Mc(Co)}});class Zn{constructor(){this._localeChanges=new ge,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let n=this.isValid(t),r=this.isValid(e);return n&&r?!this.compareDate(t,e):n==r}return t==e}clampDate(t,e,n){return e&&this.compareDate(t,e)<0?e:n&&this.compareDate(t,n)>0?n:t}}const so=new X("mat-date-formats"),Ase=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function rC(i,t){const e=Array(i);for(let n=0;n<i;n++)e[n]=t(n);return e}let Tse=(()=>{class i extends Zn{constructor(e,n){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const n=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return rC(12,r=>this._format(n,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return rC(31,n=>this._format(e,new Date(2017,0,n+1)))}getDayOfWeekNames(e){const n=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return rC(7,r=>this._format(n,new Date(2017,0,r+1)))}getYearName(e){const n=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(n,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,n,r){let s=this._createDateWithOverflow(e,n,r);return s.getMonth(),s}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,n){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},n),{timeZone:"utc"}));return this._format(r,e)}addCalendarYears(e,n){return this.addCalendarMonths(e,12*n)}addCalendarMonths(e,n){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+n,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+n)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,n){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+n)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(Ase.test(e)){let n=new Date(e);if(this.isValid(n))return n}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,n,r){const s=new Date;return s.setFullYear(e,n,r),s.setHours(0,0,0,0),s}_2digit(e){return("00"+e).slice(-2)}_format(e,n){const r=new Date;return r.setUTCFullYear(n.getFullYear(),n.getMonth(),n.getDate()),r.setUTCHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e.format(r)}}return i.\u0275fac=function(e){return new(e||i)(G(Dse,8),G(Si))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const Rse={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let kse=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[{provide:Zn,useClass:Tse}]}),i})(),M2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[{provide:so,useValue:Rse}],imports:[[kse]]}),i})(),Ha=(()=>{class i{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),sC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),i})();function Ff(i,t,e){i.nativeElement.classList.toggle(t,e)}let cy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[He],He]}),i})();class Ise{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const S2={enterDuration:225,exitDuration:150},oC=As({passive:!0}),D2=["mousedown","touchstart"],E2=["mouseup","mouseleave","touchend","touchcancel"];class A2{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ci(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},S2),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=n.radius||function Fse(i,t,e){const n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}(t,e,r),a=t-r.left,l=e-r.top,c=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=l-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=n.color&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d),function Ose(i){window.getComputedStyle(i).getPropertyValue("opacity")}(d),d.style.transform="scale(1)";const u=new Ise(this,d,n);return u.state=0,this._activeRipples.add(u),n.persistent||(this._mostRecentTransientRipple=u),this._runTimeoutOutsideZone(()=>{const h=u===this._mostRecentTransientRipple;u.state=1,!n.persistent&&(!h||!this._isPointerDown)&&u.fadeOut()},c),u}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},S2),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Ci(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(D2))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(E2),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=xM(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!wM(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,oC)})})}_removeTriggerEvents(){this._triggerElement&&(D2.forEach(t=>{this._triggerElement.removeEventListener(t,this,oC)}),this._pointerUpEventsRegistered&&E2.forEach(t=>{this._triggerElement.removeEventListener(t,this,oC)}))}}const T2=new X("mat-ripple-global-options");let Zr=(()=>{class i{constructor(e,n,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new A2(this,n,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,n,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Xe),y(Si),y(T2,8),y(jn,8))},i.\u0275dir=H({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,n){2&e&&Ke("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),Jr=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[He],He]}),i})(),R2=(()=>{class i{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return i.\u0275fac=function(e){return new(e||i)(y(jn,8))},i.\u0275cmp=We({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,n){2&e&&Ke("mat-pseudo-checkbox-indeterminate","indeterminate"===n.state)("mat-pseudo-checkbox-checked","checked"===n.state)("mat-pseudo-checkbox-disabled",n.disabled)("_mat-animation-noopable","NoopAnimations"===n._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,n){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),i})(),aC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[He]]}),i})();const k2=new X("MAT_OPTION_PARENT_COMPONENT"),I2=new X("MatOptgroup");let Lse=0;class P2{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let Nse=(()=>{class i{constructor(e,n,r,s){this._element=e,this._changeDetectorRef=n,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Lse++,this.onSelectionChange=new ue,this._stateChanges=new ge}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=ve(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,n){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Di(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new P2(this,e))}}return i.\u0275fac=function(e){jc()},i.\u0275dir=H({type:i,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),i})(),O2=(()=>{class i extends Nse{constructor(e,n,r,s){super(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Et),y(k2,8),y(I2,8))},i.\u0275cmp=We({type:i,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,n){1&e&&Re("click",function(){return n._selectViaInteraction()})("keydown",function(s){return n._handleKeydown(s)}),2&e&&(hs("id",n.id),Ue("tabindex",n._getTabIndex())("aria-selected",n._getAriaSelected())("aria-disabled",n.disabled.toString()),Ke("mat-selected",n.selected)("mat-option-multiple",n.multiple)("mat-active",n.active)("mat-option-disabled",n.disabled))},exportAs:["matOption"],features:[q],ngContentSelectors:Mse,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,n){1&e&&(on(),Ye(0,xse,1,2,"mat-pseudo-checkbox",0),O(1,"span",1),rt(2),F(),Ye(3,wse,2,1,"span",2),Ne(4,"div",3)),2&e&&(te("ngIf",n.multiple),J(3),te("ngIf",n.group&&n.group._inert),J(1),te("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disabled||n.disableRipple))},directives:[R2,Ur,Zr],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),i})();function lC(i,t,e){if(e.length){let n=t.toArray(),r=e.toArray(),s=0;for(let o=0;o<i+1;o++)n[o].group&&n[o].group===r[s]&&s++;return s}return 0}let dy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[Jr,ri,He,aC]]}),i})();const Bse=["addListener","removeListener"],Vse=["addEventListener","removeEventListener"],Hse=["on","off"];function es(i,t,e,n){if(Gt(e)&&(n=e,e=void 0),n)return es(i,t,e).pipe(Vx(n));const[r,s]=function Gse(i){return Gt(i.addEventListener)&&Gt(i.removeEventListener)}(i)?Vse.map(o=>a=>i[o](t,a,e)):function Use(i){return Gt(i.addListener)&&Gt(i.removeListener)}(i)?Bse.map(L2(i,t)):function zse(i){return Gt(i.on)&&Gt(i.off)}(i)?Hse.map(L2(i,t)):[];if(!r&&Ky(i))return Jn(o=>es(o,t,e))(cr(i));if(!r)throw new TypeError("Invalid event target");return new Xt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function L2(i,t){return e=>n=>i[e](t,n)}const jse=["connectionContainer"],Wse=["inputContainer"],$se=["label"];function qse(i,t){1&i&&(Wc(0),O(1,"div",14),Ne(2,"div",15),Ne(3,"div",16),Ne(4,"div",17),F(),O(5,"div",18),Ne(6,"div",15),Ne(7,"div",16),Ne(8,"div",17),F(),$c())}function Yse(i,t){if(1&i){const e=br();O(0,"div",19),Re("cdkObserveContent",function(){return qn(e),Je().updateOutlineGap()}),rt(1,1),F()}2&i&&te("cdkObserveContentDisabled","outline"!=Je().appearance)}function Kse(i,t){if(1&i&&(Wc(0),rt(1,2),O(2,"span"),et(3),F(),$c()),2&i){const e=Je(2);J(3),Ai(e._control.placeholder)}}function Xse(i,t){1&i&&rt(0,3,["*ngSwitchCase","true"])}function Qse(i,t){1&i&&(O(0,"span",23),et(1," *"),F())}function Zse(i,t){if(1&i){const e=br();O(0,"label",20,21),Re("cdkObserveContent",function(){return qn(e),Je().updateOutlineGap()}),Ye(2,Kse,4,1,"ng-container",12),Ye(3,Xse,1,0,"ng-content",12),Ye(4,Qse,2,0,"span",22),F()}if(2&i){const e=Je();Ke("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),te("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),Ue("for",e._control.id)("aria-owns",e._control.id),J(2),te("ngSwitchCase",!1),J(1),te("ngSwitchCase",!0),J(1),te("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function Jse(i,t){1&i&&(O(0,"div",24),rt(1,4),F())}function eoe(i,t){if(1&i&&(O(0,"div",25),Ne(1,"span",26),F()),2&i){const e=Je();J(1),Ke("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function toe(i,t){1&i&&(O(0,"div"),rt(1,5),F()),2&i&&te("@transitionMessages",Je()._subscriptAnimationState)}function noe(i,t){if(1&i&&(O(0,"div",30),et(1),F()),2&i){const e=Je(2);te("id",e._hintLabelId),J(1),Ai(e.hintLabel)}}function ioe(i,t){if(1&i&&(O(0,"div",27),Ye(1,noe,2,2,"div",28),rt(2,6),Ne(3,"div",29),rt(4,7),F()),2&i){const e=Je();te("@transitionMessages",e._subscriptAnimationState),J(1),te("ngIf",e.hintLabel)}}const roe=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],soe=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let ooe=0;const N2=new X("MatError");let aoe=(()=>{class i{constructor(e,n){this.id="mat-error-"+ooe++,e||n.nativeElement.setAttribute("aria-live","polite")}}return i.\u0275fac=function(e){return new(e||i)(ti("aria-live"),y(de))},i.\u0275dir=H({type:i,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(e,n){2&e&&Ue("id",n.id)},inputs:{id:"id"},features:[Me([{provide:N2,useExisting:i}])]}),i})();const loe={transitionMessages:Gn("transitionMessages",[Pt("enter",Be({opacity:1,transform:"translateY(0%)"})),zt("void => enter",[Be({opacity:0,transform:"translateY(-5px)"}),Yt("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Lf=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i}),i})(),coe=0;const B2=new X("MatHint");let doe=(()=>{class i{constructor(){this.align="start",this.id="mat-hint-"+coe++}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(e,n){2&e&&(Ue("id",n.id)("align",null),Ke("mat-form-field-hint-end","end"===n.align))},inputs:{align:"align",id:"id"},features:[Me([{provide:B2,useExisting:i}])]}),i})(),uy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["mat-label"]]}),i})(),uoe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["mat-placeholder"]]}),i})();const hoe=new X("MatPrefix"),V2=new X("MatSuffix");let foe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["","matSuffix",""]],features:[Me([{provide:V2,useExisting:i}])]}),i})(),H2=0;const moe=ro(class{constructor(i){this._elementRef=i}},"primary"),goe=new X("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Nf=new X("MatFormField");let z2=(()=>{class i extends moe{constructor(e,n,r,s,o,a,l){super(e),this._changeDetectorRef=n,this._dir=r,this._defaults=s,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ge,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+H2++,this._labelId="mat-form-field-label-"+H2++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const n=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&n!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=ve(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(yi(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(it(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(it(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),gn(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(yi(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(yi(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(it(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const n=this._control?this._control.ngControl:null;return n&&n[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,es(this._label.nativeElement,"transitionend").pipe(fn(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const n=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;n?e.push(n.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,n=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const d=n.querySelectorAll(`${r}, ${s}`);for(let u=0;u<d.length;u++)d[u].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const l=n.querySelectorAll(r),c=n.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const d=n.getBoundingClientRect();if(0===d.width&&0===d.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const u=this._getStartEnd(d),h=e.children,f=this._getStartEnd(h[0].getBoundingClientRect());let p=0;for(let m=0;m<h.length;m++)p+=h[m].offsetWidth;o=Math.abs(f-u)-5,a=p>0?.75*p+10:0}for(let d=0;d<l.length;d++)l[d].style.width=`${o}px`;for(let d=0;d<c.length;d++)c[d].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const n=e.getRootNode();return n&&n!==e}return document.documentElement.contains(e)}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Et),y(Un,8),y(goe,8),y(Si),y(Xe),y(jn,8))},i.\u0275cmp=We({type:i,selectors:[["mat-form-field"]],contentQueries:function(e,n,r){if(1&e&&(ht(r,Lf,5),ht(r,Lf,7),ht(r,uy,5),ht(r,uy,7),ht(r,uoe,5),ht(r,N2,5),ht(r,B2,5),ht(r,hoe,5),ht(r,V2,5)),2&e){let s;he(s=fe())&&(n._controlNonStatic=s.first),he(s=fe())&&(n._controlStatic=s.first),he(s=fe())&&(n._labelChildNonStatic=s.first),he(s=fe())&&(n._labelChildStatic=s.first),he(s=fe())&&(n._placeholderChild=s.first),he(s=fe())&&(n._errorChildren=s),he(s=fe())&&(n._hintChildren=s),he(s=fe())&&(n._prefixChildren=s),he(s=fe())&&(n._suffixChildren=s)}},viewQuery:function(e,n){if(1&e&&(ut(jse,7),ut(Wse,5),ut($se,5)),2&e){let r;he(r=fe())&&(n._connectionContainerRef=r.first),he(r=fe())&&(n._inputContainerRef=r.first),he(r=fe())&&(n._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,n){2&e&&Ke("mat-form-field-appearance-standard","standard"==n.appearance)("mat-form-field-appearance-fill","fill"==n.appearance)("mat-form-field-appearance-outline","outline"==n.appearance)("mat-form-field-appearance-legacy","legacy"==n.appearance)("mat-form-field-invalid",n._control.errorState)("mat-form-field-can-float",n._canLabelFloat())("mat-form-field-should-float",n._shouldLabelFloat())("mat-form-field-has-label",n._hasFloatingLabel())("mat-form-field-hide-placeholder",n._hideControlPlaceholder())("mat-form-field-disabled",n._control.disabled)("mat-form-field-autofilled",n._control.autofilled)("mat-focused",n._control.focused)("ng-untouched",n._shouldForward("untouched"))("ng-touched",n._shouldForward("touched"))("ng-pristine",n._shouldForward("pristine"))("ng-dirty",n._shouldForward("dirty"))("ng-valid",n._shouldForward("valid"))("ng-invalid",n._shouldForward("invalid"))("ng-pending",n._shouldForward("pending"))("_mat-animation-noopable",!n._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[Me([{provide:Nf,useExisting:i}]),q],ngContentSelectors:soe,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,n){1&e&&(on(roe),O(0,"div",0),O(1,"div",1,2),Re("click",function(s){return n._control.onContainerClick&&n._control.onContainerClick(s)}),Ye(3,qse,9,0,"ng-container",3),Ye(4,Yse,2,1,"div",4),O(5,"div",5,6),rt(7),O(8,"span",7),Ye(9,Zse,5,16,"label",8),F(),F(),Ye(10,Jse,2,0,"div",9),F(),Ye(11,eoe,2,4,"div",10),O(12,"div",11),Ye(13,toe,2,1,"div",12),Ye(14,ioe,5,2,"div",13),F(),F()),2&e&&(J(3),te("ngIf","outline"==n.appearance),J(1),te("ngIf",n._prefixChildren.length),J(5),te("ngIf",n._hasFloatingLabel()),J(1),te("ngIf",n._suffixChildren.length),J(1),te("ngIf","outline"!=n.appearance),J(1),te("ngSwitch",n._getDisplayedMessages()),J(1),te("ngSwitchCase","error"),J(1),te("ngSwitchCase","hint"))},directives:[Ur,F_,ll,hh],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[loe.transitionMessages]},changeDetection:0}),i})(),Bf=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[ri,He,Ef],He]}),i})();const Vf={schedule(i){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:n}=Vf;n&&(t=n.requestAnimationFrame,e=n.cancelAnimationFrame);const r=t(s=>{e=void 0,i(s)});return new yt(()=>null==e?void 0:e(r))},requestAnimationFrame(...i){const{delegate:t}=Vf;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:t}=Vf;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...i)},delegate:void 0},G2=new class yoe extends pM{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let n,r=-1;t=t||e.shift();const s=e.length;do{if(n=t.execute(t.state,t.delay))break}while(++r<s&&(t=e.shift()));if(this._active=!1,n){for(;++r<s&&(t=e.shift());)t.unsubscribe();throw n}}}(class _oe extends fM{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=Vf.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,n=0){if(null!=n&&n>0||null==n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(Vf.cancelAnimationFrame(e),t._scheduled=void 0)}});let cC,voe=1;const hy={};function j2(i){return i in hy&&(delete hy[i],!0)}const boe={setImmediate(i){const t=voe++;return hy[t]=!0,cC||(cC=Promise.resolve()),cC.then(()=>j2(t)&&i()),t},clearImmediate(i){j2(i)}},{setImmediate:xoe,clearImmediate:woe}=boe,fy={setImmediate(...i){const{delegate:t}=fy;return((null==t?void 0:t.setImmediate)||xoe)(...i)},clearImmediate(i){const{delegate:t}=fy;return((null==t?void 0:t.clearImmediate)||woe)(i)},delegate:void 0};new class Coe extends pM{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let n,r=-1;t=t||e.shift();const s=e.length;do{if(n=t.execute(t.state,t.delay))break}while(++r<s&&(t=e.shift()));if(this._active=!1,n){for(;++r<s&&(t=e.shift());)t.unsubscribe();throw n}}}(class Moe extends fM{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=fy.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,n=0){if(null!=n&&n>0||null==n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(fy.clearImmediate(e),t._scheduled=void 0)}});function py(i=0,t,e=aN){let n=-1;return null!=t&&(HS(t)?e=t:n=t),new Xt(r=>{let s=function Eoe(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}function W2(i,t=aN){return function Doe(i){return Rn((t,e)=>{let n=!1,r=null,s=null,o=!1;const a=()=>{if(null==s||s.unsubscribe(),s=null,n){n=!1;const c=r;r=null,e.next(c)}o&&e.complete()},l=()=>{s=null,o&&e.complete()};t.subscribe(new wn(e,c=>{n=!0,r=c,s||cr(i(c)).subscribe(s=new wn(e,a,l))},()=>{o=!0,(!n||!s||s.closed)&&e.complete()}))})}(()=>py(i,t))}let dC=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new ge,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Xt(n=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(W2(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Qe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(an(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=Ci(n),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>es(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(e){return new(e||i)(G(Xe),G(Si),G(nt,8))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),uC=(()=>{class i{constructor(e,n,r,s){this.elementRef=e,this.scrollDispatcher=n,this.ngZone=r,this.dir=s,this._destroyed=new ge,this._elementScrolled=new Xt(o=>this.ngZone.runOutsideAngular(()=>es(this.elementRef.nativeElement,"scroll").pipe(it(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const n=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),r&&0!=Tf()?(null!=e.left&&(e.right=n.scrollWidth-n.clientWidth-e.left),2==Tf()?e.left=e.right:1==Tf()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const n=this.elementRef.nativeElement;uN()?n.scrollTo(e):(null!=e.top&&(n.scrollTop=e.top),null!=e.left&&(n.scrollLeft=e.left))}measureScrollOffset(e){const n="left",r="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==e?e=o?r:n:"end"==e&&(e=o?n:r),o&&2==Tf()?e==n?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==Tf()?e==n?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==n?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(dC),y(Xe),y(Un,8))},i.\u0275dir=H({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),i})(),Rs=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new ge,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(W2(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(e){return new(e||i)(G(Si),G(Xe),G(nt,8))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),oo=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({}),i})(),hC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[Wl,oo],Wl,oo]}),i})();class fC{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class pC extends fC{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class Hf extends fC{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Roe extends fC{constructor(t){super(),this.element=t instanceof de?t.nativeElement:t}}class $2{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof pC?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Hf?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Roe?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class koe extends $2{constructor(t,e,n,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){const n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||kn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);-1!==r&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let au=(()=>{class i extends $2{constructor(e,n,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new ue,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=n.createComponent(s,n.length,e.injector||n.injector);return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return i.\u0275fac=function(e){return new(e||i)(y(wo),y(Cn),y(nt))},i.\u0275dir=H({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[q]}),i})(),Jl=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({}),i})();const q2=uN();class Poe{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=ci(-this._previousScrollPosition.left),t.style.top=ci(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,n=t.style,r=this._document.body.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),q2&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),q2&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class Ooe{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Y2{enable(){}disable(){}attach(){}}function mC(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function K2(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class Foe{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();mC(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Loe=(()=>{class i{constructor(e,n,r,s){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new Y2,this.close=o=>new Ooe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Poe(this._viewportRuler,this._document),this.reposition=o=>new Foe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return i.\u0275fac=function(e){return new(e||i)(G(dC),G(Rs),G(Xe),G(nt))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class my{constructor(t){if(this.scrollStrategy=new Y2,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class Noe{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class Boe{constructor(t,e,n,r,s,o,a,l,c){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new ge,this._attachments=new ge,this._detachments=new ge,this._locationChanges=yt.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new ge,this._outsidePointerEvents=new ge,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(fn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=ci(this._config.width),t.height=ci(this._config.height),t.minWidth=ci(this._config.minWidth),t.minHeight=ci(this._config.minHeight),t.maxWidth=ci(this._config.maxWidth),t.maxHeight=ci(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,n){const r=sN(e||[]).filter(s=>!!s);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(it(gn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let X2=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||yM()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(e),yM()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(e){return new(e||i)(G(nt),G(Si))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Q2="cdk-overlay-connected-position-bounding-box",Voe=/([A-Za-z%]+)$/;class Z2{constructor(t,e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ge,this._resizeSubscription=yt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(Q2),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,e,a),d=this._getOverlayFit(c,e,n,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(d,c,n)?s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(const c of s){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ec(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Q2),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r,s;if("center"==n.originX)r=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==n.originX?o:a}return e.left<0&&(r-=e.left),s="center"==n.originY?t.top+t.height/2:"top"==n.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,n){let r,s;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,n,r){const s=eB(e);let{x:o,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-n.height,p=this._subtractOverflows(s.width,0-o,o+s.width-n.width),m=this._subtractOverflows(s.height,h,f),g=p*m;return{visibleArea:g,isCompletelyWithinViewport:s.width*s.height===g,fitsInViewportVertically:m===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,s=n.right-e.x,o=J2(this._overlayRef.getConfig().minHeight),a=J2(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportHorizontally||null!=a&&a<=s;return(t.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=eB(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-n.top-t.y,0),c=Math.max(s.left-n.left-t.x,0);let d=0,u=0;return d=r.width<=s.width?c||-o:t.x<this._viewportMargin?s.left-n.left-t.x:0,u=r.height<=s.height?l||-a:t.y<this._viewportMargin?s.top-n.top-t.y:0,this._previousPushAmount={x:d,y:u},{x:t.x+d,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new Noe(t,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let s,o,a,d,u,h;if("top"===e.overlayY)o=t.y,s=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=n.height-t.y+2*this._viewportMargin,s=n.height-a+this._viewportMargin;else{const f=Math.min(n.bottom-t.y+n.top,t.y),p=this._lastBoundingBoxSize.height;s=2*f,o=t.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-p/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)h=n.width-t.x+this._viewportMargin,d=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)u=t.x,d=n.right-t.x;else{const f=Math.min(n.right-t.x+n.left,t.x),p=this._lastBoundingBoxSize.width;d=2*f,u=t.x-f,d>p&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-p/2)}return{top:o,left:u,bottom:a,right:h,width:d,height:s}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ci(n.height),r.top=ci(n.top),r.bottom=ci(n.bottom),r.width=ci(n.width),r.left=ci(n.left),r.right=ci(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ci(s)),o&&(r.maxWidth=ci(o))}this._lastBoundingBoxSize=n,ec(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ec(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ec(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();ec(n,this._getExactOverlayY(e,t,d)),ec(n,this._getExactOverlayX(e,t,d))}else n.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=ci(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=ci(o.maxWidth):s&&(n.maxWidth="")),ec(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ci(s.y),r}_getExactOverlayX(t,e,n){let o,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ci(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:K2(t,n),isOriginOutsideView:mC(t,n),isOverlayClipped:K2(e,n),isOverlayOutsideView:mC(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&sN(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof de)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function ec(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function J2(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(Voe);return e&&"px"!==e?null:parseFloat(t)}return i||null}function eB(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const tB="cdk-global-overlay-wrapper";class Hoe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(tB),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);t.position=this._cssPosition,t.marginLeft=l?"0":this._leftOffset,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,l?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(tB),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Uoe=(()=>{class i{constructor(e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new Hoe}flexibleConnectedTo(e){return new Z2(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(e){return new(e||i)(G(Rs),G(nt),G(Si),G(X2))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),nB=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(e){return new(e||i)(G(nt))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),zoe=(()=>{class i extends nB{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(e){return new(e||i)(G(nt),G(Xe,8))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Goe=(()=>{class i extends nB{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Yr(s)},this._clickListener=s=>{const o=Yr(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const d=l[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(o)||d.overlayElement.contains(a))break;const u=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>u.next(s)):u.next(s)}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(e){return new(e||i)(G(nt),G(Si),G(Xe,8))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),joe=0,ao=(()=>{class i{constructor(e,n,r,s,o,a,l,c,d,u,h){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=u,this._outsideClickDispatcher=h}create(e){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new my(e);return o.direction=o.direction||this._directionality.value,new Boe(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+joe++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ed)),new koe(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(e){return new(e||i)(G(Loe),G(X2),G(wo),G(Uoe),G(zoe),G(kn),G(Xe),G(nt),G(Un),G(um),G(Goe))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const Woe=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],iB=new X("cdk-connected-overlay-scroll-strategy");let rB=(()=>{class i{constructor(e){this.elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(y(de))},i.\u0275dir=H({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),i})(),sB=(()=>{class i{constructor(e,n,r,s,o){this._overlay=e,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=yt.EMPTY,this._attachSubscription=yt.EMPTY,this._detachSubscription=yt.EMPTY,this._positionSubscription=yt.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new ue,this.positionChange=new ue,this.attach=new ue,this.detach=new ue,this.overlayKeydown=new ue,this.overlayOutsideClick=new ue,this._templatePortal=new Hf(n,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=ve(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=ve(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=ve(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=ve(e)}get push(){return this._push}set push(e){this._push=ve(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Woe);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),27===n.keyCode&&!this.disableClose&&!Di(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{this.overlayOutsideClick.next(n)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new my({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){const n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof rB?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function Ioe(i,t=!1){return Rn((e,n)=>{let r=0;e.subscribe(new wn(n,s=>{const o=i(s,r++);(o||t)&&n.next(s),!o&&n.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(y(ao),y(Vn),y(Cn),y(iB),y(Un,8))},i.\u0275dir=H({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[jt]}),i})();const qoe={provide:iB,deps:[ao],useFactory:function $oe(i){return()=>i.scrollStrategies.reposition()}};let tc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[ao,qoe],imports:[[Wl,Jl,hC],hC]}),i})();class Uf{constructor(t=!1,e,n=!0){this._multiple=t,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ge,e&&e.length&&(t?e.forEach(r=>this._markSelected(r)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}let gC=(()=>{class i{constructor(){this._listeners=[]}notify(e,n){for(let r of this._listeners)r(e,n)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(n=>e!==n)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Yoe=["trigger"],Koe=["panel"];function Xoe(i,t){if(1&i&&(O(0,"span",8),et(1),F()),2&i){const e=Je();J(1),Ai(e.placeholder)}}function Qoe(i,t){if(1&i&&(O(0,"span",12),et(1),F()),2&i){const e=Je(2);J(1),Ai(e.triggerValue)}}function Zoe(i,t){1&i&&rt(0,0,["*ngSwitchCase","true"])}function Joe(i,t){1&i&&(O(0,"span",9),Ye(1,Qoe,2,1,"span",10),Ye(2,Zoe,1,0,"ng-content",11),F()),2&i&&(te("ngSwitch",!!Je().customTrigger),J(2),te("ngSwitchCase",!0))}function eae(i,t){if(1&i){const e=br();O(0,"div",13),O(1,"div",14,15),Re("@transformPanel.done",function(r){return qn(e),Je()._panelDoneAnimatingStream.next(r.toState)})("keydown",function(r){return qn(e),Je()._handleKeydown(r)}),rt(3,1),F(),F()}if(2&i){const e=Je();te("@transformPanelWrap",void 0),J(1),kT("mat-select-panel ",e._getPanelTheme(),""),Hi("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),te("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),Ue("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const tae=[[["mat-select-trigger"]],"*"],nae=["mat-select-trigger","*"],lB={transformPanelWrap:Gn("transformPanelWrap",[zt("* => void",W_("@transformPanel",[j_()],{optional:!0}))]),transformPanel:Gn("transformPanel",[Pt("void",Be({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Pt("showing",Be({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Pt("showing-multiple",Be({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),zt("void => *",Yt("120ms cubic-bezier(0, 0, 0.2, 1)")),zt("* => void",Yt("100ms 25ms linear",Be({opacity:0})))])};let cB=0;const uB=new X("mat-select-scroll-strategy"),oae=new X("MAT_SELECT_CONFIG"),aae={provide:uB,deps:[ao],useFactory:function sae(i){return()=>i.scrollStrategies.reposition()}};class lae{constructor(t,e){this.source=t,this.value=e}}const cae=Qr(Va(Yo(iC(class{constructor(i,t,e,n,r){this._elementRef=i,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r}})))),dae=new X("MatSelectTrigger");let uae=(()=>{class i extends cae{constructor(e,n,r,s,o,a,l,c,d,u,h,f,p,m){var g,_,v;super(o,s,l,c,u),this._viewportRuler=e,this._changeDetectorRef=n,this._ngZone=r,this._dir=a,this._parentFormField=d,this._liveAnnouncer=p,this._defaultOptions=m,this._panelOpen=!1,this._compareWith=(b,x)=>b===x,this._uid="mat-select-"+cB++,this._triggerAriaLabelledBy=null,this._destroy=new ge,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+cB++,this._panelDoneAnimatingStream=new ge,this._overlayPanelClass=(null===(g=this._defaultOptions)||void 0===g?void 0:g.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(v=null===(_=this._defaultOptions)||void 0===_?void 0:_.disableOptionCentering)&&void 0!==v&&v,this.ariaLabel="",this.optionSelectionChanges=km(()=>{const b=this.options;return b?b.changes.pipe(yi(b),zr(()=>gn(...b.map(x=>x.onSelectionChange)))):this._ngZone.onStable.pipe(fn(1),zr(()=>this.optionSelectionChanges))}),this.openedChange=new ue,this._openedStream=this.openedChange.pipe(an(b=>b),Dt(()=>{})),this._closedStream=this.openedChange.pipe(an(b=>!b),Dt(()=>{})),this.selectionChange=new ue,this.valueChange=new ue,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==m?void 0:m.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=m.typeaheadDebounceInterval),this._scrollStrategyFactory=f,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(h)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){var e,n,r,s;return null!==(s=null!==(e=this._required)&&void 0!==e?e:null===(r=null===(n=this.ngControl)||void 0===n?void 0:n.control)||void 0===r?void 0:r.hasValidator(Ro.required))&&void 0!==s&&s}set required(e){this._required=ve(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=ve(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=ve(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Ii(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new Uf(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(If(),it(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(it(this._destroy)).subscribe(e=>{e.added.forEach(n=>n.select()),e.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(yi(null),it(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),n=this.ngControl;if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var e,n;return this.multiple?(null===(e=this._selectionModel)||void 0===e?void 0:e.selected)||[]:null===(n=this._selectionModel)||void 0===n?void 0:n.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const n=e.keyCode,r=40===n||38===n||37===n||39===n,s=13===n||32===n,o=this._keyManager;if(!o.isTyping()&&s&&!Di(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(e);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const n=this._keyManager,r=e.keyCode,s=40===r||38===r,o=n.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(o||13!==r&&32!==r||!n.activeItem||Di(e))if(!o&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=n.activeItemIndex;n.onKeydown(e),this._multiple&&s&&e.shiftKey&&n.activeItem&&n.activeItemIndex!==a&&n.activeItem._selectViaInteraction()}else e.preventDefault(),n.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(fn(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(e);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,e)}catch(s){return!1}});return n&&this._selectionModel.select(n),n}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new Eie(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(it(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(it(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=gn(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(it(e)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),gn(...this.options.map(n=>n._stateChanges)).pipe(it(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,n){const r=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),n&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),n&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,e):e.indexOf(n)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let n=null;n=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null===(e=this.options)||void 0===e?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){var e;if(this.ariaLabel)return null;const n=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();return this.ariaLabelledby?(n?n+" ":"")+this.ariaLabelledby:n}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var e;if(this.ariaLabel)return null;const n=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();let r=(n?n+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return i.\u0275fac=function(e){return new(e||i)(y(Rs),y(Et),y(Xe),y(Ha),y(de),y(Un,8),y($s,8),y(qs,8),y(Nf,8),y(_s,10),ti("tabindex"),y(uB),y($ie),y(oae,8))},i.\u0275dir=H({type:i,viewQuery:function(e,n){if(1&e&&(ut(Yoe,5),ut(Koe,5),ut(sB,5)),2&e){let r;he(r=fe())&&(n.trigger=r.first),he(r=fe())&&(n.panel=r.first),he(r=fe())&&(n._overlayDir=r.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[q,jt]}),i})(),hae=(()=>{class i extends uae{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,n,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*e-n+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(it(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(fn(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const n=lC(e,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===e&&1===n?0:function F2(i,t,e,n){return i<e?i:i+t>e+n?Math.max(0,i-n+t):e}((e+n)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new lae(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let o;if(this.multiple)o=40;else if(this.disableOptionCentering)o=16;else{let c=this._selectionModel.selected[0]||this.options.first;o=c&&c.group?32:16}r||(o*=-1);const a=0-(e.left+o-(r?s:0)),l=e.right+o-n.width+(r?0:s);a>0?o+=a+8:l>0&&(o-=l+8),this._overlayDir.offsetX=Math.round(o),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,n,r){const s=this._getItemHeight(),o=(s-this._triggerRect.height)/2,a=Math.floor(256/s);let l;return this.disableOptionCentering?0:(l=0===this._scrollTop?e*s:this._scrollTop===r?(e-(this._getItemCount()-a))*s+(s-(this._getItemCount()*s-256)%s):n-s/2,Math.round(-1*l-o))}_checkOverlayWithinViewport(e){const n=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,o=r.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),c=Math.min(this._getItemCount()*n,256)-a-this._triggerRect.height;c>o?this._adjustPanelUp(c,o):a>s?this._adjustPanelDown(a,s,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,n){const r=Math.round(e-n);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,n,r){const s=Math.round(e-n);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),n=this._getItemCount(),r=Math.min(n*e,256),o=n*e-r;let a;a=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),a+=lC(a,this.options,this.optionGroups);const l=r/2;this._scrollTop=this._calculateOverlayScroll(a,l,o),this._offsetY=this._calculateOverlayOffsetY(a,l,o),this._checkOverlayWithinViewport(o)}_getOriginBasedOnOption(){const e=this._getItemHeight(),n=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-n+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=xe(i)))(n||i)}}(),i.\u0275cmp=We({type:i,selectors:[["mat-select"]],contentQueries:function(e,n,r){if(1&e&&(ht(r,dae,5),ht(r,O2,5),ht(r,I2,5)),2&e){let s;he(s=fe())&&(n.customTrigger=s.first),he(s=fe())&&(n.options=s),he(s=fe())&&(n.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,n){1&e&&Re("keydown",function(s){return n._handleKeydown(s)})("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()}),2&e&&(Ue("id",n.id)("tabindex",n.tabIndex)("aria-controls",n.panelOpen?n.id+"-panel":null)("aria-expanded",n.panelOpen)("aria-label",n.ariaLabel||null)("aria-required",n.required.toString())("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-describedby",n._ariaDescribedby||null)("aria-activedescendant",n._getAriaActiveDescendant()),Ke("mat-select-disabled",n.disabled)("mat-select-invalid",n.errorState)("mat-select-required",n.required)("mat-select-empty",n.empty)("mat-select-multiple",n.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Me([{provide:Lf,useExisting:i},{provide:k2,useExisting:i}]),q],ngContentSelectors:nae,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,n){if(1&e&&(on(tae),O(0,"div",0,1),Re("click",function(){return n.toggle()}),O(3,"div",2),Ye(4,Xoe,2,1,"span",3),Ye(5,Joe,3,2,"span",4),F(),O(6,"div",5),Ne(7,"div",6),F(),F(),Ye(8,eae,4,14,"ng-template",7),Re("backdropClick",function(){return n.close()})("attach",function(){return n._onAttached()})("detach",function(){return n.close()})),2&e){const r=vr(1);Ue("aria-owns",n.panelOpen?n.id+"-panel":null),J(3),te("ngSwitch",n.empty),Ue("id",n._valueId),J(1),te("ngSwitchCase",!0),J(1),te("ngSwitchCase",!1),J(3),te("cdkConnectedOverlayPanelClass",n._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",n._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",n.panelOpen)("cdkConnectedOverlayPositions",n._positions)("cdkConnectedOverlayMinWidth",null==n._triggerRect?null:n._triggerRect.width)("cdkConnectedOverlayOffsetY",n._offsetY)}},directives:[rB,ll,hh,jR,sB,ol],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}\n'],encapsulation:2,data:{animation:[lB.transformPanelWrap,lB.transformPanel]},changeDetection:0}),i})(),_C=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[aae],imports:[[ri,tc,dy,He],oo,Bf,dy,He]}),i})();const fae=["mat-button",""],pae=["*"],gae=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],_ae=ro(Yo(Qr(class{constructor(i){this._elementRef=i}})));let cu=(()=>{class i extends _ae{constructor(e,n,r){super(e),this._focusMonitor=n,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of gae)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,n){e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(n=>this._getHostElement().hasAttribute(n))}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(no),y(jn,8))},i.\u0275cmp=We({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,n){if(1&e&&ut(Zr,5),2&e){let r;he(r=fe())&&(n.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,n){2&e&&(Ue("disabled",n.disabled||null),Ke("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[q],attrs:fae,ngContentSelectors:pae,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,n){1&e&&(on(),O(0,"span",0),rt(1),F(),Ne(2,"span",1),Ne(3,"span",2)),2&e&&(J(2),Ke("mat-button-ripple-round",n.isRoundButton||n.isIconButton),te("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},directives:[Zr],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),i})(),nc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[Jr,He],He]}),i})();const yae=["container"];function vae(i,t){1&i&&(O(0,"mat-option",14),et(1,"No Data"),F())}function bae(i,t){if(1&i&&(O(0,"mat-option",15),et(1),F()),2&i){const e=t.$implicit;te("value",e),J(1),Ai(e)}}function xae(i,t){1&i&&(O(0,"mat-option",14),et(1,"No Data"),F())}function wae(i,t){if(1&i&&(O(0,"mat-option",15),et(1),F()),2&i){const e=t.$implicit;te("value",e.id),J(1),Ai(e.name)}}let Mae=(()=>{class i{constructor(e,n){this.scene=e,this.route=n,this.machineId="",this.connectionUrls=["url1","url2"],this.machines=[],this.machineForm=new kh({connectionUrl:new cd("",[Ro.required]),machineID:new cd("",[Ro.required])}),this.route.params.subscribe(r=>{this.machineId=r.id})}ngOnInit(){}set container(e){const n=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem(this.machineId))));this.scene.initialize(e.nativeElement,n)}createDigitalTwin(){console.log(this.machineForm.value)}connectionUrlChanged(){this.machines=[{name:"test",id:1},{name:"test",id:2},{name:"test",id:2},{name:"test",id:4}]}}return i.\u0275fac=function(e){return new(e||i)(y(rM),y(fa))},i.\u0275cmp=We({type:i,selectors:[["app-create-digital-twin"]],viewQuery:function(e,n){if(1&e&&ut(yae,5),2&e){let r;he(r=fe())&&(n.container=r.first)}},decls:22,vars:6,consts:[["fxLayout","row","fxLayoutAlign","space-between start",1,"main-content"],["fxFlex","75",1,"viewer"],[1,"container"],["container",""],[1,"loading-screen"],["id","loader"],["fxFlex","24","fxLayout","column","fxLayoutAlign","space-between center",1,"right-content"],["fxLayout","column","fxLayoutAlign","start center",1,"form",3,"formGroup"],["appearance","outline"],["required","","formControlName","connectionUrl",3,"selectionChange"],["disabled","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","machineID"],["mat-flat-button","",1,"button",3,"disabled","click"],["disabled",""],[3,"value"]],template:function(e,n){1&e&&(O(0,"div",0),O(1,"div",1),Ne(2,"div",2,3),O(4,"div",4),Ne(5,"div",5),F(),F(),O(6,"div",6),O(7,"form",7),O(8,"mat-form-field",8),O(9,"mat-label"),et(10,"Connection url"),F(),O(11,"mat-select",9),Re("selectionChange",function(){return n.connectionUrlChanged()}),Ye(12,vae,2,0,"mat-option",10),Ye(13,bae,2,2,"mat-option",11),F(),F(),O(14,"mat-form-field",8),O(15,"mat-label"),et(16,"Select Machine"),F(),O(17,"mat-select",12),Ye(18,xae,2,0,"mat-option",10),Ye(19,wae,2,2,"mat-option",11),F(),F(),F(),O(20,"button",13),Re("click",function(){return n.createDigitalTwin()}),et(21,"Create Digital Twin"),F(),F(),F()),2&e&&(J(7),te("formGroup",n.machineForm),J(5),te("ngIf",n.connectionUrls.length<1),J(1),te("ngForOf",n.connectionUrls),J(5),te("ngIf",n.machines.length<1),J(1),te("ngForOf",n.machines),J(1),te("disabled",n.machineForm.invalid))},directives:[Cf,hM,Sf,rg,Eh,qs,z2,uy,hae,og,d0,sg,Ur,O2,al,cu],styles:[".example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.example-tree[_ngcontent-%COMP%]   .mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{padding-left:40px}.example-tree[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%] > .mat-tree-node[_ngcontent-%COMP%]{padding-left:40px}.viewer[_ngcontent-%COMP%], .main-content[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{height:100%}.right-content[_ngcontent-%COMP%]{background:#fff;height:100vh;padding:20px 0}.form[_ngcontent-%COMP%]{width:80%}.mat-form-field[_ngcontent-%COMP%]{width:100%}.button[_ngcontent-%COMP%]{width:50%;height:60px;font-size:20px;color:#fff;background:#16c3d5}"]}),i})();function Cae(i,t){1&i&&rt(0)}const hB=["*"];function Sae(i,t){}const Dae=function(i){return{animationDuration:i}},Eae=function(i,t){return{value:i,params:t}},Aae=["tabListContainer"],Tae=["tabList"],Rae=["tabListInner"],kae=["nextPaginator"],Iae=["previousPaginator"],Pae=["tabBodyWrapper"],Oae=["tabHeader"];function Fae(i,t){}function Lae(i,t){1&i&&Ye(0,Fae,0,0,"ng-template",10),2&i&&te("cdkPortalOutlet",Je().$implicit.templateLabel)}function Nae(i,t){1&i&&et(0),2&i&&Ai(Je().$implicit.textLabel)}function Bae(i,t){if(1&i){const e=br();O(0,"div",6),Re("click",function(){const r=qn(e),s=r.$implicit,o=r.index,a=Je(),l=vr(1);return a._handleClick(s,l,o)})("cdkFocusChange",function(r){const o=qn(e).index;return Je()._tabFocusChanged(r,o)}),O(1,"div",7),Ye(2,Lae,1,1,"ng-template",8),Ye(3,Nae,1,1,"ng-template",null,9,V1),F(),F()}if(2&i){const e=t.$implicit,n=t.index,r=vr(4),s=Je();Ke("mat-tab-label-active",s.selectedIndex===n),te("id",s._getTabLabelId(n))("ngClass",e.labelClass)("disabled",e.disabled)("matRippleDisabled",e.disabled||s.disableRipple),Ue("tabIndex",s._getTabIndex(e,n))("aria-posinset",n+1)("aria-setsize",s._tabs.length)("aria-controls",s._getTabContentId(n))("aria-selected",s.selectedIndex===n)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),J(2),te("ngIf",e.templateLabel)("ngIfElse",r)}}function Vae(i,t){if(1&i){const e=br();O(0,"mat-tab-body",11),Re("_onCentered",function(){return qn(e),Je()._removeTabBodyWrapperHeight()})("_onCentering",function(r){return qn(e),Je()._setTabBodyWrapperHeight(r)}),F()}if(2&i){const e=t.$implicit,n=t.index,r=Je();Ke("mat-tab-body-active",r.selectedIndex===n),te("id",r._getTabContentId(n))("ngClass",e.bodyClass)("content",e.content)("position",e.position)("origin",e.origin)("animationDuration",r.animationDuration),Ue("tabindex",null!=r.contentTabIndex&&r.selectedIndex===n?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(n))}}const Hae=new X("MatInkBarPositioner",{providedIn:"root",factory:function Uae(){return t=>({left:t?(t.offsetLeft||0)+"px":"0",width:t?(t.offsetWidth||0)+"px":"0"})}});let fB=(()=>{class i{constructor(e,n,r,s){this._elementRef=e,this._ngZone=n,this._inkBarPositioner=r,this._animationMode=s}alignToElement(e){this.show(),this._ngZone.onStable.pipe(fn(1)).subscribe(()=>{const n=this._inkBarPositioner(e),r=this._elementRef.nativeElement;r.style.left=n.left,r.style.width=n.width})}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Xe),y(Hae),y(jn,8))},i.\u0275dir=H({type:i,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(e,n){2&e&&Ke("_mat-animation-noopable","NoopAnimations"===n._animationMode)}}),i})();const zae=new X("MatTabContent"),Gae=new X("MatTabLabel"),jae=new X("MAT_TAB"),Wae=Yo(class{}),pB=new X("MAT_TAB_GROUP");let mB=(()=>{class i extends Wae{constructor(e,n){super(),this._viewContainerRef=e,this._closestTabGroup=n,this.textLabel="",this._contentPortal=null,this._stateChanges=new ge,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}get content(){return this._contentPortal}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new Hf(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}}return i.\u0275fac=function(e){return new(e||i)(y(Cn),y(pB,8))},i.\u0275cmp=We({type:i,selectors:[["mat-tab"]],contentQueries:function(e,n,r){if(1&e&&(ht(r,Gae,5),ht(r,zae,7,Vn)),2&e){let s;he(s=fe())&&(n.templateLabel=s.first),he(s=fe())&&(n._explicitContent=s.first)}},viewQuery:function(e,n){if(1&e&&ut(Vn,7),2&e){let r;he(r=fe())&&(n._implicitContent=r.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[Me([{provide:jae,useExisting:i}]),q,jt],ngContentSelectors:hB,decls:1,vars:0,template:function(e,n){1&e&&(on(),Ye(0,Cae,1,0,"ng-template"))},encapsulation:2}),i})();const $ae={translateTab:Gn("translateTab",[Pt("center, void, left-origin-center, right-origin-center",Be({transform:"none"})),Pt("left",Be({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),Pt("right",Be({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),zt("* => left, * => right, left => center, right => center",Yt("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),zt("void => left-origin-center",[Be({transform:"translate3d(-100%, 0, 0)"}),Yt("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),zt("void => right-origin-center",[Be({transform:"translate3d(100%, 0, 0)"}),Yt("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let qae=(()=>{class i extends au{constructor(e,n,r,s){super(e,n,s),this._host=r,this._centeringSub=yt.EMPTY,this._leavingSub=yt.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(yi(this._host._isCenterPosition(this._host._position))).subscribe(e=>{e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(y(wo),y(Cn),y(Tt(()=>gB)),y(nt))},i.\u0275dir=H({type:i,selectors:[["","matTabBodyHost",""]],features:[q]}),i})(),Yae=(()=>{class i{constructor(e,n,r){this._elementRef=e,this._dir=n,this._dirChangeSubscription=yt.EMPTY,this._translateTabComplete=new ge,this._onCentering=new ue,this._beforeCentering=new ue,this._afterLeavingCenter=new ue,this._onCentered=new ue(!0),this.animationDuration="500ms",n&&(this._dirChangeSubscription=n.change.subscribe(s=>{this._computePositionAnimationState(s),r.markForCheck()})),this._translateTabComplete.pipe(If((s,o)=>s.fromState===o.fromState&&s.toState===o.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(e){this._positionIndex=e,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(e){const n=this._isCenterPosition(e.toState);this._beforeCentering.emit(n),n&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(e){return"center"==e||"left-origin-center"==e||"right-origin-center"==e}_computePositionAnimationState(e=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==e?"left":"right":this._positionIndex>0?"ltr"==e?"right":"left":"center"}_computePositionFromOrigin(e){const n=this._getLayoutDirection();return"ltr"==n&&e<=0||"rtl"==n&&e>0?"left-origin-center":"right-origin-center"}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Un,8),y(Et))},i.\u0275dir=H({type:i,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),i})(),gB=(()=>{class i extends Yae{constructor(e,n,r){super(e,n,r)}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Un,8),y(Et))},i.\u0275cmp=We({type:i,selectors:[["mat-tab-body"]],viewQuery:function(e,n){if(1&e&&ut(au,5),2&e){let r;he(r=fe())&&(n._portalHost=r.first)}},hostAttrs:[1,"mat-tab-body"],features:[q],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(e,n){1&e&&(O(0,"div",0,1),Re("@translateTab.start",function(s){return n._onTranslateTabStarted(s)})("@translateTab.done",function(s){return n._translateTabComplete.next(s)}),Ye(2,Sae,0,0,"ng-template",2),F()),2&e&&te("@translateTab",M1(3,Eae,n._position,function sh(i,t,e,n){return C1(ce(),Yi(),i,t,e,n)}(1,Dae,n.animationDuration)))},directives:[qae],styles:['.mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}.mat-tab-body-content[style*="visibility: hidden"]{display:none}\n'],encapsulation:2,data:{animation:[$ae.translateTab]}}),i})();const _B=new X("MAT_TABS_CONFIG"),Kae=Yo(class{});let yB=(()=>{class i extends Kae{constructor(e){super(),this.elementRef=e}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return i.\u0275fac=function(e){return new(e||i)(y(de))},i.\u0275dir=H({type:i,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(e,n){2&e&&(Ue("aria-disabled",!!n.disabled),Ke("mat-tab-disabled",n.disabled))},inputs:{disabled:"disabled"},features:[q]}),i})();const vB=As({passive:!0});let Zae=(()=>{class i{constructor(e,n,r,s,o,a,l){this._elementRef=e,this._changeDetectorRef=n,this._viewportRuler=r,this._dir=s,this._ngZone=o,this._platform=a,this._animationMode=l,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new ge,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new ge,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new ue,this.indexFocused=new ue,o.runOutsideAngular(()=>{es(e.nativeElement,"mouseleave").pipe(it(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){e=Ii(e),this._selectedIndex!=e&&(this._selectedIndexChanged=!0,this._selectedIndex=e,this._keyManager&&this._keyManager.updateActiveItem(e))}ngAfterViewInit(){es(this._previousPaginator.nativeElement,"touchstart",vB).pipe(it(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),es(this._nextPaginator.nativeElement,"touchstart",vB).pipe(it(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const e=this._dir?this._dir.change:Qe("ltr"),n=this._viewportRuler.change(150),r=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new U_(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(fn(1)).subscribe(r),gn(e,n,this._items.changes).pipe(it(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),r()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(it(this._destroyed)).subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!Di(e))switch(e.keyCode){case 13:case 32:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e));break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){const e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){if(!this._items)return!0;const n=this._items?this._items.toArray()[e]:null;return!!n&&!n.disabled}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();const n=this._tabListContainer.nativeElement;n.scrollLeft="ltr"==this._getLayoutDirection()?0:n.scrollWidth-n.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const e=this.scrollDistance,n="ltr"===this._getLayoutDirection()?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){return this._scrollTo(this._scrollDistance+("before"==e?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;const n=this._items?this._items.toArray()[e]:null;if(!n)return;const r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:o}=n.elementRef.nativeElement;let a,l;"ltr"==this._getLayoutDirection()?(a=s,l=a+o):(l=this._tabListInner.nativeElement.offsetWidth-s,a=l-o);const c=this.scrollDistance,d=this.scrollDistance+r;a<c?this.scrollDistance-=c-a+60:l>d&&(this.scrollDistance+=l-d+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const e=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;e||(this.scrollDistance=0),e!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=e}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,n=e?e.elementRef.nativeElement:null;n?this._inkBar.alignToElement(n):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,n){n&&null!=n.button&&0!==n.button||(this._stopInterval(),py(650,100).pipe(it(gn(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:r,distance:s}=this._scrollHeader(e);(0===s||s>=r)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const n=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(n,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:n,distance:this._scrollDistance}}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Et),y(Rs),y(Un,8),y(Xe),y(Si),y(jn,8))},i.\u0275dir=H({type:i,inputs:{disablePagination:"disablePagination"}}),i})(),Jae=(()=>{class i extends Zae{constructor(e,n,r,s,o,a,l){super(e,n,r,s,o,a,l),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=ve(e)}_itemSelected(e){e.preventDefault()}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Et),y(Rs),y(Un,8),y(Xe),y(Si),y(jn,8))},i.\u0275dir=H({type:i,inputs:{disableRipple:"disableRipple"},features:[q]}),i})(),ele=(()=>{class i extends Jae{constructor(e,n,r,s,o,a,l){super(e,n,r,s,o,a,l)}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Et),y(Rs),y(Un,8),y(Xe),y(Si),y(jn,8))},i.\u0275cmp=We({type:i,selectors:[["mat-tab-header"]],contentQueries:function(e,n,r){if(1&e&&ht(r,yB,4),2&e){let s;he(s=fe())&&(n._items=s)}},viewQuery:function(e,n){if(1&e&&(ut(fB,7),ut(Aae,7),ut(Tae,7),ut(Rae,7),ut(kae,5),ut(Iae,5)),2&e){let r;he(r=fe())&&(n._inkBar=r.first),he(r=fe())&&(n._tabListContainer=r.first),he(r=fe())&&(n._tabList=r.first),he(r=fe())&&(n._tabListInner=r.first),he(r=fe())&&(n._nextPaginator=r.first),he(r=fe())&&(n._previousPaginator=r.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(e,n){2&e&&Ke("mat-tab-header-pagination-controls-enabled",n._showPaginationControls)("mat-tab-header-rtl","rtl"==n._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[q],ngContentSelectors:hB,decls:14,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(e,n){1&e&&(on(),O(0,"button",0,1),Re("click",function(){return n._handlePaginatorClick("before")})("mousedown",function(s){return n._handlePaginatorPress("before",s)})("touchend",function(){return n._stopInterval()}),Ne(2,"div",2),F(),O(3,"div",3,4),Re("keydown",function(s){return n._handleKeydown(s)}),O(5,"div",5,6),Re("cdkObserveContent",function(){return n._onContentChanges()}),O(7,"div",7,8),rt(9),F(),Ne(10,"mat-ink-bar"),F(),F(),O(11,"button",9,10),Re("mousedown",function(s){return n._handlePaginatorPress("after",s)})("click",function(){return n._handlePaginatorClick("after")})("touchend",function(){return n._stopInterval()}),Ne(13,"div",2),F()),2&e&&(Ke("mat-tab-header-pagination-disabled",n._disableScrollBefore),te("matRippleDisabled",n._disableScrollBefore||n.disableRipple)("disabled",n._disableScrollBefore||null),J(5),Ke("_mat-animation-noopable","NoopAnimations"===n._animationMode),J(6),Ke("mat-tab-header-pagination-disabled",n._disableScrollAfter),te("matRippleDisabled",n._disableScrollAfter||n.disableRipple)("disabled",n._disableScrollAfter||null))},directives:[Zr,F_,fB],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-tab-header-pagination::-moz-focus-inner{border:0}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n"],encapsulation:2}),i})(),tle=0;class nle{}const ile=ro(Qr(class{constructor(i){this._elementRef=i}}),"primary");let rle=(()=>{class i extends ile{constructor(e,n,r,s){var o;super(e),this._changeDetectorRef=n,this._animationMode=s,this._tabs=new da,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=yt.EMPTY,this._tabLabelSubscription=yt.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new ue,this.focusChange=new ue,this.animationDone=new ue,this.selectedTabChange=new ue(!0),this._groupId=tle++,this.animationDuration=r&&r.animationDuration?r.animationDuration:"500ms",this.disablePagination=!(!r||null==r.disablePagination)&&r.disablePagination,this.dynamicHeight=!(!r||null==r.dynamicHeight)&&r.dynamicHeight,this.contentTabIndex=null!==(o=null==r?void 0:r.contentTabIndex)&&void 0!==o?o:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(e){this._dynamicHeight=ve(e)}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=Ii(e,null)}get animationDuration(){return this._animationDuration}set animationDuration(e){this._animationDuration=/^\d+$/.test(e+"")?e+"ms":e}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=Ii(e,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){const n=this._elementRef.nativeElement;n.classList.remove(`mat-background-${this.backgroundColor}`),e&&n.classList.add(`mat-background-${e}`),this._backgroundColor=e}ngAfterContentChecked(){const e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){const n=null==this._selectedIndex;if(!n){this.selectedTabChange.emit(this._createChangeEvent(e));const r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,s)=>r.isActive=s===e),n||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((n,r)=>{n.position=r-e,null!=this._selectedIndex&&0==n.position&&!n.origin&&(n.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){const n=this._tabs.toArray();let r;for(let s=0;s<n.length;s++)if(n[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,r=n[s];break}!r&&n[e]&&Promise.resolve().then(()=>{n[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(yi(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(n=>n._closestTabGroup===this||!n._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){const n=this._tabHeader;n&&(n.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){const n=new nle;return n.index=e,this._tabs&&this._tabs.length&&(n.tab=this._tabs.toArray()[e]),n}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=gn(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e){return`mat-tab-label-${this._groupId}-${e}`}_getTabContentId(e){return`mat-tab-content-${this._groupId}-${e}`}_setTabBodyWrapperHeight(e){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const n=this._tabBodyWrapper.nativeElement;n.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(n.style.height=e+"px")}_removeTabBodyWrapperHeight(){const e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this.animationDone.emit()}_handleClick(e,n,r){e.disabled||(this.selectedIndex=n.focusIndex=r)}_getTabIndex(e,n){var r;return e.disabled?null:n===(null!==(r=this._lastFocusedTabIndex)&&void 0!==r?r:this.selectedIndex)?0:-1}_tabFocusChanged(e,n){e&&"mouse"!==e&&"touch"!==e&&(this._tabHeader.focusIndex=n)}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Et),y(_B,8),y(jn,8))},i.\u0275dir=H({type:i,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[q]}),i})(),sle=(()=>{class i extends rle{constructor(e,n,r,s){super(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Et),y(_B,8),y(jn,8))},i.\u0275cmp=We({type:i,selectors:[["mat-tab-group"]],contentQueries:function(e,n,r){if(1&e&&ht(r,mB,5),2&e){let s;he(s=fe())&&(n._allTabs=s)}},viewQuery:function(e,n){if(1&e&&(ut(Pae,5),ut(Oae,5)),2&e){let r;he(r=fe())&&(n._tabBodyWrapper=r.first),he(r=fe())&&(n._tabHeader=r.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(e,n){2&e&&Ke("mat-tab-group-dynamic-height",n.dynamicHeight)("mat-tab-group-inverted-header","below"===n.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[Me([{provide:pB,useExisting:i}]),q],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","ngClass","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","ngClass","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","ngClass","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf","ngIfElse"],["tabTextLabel",""],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(e,n){1&e&&(O(0,"mat-tab-header",0,1),Re("indexFocused",function(s){return n._focusChanged(s)})("selectFocusedIndex",function(s){return n.selectedIndex=s}),Ye(2,Bae,5,15,"div",2),F(),O(3,"div",3,4),Ye(5,Vae,1,10,"mat-tab-body",5),F()),2&e&&(te("selectedIndex",n.selectedIndex||0)("disableRipple",n.disableRipple)("disablePagination",n.disablePagination),J(2),te("ngForOf",n._tabs),J(1),Ke("_mat-animation-noopable","NoopAnimations"===n._animationMode),J(2),te("ngForOf",n._tabs))},directives:[ele,gB,al,yB,Zr,MM,ol,Ur,au],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),i})(),xB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[ri,He,Jl,Jr,Ef,G_],He]}),i})(),ole=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=We({type:i,selectors:[["app-overview"]],inputs:{digitalTwin:"digitalTwin"},decls:2,vars:0,template:function(e,n){1&e&&(O(0,"p"),et(1,"overview works!"),F())},styles:[""]}),i})(),ale=0;const yC=new X("CdkAccordion");let lle=(()=>{class i{constructor(){this._stateChanges=new ge,this._openCloseAllActions=new ge,this.id="cdk-accordion-"+ale++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=ve(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[Me([{provide:yC,useExisting:i}]),jt]}),i})(),cle=0,dle=(()=>{class i{constructor(e,n,r){this.accordion=e,this._changeDetectorRef=n,this._expansionDispatcher=r,this._openCloseAllSubscription=yt.EMPTY,this.closed=new ue,this.opened=new ue,this.destroyed=new ue,this.expandedChange=new ue,this.id="cdk-accordion-child-"+cle++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=ve(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=ve(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return i.\u0275fac=function(e){return new(e||i)(y(yC,12),y(Et),y(gC))},i.\u0275dir=H({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Me([{provide:yC,useValue:void 0}])]}),i})(),vC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({}),i})();const ule=["body"];function hle(i,t){}const fle=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],ple=["mat-expansion-panel-header","*","mat-action-row"];function mle(i,t){1&i&&Ne(0,"span",2),2&i&&te("@indicatorRotate",Je()._getExpandedState())}const gle=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],_le=["mat-panel-title","mat-panel-description","*"],bC=new X("MAT_ACCORDION"),wB="225ms cubic-bezier(0.4,0.0,0.2,1)",MB={indicatorRotate:Gn("indicatorRotate",[Pt("collapsed, void",Be({transform:"rotate(0deg)"})),Pt("expanded",Be({transform:"rotate(180deg)"})),zt("expanded <=> collapsed, void => collapsed",Yt(wB))]),bodyExpansion:Gn("bodyExpansion",[Pt("collapsed, void",Be({height:"0px",visibility:"hidden"})),Pt("expanded",Be({height:"*",visibility:"visible"})),zt("expanded <=> collapsed, void => collapsed",Yt(wB))])};let yle=(()=>{class i{constructor(e){this._template=e}}return i.\u0275fac=function(e){return new(e||i)(y(Vn))},i.\u0275dir=H({type:i,selectors:[["ng-template","matExpansionPanelContent",""]]}),i})(),vle=0;const CB=new X("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let SB=(()=>{class i extends dle{constructor(e,n,r,s,o,a,l){super(e,n,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new ue,this.afterCollapse=new ue,this._inputChanges=new ge,this._headerId="mat-expansion-panel-header-"+vle++,this._bodyAnimationDone=new ge,this.accordion=e,this._document=o,this._bodyAnimationDone.pipe(If((c,d)=>c.fromState===d.fromState&&c.toState===d.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=ve(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(yi(null),an(()=>this.expanded&&!this._portal),fn(1)).subscribe(()=>{this._portal=new Hf(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,n=this._body.nativeElement;return e===n||n.contains(e)}return!1}}return i.\u0275fac=function(e){return new(e||i)(y(bC,12),y(Et),y(gC),y(Cn),y(nt),y(jn,8),y(CB,8))},i.\u0275cmp=We({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(e,n,r){if(1&e&&ht(r,yle,5),2&e){let s;he(s=fe())&&(n._lazyContent=s.first)}},viewQuery:function(e,n){if(1&e&&ut(ule,5),2&e){let r;he(r=fe())&&(n._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,n){2&e&&Ke("mat-expanded",n.expanded)("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-expansion-panel-spacing",n._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Me([{provide:bC,useValue:void 0}]),q,jt],ngContentSelectors:ple,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,n){1&e&&(on(fle),rt(0),O(1,"div",0,1),Re("@bodyExpansion.done",function(s){return n._bodyAnimationDone.next(s)}),O(3,"div",2),rt(4,1),Ye(5,hle,0,0,"ng-template",3),F(),rt(6,2),F()),2&e&&(J(1),te("@bodyExpansion",n._getExpandedState())("id",n.id),Ue("aria-labelledby",n._headerId),J(4),te("cdkPortalOutlet",n._portal))},directives:[au],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n'],encapsulation:2,data:{animation:[MB.bodyExpansion]},changeDetection:0}),i})(),ble=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["mat-action-row"]],hostAttrs:[1,"mat-action-row"]}),i})();class xle{}const wle=Va(xle);let DB=(()=>{class i extends wle{constructor(e,n,r,s,o,a,l){super(),this.panel=e,this._element=n,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=yt.EMPTY;const c=e.accordion?e.accordion._stateChanges.pipe(an(d=>!(!d.hideToggle&&!d.togglePosition))):Is;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=gn(e.opened,e.closed,c,e._inputChanges.pipe(an(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(an(()=>e._containsFocus())).subscribe(()=>r.focusVia(n,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:Di(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,n){e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return i.\u0275fac=function(e){return new(e||i)(y(SB,1),y(de),y(no),y(Et),y(CB,8),y(jn,8),ti("tabindex"))},i.\u0275cmp=We({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,n){1&e&&Re("click",function(){return n._toggle()})("keydown",function(s){return n._keydown(s)}),2&e&&(Ue("id",n.panel._headerId)("tabindex",n.tabIndex)("aria-controls",n._getPanelId())("aria-expanded",n._isExpanded())("aria-disabled",n.panel.disabled),Hi("height",n._getHeaderHeight()),Ke("mat-expanded",n._isExpanded())("mat-expansion-toggle-indicator-after","after"===n._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===n._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[q],ngContentSelectors:_le,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,n){1&e&&(on(gle),O(0,"span",0),rt(1),rt(2,1),rt(3,2),F(),Ye(4,mle,1,1,"span",1)),2&e&&(J(4),te("ngIf",n._showToggle()))},directives:[Ur],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[MB.indicatorRotate]},changeDetection:0}),i})(),Mle=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),i})(),Cle=(()=>{class i extends lle{constructor(){super(...arguments),this._ownHeaders=new da,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=ve(e)}ngAfterContentInit(){this._headers.changes.pipe(yi(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(n=>n.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new U_(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=xe(i)))(n||i)}}(),i.\u0275dir=H({type:i,selectors:[["mat-accordion"]],contentQueries:function(e,n,r){if(1&e&&ht(r,DB,5),2&e){let s;he(s=fe())&&(n._headers=s)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,n){2&e&&Ke("mat-accordion-multi",n.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[Me([{provide:bC,useExisting:i}]),q]}),i})(),EB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[ri,He,vC,Jl]]}),i})(),AB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({}),i})(),TB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[Ha],imports:[[AB,Bf,He],AB,Bf]}),i})();const Dle=["mat-calendar-body",""];function Ele(i,t){if(1&i&&(O(0,"tr",2),O(1,"td",3),et(2),F(),F()),2&i){const e=Je();J(1),Hi("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Ue("colspan",e.numCols),J(1),Br(" ",e.label," ")}}function Ale(i,t){if(1&i&&(O(0,"td",3),et(1),F()),2&i){const e=Je(2);Hi("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Ue("colspan",e._firstRowOffset),J(1),Br(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function Tle(i,t){if(1&i){const e=br();O(0,"td",7),O(1,"button",8),Re("click",function(r){const o=qn(e).$implicit;return Je(2)._cellClicked(o,r)}),O(2,"div",9),et(3),F(),Ne(4,"div",10),F(),F()}if(2&i){const e=t.$implicit,n=t.index,r=Je().index,s=Je();Hi("width",s._cellWidth)("padding-top",s._cellPadding)("padding-bottom",s._cellPadding),Ue("data-mat-row",r)("data-mat-col",n),J(1),Ke("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",s._isActiveCell(r,n))("mat-calendar-body-range-start",s._isRangeStart(e.compareValue))("mat-calendar-body-range-end",s._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",s._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",s._isComparisonBridgeStart(e.compareValue,r,n))("mat-calendar-body-comparison-bridge-end",s._isComparisonBridgeEnd(e.compareValue,r,n))("mat-calendar-body-comparison-start",s._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",s._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",s._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",s._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",s._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",s._isInPreview(e.compareValue)),te("ngClass",e.cssClasses)("tabindex",s._isActiveCell(r,n)?0:-1),Ue("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",s._isSelected(e.compareValue))("aria-current",s.todayValue===e.compareValue?"date":null),J(1),Ke("mat-calendar-body-selected",s._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",s._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",s.todayValue===e.compareValue),J(1),Br(" ",e.displayValue," ")}}function Rle(i,t){if(1&i&&(O(0,"tr",4),Ye(1,Ale,2,6,"td",5),Ye(2,Tle,5,47,"td",6),F()),2&i){const e=t.$implicit,n=t.index,r=Je();J(1),te("ngIf",0===n&&r._firstRowOffset),J(1),te("ngForOf",e)}}function kle(i,t){if(1&i&&(O(0,"th",5),O(1,"span",6),et(2),F(),O(3,"span",7),et(4),F(),F()),2&i){const e=t.$implicit;J(2),Ai(e.long),J(2),Ai(e.narrow)}}const Ile=["*"];function Ple(i,t){}function Ole(i,t){if(1&i){const e=br();O(0,"mat-month-view",5),Re("activeDateChange",function(r){return qn(e),Je().activeDate=r})("_userSelection",function(r){return qn(e),Je()._dateSelected(r)}),F()}if(2&i){const e=Je();te("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)}}function Fle(i,t){if(1&i){const e=br();O(0,"mat-year-view",6),Re("activeDateChange",function(r){return qn(e),Je().activeDate=r})("monthSelected",function(r){return qn(e),Je()._monthSelectedInYearView(r)})("selectedChange",function(r){return qn(e),Je()._goToDateInView(r,"month")}),F()}if(2&i){const e=Je();te("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function Lle(i,t){if(1&i){const e=br();O(0,"mat-multi-year-view",7),Re("activeDateChange",function(r){return qn(e),Je().activeDate=r})("yearSelected",function(r){return qn(e),Je()._yearSelectedInMultiYearView(r)})("selectedChange",function(r){return qn(e),Je()._goToDateInView(r,"year")}),F()}if(2&i){const e=Je();te("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function Nle(i,t){}const Ble=["button"];function Vle(i,t){1&i&&(sa(),O(0,"svg",3),Ne(1,"path",4),F())}const Hle=[[["","matDatepickerToggleIcon",""]]],Ule=["[matDatepickerToggleIcon]"],zle=[[["input","matStartDate",""]],[["input","matEndDate",""]]],Gle=["input[matStartDate]","input[matEndDate]"];class xC{constructor(t,e,n,r,s={},o=t,a){this.value=t,this.displayValue=e,this.ariaLabel=n,this.enabled=r,this.cssClasses=s,this.compareValue=o,this.rawValue=a}}let du=(()=>{class i{constructor(e,n){this._elementRef=e,this._ngZone=n,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new ue,this.previewChange=new ue,this._enterHandler=r=>{if(this._skipNextFocus&&"focus"===r.type)this._skipNextFocus=!1;else if(r.target&&this.isRange){const s=this._getCellFromElement(r.target);s&&this._ngZone.run(()=>this.previewChange.emit({value:s.enabled?s:null,event:r}))}},this._leaveHandler=r=>{null!==this.previewEnd&&this.isRange&&r.target&&this._getCellFromElement(r.target)&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:r}))},n.runOutsideAngular(()=>{const r=e.nativeElement;r.addEventListener("mouseenter",this._enterHandler,!0),r.addEventListener("focus",this._enterHandler,!0),r.addEventListener("mouseleave",this._leaveHandler,!0),r.addEventListener("blur",this._leaveHandler,!0)})}_cellClicked(e,n){e.enabled&&this.selectedValueChange.emit({value:e.value,event:n})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){const n=e.numCols,{rows:r,numCols:s}=this;(e.rows||n)&&(this._firstRowOffset=r&&r.length&&r[0].length?s-r[0].length:0),(e.cellAspectRatio||n||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/s+"%"),(n||!this._cellWidth)&&(this._cellWidth=100/s+"%")}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mouseenter",this._enterHandler,!0),e.removeEventListener("focus",this._enterHandler,!0),e.removeEventListener("mouseleave",this._leaveHandler,!0),e.removeEventListener("blur",this._leaveHandler,!0)}_isActiveCell(e,n){let r=e*this.numCols+n;return e&&(r-=this._firstRowOffset),r==this.activeCell}_focusActiveCell(e=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(fn(1)).subscribe(()=>{setTimeout(()=>{const n=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");n&&(e||(this._skipNextFocus=!0),n.focus())})})})}_isRangeStart(e){return wC(e,this.startValue,this.endValue)}_isRangeEnd(e){return MC(e,this.startValue,this.endValue)}_isInRange(e){return CC(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return wC(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,n,r){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let s=this.rows[n][r-1];if(!s){const o=this.rows[n-1];s=o&&o[o.length-1]}return s&&!this._isRangeEnd(s.compareValue)}_isComparisonBridgeEnd(e,n,r){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let s=this.rows[n][r+1];if(!s){const o=this.rows[n+1];s=o&&o[0]}return s&&!this._isRangeStart(s.compareValue)}_isComparisonEnd(e){return MC(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return CC(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return wC(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return MC(e,this.previewStart,this.previewEnd)}_isInPreview(e){return CC(e,this.previewStart,this.previewEnd,this.isRange)}_getCellFromElement(e){let n;if(RB(e)?n=e:RB(e.parentNode)&&(n=e.parentNode),n){const r=n.getAttribute("data-mat-row"),s=n.getAttribute("data-mat-col");if(r&&s)return this.rows[parseInt(r)][parseInt(s)]}return null}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Xe))},i.\u0275cmp=We({type:i,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange"},exportAs:["matCalendarBody"],features:[jt],attrs:Dle,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(e,n){1&e&&(Ye(0,Ele,3,6,"tr",0),Ye(1,Rle,3,2,"tr",1)),2&e&&(te("ngIf",n._firstRowOffset<n.labelMinRequiredCells),J(1),te("ngForOf",n.rows))},directives:[Ur,al,ol],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content,.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content{outline:dotted 2px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content.mat-calendar-body-selected,.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content.mat-calendar-body-selected{outline:solid 3px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}\n'],encapsulation:2,changeDetection:0}),i})();function RB(i){return"TD"===i.nodeName}function wC(i,t,e){return null!==e&&t!==e&&i<e&&i===t}function MC(i,t,e){return null!==t&&t!==e&&i>=t&&i===e}function CC(i,t,e,n){return n&&null!==t&&null!==e&&t!==e&&i>=t&&i<=e}class Wi{constructor(t,e){this.start=t,this.end=e}}let Ua=(()=>{class i{constructor(e,n){this.selection=e,this._adapter=n,this._selectionChanged=new ge,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,n){const r=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:n,oldValue:r})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}}return i.\u0275fac=function(e){jc()},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})(),jle=(()=>{class i extends Ua{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const e=new i(this._adapter);return e.updateSelection(this.selection,this),e}}return i.\u0275fac=function(e){return new(e||i)(G(Zn))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})(),Wle=(()=>{class i extends Ua{constructor(e){super(new Wi(null,null),e)}add(e){let{start:n,end:r}=this.selection;null==n?n=e:null==r?r=e:(n=e,r=null),super.updateSelection(new Wi(n,r),this)}isValid(){const{start:e,end:n}=this.selection;return null==e&&null==n||(null!=e&&null!=n?this._isValidDateInstance(e)&&this._isValidDateInstance(n)&&this._adapter.compareDate(e,n)<=0:(null==e||this._isValidDateInstance(e))&&(null==n||this._isValidDateInstance(n)))}isComplete(){return null!=this.selection.start&&null!=this.selection.end}clone(){const e=new i(this._adapter);return e.updateSelection(this.selection,this),e}}return i.\u0275fac=function(e){return new(e||i)(G(Zn))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const qle={provide:Ua,deps:[[new mi,new mr,Ua],Zn],useFactory:function $le(i,t){return i||new jle(t)}},Kle={provide:Ua,deps:[[new mi,new mr,Ua],Zn],useFactory:function Yle(i,t){return i||new Wle(t)}},yy=new X("MAT_DATE_RANGE_SELECTION_STRATEGY");let Xle=(()=>{class i{constructor(e){this._dateAdapter=e}selectionFinished(e,n){let{start:r,end:s}=n;return null==r?r=e:null==s&&e&&this._dateAdapter.compareDate(e,r)>=0?s=e:(r=e,s=null),new Wi(r,s)}createPreview(e,n){let r=null,s=null;return n.start&&!n.end&&e&&(r=n.start,s=e),new Wi(r,s)}}return i.\u0275fac=function(e){return new(e||i)(G(Zn))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const Zle={provide:yy,deps:[[new mi,new mr,yy],Zn],useFactory:function Qle(i,t){return i||new Xle(t)}};let kB=(()=>{class i{constructor(e,n,r,s,o){this._changeDetectorRef=e,this._dateFormats=n,this._dateAdapter=r,this._dir=s,this._rangeStrategy=o,this._rerenderSubscription=yt.EMPTY,this.selectedChange=new ue,this._userSelection=new ue,this.activeDateChange=new ue,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){const n=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._hasSameMonthAndYear(n,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Wi?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yi(null)).subscribe(()=>this._init())}ngOnChanges(e){const n=e.comparisonStart||e.comparisonEnd;n&&!n.firstChange&&this._setRanges(this.selected)}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){const n=e.value,r=this._dateAdapter.getYear(this.activeDate),s=this._dateAdapter.getMonth(this.activeDate),o=this._dateAdapter.createDate(r,s,n);let a,l;this._selected instanceof Wi?(a=this._getDateInCurrentMonth(this._selected.start),l=this._getDateInCurrentMonth(this._selected.end)):a=l=this._getDateInCurrentMonth(this._selected),(a!==n||l!==n)&&this.selectedChange.emit(o),this._userSelection.emit({value:o,event:e.event}),this._previewStart=this._previewEnd=null,this._changeDetectorRef.markForCheck()}_handleCalendarBodyKeydown(e){const n=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&e.preventDefault());case 27:return void(null!=this._previewEnd&&!Di(e)&&(this._previewStart=this._previewEnd=null,this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e}),e.preventDefault(),e.stopPropagation()));default:return}this._dateAdapter.compareDate(n,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_previewChanged({event:e,value:n}){if(this._rangeStrategy){const s=this._rangeStrategy.createPreview(n?n.rawValue:null,this.selected,e);this._previewStart=this._getCellCompareValue(s.start),this._previewEnd=this._getCellCompareValue(s.end),this._changeDetectorRef.detectChanges()}}_initWeekdays(){const e=this._dateAdapter.getFirstDayOfWeek(),n=this._dateAdapter.getDayOfWeekNames("narrow");let s=this._dateAdapter.getDayOfWeekNames("long").map((o,a)=>({long:o,narrow:n[a]}));this._weekdays=s.slice(e).concat(s.slice(0,e))}_createWeekCells(){const e=this._dateAdapter.getNumDaysInMonth(this.activeDate),n=this._dateAdapter.getDateNames();this._weeks=[[]];for(let r=0,s=this._firstWeekOffset;r<e;r++,s++){7==s&&(this._weeks.push([]),s=0);const o=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),r+1),a=this._shouldEnableDate(o),l=this._dateAdapter.format(o,this._dateFormats.display.dateA11yLabel),c=this.dateClass?this.dateClass(o,"month"):void 0;this._weeks[this._weeks.length-1].push(new xC(r+1,n[r],l,a,c,this._getCellCompareValue(o),o))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,n){return!(!e||!n||this._dateAdapter.getMonth(e)!=this._dateAdapter.getMonth(n)||this._dateAdapter.getYear(e)!=this._dateAdapter.getYear(n))}_getCellCompareValue(e){if(e){const n=this._dateAdapter.getYear(e),r=this._dateAdapter.getMonth(e),s=this._dateAdapter.getDate(e);return new Date(n,r,s).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(e){e instanceof Wi?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}}return i.\u0275fac=function(e){return new(e||i)(y(Et),y(so,8),y(Zn,8),y(Un,8),y(yy,8))},i.\u0275cmp=We({type:i,selectors:[["mat-month-view"]],viewQuery:function(e,n){if(1&e&&ut(du,5),2&e){let r;he(r=fe())&&(n._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[jt],decls:7,vars:13,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","selectedValueChange","previewChange","keyup","keydown"],["scope","col"],[1,"cdk-visually-hidden"],["aria-hidden","true"]],template:function(e,n){1&e&&(O(0,"table",0),O(1,"thead",1),O(2,"tr"),Ye(3,kle,5,2,"th",2),F(),O(4,"tr"),Ne(5,"th",3),F(),F(),O(6,"tbody",4),Re("selectedValueChange",function(s){return n._dateSelected(s)})("previewChange",function(s){return n._previewChanged(s)})("keyup",function(s){return n._handleCalendarBodyKeyup(s)})("keydown",function(s){return n._handleCalendarBodyKeydown(s)}),F(),F()),2&e&&(J(3),te("ngForOf",n._weekdays),J(3),te("label",n._monthLabel)("rows",n._weeks)("todayValue",n._todayDate)("startValue",n._rangeStart)("endValue",n._rangeEnd)("comparisonStart",n._comparisonRangeStart)("comparisonEnd",n._comparisonRangeEnd)("previewStart",n._previewStart)("previewEnd",n._previewEnd)("isRange",n._isRange)("labelMinRequiredCells",3)("activeCell",n._dateAdapter.getDate(n.activeDate)-1))},directives:[du,al],encapsulation:2,changeDetection:0}),i})(),IB=(()=>{class i{constructor(e,n,r){this._changeDetectorRef=e,this._dateAdapter=n,this._dir=r,this._rerenderSubscription=yt.EMPTY,this.selectedChange=new ue,this.yearSelected=new ue,this.activeDateChange=new ue,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let n=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),PB(this._dateAdapter,n,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Wi?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yi(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const n=this._dateAdapter.getYear(this._activeDate)-jf(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let r=0,s=[];r<24;r++)s.push(n+r),4==s.length&&(this._years.push(s.map(o=>this._createCellForYear(o))),s=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){const n=e.value;this.yearSelected.emit(this._dateAdapter.createDate(n,0,1));let r=this._dateAdapter.getMonth(this.activeDate),s=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(n,r,1));this.selectedChange.emit(this._dateAdapter.createDate(n,r,Math.min(this._dateAdapter.getDate(this.activeDate),s)))}_handleCalendarBodyKeydown(e){const n=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-jf(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-jf(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-240:-24);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?240:24);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return jf(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_createCellForYear(e){const n=this._dateAdapter.createDate(e,0,1),r=this._dateAdapter.getYearName(n),s=this.dateClass?this.dateClass(n,"multi-year"):void 0;return new xC(e,r,r,this._shouldEnableYear(e),s)}_shouldEnableYear(e){if(null==e||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let r=this._dateAdapter.createDate(e,0,1);this._dateAdapter.getYear(r)==e;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(e){if(this._selectedYear=null,e instanceof Wi){const n=e.start||e.end;n&&(this._selectedYear=this._dateAdapter.getYear(n))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}}return i.\u0275fac=function(e){return new(e||i)(y(Et),y(Zn,8),y(Un,8))},i.\u0275cmp=We({type:i,selectors:[["mat-multi-year-view"]],viewQuery:function(e,n){if(1&e&&ut(du,5),2&e){let r;he(r=fe())&&(n._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(e,n){1&e&&(O(0,"table",0),O(1,"thead",1),O(2,"tr"),Ne(3,"th",2),F(),F(),O(4,"tbody",3),Re("selectedValueChange",function(s){return n._yearSelected(s)})("keyup",function(s){return n._handleCalendarBodyKeyup(s)})("keydown",function(s){return n._handleCalendarBodyKeydown(s)}),F(),F()),2&e&&(J(4),te("rows",n._years)("todayValue",n._todayYear)("startValue",n._selectedYear)("endValue",n._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",n._getActiveCell()))},directives:[du],encapsulation:2,changeDetection:0}),i})();function PB(i,t,e,n,r){const s=i.getYear(t),o=i.getYear(e),a=OB(i,n,r);return Math.floor((s-a)/24)===Math.floor((o-a)/24)}function jf(i,t,e,n){return function Jle(i,t){return(i%t+t)%t}(i.getYear(t)-OB(i,e,n),24)}function OB(i,t,e){let n=0;return e?n=i.getYear(e)-24+1:t&&(n=i.getYear(t)),n}let FB=(()=>{class i{constructor(e,n,r,s){this._changeDetectorRef=e,this._dateFormats=n,this._dateAdapter=r,this._dir=s,this._rerenderSubscription=yt.EMPTY,this.selectedChange=new ue,this.monthSelected=new ue,this.activeDateChange=new ue,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let n=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._dateAdapter.getYear(n)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Wi?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yi(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){const n=e.value,r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,1);this.monthSelected.emit(r);const s=this._dateAdapter.getNumDaysInMonth(r);this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,Math.min(this._dateAdapter.getDate(this.activeDate),s)))}_handleCalendarBodyKeydown(e){const n=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(n=>n.map(r=>this._createCellForMonth(r,e[r]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_createCellForMonth(e,n){const r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),s=this._dateAdapter.format(r,this._dateFormats.display.monthYearA11yLabel),o=this.dateClass?this.dateClass(r,"year"):void 0;return new xC(e,n.toLocaleUpperCase(),s,this._shouldEnableMonth(e),o)}_shouldEnableMonth(e){const n=this._dateAdapter.getYear(this.activeDate);if(null==e||this._isYearAndMonthAfterMaxDate(n,e)||this._isYearAndMonthBeforeMinDate(n,e))return!1;if(!this.dateFilter)return!0;for(let s=this._dateAdapter.createDate(n,e,1);this._dateAdapter.getMonth(s)==e;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isYearAndMonthAfterMaxDate(e,n){if(this.maxDate){const r=this._dateAdapter.getYear(this.maxDate),s=this._dateAdapter.getMonth(this.maxDate);return e>r||e===r&&n>s}return!1}_isYearAndMonthBeforeMinDate(e,n){if(this.minDate){const r=this._dateAdapter.getYear(this.minDate),s=this._dateAdapter.getMonth(this.minDate);return e<r||e===r&&n<s}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(e){this._selectedMonth=e instanceof Wi?this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._getMonthInCurrentYear(e)}}return i.\u0275fac=function(e){return new(e||i)(y(Et),y(so,8),y(Zn,8),y(Un,8))},i.\u0275cmp=We({type:i,selectors:[["mat-year-view"]],viewQuery:function(e,n){if(1&e&&ut(du,5),2&e){let r;he(r=fe())&&(n._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(e,n){1&e&&(O(0,"table",0),O(1,"thead",1),O(2,"tr"),Ne(3,"th",2),F(),F(),O(4,"tbody",3),Re("selectedValueChange",function(s){return n._monthSelected(s)})("keyup",function(s){return n._handleCalendarBodyKeyup(s)})("keydown",function(s){return n._handleCalendarBodyKeydown(s)}),F(),F()),2&e&&(J(4),te("label",n._yearLabel)("rows",n._months)("todayValue",n._todayMonth)("startValue",n._selectedMonth)("endValue",n._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",n._dateAdapter.getMonth(n.activeDate)))},directives:[du],encapsulation:2,changeDetection:0}),i})(),Wf=(()=>{class i{constructor(){this.changes=new ge,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,n){return`${e} \u2013 ${n}`}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ece=0,tce=(()=>{class i{constructor(e,n,r,s,o){this._intl=e,this.calendar=n,this._dateAdapter=r,this._dateFormats=s,this._buttonDescriptionId="mat-calendar-button-"+ece++,this.calendar.stateChanges.subscribe(()=>o.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const n=this._dateAdapter.getYear(this.calendar.activeDate)-jf(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),r=n+24-1,s=this._dateAdapter.getYearName(this._dateAdapter.createDate(n,0,1)),o=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1));return this._intl.formatYearRange(s,o)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,n){return"month"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(n)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(n):"year"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(n):PB(this._dateAdapter,e,n,this.calendar.minDate,this.calendar.maxDate)}}return i.\u0275fac=function(e){return new(e||i)(y(Wf),y(Tt(()=>EC)),y(Zn,8),y(so,8),y(Et))},i.\u0275cmp=We({type:i,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:Ile,decls:11,vars:10,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["viewBox","0 0 10 5","focusable","false",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(e,n){1&e&&(on(),O(0,"div",0),O(1,"div",1),O(2,"button",2),Re("click",function(){return n.currentPeriodClicked()}),O(3,"span"),et(4),F(),sa(),O(5,"svg",3),Ne(6,"polygon",4),F(),F(),vp(),Ne(7,"div",5),rt(8),O(9,"button",6),Re("click",function(){return n.previousClicked()}),F(),O(10,"button",7),Re("click",function(){return n.nextClicked()}),F(),F(),F()),2&e&&(J(2),Ue("aria-label",n.periodButtonLabel)("aria-describedby",n._buttonDescriptionId),J(1),Ue("id",n._buttonDescriptionId),J(1),Ai(n.periodButtonText),J(1),Ke("mat-calendar-invert","month"!==n.calendar.currentView),J(4),te("disabled",!n.previousEnabled()),Ue("aria-label",n.prevButtonLabel),J(1),te("disabled",!n.nextEnabled()),Ue("aria-label",n.nextButtonLabel))},directives:[cu],encapsulation:2,changeDetection:0}),i})(),EC=(()=>{class i{constructor(e,n,r,s){this._dateAdapter=n,this._dateFormats=r,this._changeDetectorRef=s,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new ue,this.yearSelected=new ue,this.monthSelected=new ue,this.viewChanged=new ue(!0),this._userSelection=new ue,this.stateChanges=new ge,this._intlChanges=e.changes.subscribe(()=>{s.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){this._selected=e instanceof Wi?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){const n=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),n&&this.viewChanged.emit(n)}ngAfterContentInit(){this._calendarHeaderPortal=new pC(this.headerComponent||tce),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){const n=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,r=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,s=n||r||e.dateFilter;if(s&&!s.firstChange){const o=this._getCurrentViewComponent();o&&(this._changeDetectorRef.detectChanges(),o._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){const n=e.value;(this.selected instanceof Wi||n&&!this._dateAdapter.sameDate(n,this.selected))&&this.selectedChange.emit(n),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,n){this.activeDate=e,this.currentView=n}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return i.\u0275fac=function(e){return new(e||i)(y(Wf),y(Zn,8),y(so,8),y(Et))},i.\u0275cmp=We({type:i,selectors:[["mat-calendar"]],viewQuery:function(e,n){if(1&e&&(ut(kB,5),ut(FB,5),ut(IB,5)),2&e){let r;he(r=fe())&&(n.monthView=r.first),he(r=fe())&&(n.yearView=r.first),he(r=fe())&&(n.multiYearView=r.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[Me([qle]),jt],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(e,n){1&e&&(Ye(0,Ple,0,0,"ng-template",0),O(1,"div",1),Ye(2,Ole,1,8,"mat-month-view",2),Ye(3,Fle,1,6,"mat-year-view",3),Ye(4,Lle,1,6,"mat-multi-year-view",4),F()),2&e&&(te("cdkPortalOutlet",n._calendarHeaderPortal),J(1),te("ngSwitch",n.currentView),J(1),te("ngSwitchCase","month"),J(1),te("ngSwitchCase","year"),J(1),te("ngSwitchCase","multi-year"))},directives:[kB,FB,IB,au,MM,ll,hh],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}\n'],encapsulation:2,changeDetection:0}),i})();const LB={transformPanel:Gn("transformPanel",[zt("void => enter-dropdown",Yt("120ms cubic-bezier(0, 0, 0.2, 1)",Yl([Be({opacity:0,transform:"scale(1, 0.8)"}),Be({opacity:1,transform:"scale(1, 1)"})]))),zt("void => enter-dialog",Yt("150ms cubic-bezier(0, 0, 0.2, 1)",Yl([Be({opacity:0,transform:"scale(0.7)"}),Be({transform:"none",opacity:1})]))),zt("* => void",Yt("100ms linear",Be({opacity:0})))]),fadeInCalendar:Gn("fadeInCalendar",[Pt("void",Be({opacity:0})),Pt("enter",Be({opacity:1})),zt("void => *",Yt("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let nce=0;const NB=new X("mat-datepicker-scroll-strategy"),rce={provide:NB,deps:[ao],useFactory:function ice(i){return()=>i.scrollStrategies.reposition()}},sce=ro(class{constructor(i){this._elementRef=i}});let oce=(()=>{class i extends sce{constructor(e,n,r,s,o,a){super(e),this._changeDetectorRef=n,this._globalModel=r,this._dateAdapter=s,this._rangeSelectionStrategy=o,this._subscriptions=new yt,this._animationDone=new ge,this._actionsPortal=null,this._closeButtonText=a.closeCalendarLabel}ngOnInit(){this._model=this._actionsPortal?this._globalModel.clone():this._globalModel,this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){const n=this._model.selection,r=e.value,s=n instanceof Wi;if(s&&this._rangeSelectionStrategy){const o=this._rangeSelectionStrategy.selectionFinished(r,n,e.event);this._model.updateSelection(o,this)}else r&&(s||!this._dateAdapter.sameDate(r,n))&&this._model.add(r);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Et),y(Ua),y(Zn),y(yy,8),y(Wf))},i.\u0275cmp=We({type:i,selectors:[["mat-datepicker-content"]],viewQuery:function(e,n){if(1&e&&ut(EC,5),2&e){let r;he(r=fe())&&(n._calendar=r.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(e,n){1&e&&Yp("@transformPanel.done",function(){return n._animationDone.next()}),2&e&&(Xp("@transformPanel",n._animationState),Ke("mat-datepicker-content-touch",n.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[q],decls:5,vars:24,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","yearSelected","monthSelected","viewChanged","_userSelection"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(e,n){if(1&e&&(O(0,"div",0),O(1,"mat-calendar",1),Re("yearSelected",function(s){return n.datepicker._selectYear(s)})("monthSelected",function(s){return n.datepicker._selectMonth(s)})("viewChanged",function(s){return n.datepicker._viewChanged(s)})("_userSelection",function(s){return n._handleUserSelection(s)}),F(),Ye(2,Nle,0,0,"ng-template",2),O(3,"button",3),Re("focus",function(){return n._closeButtonFocused=!0})("blur",function(){return n._closeButtonFocused=!1})("click",function(){return n.datepicker.close()}),et(4),F(),F()),2&e){let r;Ke("mat-datepicker-content-container-with-custom-header",n.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",n._actionsPortal),Ue("aria-modal",!0)("aria-labelledby",null!==(r=n._dialogLabelId)&&void 0!==r?r:void 0),J(1),te("id",n.datepicker.id)("ngClass",n.datepicker.panelClass)("startAt",n.datepicker.startAt)("startView",n.datepicker.startView)("minDate",n.datepicker._getMinDate())("maxDate",n.datepicker._getMaxDate())("dateFilter",n.datepicker._getDateFilter())("headerComponent",n.datepicker.calendarHeaderComponent)("selected",n._getSelected())("dateClass",n.datepicker.dateClass)("comparisonStart",n.comparisonStart)("comparisonEnd",n.comparisonEnd)("@fadeInCalendar","enter"),J(1),te("cdkPortalOutlet",n._actionsPortal),J(1),Ke("cdk-visually-hidden",!n._closeButtonFocused),te("color",n.color||"primary"),J(1),Ai(n._closeButtonText)}},directives:[EC,cu,Vie,ol,au],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}\n"],encapsulation:2,data:{animation:[LB.transformPanel,LB.fadeInCalendar]},changeDetection:0}),i})(),BB=(()=>{class i{constructor(e,n,r,s,o,a,l){this._overlay=e,this._ngZone=n,this._viewContainerRef=r,this._dateAdapter=o,this._dir=a,this._model=l,this._inputStateChanges=yt.EMPTY,this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new ue,this.monthSelected=new ue,this.viewChanged=new ue(!0),this.openedStream=new ue,this.closedStream=new ue,this._opened=!1,this.id="mat-datepicker-"+nce++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new ge,this._scrollStrategy=s}get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}get touchUi(){return this._touchUi}set touchUi(e){this._touchUi=ve(e)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){const n=ve(e);n!==this._disabled&&(this._disabled=n,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(e){this._restoreFocus=ve(e)}get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=function cie(i,t=/\s+/){const e=[];if(null!=i){const n=Array.isArray(i)?i:`${i}`.split(t);for(const r of n){const s=`${r}`.trim();s&&e.push(s)}}return e}(e)}get opened(){return this._opened}set opened(e){ve(e)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}ngOnChanges(e){const n=e.xPosition||e.yPosition;if(n&&!n.firstChange&&this._overlayRef){const r=this._overlayRef.getConfig().positionStrategy;r instanceof Z2&&(this._setConnectedPositions(r),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal=e}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null)}open(){this._opened||this.disabled||(this._focusedElementBeforeOpen=hN(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened)return;if(this._componentRef){const n=this._componentRef.instance;n._startExitAnimation(),n._animationDone.pipe(fn(1)).subscribe(()=>this._destroyOverlay())}const e=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(e)):e()}_applyPendingSelection(){var e,n;null===(n=null===(e=this._componentRef)||void 0===e?void 0:e.instance)||void 0===n||n._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._actionsPortal=this._actionsPortal,e._dialogLabelId=this.datepickerInput.getOverlayLabelId()}_openOverlay(){this._destroyOverlay();const e=this.touchUi,n=new pC(oce,this._viewContainerRef),r=this._overlayRef=this._overlay.create(new my({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(e?"dialog":"popup")}));this._getCloseStream(r).subscribe(s=>{s&&s.preventDefault(),this.close()}),this._componentRef=r.attach(n),this._forwardContentValues(this._componentRef.instance),e||this._ngZone.onStable.pipe(fn(1)).subscribe(()=>r.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){const n="end"===this.xPosition?"end":"start",r="start"===n?"end":"start",s="above"===this.yPosition?"bottom":"top",o="top"===s?"bottom":"top";return e.withPositions([{originX:n,originY:o,overlayX:n,overlayY:s},{originX:n,originY:s,overlayX:n,overlayY:o},{originX:r,originY:o,overlayX:r,overlayY:s},{originX:r,originY:s,overlayX:r,overlayY:o}])}_getCloseStream(e){return gn(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(an(n=>27===n.keyCode&&!Di(n)||this.datepickerInput&&Di(n,"altKey")&&38===n.keyCode)))}}return i.\u0275fac=function(e){return new(e||i)(y(ao),y(Xe),y(Cn),y(NB),y(Zn,8),y(Un,8),y(Ua))},i.\u0275dir=H({type:i,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:"touchUi",disabled:"disabled",xPosition:"xPosition",yPosition:"yPosition",restoreFocus:"restoreFocus",dateClass:"dateClass",panelClass:"panelClass",opened:"opened"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[jt]}),i})();class vy{constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}}let VB=(()=>{class i{constructor(e,n,r){this._elementRef=e,this._dateAdapter=n,this._dateFormats=r,this.dateChange=new ue,this.dateInput=new ue,this.stateChanges=new ge,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=yt.EMPTY,this._localeSubscription=yt.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=s=>{const o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value));return!o||this._matchesFilter(o)?null:{matDatepickerFilter:!0}},this._minValidator=s=>{const o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),a=this._getMinDate();return!a||!o||this._dateAdapter.compareDate(a,o)<=0?null:{matDatepickerMin:{min:a,actual:o}}},this._maxValidator=s=>{const o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),a=this._getMaxDate();return!a||!o||this._dateAdapter.compareDate(a,o)>=0?null:{matDatepickerMax:{max:a,actual:o}}},this._lastValueValid=!1,this._localeSubscription=n.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){const n=ve(e),r=this._elementRef.nativeElement;this._disabled!==n&&(this._disabled=n,this.stateChanges.next(void 0)),n&&this._isInitialized&&r.blur&&r.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(n=>{if(this._shouldHandleChangeEvent(n)){const r=this._getValueFromModel(n.selection);this._lastValueValid=this._isValidValue(r),this._cvaOnChange(r),this._onTouched(),this._formatValue(r),this.dateInput.emit(new vy(this,this._elementRef.nativeElement)),this.dateChange.emit(new vy(this,this._elementRef.nativeElement))}})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){HB(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){e.altKey&&40===e.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){const n=this._lastValueValid;let r=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(r),r=this._dateAdapter.getValidDateOrNull(r);const s=!this._dateAdapter.sameDate(r,this.value);!r||s?this._cvaOnChange(r):(e&&!this.value&&this._cvaOnChange(r),n!==this._lastValueValid&&this._validatorOnChange()),s&&(this._assignValue(r),this.dateInput.emit(new vy(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new vy(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){const n=this._getDateFilter();return!n||n(e)}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Zn,8),y(so,8))},i.\u0275dir=H({type:i,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[jt]}),i})();function HB(i,t){const e=Object.keys(i);for(let n of e){const{previousValue:r,currentValue:s}=i[n];if(!t.isDateInstance(r)||!t.isDateInstance(s))return!0;if(!t.sameDate(r,s))return!0}return!1}let cce=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["","matDatepickerToggleIcon",""]]}),i})(),dce=(()=>{class i{constructor(e,n,r){this._intl=e,this._changeDetectorRef=n,this._stateChanges=yt.EMPTY;const s=Number(r);this.tabIndex=s||0===s?s:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=ve(e)}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.datepicker?this.datepicker.stateChanges:Qe(),n=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:Qe(),r=this.datepicker?gn(this.datepicker.openedStream,this.datepicker.closedStream):Qe();this._stateChanges.unsubscribe(),this._stateChanges=gn(this._intl.changes,e,n,r).subscribe(()=>this._changeDetectorRef.markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(y(Wf),y(Et),ti("tabindex"))},i.\u0275cmp=We({type:i,selectors:[["mat-datepicker-toggle"]],contentQueries:function(e,n,r){if(1&e&&ht(r,cce,5),2&e){let s;he(s=fe())&&(n._customIcon=s.first)}},viewQuery:function(e,n){if(1&e&&ut(Ble,5),2&e){let r;he(r=fe())&&(n._button=r.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(e,n){1&e&&Re("click",function(s){return n._open(s)}),2&e&&(Ue("tabindex",null)("data-mat-calendar",n.datepicker?n.datepicker.id:null),Ke("mat-datepicker-toggle-active",n.datepicker&&n.datepicker.opened)("mat-accent",n.datepicker&&"accent"===n.datepicker.color)("mat-warn",n.datepicker&&"warn"===n.datepicker.color))},inputs:{datepicker:["for","datepicker"],tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],disabled:"disabled",disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[jt],ngContentSelectors:Ule,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(e,n){1&e&&(on(Hle),O(0,"button",0,1),Ye(2,Vle,2,0,"svg",2),rt(3),F()),2&e&&(te("disabled",n.disabled)("disableRipple",n.disableRipple),Ue("aria-haspopup",n.datepicker?"dialog":null)("aria-label",n.ariaLabel||n._intl.openCalendarLabel)("tabindex",n.disabled?-1:n.tabIndex),J(2),te("ngIf",!n._customIcon))},directives:[cu,Ur],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}\n"],encapsulation:2,changeDetection:0}),i})();const by=new X("MAT_DATE_RANGE_INPUT_PARENT"),zB=iC((()=>{class i extends VB{constructor(e,n,r,s,o,a,l,c){super(n,l,c),this._rangeInput=e,this._defaultErrorStateMatcher=r,this._injector=s,this._parentForm=o,this._parentFormGroup=a}ngOnInit(){const e=this._injector.get(_s,null,bt.Self|bt.Optional);e&&(this.ngControl=e)}ngDoCheck(){this.ngControl&&this.updateErrorState()}isEmpty(){return 0===this._elementRef.nativeElement.value.length}_getPlaceholder(){return this._elementRef.nativeElement.placeholder}focus(){this._elementRef.nativeElement.focus()}_onInput(e){super._onInput(e),this._rangeInput._handleChildValueChange()}_openPopup(){this._rangeInput._openDatepicker()}_getMinDate(){return this._rangeInput.min}_getMaxDate(){return this._rangeInput.max}_getDateFilter(){return this._rangeInput.dateFilter}_parentDisabled(){return this._rangeInput._groupDisabled}_shouldHandleChangeEvent({source:e}){return e!==this._rangeInput._startInput&&e!==this._rangeInput._endInput}_assignValueProgrammatically(e){super._assignValueProgrammatically(e);const n=this===this._rangeInput._startInput?this._rangeInput._endInput:this._rangeInput._startInput;null==n||n._validatorOnChange()}}return i.\u0275fac=function(e){return new(e||i)(y(by),y(de),y(Ha),y(kn),y($s,8),y(qs,8),y(Zn,8),y(so,8))},i.\u0275dir=H({type:i,features:[q]}),i})());let GB=(()=>{class i extends zB{constructor(e,n,r,s,o,a,l,c){super(e,n,r,s,o,a,l,c),this._startValidator=d=>{const u=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(d.value)),h=this._model?this._model.selection.end:null;return!u||!h||this._dateAdapter.compareDate(u,h)<=0?null:{matStartDateInvalid:{end:h,actual:u}}},this._validator=Ro.compose([...super._getValidators(),this._startValidator])}_getValueFromModel(e){return e.start}_shouldHandleChangeEvent(e){var n;return!(!super._shouldHandleChangeEvent(e)||((null===(n=e.oldValue)||void 0===n?void 0:n.start)?e.selection.start&&!this._dateAdapter.compareDate(e.oldValue.start,e.selection.start):!e.selection.start))}_assignValueToModel(e){if(this._model){const n=new Wi(e,this._model.selection.end);this._model.updateSelection(n,this)}}_formatValue(e){super._formatValue(e),this._rangeInput._handleChildValueChange()}getMirrorValue(){const e=this._elementRef.nativeElement,n=e.value;return n.length>0?n:e.placeholder}}return i.\u0275fac=function(e){return new(e||i)(y(by),y(de),y(Ha),y(kn),y($s,8),y(qs,8),y(Zn,8),y(so,8))},i.\u0275dir=H({type:i,selectors:[["input","matStartDate",""]],hostAttrs:["type","text",1,"mat-start-date","mat-date-range-input-inner"],hostVars:6,hostBindings:function(e,n){1&e&&Re("input",function(s){return n._onInput(s.target.value)})("change",function(){return n._onChange()})("keydown",function(s){return n._onKeydown(s)})("blur",function(){return n._onBlur()}),2&e&&(hs("disabled",n.disabled),Ue("id",n._rangeInput.id)("aria-haspopup",n._rangeInput.rangePicker?"dialog":null)("aria-owns",(null==n._rangeInput.rangePicker?null:n._rangeInput.rangePicker.opened)&&n._rangeInput.rangePicker.id||null)("min",n._getMinDate()?n._dateAdapter.toIso8601(n._getMinDate()):null)("max",n._getMaxDate()?n._dateAdapter.toIso8601(n._getMaxDate()):null))},inputs:{errorStateMatcher:"errorStateMatcher"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[Me([{provide:si,useExisting:i,multi:!0},{provide:Kn,useExisting:i,multi:!0}]),q]}),i})(),jB=(()=>{class i extends zB{constructor(e,n,r,s,o,a,l,c){super(e,n,r,s,o,a,l,c),this._endValidator=d=>{const u=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(d.value)),h=this._model?this._model.selection.start:null;return!u||!h||this._dateAdapter.compareDate(u,h)>=0?null:{matEndDateInvalid:{start:h,actual:u}}},this._validator=Ro.compose([...super._getValidators(),this._endValidator])}_getValueFromModel(e){return e.end}_shouldHandleChangeEvent(e){var n;return!(!super._shouldHandleChangeEvent(e)||((null===(n=e.oldValue)||void 0===n?void 0:n.end)?e.selection.end&&!this._dateAdapter.compareDate(e.oldValue.end,e.selection.end):!e.selection.end))}_assignValueToModel(e){if(this._model){const n=new Wi(this._model.selection.start,e);this._model.updateSelection(n,this)}}_onKeydown(e){8===e.keyCode&&!this._elementRef.nativeElement.value&&this._rangeInput._startInput.focus(),super._onKeydown(e)}}return i.\u0275fac=function(e){return new(e||i)(y(by),y(de),y(Ha),y(kn),y($s,8),y(qs,8),y(Zn,8),y(so,8))},i.\u0275dir=H({type:i,selectors:[["input","matEndDate",""]],hostAttrs:["type","text",1,"mat-end-date","mat-date-range-input-inner"],hostVars:5,hostBindings:function(e,n){1&e&&Re("input",function(s){return n._onInput(s.target.value)})("change",function(){return n._onChange()})("keydown",function(s){return n._onKeydown(s)})("blur",function(){return n._onBlur()}),2&e&&(hs("disabled",n.disabled),Ue("aria-haspopup",n._rangeInput.rangePicker?"dialog":null)("aria-owns",(null==n._rangeInput.rangePicker?null:n._rangeInput.rangePicker.opened)&&n._rangeInput.rangePicker.id||null)("min",n._getMinDate()?n._dateAdapter.toIso8601(n._getMinDate()):null)("max",n._getMaxDate()?n._dateAdapter.toIso8601(n._getMaxDate()):null))},inputs:{errorStateMatcher:"errorStateMatcher"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[Me([{provide:si,useExisting:i,multi:!0},{provide:Kn,useExisting:i,multi:!0}]),q]}),i})(),uce=0,hce=(()=>{class i{constructor(e,n,r,s,o){if(this._changeDetectorRef=e,this._elementRef=n,this._dateAdapter=s,this._formField=o,this._closedSubscription=yt.EMPTY,this.id="mat-date-range-input-"+uce++,this.focused=!1,this.controlType="mat-date-range-input",this._groupDisabled=!1,this._ariaDescribedBy=null,this.separator="\u2013",this.comparisonStart=null,this.comparisonEnd=null,this.stateChanges=new ge,null==o?void 0:o._elementRef.nativeElement.classList.contains("mat-mdc-form-field")){const a=n.nativeElement.classList;a.add("mat-mdc-input-element"),a.add("mat-mdc-form-field-input-control")}this.ngControl=r}get value(){return this._model?this._model.selection:null}get shouldLabelFloat(){return this.focused||!this.empty}get placeholder(){var e,n;const r=(null===(e=this._startInput)||void 0===e?void 0:e._getPlaceholder())||"",s=(null===(n=this._endInput)||void 0===n?void 0:n._getPlaceholder())||"";return r||s?`${r} ${this.separator} ${s}`:""}get rangePicker(){return this._rangePicker}set rangePicker(e){e&&(this._model=e.registerInput(this),this._rangePicker=e,this._closedSubscription.unsubscribe(),this._closedSubscription=e.closedStream.subscribe(()=>{var n,r;null===(n=this._startInput)||void 0===n||n._onTouched(),null===(r=this._endInput)||void 0===r||r._onTouched()}),this._registerModel(this._model))}get required(){return!!this._required}set required(e){this._required=ve(e)}get dateFilter(){return this._dateFilter}set dateFilter(e){const n=this._startInput,r=this._endInput,s=n&&n._matchesFilter(n.value),o=r&&r._matchesFilter(n.value);this._dateFilter=e,n&&n._matchesFilter(n.value)!==s&&n._validatorOnChange(),r&&r._matchesFilter(r.value)!==o&&r._validatorOnChange()}get min(){return this._min}set min(e){const n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(n,this._min)||(this._min=n,this._revalidate())}get max(){return this._max}set max(e){const n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(n,this._max)||(this._max=n,this._revalidate())}get disabled(){return this._startInput&&this._endInput?this._startInput.disabled&&this._endInput.disabled:this._groupDisabled}set disabled(e){const n=ve(e);n!==this._groupDisabled&&(this._groupDisabled=n,this.stateChanges.next(void 0))}get errorState(){return!(!this._startInput||!this._endInput)&&(this._startInput.errorState||this._endInput.errorState)}get empty(){const e=!!this._startInput&&this._startInput.isEmpty(),n=!!this._endInput&&this._endInput.isEmpty();return e&&n}setDescribedByIds(e){this._ariaDescribedBy=e.length?e.join(" "):null}onContainerClick(){!this.focused&&!this.disabled&&(this._model&&this._model.selection.start?this._endInput.focus():this._startInput.focus())}ngAfterContentInit(){this._model&&this._registerModel(this._model),gn(this._startInput.stateChanges,this._endInput.stateChanges).subscribe(()=>{this.stateChanges.next(void 0)})}ngOnChanges(e){HB(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._closedSubscription.unsubscribe(),this.stateChanges.complete()}getStartValue(){return this.value?this.value.start:null}getThemePalette(){return this._formField?this._formField.color:void 0}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():null}_getInputMirrorValue(){return this._startInput?this._startInput.getMirrorValue():""}_shouldHidePlaceholders(){return!!this._startInput&&!this._startInput.isEmpty()}_handleChildValueChange(){this.stateChanges.next(void 0),this._changeDetectorRef.markForCheck()}_openDatepicker(){this._rangePicker&&this._rangePicker.open()}_shouldHideSeparator(){return(!this._formField||this._formField.getLabelId()&&!this._formField._shouldLabelFloat())&&this.empty}_getAriaLabelledby(){const e=this._formField;return e&&e._hasFloatingLabel()?e._labelId:null}_updateFocus(e){this.focused=null!==e,this.stateChanges.next()}_revalidate(){this._startInput&&this._startInput._validatorOnChange(),this._endInput&&this._endInput._validatorOnChange()}_registerModel(e){this._startInput&&this._startInput._registerModel(e),this._endInput&&this._endInput._registerModel(e)}}return i.\u0275fac=function(e){return new(e||i)(y(Et),y(de),y(Ui,10),y(Zn,8),y(Nf,8))},i.\u0275cmp=We({type:i,selectors:[["mat-date-range-input"]],contentQueries:function(e,n,r){if(1&e&&(ht(r,GB,5),ht(r,jB,5)),2&e){let s;he(s=fe())&&(n._startInput=s.first),he(s=fe())&&(n._endInput=s.first)}},hostAttrs:["role","group",1,"mat-date-range-input"],hostVars:8,hostBindings:function(e,n){2&e&&(Ue("id",null)("aria-labelledby",n._getAriaLabelledby())("aria-describedby",n._ariaDescribedBy)("data-mat-calendar",n.rangePicker?n.rangePicker.id:null),Ke("mat-date-range-input-hide-placeholders",n._shouldHidePlaceholders())("mat-date-range-input-required",n.required))},inputs:{rangePicker:"rangePicker",required:"required",dateFilter:"dateFilter",min:"min",max:"max",disabled:"disabled",separator:"separator",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},exportAs:["matDateRangeInput"],features:[Me([{provide:Lf,useExisting:i},{provide:by,useExisting:i}]),jt],ngContentSelectors:Gle,decls:9,vars:4,consts:[["cdkMonitorSubtreeFocus","",1,"mat-date-range-input-container",3,"cdkFocusChange"],[1,"mat-date-range-input-start-wrapper"],["aria-hidden","true",1,"mat-date-range-input-mirror"],[1,"mat-date-range-input-separator"],[1,"mat-date-range-input-end-wrapper"]],template:function(e,n){1&e&&(on(zle),O(0,"div",0),Re("cdkFocusChange",function(s){return n._updateFocus(s)}),O(1,"div",1),rt(2),O(3,"span",2),et(4),F(),F(),O(5,"span",3),et(6),F(),O(7,"div",4),rt(8,1),F(),F()),2&e&&(J(4),Ai(n._getInputMirrorValue()),J(1),Ke("mat-date-range-input-separator-hidden",n._shouldHideSeparator()),J(1),Ai(n.separator))},directives:[MM],styles:[".mat-date-range-input{display:block;width:100%}.mat-date-range-input-container{display:flex;align-items:center}.mat-date-range-input-separator{transition:opacity 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);margin:0 4px}.mat-date-range-input-separator-hidden{-webkit-user-select:none;user-select:none;opacity:0;transition:none}.mat-date-range-input-inner{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;vertical-align:bottom;text-align:inherit;-webkit-appearance:none;width:100%}.mat-date-range-input-inner:-moz-ui-invalid{box-shadow:none}.mat-date-range-input-inner::placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner::-moz-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner::-webkit-input-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner:-ms-input-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-date-range-input-inner::placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::placeholder{-webkit-user-select:none;user-select:none;color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner::placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-date-range-input-inner::-moz-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-moz-placeholder{-webkit-user-select:none;user-select:none;color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner::-moz-placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-date-range-input-inner::-webkit-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner::-webkit-input-placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-date-range-input-inner:-ms-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner:-ms-input-placeholder{-webkit-user-select:none;user-select:none;color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner:-ms-input-placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner:-ms-input-placeholder{opacity:0}.mat-date-range-input-mirror{-webkit-user-select:none;user-select:none;visibility:hidden;white-space:nowrap;display:inline-block;min-width:2px}.mat-date-range-input-start-wrapper{position:relative;overflow:hidden;max-width:calc(50% - 4px)}.mat-date-range-input-start-wrapper .mat-date-range-input-inner{position:absolute;top:0;left:0}.mat-date-range-input-end-wrapper{flex-grow:1;max-width:calc(50% - 4px)}.mat-form-field-type-mat-date-range-input .mat-form-field-infix{width:200px}\n"],encapsulation:2,changeDetection:0}),i})(),fce=(()=>{class i extends BB{_forwardContentValues(e){super._forwardContentValues(e);const n=this.datepickerInput;n&&(e.comparisonStart=n.comparisonStart,e.comparisonEnd=n.comparisonEnd)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=xe(i)))(n||i)}}(),i.\u0275cmp=We({type:i,selectors:[["mat-date-range-picker"]],exportAs:["matDateRangePicker"],features:[Me([Kle,Zle,{provide:BB,useExisting:i}]),q],decls:0,vars:0,template:function(e,n){},encapsulation:2,changeDetection:0}),i})(),WB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[Wf,rce],imports:[[ri,nc,tc,G_,Jl,He],oo]}),i})();function pce(i,t){1&i&&(O(0,"mat-error"),et(1,"Invalid start date "),F())}function mce(i,t){1&i&&(O(0,"mat-error"),et(1,"Invalid end date"),F())}let gce=(()=>{class i{constructor(){this.items=["Train","Predict"],this.trainDateRange=new kh({start:new cd("",[Ro.required]),end:new cd("",[Ro.required])}),this.step=0}setStep(e){this.step=e}nextStep(){this.step++}prevStep(){this.step--}ngOnInit(){console.log(this.digitalTwin)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=We({type:i,selectors:[["app-predict"]],inputs:{digitalTwin:"digitalTwin"},decls:33,vars:11,consts:[[1,"example-headers-align"],["hideToggle","",3,"expanded","opened"],[1,"custom-expansion-header"],["appearance","fill"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["mat-button","",1,"button-basic",3,"disabled"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"]],template:function(e,n){if(1&e&&(O(0,"mat-accordion",0),O(1,"mat-expansion-panel",1),Re("opened",function(){return n.setStep(0)}),O(2,"mat-expansion-panel-header",2),O(3,"mat-panel-title"),et(4," Train data "),F(),F(),O(5,"mat-form-field",3),O(6,"mat-label"),et(7,"Select Training data time range"),F(),O(8,"mat-date-range-input",4),Ne(9,"input",5),Ne(10,"input",6),F(),O(11,"mat-hint"),et(12,"MM/DD/YYYY \u2013 MM/DD/YYYY"),F(),Ne(13,"mat-datepicker-toggle",7),Ne(14,"mat-date-range-picker",null,8),Ye(16,pce,2,0,"mat-error",9),Ye(17,mce,2,0,"mat-error",9),F(),O(18,"p"),et(19),function T1(i,t){const e=qt();let n;const r=i+20;e.firstCreatePass?(n=function M8(i,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(i===n.name)return n}}(t,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const s=n.factory||(n.factory=Ja(n.type)),o=ea(y);try{const a=Sp(!1),l=s();return Sp(a),function W5(i,t,e,n){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),t[e]=n}(e,ce(),r,l),l}finally{ea(o)}}(20,"json"),F(),O(21,"button",10),et(22,"Get Training Data"),F(),O(23,"mat-action-row"),O(24,"button",11),Re("click",function(){return n.nextStep()}),et(25,"Next"),F(),F(),F(),O(26,"mat-expansion-panel",1),Re("opened",function(){return n.setStep(1)}),O(27,"mat-expansion-panel-header",2),O(28,"mat-panel-title"),et(29," Result "),F(),F(),O(30,"mat-action-row"),O(31,"button",12),Re("click",function(){return n.prevStep()}),et(32,"Previous"),F(),F(),F(),F()),2&e){const r=vr(15);J(1),te("expanded",0===n.step),J(7),te("formGroup",n.trainDateRange)("rangePicker",r),J(5),te("for",r),J(3),te("ngIf",n.trainDateRange.controls.start.hasError("matStartDateInvalid")),J(1),te("ngIf",n.trainDateRange.controls.end.hasError("matEndDateInvalid")),J(2),Br("Selected range: ",function R1(i,t,e){const n=i+20,r=ce(),s=fc(r,n);return function ah(i,t){return i[1].data[t].pure}(r,n)?C1(r,Yi(),t,s.transform,e,s):s.transform(e)}(20,9,n.trainDateRange.value),""),J(2),te("disabled",n.trainDateRange.invalid),J(5),te("expanded",1===n.step)}},directives:[Cle,SB,DB,Mle,z2,uy,hce,Eh,qs,GB,Km,d0,sg,jB,doe,dce,foe,fce,Ur,aoe,cu,ble],pipes:[$R],styles:[""]}),i})();const _ce=["container"];let yce=(()=>{class i{constructor(e,n){this.scene=e,this.route=n,this.machineId="",this.machine=null,this.route.params.subscribe(r=>{this.machineId=r.id}),this.machine=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem(this.machineId))))}ngOnInit(){}set container(e){const n=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem(this.machineId))));this.scene.initialize(e.nativeElement,n)}}return i.\u0275fac=function(e){return new(e||i)(y(rM),y(fa))},i.\u0275cmp=We({type:i,selectors:[["app-digital-twin-overview"]],viewQuery:function(e,n){if(1&e&&ut(_ce,5),2&e){let r;he(r=fe())&&(n.container=r.first)}},decls:12,vars:2,consts:[["fxLayout","row","fxLayoutAlign","space-between start",1,"main-content"],["fxFlex","50",1,"viewer"],[1,"container"],["container",""],[1,"loading-screen"],["id","loader"],["fxFlex","49",1,"right-content"],["animationDuration","1000ms"],["label","Overview"],[3,"digitalTwin"],["label","Predict"]],template:function(e,n){1&e&&(O(0,"div",0),O(1,"div",1),Ne(2,"div",2,3),O(4,"div",4),Ne(5,"div",5),F(),F(),O(6,"div",6),O(7,"mat-tab-group",7),O(8,"mat-tab",8),Ne(9,"app-overview",9),F(),O(10,"mat-tab",10),Ne(11,"app-predict",9),F(),F(),F(),F()),2&e&&(J(9),te("digitalTwin",n.machine),J(2),te("digitalTwin",n.machine))},directives:[Cf,hM,Sf,sle,mB,ole,gce],styles:[".example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.example-tree[_ngcontent-%COMP%]   .mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{padding-left:40px}.example-tree[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%] > .mat-tree-node[_ngcontent-%COMP%]{padding-left:40px}.viewer[_ngcontent-%COMP%], .main-content[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{height:100%}.loading-screen[_ngcontent-%COMP%]{width:50%}.right-content[_ngcontent-%COMP%]{background-color:#fff;height:100%}"]}),i})();const vce=["*",[["mat-card-footer"]]],bce=["*","mat-card-footer"],xce=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],wce=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let $B=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),i})(),qB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),i})(),YB=(()=>{class i{constructor(e){this._animationMode=e}}return i.\u0275fac=function(e){return new(e||i)(y(jn,8))},i.\u0275cmp=We({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,n){2&e&&Ke("_mat-animation-noopable","NoopAnimations"===n._animationMode)},exportAs:["matCard"],ngContentSelectors:bce,decls:2,vars:0,template:function(e,n){1&e&&(on(vce),rt(0),rt(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),i})(),KB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=We({type:i,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:wce,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(e,n){1&e&&(on(xce),rt(0),O(1,"div",0),rt(2,1),F(),rt(3,2))},encapsulation:2,changeDetection:0}),i})(),XB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[He],He]}),i})();function Mce(i,t){if(1&i){const e=br();O(0,"div",7),O(1,"mat-card",8),Re("click",function(){const s=qn(e).$implicit;return Je().navigateTo(s)}),O(2,"mat-card-header"),O(3,"mat-card-title"),et(4),F(),F(),Ne(5,"img",9),F(),F()}if(2&i){const e=t.$implicit;te("fxFlex","25%"),J(4),Ai(e.name),J(1),te("src",e.imageUrl,Uu)}}let Cce=(()=>{class i{constructor(e){this.router=e,this.machineList=[{id:"kuka",name:"KukaRobot",imageUrl:"./assets/images/kuka.png",modelUrl:"./assets/3dmodels/kuka.glb",modelPosition:new C(0,-1,0),modelScale:new C(.01,.01,.01)},{id:"turbo",name:"Turbofan Engine",imageUrl:"./assets/images/turbo.png",modelUrl:"./assets/3dmodels/turbo.glb",modelPosition:new C(0,0,0),modelScale:new C(.5,.5,.5)}],this.filteredList=[]}ngOnInit(){}navigateTo(e){localStorage.setItem(e.id,JSON.stringify(e)),this.router.navigateByUrl(`/digital-twin/${e.id}`,{state:e})}search(e){const n=e.target.value;this.filteredList=this.machineList.filter(r=>{if(r.name.toLowerCase().includes(n))return r})}}return i.\u0275fac=function(e){return new(e||i)(y(er))},i.\u0275cmp=We({type:i,selectors:[["app-digital-twin"]],decls:7,vars:1,consts:[[1,"machine-select"],[1,"search-container"],["type","text","id","search-bar","placeholder","Search..."],["href","#"],["src","http://www.endlessicons.com/wp-content/uploads/2012/12/search-icon.png",1,"search-icon"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex.xs","100%","fxFlex.sm","33%",3,"fxFlex",4,"ngFor","ngForOf"],["fxFlex.xs","100%","fxFlex.sm","33%",3,"fxFlex"],[1,"card",3,"click"],["matCardImage","",1,"card-image",3,"src"]],template:function(e,n){1&e&&(O(0,"section",0),O(1,"form",1),Ne(2,"input",2),O(3,"a",3),Ne(4,"img",4),F(),F(),O(5,"div",5),Ye(6,Mce,6,3,"div",6),F(),F()),2&e&&(J(6),te("ngForOf",n.machineList))},directives:[rg,Eh,$s,Cf,uM,al,Sf,YB,KB,$B,qB],styles:[".card[_ngcontent-%COMP%]{cursor:pointer;box-shadow:8px 14px 38px #272c310f,1px 3px 8px #272c3108;transition:all .5s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-1px) scale(1.03)}.container[_ngcontent-%COMP%]{width:100%}.search-container[_ngcontent-%COMP%]{width:490px;display:block;margin:0 auto}input#search-bar[_ngcontent-%COMP%]{margin:20px auto;width:100%;height:45px;padding:0 20px;font-size:1rem;border:1px solid #D0CFCE;outline:none}input#search-bar[_ngcontent-%COMP%]:focus{border:1px solid #008ABF;transition:.35s ease;color:#008abf}input#search-bar[_ngcontent-%COMP%]:focus::-webkit-input-placeholder{-webkit-transition:opacity .45s ease;transition:opacity .45s ease;opacity:0}input#search-bar[_ngcontent-%COMP%]:focus::-moz-placeholder{-moz-transition:opacity .45s ease;transition:opacity .45s ease;opacity:0}input#search-bar[_ngcontent-%COMP%]:focus:-ms-placeholder{-ms-transition:opacity .45s ease;transition:opacity .45s ease;opacity:0}.card-image[_ngcontent-%COMP%]{height:285px}"]}),i})();function Dce(i,t){if(1&i){const e=br();O(0,"div",7),O(1,"mat-card",8),Re("click",function(){const s=qn(e).$implicit;return Je().navigateTo(s)}),O(2,"mat-card-header"),O(3,"mat-card-title"),et(4),F(),F(),Ne(5,"img",9),F(),F()}if(2&i){const e=t.$implicit;te("fxFlex","25%"),J(4),Ai(e.name),J(1),te("src",e.imageUrl,Uu)}}const Ece=[{path:"",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=We({type:i,selectors:[["app-home"]],decls:16,vars:0,consts:[["width","380px","height","500px","viewBox","0 0 837 1045","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xmlns","sketch","http://www.bohemiancoding.com/sketch/ns"],["id","Page-1","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd",0,"sketch","type","MSPage"],["d","M353,9 L626.664028,170 L626.664028,487 L353,642 L79.3359724,487 L79.3359724,170 L353,9 Z","id","Polygon-1","stroke","#007FB2","stroke-width","6",0,"sketch","type","MSShapeGroup"],["d","M78.5,529 L147,569.186414 L147,648.311216 L78.5,687 L10,648.311216 L10,569.186414 L78.5,529 Z","id","Polygon-2","stroke","#EF4A5B","stroke-width","6",0,"sketch","type","MSShapeGroup"],["d","M773,186 L827,217.538705 L827,279.636651 L773,310 L719,279.636651 L719,217.538705 L773,186 Z","id","Polygon-3","stroke","#795D9C","stroke-width","6",0,"sketch","type","MSShapeGroup"],["d","M639,529 L773,607.846761 L773,763.091627 L639,839 L505,763.091627 L505,607.846761 L639,529 Z","id","Polygon-4","stroke","#F2773F","stroke-width","6",0,"sketch","type","MSShapeGroup"],["d","M281,801 L383,861.025276 L383,979.21169 L281,1037 L179,979.21169 L179,861.025276 L281,801 Z","id","Polygon-5","stroke","#36B455","stroke-width","6",0,"sketch","type","MSShapeGroup"],[1,"message-box"],[1,"buttons-con"],[1,"action-link-wrap"],["routerLink","/create",1,"link-button","link-back-button"],[1,"link-button"]],template:function(e,n){1&e&&(sa(),O(0,"svg",0),O(1,"g",1),Ne(2,"path",2),Ne(3,"path",3),Ne(4,"path",4),Ne(5,"path",5),Ne(6,"path",6),F(),F(),vp(),O(7,"div",7),O(8,"h1"),et(9,"Data twin"),F(),O(10,"div",8),O(11,"div",9),O(12,"a",10),et(13,"Get Started"),F(),O(14,"a",11),et(15,"Learn more about it"),F(),F(),F(),F())},directives:[Ym],styles:["[_nghost-%COMP%]{background-color:#5a5c6c}svg[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;margin-top:-250px;margin-left:-400px}.message-box[_ngcontent-%COMP%]{height:200px;width:380px;position:absolute;top:50%;left:50%;margin-top:-100px;margin-left:50px;color:#fff;font-family:Roboto;font-weight:300}.message-box[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px;line-height:46px;margin-bottom:40px}.buttons-con[_ngcontent-%COMP%]   .action-link-wrap[_ngcontent-%COMP%]{margin-top:40px}.buttons-con[_ngcontent-%COMP%]   .action-link-wrap[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:#68c950;padding:8px 25px;border-radius:4px;color:#fff;font-weight:700;font-size:14px;transition:all .3s linear;cursor:pointer;text-decoration:none;margin-right:10px}.buttons-con[_ngcontent-%COMP%]   .action-link-wrap[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#5A5C6C;color:#fff}#Polygon-1[_ngcontent-%COMP%], #Polygon-2[_ngcontent-%COMP%], #Polygon-3[_ngcontent-%COMP%], #Polygon-4[_ngcontent-%COMP%], #Polygon-4[_ngcontent-%COMP%], #Polygon-5[_ngcontent-%COMP%]{animation:float 1s infinite ease-in-out alternate}#Polygon-2[_ngcontent-%COMP%]{animation-delay:.2s}#Polygon-3[_ngcontent-%COMP%]{animation-delay:.4s}#Polygon-4[_ngcontent-%COMP%]{animation-delay:.6s}#Polygon-5[_ngcontent-%COMP%]{animation-delay:.8s}@keyframes float{to{transform:translateY(20px)}}@media (max-width: 450px){svg[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;margin-top:-250px;margin-left:-190px}.message-box[_ngcontent-%COMP%]{top:50%;left:50%;margin-top:-100px;margin-left:-190px;text-align:center}}"]}),i})()},{path:"create",component:(()=>{class i{constructor(e){this.router=e,this.machineList=[{id:"kuka",name:"KukaRobot",imageUrl:"./assets/images/kuka.png",modelUrl:"./assets/3dmodels/kuka.glb",modelPosition:new C(0,-1,0),modelScale:new C(.01,.01,.01)},{id:"turbo",name:"Turbofan Engine",imageUrl:"./assets/images/turbo.png",modelUrl:"./assets/3dmodels/turbo.glb",modelPosition:new C(0,0,0),modelScale:new C(.5,.5,.5)}],this.filteredList=[]}ngOnInit(){this.filteredList=this.machineList}navigateTo(e){localStorage.setItem(e.id,JSON.stringify(e)),this.router.navigateByUrl(`/create/${e.id}`)}search(e){const n=e.target.value;this.filteredList=this.machineList.filter(r=>{if(r.name.toLowerCase().includes(n))return r})}}return i.\u0275fac=function(e){return new(e||i)(y(er))},i.\u0275cmp=We({type:i,selectors:[["app-machine-selection"]],decls:7,vars:1,consts:[[1,"machine-select"],[1,"search-container"],["type","text","id","search-bar","placeholder","Search...",3,"keyup"],["href","#"],["src","http://www.endlessicons.com/wp-content/uploads/2012/12/search-icon.png",1,"search-icon"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex.xs","100%","fxFlex.sm","33%",3,"fxFlex",4,"ngFor","ngForOf"],["fxFlex.xs","100%","fxFlex.sm","33%",3,"fxFlex"],[1,"card",3,"click"],["matCardImage","",1,"card-image",3,"src"]],template:function(e,n){1&e&&(O(0,"section",0),O(1,"form",1),O(2,"input",2),Re("keyup",function(s){return n.search(s)}),F(),O(3,"a",3),Ne(4,"img",4),F(),F(),O(5,"div",5),Ye(6,Dce,6,3,"div",6),F(),F()),2&e&&(J(6),te("ngForOf",n.filteredList))},directives:[rg,Eh,$s,Cf,uM,al,Sf,YB,KB,$B,qB],styles:[".card[_ngcontent-%COMP%]{cursor:pointer;box-shadow:8px 14px 38px #272c310f,1px 3px 8px #272c3108;transition:all .5s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-1px) scale(1.03)}.container[_ngcontent-%COMP%]{width:100%}.search-container[_ngcontent-%COMP%]{width:490px;display:block;margin:0 auto}input#search-bar[_ngcontent-%COMP%]{margin:20px auto;width:100%;height:45px;padding:0 20px;font-size:1rem;border:1px solid #D0CFCE;outline:none}input#search-bar[_ngcontent-%COMP%]:focus{border:1px solid #008ABF;transition:.35s ease;color:#008abf}input#search-bar[_ngcontent-%COMP%]:focus::-webkit-input-placeholder{-webkit-transition:opacity .45s ease;transition:opacity .45s ease;opacity:0}input#search-bar[_ngcontent-%COMP%]:focus::-moz-placeholder{-moz-transition:opacity .45s ease;transition:opacity .45s ease;opacity:0}input#search-bar[_ngcontent-%COMP%]:focus:-ms-placeholder{-ms-transition:opacity .45s ease;transition:opacity .45s ease;opacity:0}.search-icon[_ngcontent-%COMP%]{position:relative;float:right;width:75px;height:75px;top:-80px;right:-45px}.card-image[_ngcontent-%COMP%]{height:285px}"]}),i})()},{path:"create/:id",component:Mae},{path:"digital-twin",component:Cce},{path:"digital-twin/:id",component:yce}];let Ace=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[mI.forRoot(Ece)],mI]}),i})();function AC(i){return Dt(()=>i)}const QB=["*"],Tce=["content"];function Rce(i,t){if(1&i){const e=br();O(0,"div",2),Re("click",function(){return qn(e),Je()._onBackdropClicked()}),F()}2&i&&Ke("mat-drawer-shown",Je()._isShowingBackdrop())}function kce(i,t){1&i&&(O(0,"mat-drawer-content"),rt(1,2),F())}const Ice=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Pce=["mat-drawer","mat-drawer-content","*"],Oce={transformDrawer:Gn("transform",[Pt("open, open-instant",Be({transform:"none",visibility:"visible"})),Pt("void",Be({"box-shadow":"none",visibility:"hidden"})),zt("void => open-instant",Yt("0ms")),zt("void <=> open, open-instant => void",Yt("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Fce=new X("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Lce(){return!1}}),ZB=new X("MAT_DRAWER_CONTAINER");let TC=(()=>{class i extends uC{constructor(e,n,r,s,o){super(r,s,o),this._changeDetectorRef=e,this._container=n}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(e){return new(e||i)(y(Et),y(Tt(()=>eV)),y(de),y(dC),y(Xe))},i.\u0275cmp=We({type:i,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,n){2&e&&Hi("margin-left",n._container._contentMargins.left,"px")("margin-right",n._container._contentMargins.right,"px")},features:[Me([{provide:uC,useExisting:i}]),q],ngContentSelectors:QB,decls:1,vars:0,template:function(e,n){1&e&&(on(),rt(0))},encapsulation:2,changeDetection:0}),i})(),JB=(()=>{class i{constructor(e,n,r,s,o,a,l,c){this._elementRef=e,this._focusTrapFactory=n,this._focusMonitor=r,this._platform=s,this._ngZone=o,this._interactivityChecker=a,this._doc=l,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ge,this._animationEnd=new ge,this._animationState="void",this.openedChange=new ue(!0),this._openedStream=this.openedChange.pipe(an(d=>d),Dt(()=>{})),this.openedStart=this._animationStarted.pipe(an(d=>d.fromState!==d.toState&&0===d.toState.indexOf("open")),AC(void 0)),this._closedStream=this.openedChange.pipe(an(d=>!d),Dt(()=>{})),this.closedStart=this._animationStarted.pipe(an(d=>d.fromState!==d.toState&&"void"===d.toState),AC(void 0)),this._destroyed=new ge,this.onPositionChanged=new ue,this._modeChanged=new ge,this.openedChange.subscribe(d=>{d?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{es(this._elementRef.nativeElement,"keydown").pipe(an(d=>27===d.keyCode&&!this.disableClose&&!Di(d)),it(this._destroyed)).subscribe(d=>this._ngZone.run(()=>{this.close(),d.stopPropagation(),d.preventDefault()}))}),this._animationEnd.pipe(If((d,u)=>d.fromState===u.fromState&&d.toState===u.toState)).subscribe(d=>{const{fromState:u,toState:h}=d;(0===h.indexOf("open")&&"void"===u||"void"===h&&0===u.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=ve(e)}get autoFocus(){const e=this._autoFocus;return null==e?"side"===this.mode?"dialog":"first-tabbable":e}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=ve(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(ve(e))}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{!n&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var e;this._focusTrap&&this._focusTrap.destroy(),null===(e=this._anchor)||void 0===e||e.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,n){e&&n&&(this._openedVia=n);const r=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),r}_setOpen(e,n,r){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",n&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(fn(1)).subscribe(o=>s(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(e){const n=this._elementRef.nativeElement,r=n.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,n)),r.appendChild(n)):this._anchor&&this._anchor.parentNode.insertBefore(n,this._anchor)}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(vN),y(no),y(Si),y(Xe),y(gN),y(nt,8),y(ZB,8))},i.\u0275cmp=We({type:i,selectors:[["mat-drawer"]],viewQuery:function(e,n){if(1&e&&ut(Tce,5),2&e){let r;he(r=fe())&&(n._content=r.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,n){1&e&&Yp("@transform.start",function(s){return n._animationStarted.next(s)})("@transform.done",function(s){return n._animationEnd.next(s)}),2&e&&(Ue("align",null),Xp("@transform",n._animationState),Ke("mat-drawer-end","end"===n.position)("mat-drawer-over","over"===n.mode)("mat-drawer-push","push"===n.mode)("mat-drawer-side","side"===n.mode)("mat-drawer-opened",n.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:QB,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,n){1&e&&(on(),O(0,"div",0,1),rt(2),F())},directives:[uC],encapsulation:2,data:{animation:[Oce.transformDrawer]},changeDetection:0}),i})(),eV=(()=>{class i{constructor(e,n,r,s,o,a=!1,l){this._dir=e,this._element=n,this._ngZone=r,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new da,this.backdropClick=new ue,this._destroyed=new ge,this._doCheckSubject=new ge,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ge,e&&e.change.pipe(it(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(it(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=ve(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:ve(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(yi(this._allDrawers),it(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(n=>!n._container||n._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(yi(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(mM(10),it(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();e+=r,n-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();n+=r,e-=r}e=e||null,n=n||null,(e!==this._contentMargins.left||n!==this._contentMargins.right)&&(this._contentMargins={left:e,right:n},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(an(n=>n.fromState!==n.toState),it(this._drawers.changes)).subscribe(n=>{"open-instant"!==n.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(it(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe(it(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(fn(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(it(gn(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const n=this._element.nativeElement.classList,r="mat-drawer-container-has-open";e?n.add(r):n.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return i.\u0275fac=function(e){return new(e||i)(y(Un,8),y(de),y(Xe),y(Et),y(Rs),y(Fce),y(jn,8))},i.\u0275cmp=We({type:i,selectors:[["mat-drawer-container"]],contentQueries:function(e,n,r){if(1&e&&(ht(r,TC,5),ht(r,JB,5)),2&e){let s;he(s=fe())&&(n._content=s.first),he(s=fe())&&(n._allDrawers=s)}},viewQuery:function(e,n){if(1&e&&ut(TC,5),2&e){let r;he(r=fe())&&(n._userContent=r.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,n){2&e&&Ke("mat-drawer-container-explicit-backdrop",n._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Me([{provide:ZB,useExisting:i}])],ngContentSelectors:Pce,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,n){1&e&&(on(Ice),Ye(0,Rce,1,2,"div",0),rt(1),rt(2,1),Ye(3,kce,2,0,"mat-drawer-content",1)),2&e&&(te("ngIf",n.hasBackdrop),J(3),te("ngIf",!n._content))},directives:[TC,Ur],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),i})(),RC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[ri,He,oo],oo,He]}),i})();class tV{}class nV{}class Ko{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),s=r.toLowerCase(),o=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ko?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Ko;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ko?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Bce{encodeKey(t){return iV(t)}encodeValue(t){return iV(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Hce=/%(\d[a-f0-9])/gi,Uce={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function iV(i){return encodeURIComponent(i).replace(Hce,(t,e)=>{var n;return null!==(n=Uce[e])&&void 0!==n?n:t})}function rV(i){return`${i}`}class za{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Bce,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Vce(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new za({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(rV(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(rV(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class zce{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function sV(i){return"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer}function oV(i){return"undefined"!=typeof Blob&&i instanceof Blob}function aV(i){return"undefined"!=typeof FormData&&i instanceof FormData}class $f{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Gce(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ko),this.context||(this.context=new zce),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new za,this.urlWithParams=e}serializeBody(){return null===this.body?null:sV(this.body)||oV(this.body)||aV(this.body)||function jce(i){return"undefined"!=typeof URLSearchParams&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof za?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||aV(this.body)?null:oV(this.body)?this.body.type||null:sV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof za?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,s=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let c=t.headers||this.headers,d=t.params||this.params;const u=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(c=Object.keys(t.setHeaders).reduce((h,f)=>h.set(f,t.setHeaders[f]),c)),t.setParams&&(d=Object.keys(t.setParams).reduce((h,f)=>h.set(f,t.setParams[f]),d)),new $f(n,r,o,{params:d,headers:c,context:u,reportProgress:l,responseType:s,withCredentials:a})}}var di=(()=>((di=di||{})[di.Sent=0]="Sent",di[di.UploadProgress=1]="UploadProgress",di[di.ResponseHeader=2]="ResponseHeader",di[di.DownloadProgress=3]="DownloadProgress",di[di.Response=4]="Response",di[di.User=5]="User",di))();class kC{constructor(t,e=200,n="OK"){this.headers=t.headers||new Ko,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class IC extends kC{constructor(t={}){super(t),this.type=di.ResponseHeader}clone(t={}){return new IC({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class xy extends kC{constructor(t={}){super(t),this.type=di.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new xy({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class lV extends kC{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function PC(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let OC=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof $f)s=e;else{let l,c;l=r.headers instanceof Ko?r.headers:new Ko(r.headers),r.params&&(c=r.params instanceof za?r.params:new za({fromObject:r.params})),s=new $f(e,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Qe(s).pipe(id(l=>this.handler.handle(l)));if(e instanceof $f||"events"===r.observe)return o;const a=o.pipe(an(l=>l instanceof xy));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Dt(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Dt(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Dt(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Dt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new za).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,PC(r,n))}post(e,n,r={}){return this.request("POST",e,PC(r,n))}put(e,n,r={}){return this.request("PUT",e,PC(r,n))}}return i.\u0275fac=function(e){return new(e||i)(G(tV))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();class cV{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const dV=new X("HTTP_INTERCEPTORS");let Wce=(()=>{class i{intercept(e,n){return n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const $ce=/^\)\]\}',?\n/;let uV=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Xt(n=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((f,p)=>r.setRequestHeader(f,p.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const f=e.detectContentTypeHeader();null!==f&&r.setRequestHeader("Content-Type",f)}if(e.responseType){const f=e.responseType.toLowerCase();r.responseType="json"!==f?f:"text"}const s=e.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=1223===r.status?204:r.status,p=r.statusText||"OK",m=new Ko(r.getAllResponseHeaders()),g=function qce(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(r)||e.url;return o=new IC({headers:m,status:f,statusText:p,url:g}),o},l=()=>{let{headers:f,status:p,statusText:m,url:g}=a(),_=null;204!==p&&(_=void 0===r.response?r.responseText:r.response),0===p&&(p=_?200:0);let v=p>=200&&p<300;if("json"===e.responseType&&"string"==typeof _){const b=_;_=_.replace($ce,"");try{_=""!==_?JSON.parse(_):null}catch(x){_=b,v&&(v=!1,_={error:x,text:_})}}v?(n.next(new xy({body:_,headers:f,status:p,statusText:m,url:g||void 0})),n.complete()):n.error(new lV({error:_,headers:f,status:p,statusText:m,url:g||void 0}))},c=f=>{const{url:p}=a(),m=new lV({error:f,status:r.status||0,statusText:r.statusText||"Unknown Error",url:p||void 0});n.error(m)};let d=!1;const u=f=>{d||(n.next(a()),d=!0);let p={type:di.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===e.responseType&&!!r.responseText&&(p.partialText=r.responseText),n.next(p)},h=f=>{let p={type:di.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),n.next(p)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),e.reportProgress&&(r.addEventListener("progress",u),null!==s&&r.upload&&r.upload.addEventListener("progress",h)),r.send(s),n.next({type:di.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),e.reportProgress&&(r.removeEventListener("progress",u),null!==s&&r.upload&&r.upload.removeEventListener("progress",h)),r.readyState!==r.DONE&&r.abort()}})}}return i.\u0275fac=function(e){return new(e||i)(G(XR))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})();const FC=new X("XSRF_COOKIE_NAME"),LC=new X("XSRF_HEADER_NAME");class hV{}let Yce=(()=>{class i{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=UR(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return i.\u0275fac=function(e){return new(e||i)(G(nt),G(xr),G(FC))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})(),NC=(()=>{class i{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return n.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(G(hV),G(LC))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})(),Kce=(()=>{class i{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const n=this.injector.get(dV,[]);this.chain=n.reduceRight((r,s)=>new cV(r,s),this.backend)}return this.chain.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(G(nV),G(kn))},i.\u0275prov=oe({token:i,factory:i.\u0275fac}),i})(),Xce=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:NC,useClass:Wce}]}}static withOptions(e={}){return{ngModule:i,providers:[e.cookieName?{provide:FC,useValue:e.cookieName}:[],e.headerName?{provide:LC,useValue:e.headerName}:[]]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[NC,{provide:dV,useExisting:NC,multi:!0},{provide:hV,useClass:Yce},{provide:FC,useValue:"XSRF-TOKEN"},{provide:LC,useValue:"X-XSRF-TOKEN"}]}),i})(),Qce=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[OC,{provide:tV,useClass:Kce},uV,{provide:nV,useExisting:uV}],imports:[[Xce.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),i})();const Zce=["*"];let wy;function qf(i){var t;return(null===(t=function Jce(){if(void 0===wy&&(wy=null,"undefined"!=typeof window)){const i=window;void 0!==i.trustedTypes&&(wy=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return wy}())||void 0===t?void 0:t.createHTML(i))||i}function fV(i){return Error(`Unable to find icon with the name "${i}"`)}function pV(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function mV(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class ic{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let My=(()=>{class i{constructor(e,n,r,s){this._httpClient=e,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,s){return this._addSvgIconConfig(e,n,new ic(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,s){const o=this._sanitizer.sanitize(Zt.HTML,r);if(!o)throw mV(r);const a=qf(o);return this._addSvgIconConfig(e,n,new ic("",a,s))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new ic(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){const s=this._sanitizer.sanitize(Zt.HTML,n);if(!s)throw mV(n);const o=qf(s);return this._addSvgIconSetConfig(e,new ic("",o,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const n=this._sanitizer.sanitize(Zt.RESOURCE_URL,e);if(!n)throw pV(e);const r=this._cachedIconsByUrl.get(n);return r?Qe(Cy(r)):this._loadSvgIconFromConfig(new ic(e,null)).pipe(vi(s=>this._cachedIconsByUrl.set(n,s)),Dt(s=>Cy(s)))}getNamedSvgIcon(e,n=""){const r=gV(n,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(e,o):function Nce(i,t){const e=Gt(i)?i:()=>i,n=r=>r.error(e());return new Xt(t?r=>t.schedule(n,0,r):n)}(fV(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Qe(Cy(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Dt(n=>Cy(n)))}_getSvgFromIconSetConfigs(e,n){const r=this._extractIconWithNameFromAnySet(e,n);return r?Qe(r):yI(n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Eo(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Zt.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Qe(null)})))).pipe(Dt(()=>{const o=this._extractIconWithNameFromAnySet(e,n);if(!o)throw fV(e);return o}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(vi(n=>e.svgText=n),Dt(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Qe(null):this._fetchIcon(e).pipe(vi(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){const s=e.querySelector(`[id="${n}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(qf("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(e){const n=this._document.createElement("DIV");n.innerHTML=e;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const n=this._svgElementFromString(qf("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&n.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){var n;const{url:r,options:s}=e,o=null!==(n=null==s?void 0:s.withCredentials)&&void 0!==n&&n;if(!this._httpClient)throw function ede(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(Zt.RESOURCE_URL,r);if(!a)throw pV(r);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(Dt(d=>qf(d)),yk(()=>this._inProgressUrlFetches.delete(a)),WS());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(gV(e,n),r),this}_addSvgIconSetConfig(e,n){const r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){const n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](n,e);if(s)return nde(s)?new ic(s.url,null,s.options):new ic(s,null)}}}return i.\u0275fac=function(e){return new(e||i)(G(OC,8),G(Am),G(nt,8),G(vo))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Cy(i){return i.cloneNode(!0)}function gV(i,t){return i+":"+t}function nde(i){return!(!i.url||!i.options)}const ide=ro(class{constructor(i){this._elementRef=i}}),rde=new X("mat-icon-location",{providedIn:"root",factory:function sde(){const i=Mc(nt),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),_V=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ode=_V.map(i=>`[${i}]`).join(", "),ade=/^url\(['"]?#(.*?)['"]?\)$/;let lde=(()=>{class i extends ide{constructor(e,n,r,s,o){super(e),this._iconRegistry=n,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=yt.EMPTY,r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=ve(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=e.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,n=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();n!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),n&&e.classList.add(n),this._previousFontSetClass=n),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){const n=e.querySelectorAll(ode),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)_V.forEach(o=>{const a=n[s],l=a.getAttribute(o),c=l?l.match(ade):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:o,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(fn(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${s.message}`))})}}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(My),ti("aria-hidden"),y(rde),y(vo))},i.\u0275cmp=We({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,n){2&e&&(Ue("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet),Ke("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[q],ngContentSelectors:Zce,decls:1,vars:0,template:function(e,n){1&e&&(on(),rt(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),i})(),Sy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[He],He]}),i})(),BC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[He],He]}),i})();const yV=["*"],dde=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],ude=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],gde=Yo(Qr(class{})),_de=Qr(class{}),yde=new X("MatList"),vV=new X("MatNavList");let vde=(()=>{class i extends gde{constructor(){super(...arguments),this._stateChanges=new ge}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=xe(i)))(n||i)}}(),i.\u0275cmp=We({type:i,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[Me([{provide:vV,useExisting:i}]),q,jt],ngContentSelectors:yV,decls:1,vars:0,template:function(e,n){1&e&&(on(),rt(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),i})(),bV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),i})(),VC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=H({type:i,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),i})(),bde=(()=>{class i extends _de{constructor(e,n,r,s){super(),this._element=e,this._isInteractiveList=!1,this._destroyed=new ge,this._disabled=!1,this._isInteractiveList=!!(r||s&&"action-list"===s._getListType()),this._list=r||s;const o=this._getHostElement();"button"===o.nodeName.toLowerCase()&&!o.hasAttribute("type")&&o.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(it(this._destroyed)).subscribe(()=>{n.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(e){this._disabled=ve(e)}ngAfterContentInit(){!function C2(i,t,e="mat"){i.changes.pipe(yi(i)).subscribe(({length:n})=>{Ff(t,`${e}-2-line`,!1),Ff(t,`${e}-3-line`,!1),Ff(t,`${e}-multi-line`,!1),2===n||3===n?Ff(t,`${e}-${n}-line`,!0):n>3&&Ff(t,`${e}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return i.\u0275fac=function(e){return new(e||i)(y(de),y(Et),y(vV,8),y(yde,8))},i.\u0275cmp=We({type:i,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(e,n,r){if(1&e&&(ht(r,bV,5),ht(r,VC,5),ht(r,sC,5)),2&e){let s;he(s=fe())&&(n._avatar=s.first),he(s=fe())&&(n._icon=s.first),he(s=fe())&&(n._lines=s)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(e,n){2&e&&Ke("mat-list-item-disabled",n.disabled)("mat-list-item-avatar",n._avatar||n._icon)("mat-list-item-with-avatar",n._avatar||n._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[q],ngContentSelectors:ude,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(e,n){1&e&&(on(dde),O(0,"span",0),Ne(1,"span",1),rt(2),O(3,"span",2),rt(4,1),F(),rt(5,2),F()),2&e&&(J(1),te("matRippleTrigger",n._getHostElement())("matRippleDisabled",n._isRippleDisabled()))},directives:[Zr],encapsulation:2,changeDetection:0}),i})(),HC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[cy,Jr,He,aC,ri],cy,He,aC,BC]}),i})();function Dde(i,t){1&i&&(O(0,"h4",9),et(1,"Home"),F())}function Ede(i,t){1&i&&(O(0,"h4",9),et(1,"Select Machine"),F())}function Ade(i,t){1&i&&(O(0,"h4",9),et(1,"Your Digital Twin"),F())}let Tde=(()=>{class i{constructor(){this.title="DigitalTwin",this.isExpanded=!0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=We({type:i,selectors:[["app-root"]],decls:21,vars:6,consts:[["autosize","",1,"container","mat-typography"],["mode","side","disableClose","true","opened","true",1,"drawer"],["drawer",""],["mat-mini-fab","","color","warn",2,"margin","10px",3,"click"],["aria-label","Menu"],[3,"routerLink"],["mat-list-icon","",1,"nav-icon"],["mat-line","","class","nav-text",4,"ngIf"],[1,"sidenav-content"],["mat-line","",1,"nav-text"]],template:function(e,n){1&e&&(O(0,"mat-drawer-container",0),O(1,"mat-drawer",1,2),O(3,"button",3),Re("click",function(){return n.isExpanded=!n.isExpanded}),O(4,"mat-icon",4),et(5,"menu"),F(),F(),O(6,"mat-nav-list"),O(7,"mat-list-item",5),O(8,"mat-icon",6),et(9,"home"),F(),Ye(10,Dde,2,0,"h4",7),F(),O(11,"mat-list-item",5),O(12,"mat-icon",6),et(13,"build"),F(),Ye(14,Ede,2,0,"h4",7),F(),O(15,"mat-list-item",5),O(16,"mat-icon",6),et(17,"build"),F(),Ye(18,Ade,2,0,"h4",7),F(),F(),F(),O(19,"div",8),Ne(20,"router-outlet"),F(),F()),2&e&&(J(7),te("routerLink",""),J(3),te("ngIf",n.isExpanded),J(1),te("routerLink","create"),J(3),te("ngIf",n.isExpanded),J(1),te("routerLink","digital-twin"),J(3),te("ngIf",n.isExpanded))},directives:[eV,JB,cu,lde,vde,bde,qm,VC,Ur,sC,Jx],styles:[".container[_ngcontent-%COMP%]{height:100vh;background:#5584AC}.container[_ngcontent-%COMP%]   .drawer[_ngcontent-%COMP%]{background:#22577E;color:#fff}.container[_ngcontent-%COMP%]   .sidenav-content[_ngcontent-%COMP%]{padding-left:10px;height:100%}.nav-icon[_ngcontent-%COMP%], .nav-text[_ngcontent-%COMP%]{color:#fff}.mat-mini-fab.mat-warn[_ngcontent-%COMP%]{background-color:#5584ac}"]}),i})(),EV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[oM]]}),i})(),FV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[oM]]}),i})(),mhe=(()=>{class i{constructor(e,n){nd(n)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,n=[]){return{ngModule:i,providers:e.serverLoaded?[{provide:Es,useValue:Object.assign(Object.assign({},aM),e)},{provide:lM,useValue:n,multi:!0},{provide:Qd,useValue:!0}]:[{provide:Es,useValue:Object.assign(Object.assign({},aM),e)},{provide:lM,useValue:n,multi:!0}]}}}return i.\u0275fac=function(e){return new(e||i)(G(Qd),G(xr))},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[rN,EV,FV],rN,EV,FV]}),i})();const xhe={provide:new X("mat-autocomplete-scroll-strategy"),deps:[ao],useFactory:function bhe(i){return()=>i.scrollStrategies.reposition()}};let BV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[xhe],imports:[[tc,dy,He,ri],oo,dy,He]}),i})(),UV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({}),i})(),zV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[Jr,He,Ef,UV],He,UV]}),i})(),$V=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[Jr,He],He]}),i})(),KV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[ri,He],He]}),i})(),XV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({}),i})(),QV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[XV,Jr,He,Ef],XV,He]}),i})();const bfe={provide:new X("mat-menu-scroll-strategy"),deps:[ao],useFactory:function vfe(i){return()=>i.scrollStrategies.reposition()}};let JV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[bfe],imports:[[ri,He,Jr,tc],oo,He]}),i})(),GC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[He],He]}),i})(),t3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[cy,He],cy,He]}),i})(),Mfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[Wl]]}),i})(),jC=(()=>{class i{constructor(){this.changes=new ge,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ofe={provide:jC,deps:[[new mi,new mr,jC]],useFactory:function Pfe(i){return i||new jC}};let r3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[Ofe,Ha],imports:[[He,ri,Jl,nc,Mfe,Sy,Jr],He]}),i})(),Vfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({}),i})(),s3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[Vfe,He],He]}),i})(),d3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[He,Jr],He]}),i})(),u3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[G_,He],He]}),i})();const m3=new X("mat-chips-default-options");let g3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[Ha,{provide:m3,useValue:{separatorKeyCodes:[13]}}],imports:[[He]]}),i})();function upe(i,t){if(1&i&&(sa(),Ne(0,"circle",4)),2&i){const e=Je(),n=vr(1);Hi("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(n)),Ue("r",e._getCircleRadius())}}function hpe(i,t){if(1&i&&(sa(),Ne(0,"circle",4)),2&i){const e=Je(),n=vr(1);Hi("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(n)),Ue("r",e._getCircleRadius())}}const ppe=ro(class{constructor(i){this._elementRef=i}},"primary"),mpe=new X("mat-progress-spinner-default-options",{providedIn:"root",factory:function gpe(){return{diameter:100}}});class Ga extends ppe{constructor(t,e,n,r,s,o,a,l){super(t),this._document=n,this._diameter=100,this._value=0,this._resizeSubscription=yt.EMPTY,this.mode="determinate";const c=Ga._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),c.has(n.head)||c.set(n.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),e.isBrowser&&e.SAFARI&&a&&o&&l&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&l.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=Ii(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Ii(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Ii(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=N_(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){var e;const n=50*(null!==(e=t.currentScale)&&void 0!==e?e:1);return`${n}% ${n}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,n=Ga._diameters;let r=n.get(t);if(!r||!r.has(e)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),t.appendChild(s),r||(r=new Set,n.set(t,r)),r.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Ga._diameters=new WeakMap,Ga.\u0275fac=function(t){return new(t||Ga)(y(de),y(Si),y(nt,8),y(jn,8),y(mpe),y(Et),y(Rs),y(Xe))},Ga.\u0275cmp=We({type:Ga,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(Ue("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),Hi("width",e.diameter,"px")("height",e.diameter,"px"),Ke("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[q],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(sa(),O(0,"svg",0,1),Ye(2,upe,1,11,"circle",2),Ye(3,hpe,1,9,"circle",3),F()),2&t&&(Hi("width",e.diameter,"px")("height",e.diameter,"px"),te("ngSwitch","indeterminate"===e.mode),Ue("viewBox",e._getViewBox()),J(2),te("ngSwitchCase",!0),J(1),te("ngSwitchCase",!1))},directives:[ll,hh],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let _3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[He,ri],He]}),i})(),y3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[ri,He],He]}),i})(),v3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[tc,He,Jl],He]}),i})(),b3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[tc,Jl,ri,nc,He],He]}),i})();const Spe={provide:new X("mat-tooltip-scroll-strategy"),deps:[ao],useFactory:function Cpe(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}};let ZC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[Spe],imports:[[G_,ri,tc,He],He,oo]}),i})(),JC=(()=>{class i{constructor(){this.changes=new ge,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,n,r)=>{if(0==r||0==n)return`0 of ${r}`;const s=e*n;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+n,r):s+n} of ${r}`}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const kpe={provide:JC,deps:[[new mi,new mr,JC]],useFactory:function Rpe(i){return i||new JC}};let x3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[kpe],imports:[[ri,nc,_C,ZC,He]]}),i})(),eS=(()=>{class i{constructor(){this.changes=new ge}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ppe={provide:eS,deps:[[new mi,new mr,eS]],useFactory:function Ipe(i){return i||new eS}};let w3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[Ppe],imports:[[ri,He]]}),i})(),qpe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[hC]]}),i})(),P3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[qpe,He],He]}),i})();function uS(i,t,e){for(let n in t)if(t.hasOwnProperty(n)){const r=t[n];r?i.setProperty(n,r,(null==e?void 0:e.has(n))?"important":""):i.removeProperty(n)}return i}function pu(i,t){const e=t?"":"none";uS(i.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function O3(i,t,e){uS(i.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function Ny(i,t){return t&&"none"!=t?i+" "+t:i}function F3(i){const t=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*t}function hS(i,t){return i.getPropertyValue(t).split(",").map(n=>n.trim())}function fS(i){const t=i.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function pS(i,t,e){const{top:n,bottom:r,left:s,right:o}=i;return e>=n&&e<=r&&t>=s&&t<=o}function Zf(i,t,e){i.top+=t,i.bottom=i.top+i.height,i.left+=e,i.right=i.left+i.width}function L3(i,t,e,n){const{top:r,right:s,bottom:o,left:a,width:l,height:c}=i,d=l*t,u=c*t;return n>r-u&&n<o+u&&e>a-d&&e<s+d}class N3{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:fS(e)})})}handleScroll(t){const e=Yr(t),n=this.positions.get(e);if(!n)return null;const r=n.scrollPosition;let s,o;if(e===this._document){const c=this.getViewportScrollPosition();s=c.top,o=c.left}else s=e.scrollTop,o=e.scrollLeft;const a=r.top-s,l=r.left-o;return this.positions.forEach((c,d)=>{c.clientRect&&e!==d&&e.contains(d)&&Zf(c.clientRect,a,l)}),r.top=s,r.left=o,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function B3(i){const t=i.cloneNode(!0),e=t.querySelectorAll("[id]"),n=i.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===n?U3(i,t):("input"===n||"select"===n||"textarea"===n)&&H3(i,t),V3("canvas",i,t,U3),V3("input, textarea, select",i,t,H3),t}function V3(i,t,e,n){const r=t.querySelectorAll(i);if(r.length){const s=e.querySelectorAll(i);for(let o=0;o<r.length;o++)n(r[o],s[o])}}let fme=0;function H3(i,t){"file"!==t.type&&(t.value=i.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${fme++}`)}function U3(i,t){const e=t.getContext("2d");if(e)try{e.drawImage(i,0,0)}catch(n){}}const z3=As({passive:!0}),By=As({passive:!1}),mS=new Set(["position"]);class mme{constructor(t,e,n,r,s,o){this._config=e,this._document=n,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new ge,this._pointerMoveSubscription=yt.EMPTY,this._pointerUpSubscription=yt.EMPTY,this._scrollSubscription=yt.EMPTY,this._resizeSubscription=yt.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new ge,this.started=new ge,this.released=new ge,this.ended=new ge,this.entered=new ge,this.exited=new ge,this.dropped=new ge,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const l=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const f=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),p=this._dropContainer;if(!f)return void this._endDragSequence(a);(!p||!p.isDragging()&&!p.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const c=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(c),this._dropContainer)this._updateActiveDropContainer(c,l);else{const d=this._activeTransform;d.x=c.x-this._pickupPositionOnPage.x+this._passiveTransform.x,d.y=c.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(d.x,d.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:c,event:a,distance:this._getDragDistance(c),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new N3(n),o.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=ve(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(n=>pu(n,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(n=>Ci(n)),this._handles.forEach(n=>pu(n,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&e.add(n)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=Ci(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,By),e.addEventListener("touchstart",this._pointerDown,z3),e.addEventListener("dragstart",this._nativeDragStart,By)}),this._initialTransform=void 0,this._rootElement=e),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?Ci(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){var t,e;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(t=this._rootElement)||void 0===t||t.remove()),null===(e=this._anchor)||void 0===e||e.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),pu(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),pu(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var t,e;null===(t=this._preview)||void 0===t||t.remove(),null===(e=this._previewRef)||void 0===e||e.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var t,e;null===(t=this._placeholder)||void 0===t||t.remove(),null===(e=this._placeholderRef)||void 0===e||e.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Jf(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const n=this._rootElement,r=n.parentNode,s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();r.insertBefore(o,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),O3(n,!1,mS),this._document.body.appendChild(r.replaceChild(s,n)),this._getPreviewInsertionPoint(r,a).appendChild(this._preview),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const n=this.isDragging(),r=Jf(e),s=!r&&0!==e.button,o=this._rootElement,a=Yr(e),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),c=r?wM(e):xM(e);if(a&&a.draggable&&"mousedown"===e.type&&e.preventDefault(),n||s||l||c)return;if(this._handles.length){const h=o.style;this._rootElementTapHighlight=h.webkitTapHighlightColor||"",h.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(h=>this._updateOnScroll(h)),this._boundaryElement&&(this._boundaryRect=fS(this._boundaryElement));const d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);const u=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:u.x,y:u.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){O3(this._rootElement,!0,mS),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,n=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),s=this._getDragDistance(r),o=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:r}),e.drop(this,n,this._initialIndex,this._initialContainer,o,s,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:n,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,n=t?t.template:null;let r;if(n&&t){const s=t.matchSize?this._rootElement.getBoundingClientRect():null,o=t.viewContainer.createEmbeddedView(n,t.context);o.detectChanges(),r=j3(o,this._document),this._previewRef=o,t.matchSize?W3(r,s):r.style.transform=Vy(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const s=this._rootElement;r=B3(s),W3(r,s.getBoundingClientRect()),this._initialTransform&&(r.style.transform=this._initialTransform)}return uS(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},mS),pu(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>r.classList.add(s)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function hme(i){const t=getComputedStyle(i),e=hS(t,"transition-property"),n=e.find(a=>"transform"===a||"all"===a);if(!n)return 0;const r=e.indexOf(n),s=hS(t,"transition-duration"),o=hS(t,"transition-delay");return F3(s[r])+F3(o[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const r=o=>{var a;(!o||Yr(o)===this._preview&&"transform"===o.propertyName)&&(null===(a=this._preview)||void 0===a||a.removeEventListener("transitionend",r),n(),clearTimeout(s))},s=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let n;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),n=j3(this._placeholderRef,this._document)):n=B3(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(t,e){const n=this._rootElement.getBoundingClientRect(),r=t===this._rootElement?null:t,s=r?r.getBoundingClientRect():n,o=Jf(e)?e.targetTouches[0]:e,a=this._getViewportScrollPosition();return{x:s.left-n.left+(o.pageX-s.left-a.left),y:s.top-n.top+(o.pageY-s.top-a.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),n=Jf(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=n.pageX-e.left,s=n.pageY-e.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=s,a.matrixTransform(o.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:r}=this.constrainPosition?this.constrainPosition(t,this):t;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:s,y:o}=this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),d=a.top+o,u=a.bottom-(c-o);n=G3(n,a.left+s,a.right-(l-s)),r=G3(r,d,u)}return{x:n,y:r}}_updatePointerDirectionDelta(t){const{x:e,y:n}=t,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-s.x),a=Math.abs(n-s.y);return o>this._config.pointerDirectionChangeThreshold&&(r.x=e>s.x?1:-1,s.x=e),a>this._config.pointerDirectionChangeThreshold&&(r.y=n>s.y?1:-1,s.y=n),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,pu(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,By),t.removeEventListener("touchstart",this._pointerDown,z3),t.removeEventListener("dragstart",this._nativeDragStart,By)}_applyRootElementTransform(t,e){const n=Vy(t,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=Ny(n,this._initialTransform)}_applyPreviewTransform(t,e){var n;const r=(null===(n=this._previewTemplate)||void 0===n?void 0:n.template)?void 0:this._initialTransform,s=Vy(t,e);this._preview.style.transform=Ny(s,r)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const n=this._boundaryElement.getBoundingClientRect(),r=this._rootElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===r.width&&0===r.height)return;const s=n.left-r.left,o=r.right-n.right,a=n.top-r.top,l=r.bottom-n.bottom;n.width>r.width?(s>0&&(t+=s),o>0&&(t-=o)):t=0,n.height>r.height?(a>0&&(e+=a),l>0&&(e-=l)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:Jf(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const n=Yr(t);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&Zf(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var t;return(null===(t=this._parentPositions.positions.get(this._document))||void 0===t?void 0:t.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=N_(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const n=this._previewContainer||"global";if("parent"===n)return t;if("global"===n){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return Ci(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}}function Vy(i,t){return`translate3d(${Math.round(i)}px, ${Math.round(t)}px, 0)`}function G3(i,t,e){return Math.max(t,Math.min(e,i))}function Jf(i){return"t"===i.type[0]}function j3(i,t){const e=i.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const n=t.createElement("div");return e.forEach(r=>n.appendChild(r)),n}function W3(i,t){i.style.width=`${t.width}px`,i.style.height=`${t.height}px`,i.style.transform=Vy(t.left,t.top)}function ep(i,t){return Math.max(0,Math.min(t,i))}class _me{constructor(t,e,n,r,s){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new ge,this.entered=new ge,this.exited=new ge,this.dropped=new ge,this.sorted=new ge,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=yt.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new ge,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function ume(i=0,t=O_){return i<0&&(i=0),py(i,i,t)}(0,G2).pipe(it(this._stopScrollTimers)).subscribe(()=>{const o=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?o.scrollBy(0,-a):2===this._verticalScrollDirection&&o.scrollBy(0,a),1===this._horizontalScrollDirection?o.scrollBy(-a,0):2===this._horizontalScrollDirection&&o.scrollBy(a,0)})},this.element=Ci(t),this._document=n,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new N3(n)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,n,r){let s;this._draggingStarted(),null==r?(s=this.sortingDisabled?this._draggables.indexOf(t):-1,-1===s&&(s=this._getItemIndexFromPointerPosition(t,e,n))):s=r;const o=this._activeDraggables,a=o.indexOf(t),l=t.getPlaceholderElement();let c=o[s];if(c===t&&(c=o[s+1]),!c&&(null==s||-1===s||s<o.length-1)&&this._shouldEnterAsFirstChild(e,n)&&(c=o[0]),a>-1&&o.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){const d=c.getRootElement();d.parentElement.insertBefore(l,d),o.splice(s,0,t)}else Ci(this.element).appendChild(l),o.push(t);l.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,n,r,s,o,a){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:n,container:this,previousContainer:r,isPointerOverContainer:s,distance:o,dropPoint:a})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===t.indexOf(r))?this._reset():this._cacheItems()),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}withScrollableParents(t){const e=Ci(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,n,r){if(this.sortingDisabled||!this._clientRect||!L3(this._clientRect,.05,e,n))return;const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,n,r);if(-1===o&&s.length>0)return;const a="horizontal"===this._orientation,l=s.findIndex(g=>g.drag===t),c=s[o],u=c.clientRect,h=l>o?1:-1,f=this._getItemOffsetPx(s[l].clientRect,u,h),p=this._getSiblingOffsetPx(l,s,h),m=s.slice();(function gme(i,t,e){const n=ep(t,i.length-1),r=ep(e,i.length-1);if(n===r)return;const s=i[n],o=r<n?-1:1;for(let a=n;a!==r;a+=o)i[a]=i[a+o];i[r]=s})(s,l,o),this.sorted.next({previousIndex:l,currentIndex:o,container:this,item:t}),s.forEach((g,_)=>{if(m[_]===g)return;const v=g.drag===t,b=v?f:p,x=v?t.getPlaceholderElement():g.drag.getRootElement();g.offset+=b,a?(x.style.transform=Ny(`translate3d(${Math.round(g.offset)}px, 0, 0)`,g.initialTransform),Zf(g.clientRect,0,b)):(x.style.transform=Ny(`translate3d(0, ${Math.round(g.offset)}px, 0)`,g.initialTransform),Zf(g.clientRect,b,0))}),this._previousSwap.overlaps=pS(u,e,n),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?r.x:r.y}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let n,r=0,s=0;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||n||L3(o.clientRect,.05,t,e)&&([r,s]=function yme(i,t,e,n){const r=Y3(t,n),s=K3(t,e);let o=0,a=0;if(r){const l=i.scrollTop;1===r?l>0&&(o=1):i.scrollHeight-l>i.clientHeight&&(o=2)}if(s){const l=i.scrollLeft;1===s?l>0&&(a=1):i.scrollWidth-l>i.clientWidth&&(a=2)}return[o,a]}(a,o.clientRect,t,e),(r||s)&&(n=a))}),!r&&!s){const{width:o,height:a}=this._viewportRuler.getViewportSize(),l={width:o,height:a,top:0,right:o,bottom:a,left:0};r=Y3(l,e),s=K3(l,t),n=window}n&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=n,(r||s)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=Ci(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=Ci(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_cacheItemPositions(){const t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const n=e.getVisibleElement();return{drag:e,offset:0,initialTransform:n.style.transform||"",clientRect:fS(n)}}).sort((e,n)=>t?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top)}_reset(){this._isDragging=!1;const t=Ci(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{var n;const r=e.getRootElement();if(r){const s=null===(n=this._itemPositions.find(o=>o.drag===e))||void 0===n?void 0:n.initialTransform;r.style.transform=s||""}}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(t,e,n){const r="horizontal"===this._orientation,s=e[t].clientRect,o=e[t+-1*n];let a=s[r?"width":"height"]*n;if(o){const l=r?"left":"top",c=r?"right":"bottom";-1===n?a-=o.clientRect[l]-s[c]:a+=s[l]-o.clientRect[c]}return a}_getItemOffsetPx(t,e,n){const r="horizontal"===this._orientation;let s=r?e.left-t.left:e.top-t.top;return-1===n&&(s+=r?e.width-t.width:e.height-t.height),s}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,r="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){const o=n[n.length-1].clientRect;return r?t>=o.right:e>=o.bottom}{const o=n[0].clientRect;return r?t<=o.left:e<=o.top}}_getItemIndexFromPointerPosition(t,e,n,r){const s="horizontal"===this._orientation,o=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===t)return!1;if(r){const c=s?r.x:r.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&c===this._previousSwap.delta)return!1}return s?e>=Math.floor(l.left)&&e<Math.floor(l.right):n>=Math.floor(l.top)&&n<Math.floor(l.bottom)});return-1!==o&&this.sortPredicate(o,t,this)?o:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(t,e){return null!=this._clientRect&&pS(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,n){return this._siblings.find(r=>r._canReceive(t,e,n))}_canReceive(t,e,n){if(!this._clientRect||!pS(this._clientRect,e,n)||!this.enterPredicate(t,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,n);if(!r)return!1;const s=Ci(this.element);return r===s||s.contains(r)}_startReceiving(t,e){const n=this._activeSiblings;!n.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(n.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&(this._itemPositions.forEach(({clientRect:n})=>{Zf(n,e.top,e.left)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=N_(Ci(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._activeDraggables.filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function Y3(i,t){const{top:e,bottom:n,height:r}=i,s=.05*r;return t>=e-s&&t<=e+s?1:t>=n-s&&t<=n+s?2:0}function K3(i,t){const{left:e,right:n,width:r}=i,s=.05*r;return t>=e-s&&t<=e+s?1:t>=n-s&&t<=n+s?2:0}const Hy=As({passive:!1,capture:!0});let vme=(()=>{class i{constructor(e,n){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new ge,this.pointerUp=new ge,this.scroll=new ge,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=n}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Hy)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Hy)}startDragging(e,n){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=n.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Hy}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:Hy}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(e){const n=this._activeDragInstances.indexOf(e);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const n=[this.scroll];return e&&e!==this._document&&n.push(new Xt(r=>this._ngZone.runOutsideAngular(()=>{const o=a=>{this._activeDragInstances.length&&r.next(a)};return e.addEventListener("scroll",o,!0),()=>{e.removeEventListener("scroll",o,!0)}}))),gn(...n)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,n)=>{this._document.removeEventListener(n,e.handler,e.options)}),this._globalListeners.clear()}}return i.\u0275fac=function(e){return new(e||i)(G(Xe),G(nt))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const bme={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let xme=(()=>{class i{constructor(e,n,r,s){this._document=e,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(e,n=bme){return new mme(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new _me(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return i.\u0275fac=function(e){return new(e||i)(G(nt),G(Xe),G(Rs),G(vme))},i.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),X3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({providers:[xme],imports:[oo]}),i})(),wme=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({imports:[[ri,BV,zV,WB,Bf,TB,$V,_C,KV,QV,JV,RC,GC,XB,BC,EB,t3,HC,r3,xB,s3,nc,d3,u3,g3,Sy,_3,y3,Jr,v3,b3,ZC,x3,w3,P3,X3,vC,M2],BV,zV,WB,Bf,TB,$V,_C,KV,QV,JV,RC,GC,XB,BC,EB,t3,HC,r3,xB,s3,nc,d3,u3,g3,Sy,_3,y3,Jr,v3,b3,ZC,x3,w3,P3,X3,vC,M2]}),i})(),Mme=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i}),i.\u0275inj=De({}),i})(),Cme=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Te({type:i,bootstrap:[Tde]}),i.\u0275inj=De({providers:[rM],imports:[[ak,Ace,bse,mhe,wme,Mme,GC,nc,RC,Sy,HC,hY,fY,Qce]]}),i})();(function CW(){mR=!1})(),U$().bootstrapModule(Cme).catch(i=>console.error(i))}},Gt=>{Gt(Gt.s=667)}]);