"use strict";var KTe=Object.defineProperty,QTe=Object.defineProperties,ZTe=Object.getOwnPropertyDescriptors,Mj=Object.getOwnPropertySymbols,JTe=Object.prototype.hasOwnProperty,e1e=Object.prototype.propertyIsEnumerable,Cj=(bt,Hi,hs)=>Hi in bt?KTe(bt,Hi,{enumerable:!0,configurable:!0,writable:!0,value:hs}):bt[Hi]=hs,HA=(bt,Hi)=>{for(var hs in Hi||(Hi={}))JTe.call(Hi,hs)&&Cj(bt,hs,Hi[hs]);if(Mj)for(var hs of Mj(Hi))e1e.call(Hi,hs)&&Cj(bt,hs,Hi[hs]);return bt},zA=(bt,Hi)=>QTe(bt,ZTe(Hi));(self.webpackChunkHackathon=self.webpackChunkHackathon||[]).push([[179],{662:()=>{function bt(n){return"function"==typeof n}function Hi(n){const e=n(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const hs=Hi(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,s)=>`${s+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function sd(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class yt{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const r of e)r.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(bt(i))try{i()}catch(r){t=r instanceof hs?r.errors:[r]}const{_teardowns:s}=this;if(s){this._teardowns=null;for(const r of s)try{jA(r)}catch(o){t=null!=t?t:[],o instanceof hs?t=[...t,...o.errors]:t.push(o)}}if(t)throw new hs(t)}}add(t){var e;if(t&&t!==this)if(this.closed)jA(t);else{if(t instanceof yt){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&sd(e,t)}remove(t){const{_teardowns:e}=this;e&&sd(e,t),t instanceof yt&&t._removeParent(this)}}yt.EMPTY=(()=>{const n=new yt;return n.closed=!0,n})();const UA=yt.EMPTY;function GA(n){return n instanceof yt||n&&"closed"in n&&bt(n.remove)&&bt(n.add)&&bt(n.unsubscribe)}function jA(n){bt(n)?n():n.unsubscribe()}const Ol={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Um={setTimeout(...n){const{delegate:t}=Um;return((null==t?void 0:t.setTimeout)||setTimeout)(...n)},clearTimeout(n){const{delegate:t}=Um;return((null==t?void 0:t.clearTimeout)||clearTimeout)(n)},delegate:void 0};function WA(n){Um.setTimeout(()=>{const{onUnhandledError:t}=Ol;if(!t)throw n;t(n)})}function rd(){}const Sj=ux("C",void 0,void 0);function ux(n,t,e){return{kind:n,value:t,error:e}}let Ll=null;function Gm(n){if(Ol.useDeprecatedSynchronousErrorHandling){const t=!Ll;if(t&&(Ll={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:i}=Ll;if(Ll=null,e)throw i}}else n()}class hx extends yt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,GA(t)&&t.add(this)):this.destination=Tj}static create(t,e,i){return new fx(t,e,i)}next(t){this.isStopped?mx(function Ej(n){return ux("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?mx(function Dj(n){return ux("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?mx(Sj,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class fx extends hx{constructor(t,e,i){let s;if(super(),bt(t))s=t;else if(t){let r;({next:s,error:e,complete:i}=t),this&&Ol.useDeprecatedNextContext?(r=Object.create(t),r.unsubscribe=()=>this.unsubscribe()):r=t,s=null==s?void 0:s.bind(r),e=null==e?void 0:e.bind(r),i=null==i?void 0:i.bind(r)}this.destination={next:s?px(s):rd,error:px(null!=e?e:$A),complete:i?px(i):rd}}}function px(n,t){return(...e)=>{try{n(...e)}catch(i){Ol.useDeprecatedSynchronousErrorHandling?function Aj(n){Ol.useDeprecatedSynchronousErrorHandling&&Ll&&(Ll.errorThrown=!0,Ll.error=n)}(i):WA(i)}}}function $A(n){throw n}function mx(n,t){const{onStoppedNotification:e}=Ol;e&&Um.setTimeout(()=>e(n,t))}const Tj={closed:!0,next:rd,error:$A,complete:rd},gx="function"==typeof Symbol&&Symbol.observable||"@@observable";function Na(n){return n}let Jt=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,s){const r=function Rj(n){return n&&n instanceof hx||function kj(n){return n&&bt(n.next)&&bt(n.error)&&bt(n.complete)}(n)&&GA(n)}(e)?e:new fx(e,i,s);return Gm(()=>{const{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=YA(i))((s,r)=>{let o;o=this.subscribe(a=>{try{e(a)}catch(l){r(l),null==o||o.unsubscribe()}},r,s)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[gx](){return this}pipe(...e){return function qA(n){return 0===n.length?Na:1===n.length?n[0]:function(e){return n.reduce((i,s)=>s(i),e)}}(e)(this)}toPromise(e){return new(e=YA(e))((i,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>i(r))})}}return n.create=t=>new n(t),n})();function YA(n){var t;return null!==(t=null!=n?n:Ol.Promise)&&void 0!==t?t:Promise}const Ij=Hi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ge=(()=>{class n extends Jt{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new XA(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new Ij}next(e){Gm(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const s of i)s.next(e)}})}error(e){Gm(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Gm(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:s,observers:r}=this;return i||s?UA:(r.push(e),new yt(()=>sd(r,e)))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:s,isStopped:r}=this;i?e.error(s):r&&e.complete()}asObservable(){const e=new Jt;return e.source=this,e}}return n.create=(t,e)=>new XA(t,e),n})();class XA extends ge{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)}error(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:UA}}function KA(n){return bt(null==n?void 0:n.lift)}function Hn(n){return t=>{if(KA(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}class kn extends hx{constructor(t,e,i,s,r){super(t),this.onFinalize=r,this._next=e?function(o){try{e(o)}catch(a){t.error(a)}}:super._next,this._error=s?function(o){try{s(o)}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(o){t.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function Et(n,t){return Hn((e,i)=>{let s=0;e.subscribe(new kn(i,r=>{i.next(n.call(t,r,s++))}))})}function Fl(n){return this instanceof Fl?(this.v=n,this):new Fl(n)}function Lj(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=e.apply(n,t||[]),r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){i[h]&&(s[h]=function(f){return new Promise(function(p,m){r.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof Fl?Promise.resolve(h.value.v).then(c,d):u(r[0][2],h)}(i[h](f))}catch(p){u(r[0][3],p)}}function c(h){a("next",h)}function d(h){a("throw",h)}function u(h,f){h(f),r.shift(),r.length&&a(r[0][0],r[0][1])}}function Fj(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function JA(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(r){e[r]=n[r]&&function(o){return new Promise(function(a,l){!function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}(a,l,(o=n[r](o)).done,o.value)})}}}const yx=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function eT(n){return bt(null==n?void 0:n.then)}function tT(n){return bt(n[gx])}function nT(n){return Symbol.asyncIterator&&bt(null==n?void 0:n[Symbol.asyncIterator])}function iT(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const sT=function Bj(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function rT(n){return bt(null==n?void 0:n[sT])}function oT(n){return Lj(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:i,done:s}=yield Fl(e.read());if(s)return yield Fl(void 0);yield yield Fl(i)}}finally{e.releaseLock()}})}function aT(n){return bt(null==n?void 0:n.getReader)}function Rs(n){if(n instanceof Jt)return n;if(null!=n){if(tT(n))return function Vj(n){return new Jt(t=>{const e=n[gx]();if(bt(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(yx(n))return function Hj(n){return new Jt(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(eT(n))return function zj(n){return new Jt(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,WA)})}(n);if(nT(n))return lT(n);if(rT(n))return function Uj(n){return new Jt(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(aT(n))return function Gj(n){return lT(oT(n))}(n)}throw iT(n)}function lT(n){return new Jt(t=>{(function jj(n,t){var e,i,s,r;return function Pj(n,t,e,i){return new(e||(e=Promise))(function(r,o){function a(d){try{c(i.next(d))}catch(u){o(u)}}function l(d){try{c(i.throw(d))}catch(u){o(u)}}function c(d){d.done?r(d.value):function s(r){return r instanceof e?r:new e(function(o){o(r)})}(d.value).then(a,l)}c((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Fj(n);!(i=yield e.next()).done;)if(t.next(i.value),t.closed)return}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=e.return)&&(yield r.call(e))}finally{if(s)throw s.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function Wo(n,t,e,i=0,s=!1){const r=t.schedule(function(){e(),s?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(r),!s)return r}function ui(n,t,e=1/0){return bt(t)?ui((i,s)=>Et((r,o)=>t(i,r,s,o))(Rs(n(i,s))),e):("number"==typeof t&&(e=t),Hn((i,s)=>function Wj(n,t,e,i,s,r,o,a){const l=[];let c=0,d=0,u=!1;const h=()=>{u&&!l.length&&!c&&t.complete()},f=m=>c<i?p(m):l.push(m),p=m=>{r&&t.next(m),c++;let g=!1;Rs(e(m,d++)).subscribe(new kn(t,_=>{null==s||s(_),r?f(_):t.next(_)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<i;){const _=l.shift();o?Wo(t,o,()=>p(_)):p(_)}h()}catch(_){t.error(_)}}))};return n.subscribe(new kn(t,f,()=>{u=!0,h()})),()=>{null==a||a()}}(i,s,n,e)))}function Th(n=1/0){return ui(Na,n)}const ao=new Jt(n=>n.complete());function cT(n){return n&&bt(n.schedule)}function vx(n){return n[n.length-1]}function dT(n){return bt(vx(n))?n.pop():void 0}function kh(n){return cT(vx(n))?n.pop():void 0}function uT(n,t=0){return Hn((e,i)=>{e.subscribe(new kn(i,s=>Wo(i,n,()=>i.next(s),t),()=>Wo(i,n,()=>i.complete(),t),s=>Wo(i,n,()=>i.error(s),t)))})}function hT(n,t=0){return Hn((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function fT(n,t){if(!n)throw new Error("Iterable cannot be null");return new Jt(e=>{Wo(e,t,()=>{const i=n[Symbol.asyncIterator]();Wo(e,t,()=>{i.next().then(s=>{s.done?e.complete():e.next(s.value)})},0,!0)})})}function Ci(n,t){return t?function Jj(n,t){if(null!=n){if(tT(n))return function Yj(n,t){return Rs(n).pipe(hT(t),uT(t))}(n,t);if(yx(n))return function Kj(n,t){return new Jt(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}(n,t);if(eT(n))return function Xj(n,t){return Rs(n).pipe(hT(t),uT(t))}(n,t);if(nT(n))return fT(n,t);if(rT(n))return function Qj(n,t){return new Jt(e=>{let i;return Wo(e,t,()=>{i=n[sT](),Wo(e,t,()=>{let s,r;try{({value:s,done:r}=i.next())}catch(o){return void e.error(o)}r?e.complete():e.next(s)},0,!0)}),()=>bt(null==i?void 0:i.return)&&i.return()})}(n,t);if(aT(n))return function Zj(n,t){return fT(oT(n),t)}(n,t)}throw iT(n)}(n,t):Rs(n)}function wn(...n){const t=kh(n),e=function qj(n,t){return"number"==typeof vx(n)?n.pop():t}(n,1/0),i=n;return i.length?1===i.length?Rs(i[0]):Th(e)(Ci(i,t)):ao}function yn(n){return n<=0?()=>ao:Hn((t,e)=>{let i=0;t.subscribe(new kn(e,s=>{++i<=n&&(e.next(s),n<=i&&e.complete())}))})}function pT(n={}){const{connector:t=(()=>new ge),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:s=!0}=n;return r=>{let o=null,a=null,l=null,c=0,d=!1,u=!1;const h=()=>{null==a||a.unsubscribe(),a=null},f=()=>{h(),o=l=null,d=u=!1},p=()=>{const m=o;f(),null==m||m.unsubscribe()};return Hn((m,g)=>{c++,!u&&!d&&h();const _=l=null!=l?l:t();g.add(()=>{c--,0===c&&!u&&!d&&(a=bx(p,s))}),_.subscribe(g),o||(o=new fx({next:y=>_.next(y),error:y=>{u=!0,h(),a=bx(f,e,y),_.error(y)},complete:()=>{d=!0,h(),a=bx(f,i),_.complete()}}),Ci(m).subscribe(o))})(r)}}function bx(n,t,...e){return!0===t?(n(),null):!1===t?null:t(...e).pipe(yn(1)).subscribe(()=>n())}function vn(n){for(let t in n)if(n[t]===vn)return t;throw Error("Could not find renamed property on target object.")}function xx(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function cn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(cn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function wx(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const e8=vn({__forward_ref__:vn});function kt(n){return n.__forward_ref__=kt,n.toString=function(){return cn(this())},n}function Rt(n){return mT(n)?n():n}function mT(n){return"function"==typeof n&&n.hasOwnProperty(e8)&&n.__forward_ref__===kt}class Xt extends Error{constructor(t,e){super(function Mx(n,t){return`NG0${Math.abs(n)}${t?": "+t:""}`}(t,e)),this.code=t}}function Mt(n){return"string"==typeof n?n:null==n?"":String(n)}function fs(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Mt(n)}function jm(n,t){const e=t?` in ${t}`:"";throw new Xt(-201,`No provider for ${fs(n)} found${e}`)}function Ps(n,t){null==n&&function Rn(n,t,e,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${e} ${i} ${t} <=Actual]`))}(t,n,null,"!=")}function oe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function De(n){return{providers:n.providers||[],imports:n.imports||[]}}function Cx(n){return gT(n,Wm)||gT(n,yT)}function gT(n,t){return n.hasOwnProperty(t)?n[t]:null}function _T(n){return n&&(n.hasOwnProperty(Sx)||n.hasOwnProperty(a8))?n[Sx]:null}const Wm=vn({\u0275prov:vn}),Sx=vn({\u0275inj:vn}),yT=vn({ngInjectableDef:vn}),a8=vn({ngInjectorDef:vn});var xt=(()=>((xt=xt||{})[xt.Default=0]="Default",xt[xt.Host=1]="Host",xt[xt.Self=2]="Self",xt[xt.SkipSelf=4]="SkipSelf",xt[xt.Optional=8]="Optional",xt))();let Dx;function Ba(n){const t=Dx;return Dx=n,t}function vT(n,t,e){const i=Cx(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&xt.Optional?null:void 0!==t?t:void jm(cn(n),"Injector")}function Va(n){return{toString:n}.toString()}var Tr=(()=>((Tr=Tr||{})[Tr.OnPush=0]="OnPush",Tr[Tr.Default=1]="Default",Tr))(),kr=(()=>{return(n=kr||(kr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",kr;var n})();const c8="undefined"!=typeof globalThis&&globalThis,d8="undefined"!=typeof window&&window,u8="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,gn=c8||"undefined"!=typeof global&&global||d8||u8,od={},bn=[],$m=vn({\u0275cmp:vn}),Ex=vn({\u0275dir:vn}),Ax=vn({\u0275pipe:vn}),bT=vn({\u0275mod:vn}),qo=vn({\u0275fac:vn}),Rh=vn({__NG_ELEMENT_ID__:vn});let h8=0;function We(n){return Va(()=>{const e={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Tr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||bn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||kr.Emulated,id:"c",styles:n.styles||bn,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.directives,r=n.features,o=n.pipes;return i.id+=h8++,i.inputs=CT(n.inputs,e),i.outputs=CT(n.outputs),r&&r.forEach(a=>a(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(xT):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(wT):null,i})}function xT(n){return Qi(n)||function Ha(n){return n[Ex]||null}(n)}function wT(n){return function Nl(n){return n[Ax]||null}(n)}const MT={};function Ee(n){return Va(()=>{const t={type:n.type,bootstrap:n.bootstrap||bn,declarations:n.declarations||bn,imports:n.imports||bn,exports:n.exports||bn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(MT[n.id]=n.type),t})}function CT(n,t){if(null==n)return od;const e={};for(const i in n)if(n.hasOwnProperty(i)){let s=n[i],r=s;Array.isArray(s)&&(r=s[1],s=s[0]),e[s]=i,t&&(t[s]=r)}return e}const G=We;function Ss(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Qi(n){return n[$m]||null}function tr(n,t){const e=n[bT]||null;if(!e&&!0===t)throw new Error(`Type ${cn(n)} does not have '\u0275mod' property.`);return e}function lo(n){return Array.isArray(n)&&"object"==typeof n[1]}function Ir(n){return Array.isArray(n)&&!0===n[1]}function Rx(n){return 0!=(8&n.flags)}function Km(n){return 2==(2&n.flags)}function Qm(n){return 1==(1&n.flags)}function Pr(n){return null!==n.template}function y8(n){return 0!=(512&n[2])}function zl(n,t){return n.hasOwnProperty(qo)?n[qo]:null}class x8{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function Gt(){return DT}function DT(n){return n.type.prototype.ngOnChanges&&(n.setInput=M8),w8}function w8(){const n=AT(this),t=null==n?void 0:n.current;if(t){const e=n.previous;if(e===od)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function M8(n,t,e,i){const s=AT(n)||function C8(n,t){return n[ET]=t}(n,{previous:od,current:null}),r=s.current||(s.current={}),o=s.previous,a=this.declaredInputs[e],l=o[a];r[a]=new x8(l&&l.currentValue,t,o===od),n[i]=t}Gt.ngInherit=!0;const ET="__ngSimpleChanges__";function AT(n){return n[ET]||null}const TT="http://www.w3.org/2000/svg";let Ox;function $n(n){return!!n.listen}const RT={createRenderer:(n,t)=>function Lx(){return void 0!==Ox?Ox:"undefined"!=typeof document?document:void 0}()};function hi(n){for(;Array.isArray(n);)n=n[0];return n}function Zm(n,t){return hi(t[n])}function sr(n,t){return hi(t[n.index])}function Fx(n,t){return n.data[t]}function ud(n,t){return n[t]}function Ls(n,t){const e=t[n];return lo(e)?e:e[0]}function IT(n){return 4==(4&n[2])}function Nx(n){return 128==(128&n[2])}function za(n,t){return null==t?null:n[t]}function PT(n){n[18]=0}function Bx(n,t){n[5]+=t;let e=n,i=n[3];for(;null!==i&&(1===t&&1===e[5]||-1===t&&0===e[5]);)i[5]+=t,e=i,i=i[3]}const vt={lFrame:zT(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function OT(){return vt.bindingsEnabled}function ce(){return vt.lFrame.lView}function Kt(){return vt.lFrame.tView}function si(n){return vt.lFrame.contextLView=n,n[8]}function Si(){let n=LT();for(;null!==n&&64===n.type;)n=n.parent;return n}function LT(){return vt.lFrame.currentTNode}function co(n,t){const e=vt.lFrame;e.currentTNode=n,e.isParent=t}function Vx(){return vt.lFrame.isParent}function Hx(){vt.lFrame.isParent=!1}function Jm(){return vt.isInCheckNoChangesMode}function eg(n){vt.isInCheckNoChangesMode=n}function ps(){const n=vt.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function hd(){return vt.lFrame.bindingIndex++}function Xo(n){const t=vt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function B8(n,t){const e=vt.lFrame;e.bindingIndex=e.bindingRootIndex=n,zx(t)}function zx(n){vt.lFrame.currentDirectiveIndex=n}function Ux(n){const t=vt.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}function BT(){return vt.lFrame.currentQueryIndex}function Gx(n){vt.lFrame.currentQueryIndex=n}function H8(n){const t=n[1];return 2===t.type?t.declTNode:1===t.type?n[6]:null}function VT(n,t,e){if(e&xt.SkipSelf){let s=t,r=n;for(;!(s=s.parent,null!==s||e&xt.Host||(s=H8(r),null===s||(r=r[15],10&s.type))););if(null===s)return!1;t=s,n=r}const i=vt.lFrame=HT();return i.currentTNode=t,i.lView=n,!0}function tg(n){const t=HT(),e=n[1];vt.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function HT(){const n=vt.lFrame,t=null===n?null:n.child;return null===t?zT(n):t}function zT(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function UT(){const n=vt.lFrame;return vt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const GT=UT;function ng(){const n=UT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ms(){return vt.lFrame.selectedIndex}function Ua(n){vt.lFrame.selectedIndex=n}function qn(){const n=vt.lFrame;return Fx(n.tView,n.selectedIndex)}function Ga(){vt.lFrame.currentNamespace=TT}function ig(){!function j8(){vt.lFrame.currentNamespace=null}()}function sg(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){const r=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=r;o&&(n.contentHooks||(n.contentHooks=[])).push(-e,o),a&&((n.contentHooks||(n.contentHooks=[])).push(e,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-e,l),c&&((n.viewHooks||(n.viewHooks=[])).push(e,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,c)),null!=d&&(n.destroyHooks||(n.destroyHooks=[])).push(e,d)}}function rg(n,t,e){jT(n,t,3,e)}function og(n,t,e,i){(3&n[2])===e&&jT(n,t,e,i)}function jx(n,t){let e=n[2];(3&e)===t&&(e&=2047,e+=1,n[2]=e)}function jT(n,t,e,i){const r=null!=i?i:-1,o=t.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(n[18]+=65536),(a<r||-1==r)&&(q8(n,e,t,l),n[18]=(4294901760&n[18])+l+2),l++}function q8(n,t,e,i){const s=e[i]<0,r=e[i+1],a=n[s?-e[i]:e[i]];if(s){if(n[2]>>11<n[18]>>16&&(3&n[2])===t){n[2]+=2048;try{r.call(a)}finally{}}}else try{r.call(a)}finally{}}class Fh{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function ag(n,t,e){const i=$n(n);let s=0;for(;s<e.length;){const r=e[s];if("number"==typeof r){if(0!==r)break;s++;const o=e[s++],a=e[s++],l=e[s++];i?n.setAttribute(t,a,l,o):t.setAttributeNS(o,a,l)}else{const o=r,a=e[++s];$x(o)?i&&n.setProperty(t,o,a):i?n.setAttribute(t,o,a):t.setAttribute(o,a),s++}}return s}function WT(n){return 3===n||4===n||6===n}function $x(n){return 64===n.charCodeAt(0)}function lg(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){const s=t[i];"number"==typeof s?e=s:0===e||$T(n,e,s,null,-1===e||2===e?t[++i]:null)}}return n}function $T(n,t,e,i,s){let r=0,o=n.length;if(-1===t)o=-1;else for(;r<n.length;){const a=n[r++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=r-1;break}}}for(;r<n.length;){const a=n[r];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==s&&(n[r+1]=s));if(i===n[r+1])return void(n[r+2]=s)}r++,null!==i&&r++,null!==s&&r++}-1!==o&&(n.splice(o,0,t),r=o+1),n.splice(r++,0,e),null!==i&&n.splice(r++,0,i),null!==s&&n.splice(r++,0,s)}function qT(n){return-1!==n}function fd(n){return 32767&n}function pd(n,t){let e=function Z8(n){return n>>16}(n),i=t;for(;e>0;)i=i[15],e--;return i}let qx=!0;function cg(n){const t=qx;return qx=n,t}let J8=0;function Bh(n,t){const e=Xx(n,t);if(-1!==e)return e;const i=t[1];i.firstCreatePass&&(n.injectorIndex=t.length,Yx(i.data,n),Yx(t,null),Yx(i.blueprint,null));const s=dg(n,t),r=n.injectorIndex;if(qT(s)){const o=fd(s),a=pd(s,t),l=a[1].data;for(let c=0;c<8;c++)t[r+c]=a[o+c]|l[o+c]}return t[r+8]=s,r}function Yx(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Xx(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function dg(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,i=null,s=t;for(;null!==s;){const r=s[1],o=r.type;if(i=2===o?r.declTNode:1===o?s[6]:null,null===i)return-1;if(e++,s=s[15],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return-1}function ug(n,t,e){!function eW(n,t,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(Rh)&&(i=e[Rh]),null==i&&(i=e[Rh]=J8++);const s=255&i;t.data[n+(s>>5)]|=1<<s}(n,t,e)}function KT(n,t,e){if(e&xt.Optional)return n;jm(t,"NodeInjector")}function QT(n,t,e,i){if(e&xt.Optional&&void 0===i&&(i=null),0==(e&(xt.Self|xt.Host))){const s=n[9],r=Ba(void 0);try{return s?s.get(t,i,e&xt.Optional):vT(t,i,e&xt.Optional)}finally{Ba(r)}}return KT(i,t,e)}function ZT(n,t,e,i=xt.Default,s){if(null!==n){const r=function sW(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(Rh)?n[Rh]:void 0;return"number"==typeof t?t>=0?255&t:nW:t}(e);if("function"==typeof r){if(!VT(t,n,i))return i&xt.Host?KT(s,e,i):QT(t,e,i,s);try{const o=r(i);if(null!=o||i&xt.Optional)return o;jm(e)}finally{GT()}}else if("number"==typeof r){let o=null,a=Xx(n,t),l=-1,c=i&xt.Host?t[16][6]:null;for((-1===a||i&xt.SkipSelf)&&(l=-1===a?dg(n,t):t[a+8],-1!==l&&t1(i,!1)?(o=t[1],a=fd(l),t=pd(l,t)):a=-1);-1!==a;){const d=t[1];if(e1(r,a,d.data)){const u=iW(a,t,e,o,i,c);if(u!==JT)return u}l=t[a+8],-1!==l&&t1(i,t[1].data[a+8]===c)&&e1(r,a,t)?(o=d,a=fd(l),t=pd(l,t)):a=-1}}}return QT(t,e,i,s)}const JT={};function nW(){return new md(Si(),ce())}function iW(n,t,e,i,s,r){const o=t[1],a=o.data[n+8],d=hg(a,o,e,null==i?Km(a)&&qx:i!=o&&0!=(3&a.type),s&xt.Host&&r===a);return null!==d?Vh(t,o,d,a):JT}function hg(n,t,e,i,s){const r=n.providerIndexes,o=t.data,a=1048575&r,l=n.directiveStart,d=r>>20,h=s?a+d:n.directiveEnd;for(let f=i?a:a+d;f<h;f++){const p=o[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(s){const f=o[l];if(f&&Pr(f)&&f.type===e)return l}return null}function Vh(n,t,e,i){let s=n[e];const r=t.data;if(function Y8(n){return n instanceof Fh}(s)){const o=s;o.resolving&&function t8(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new Xt(-200,`Circular dependency in DI detected for ${n}${e}`)}(fs(r[e]));const a=cg(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ba(o.injectImpl):null;VT(n,i,xt.Default);try{s=n[e]=o.factory(void 0,r,n,i),t.firstCreatePass&&e>=i.directiveStart&&function $8(n,t,e){const{ngOnChanges:i,ngOnInit:s,ngDoCheck:r}=t.type.prototype;if(i){const o=DT(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,o)}s&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,s),r&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,r),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,r))}(e,r[e],t)}finally{null!==l&&Ba(l),cg(a),o.resolving=!1,GT()}}return s}function e1(n,t,e){return!!(e[t+(n>>5)]&1<<n)}function t1(n,t){return!(n&xt.Self||n&xt.Host&&t)}class md{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return ZT(this._tNode,this._lView,t,i,e)}}function xe(n){return Va(()=>{const t=n.prototype.constructor,e=t[qo]||Kx(t),i=Object.prototype;let s=Object.getPrototypeOf(n.prototype).constructor;for(;s&&s!==i;){const r=s[qo]||Kx(s);if(r&&r!==e)return r;s=Object.getPrototypeOf(s)}return r=>new r})}function Kx(n){return mT(n)?()=>{const t=Kx(Rt(n));return t&&t()}:zl(n)}function fi(n){return function tW(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const i=e.length;let s=0;for(;s<i;){const r=e[s];if(WT(r))break;if(0===r)s+=2;else if("number"==typeof r)for(s++;s<i&&"string"==typeof e[s];)s++;else{if(r===t)return e[s+1];s+=2}}}return null}(Si(),n)}const _d="__parameters__";function vd(n,t,e){return Va(()=>{const i=function Qx(n){return function(...e){if(n){const i=n(...e);for(const s in i)this[s]=i[s]}}}(t);function s(...r){if(this instanceof s)return i.apply(this,r),this;const o=new s(...r);return a.annotation=o,a;function a(l,c,d){const u=l.hasOwnProperty(_d)?l[_d]:Object.defineProperty(l,_d,{value:[]})[_d];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(o),l}}return e&&(s.prototype=Object.create(e.prototype)),s.prototype.ngMetadataName=n,s.annotationCls=s,s})}class K{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=oe({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const oW=new K("AnalyzeForEntryComponents");function rr(n,t){void 0===t&&(t=n);for(let e=0;e<n.length;e++){let i=n[e];Array.isArray(i)?(t===n&&(t=n.slice(0,e)),rr(i,t)):t!==n&&t.push(i)}return t}function uo(n,t){n.forEach(e=>Array.isArray(e)?uo(e,t):t(e))}function s1(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function fg(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Uh(n,t){const e=[];for(let i=0;i<n;i++)e.push(t);return e}function Fs(n,t,e){let i=bd(n,t);return i>=0?n[1|i]=e:(i=~i,function cW(n,t,e,i){let s=n.length;if(s==t)n.push(e,i);else if(1===s)n.push(i,n[0]),n[0]=e;else{for(s--,n.push(n[s-1],n[s]);s>t;)n[s]=n[s-2],s--;n[t]=e,n[t+1]=i}}(n,i,t,e)),i}function Jx(n,t){const e=bd(n,t);if(e>=0)return n[1|e]}function bd(n,t){return function a1(n,t,e){let i=0,s=n.length>>e;for(;s!==i;){const r=i+(s-i>>1),o=n[r<<e];if(t===o)return r<<e;o>t?s=r:i=r+1}return~(s<<e)}(n,t,1)}const Gh={},t0="__NG_DI_FLAG__",mg="ngTempTokenPath",gW=/\n/gm,c1="__source",yW=vn({provide:String,useValue:vn});let jh;function d1(n){const t=jh;return jh=n,t}function vW(n,t=xt.Default){if(void 0===jh)throw new Xt(203,"");return null===jh?vT(n,void 0,t):jh.get(n,t&xt.Optional?null:void 0,t)}function j(n,t=xt.Default){return(function l8(){return Dx}()||vW)(Rt(n),t)}const xd=j;function n0(n){const t=[];for(let e=0;e<n.length;e++){const i=Rt(n[e]);if(Array.isArray(i)){if(0===i.length)throw new Xt(900,"");let s,r=xt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=bW(a);"number"==typeof l?-1===l?s=a.token:r|=l:s=a}t.push(j(s,r))}else t.push(j(i))}return t}function Wh(n,t){return n[t0]=t,n.prototype[t0]=t,n}function bW(n){return n[t0]}const $h=Wh(vd("Inject",n=>({token:n})),-1),Ei=Wh(vd("Optional"),8),Ns=Wh(vd("SkipSelf"),4);let _g;function Md(n){var t;return(null===(t=function r0(){if(void 0===_g&&(_g=null,gn.trustedTypes))try{_g=gn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return _g}())||void 0===t?void 0:t.createHTML(n))||n}class Ul{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class PW extends Ul{getTypeName(){return"HTML"}}class OW extends Ul{getTypeName(){return"Style"}}class LW extends Ul{getTypeName(){return"Script"}}class FW extends Ul{getTypeName(){return"URL"}}class NW extends Ul{getTypeName(){return"ResourceURL"}}function Bs(n){return n instanceof Ul?n.changingThisBreaksApplicationSecurity:n}function ho(n,t){const e=v1(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}function v1(n){return n instanceof Ul&&n.getTypeName()||null}class GW{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Md(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class jW{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const i=this.inertDocument.createElement("body");e.appendChild(i)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Md(t),e;const i=this.inertDocument.createElement("body");return i.innerHTML=Md(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(t){const e=t.attributes;for(let s=e.length-1;0<s;s--){const o=e.item(s).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&t.removeAttribute(o)}let i=t.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const $W=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qW=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Yh(n){return(n=String(n)).match($W)||n.match(qW)?n:"unsafe:"+n}function x1(n){return(n=String(n)).split(",").map(t=>Yh(t.trim())).join(", ")}function fo(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function Xh(...n){const t={};for(const e of n)for(const i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}const w1=fo("area,br,col,hr,img,wbr"),M1=fo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),C1=fo("rp,rt"),a0=Xh(w1,Xh(M1,fo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xh(C1,fo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xh(C1,M1)),l0=fo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),c0=fo("srcset"),S1=Xh(l0,c0,fo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),YW=fo("script,style,template");class XW{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let s=this.checkClobberedElement(e,e.nextSibling);if(s){e=s;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!a0.hasOwnProperty(e))return this.sanitizedSomething=!0,!YW.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=t.attributes;for(let s=0;s<i.length;s++){const r=i.item(s),o=r.name,a=o.toLowerCase();if(!S1.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=r.value;l0[a]&&(l=Yh(l)),c0[a]&&(l=x1(l)),this.buf.push(" ",o,'="',D1(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();a0.hasOwnProperty(e)&&!w1.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(D1(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const KW=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,QW=/([^\#-~ |!])/g;function D1(n){return n.replace(/&/g,"&amp;").replace(KW,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(QW,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vg;function E1(n,t){let e=null;try{vg=vg||function b1(n){const t=new jW(n);return function WW(){try{return!!(new window.DOMParser).parseFromString(Md(""),"text/html")}catch(n){return!1}}()?new GW(t):t}(n);let i=t?String(t):"";e=vg.getInertBodyElement(i);let s=5,r=i;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,i=r,r=e.innerHTML,e=vg.getInertBodyElement(i)}while(i!==r);return Md((new XW).sanitizeChildren(d0(e)||e))}finally{if(e){const i=d0(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function d0(n){return"content"in n&&function ZW(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var tn=(()=>((tn=tn||{})[tn.NONE=0]="NONE",tn[tn.HTML=1]="HTML",tn[tn.STYLE=2]="STYLE",tn[tn.SCRIPT=3]="SCRIPT",tn[tn.URL=4]="URL",tn[tn.RESOURCE_URL=5]="RESOURCE_URL",tn))();function Kh(n){const t=function Qh(){const n=ce();return n&&n[12]}();return t?t.sanitize(tn.URL,n)||"":ho(n,"URL")?Bs(n):Yh(Mt(n))}const k1="__ngContext__";function Ji(n,t){n[k1]=t}function h0(n){const t=function Zh(n){return n[k1]||null}(n);return t?Array.isArray(t)?t:t.lView:null}function p0(n){return n.ngOriginalError}function g6(n,...t){n.error(...t)}class Ko{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),i=function m6(n){return n&&n.ngErrorLogger||g6}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&p0(t);for(;e&&p0(e);)e=p0(e);return e||null}}const L1=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(gn))();function po(n){return n instanceof Function?n():n}var Vs=(()=>((Vs=Vs||{})[Vs.Important=1]="Important",Vs[Vs.DashCase=2]="DashCase",Vs))();function g0(n,t){return undefined(n,t)}function Jh(n){const t=n[3];return Ir(t)?t[3]:t}function _0(n){return H1(n[13])}function y0(n){return H1(n[4])}function H1(n){for(;null!==n&&!Ir(n);)n=n[4];return n}function Sd(n,t,e,i,s){if(null!=i){let r,o=!1;Ir(i)?r=i:lo(i)&&(o=!0,i=i[0]);const a=hi(i);0===n&&null!==e?null==s?$1(t,e,a):Gl(t,e,a,s||null,!0):1===n&&null!==e?Gl(t,e,a,s||null,!0):2===n?function J1(n,t,e){const i=bg(n,t);i&&function V6(n,t,e,i){$n(n)?n.removeChild(t,e,i):t.removeChild(e)}(n,i,t,e)}(t,a,o):3===n&&t.destroyNode(a),null!=r&&function U6(n,t,e,i,s){const r=e[7];r!==hi(e)&&Sd(t,n,i,r,s);for(let a=10;a<e.length;a++){const l=e[a];ef(l[1],l,n,t,i,r)}}(t,n,r,e,s)}}function b0(n,t,e){return $n(n)?n.createElement(t,e):null===e?n.createElement(t):n.createElementNS(e,t)}function U1(n,t){const e=n[9],i=e.indexOf(t),s=t[3];1024&t[2]&&(t[2]&=-1025,Bx(s,-1)),e.splice(i,1)}function x0(n,t){if(n.length<=10)return;const e=10+t,i=n[e];if(i){const s=i[17];null!==s&&s!==n&&U1(s,i),t>0&&(n[e-1][4]=i[4]);const r=fg(n,10+t);!function R6(n,t){ef(n,t,t[11],2,null,null),t[0]=null,t[6]=null}(i[1],i);const o=r[19];null!==o&&o.detachView(r[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function G1(n,t){if(!(256&t[2])){const e=t[11];$n(e)&&e.destroyNode&&ef(n,t,e,3,null,null),function O6(n){let t=n[13];if(!t)return w0(n[1],n);for(;t;){let e=null;if(lo(t))e=t[13];else{const i=t[10];i&&(e=i)}if(!e){for(;t&&!t[4]&&t!==n;)lo(t)&&w0(t[1],t),t=t[3];null===t&&(t=n),lo(t)&&w0(t[1],t),e=t&&t[4]}t=e}}(t)}}function w0(n,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function B6(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let i=0;i<e.length;i+=2){const s=t[e[i]];if(!(s instanceof Fh)){const r=e[i+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){const a=s[r[o]],l=r[o+1];try{l.call(a)}finally{}}else try{r.call(s)}finally{}}}}(n,t),function N6(n,t){const e=n.cleanup,i=t[7];let s=-1;if(null!==e)for(let r=0;r<e.length-1;r+=2)if("string"==typeof e[r]){const o=e[r+1],a="function"==typeof o?o(t):hi(t[o]),l=i[s=e[r+2]],c=e[r+3];"boolean"==typeof c?a.removeEventListener(e[r],l,c):c>=0?i[s=c]():i[s=-c].unsubscribe(),r+=2}else{const o=i[s=e[r+1]];e[r].call(o)}if(null!==i){for(let r=s+1;r<i.length;r++)i[r]();t[7]=null}}(n,t),1===t[1].type&&$n(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&Ir(t[3])){e!==t[3]&&U1(e,t);const i=t[19];null!==i&&i.detachView(n)}}}function j1(n,t,e){return function W1(n,t,e){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return e[0];if(2&i.flags){const s=n.data[i.directiveStart].encapsulation;if(s===kr.None||s===kr.Emulated)return null}return sr(i,e)}(n,t.parent,e)}function Gl(n,t,e,i,s){$n(n)?n.insertBefore(t,e,i,s):t.insertBefore(e,i,s)}function $1(n,t,e){$n(n)?n.appendChild(t,e):t.appendChild(e)}function q1(n,t,e,i,s){null!==i?Gl(n,t,e,i,s):$1(n,t,e)}function bg(n,t){return $n(n)?n.parentNode(t):t.parentNode}function Y1(n,t,e){return K1(n,t,e)}let K1=function X1(n,t,e){return 40&n.type?sr(n,e):null};function xg(n,t,e,i){const s=j1(n,i,t),r=t[11],a=Y1(i.parent||t[6],i,t);if(null!=s)if(Array.isArray(e))for(let l=0;l<e.length;l++)q1(r,s,e[l],a,!1);else q1(r,s,e,a,!1)}function wg(n,t){if(null!==t){const e=t.type;if(3&e)return sr(t,n);if(4&e)return C0(-1,n[t.index]);if(8&e){const i=t.child;if(null!==i)return wg(n,i);{const s=n[t.index];return Ir(s)?C0(-1,s):hi(s)}}if(32&e)return g0(t,n)()||hi(n[t.index]);{const i=Z1(n,t);return null!==i?Array.isArray(i)?i[0]:wg(Jh(n[16]),i):wg(n,t.next)}}return null}function Z1(n,t){return null!==t?n[16][6].projection[t.projection]:null}function C0(n,t){const e=10+n+1;if(e<t.length){const i=t[e],s=i[1].firstChild;if(null!==s)return wg(i,s)}return t[7]}function S0(n,t,e,i,s,r,o){for(;null!=e;){const a=i[e.index],l=e.type;if(o&&0===t&&(a&&Ji(hi(a),i),e.flags|=4),64!=(64&e.flags))if(8&l)S0(n,t,e.child,i,s,r,!1),Sd(t,n,s,a,r);else if(32&l){const c=g0(e,i);let d;for(;d=c();)Sd(t,n,s,d,r);Sd(t,n,s,a,r)}else 16&l?ek(n,t,i,e,s,r):Sd(t,n,s,a,r);e=o?e.projectionNext:e.next}}function ef(n,t,e,i,s,r){S0(e,i,n.firstChild,t,s,r,!1)}function ek(n,t,e,i,s,r){const o=e[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Sd(t,n,s,l[c],r);else S0(n,t,l,o[3],s,r,!0)}function tk(n,t,e){$n(n)?n.setAttribute(t,"style",e):t.style.cssText=e}function D0(n,t,e){$n(n)?""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e):t.className=e}function nk(n,t,e){let i=n.length;for(;;){const s=n.indexOf(t,e);if(-1===s)return s;if(0===s||n.charCodeAt(s-1)<=32){const r=t.length;if(s+r===i||n.charCodeAt(s+r)<=32)return s}e=s+1}}const ik="ng-template";function j6(n,t,e){let i=0;for(;i<n.length;){let s=n[i++];if(e&&"class"===s){if(s=n[i],-1!==nk(s.toLowerCase(),t,0))return!0}else if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===t)return!0;return!1}}return!1}function sk(n){return 4===n.type&&n.value!==ik}function W6(n,t,e){return t===(4!==n.type||e?n.value:ik)}function $6(n,t,e){let i=4;const s=n.attrs||[],r=function X6(n){for(let t=0;t<n.length;t++)if(WT(n[t]))return t;return n.length}(s);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!W6(n,l,e)||""===l&&1===t.length){if(Or(i))return!1;o=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==n.attrs){if(!j6(n.attrs,c,e)){if(Or(i))return!1;o=!0}continue}const u=q6(8&i?"class":l,s,sk(n),e);if(-1===u){if(Or(i))return!1;o=!0;continue}if(""!==c){let h;h=u>r?"":s[u+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==nk(f,c,0)||2&i&&c!==h){if(Or(i))return!1;o=!0}}}}else{if(!o&&!Or(i)&&!Or(l))return!1;if(o&&Or(l))continue;o=!1,i=l|1&i}}return Or(i)||o}function Or(n){return 0==(1&n)}function q6(n,t,e,i){if(null===t)return-1;let s=0;if(i||!e){let r=!1;for(;s<t.length;){const o=t[s];if(o===n)return s;if(3===o||6===o)r=!0;else{if(1===o||2===o){let a=t[++s];for(;"string"==typeof a;)a=t[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=r?1:2}return-1}return function K6(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const i=n[e];if("number"==typeof i)return-1;if(i===t)return e;e++}return-1}(t,n)}function rk(n,t,e=!1){for(let i=0;i<t.length;i++)if($6(n,t[i],e))return!0;return!1}function Q6(n,t){e:for(let e=0;e<t.length;e++){const i=t[e];if(n.length===i.length){for(let s=0;s<n.length;s++)if(n[s]!==i[s])continue e;return!0}}return!1}function ok(n,t){return n?":not("+t.trim()+")":t}function Z6(n){let t=n[0],e=1,i=2,s="",r=!1;for(;e<n.length;){let o=n[e];if("string"==typeof o)if(2&i){const a=n[++e];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?s+="."+o:4&i&&(s+=" "+o);else""!==s&&!Or(o)&&(t+=ok(r,s),s=""),i=o,r=r||!Or(i);e++}return""!==s&&(t+=ok(r,s)),t}const Ct={};function Q(n){ak(Kt(),ce(),ms()+n,Jm())}function ak(n,t,e,i){if(!i)if(3==(3&t[2])){const r=n.preOrderCheckHooks;null!==r&&rg(t,r,e)}else{const r=n.preOrderHooks;null!==r&&og(t,r,0,e)}Ua(e)}function Mg(n,t){return n<<17|t<<2}function Lr(n){return n>>17&32767}function E0(n){return 2|n}function Qo(n){return(131068&n)>>2}function A0(n,t){return-131069&n|t<<2}function T0(n){return 1|n}function yk(n,t){const e=n.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const s=e[i],r=e[i+1];if(-1!==r){const o=n.data[r];Gx(s),o.contentQueries(2,t[r],r)}}}function tf(n,t,e,i,s,r,o,a,l,c){const d=t.blueprint.slice();return d[0]=s,d[2]=140|i,PT(d),d[3]=d[15]=n,d[8]=e,d[10]=o||n&&n[10],d[11]=a||n&&n[11],d[12]=l||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=r,d[16]=2==t.type?n[16]:d,d}function Dd(n,t,e,i,s){let r=n.data[t];if(null===r)r=function B0(n,t,e,i,s){const r=LT(),o=Vx(),l=n.data[t]=function g$(n,t,e,i,s,r){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?r:r&&r.parent,e,t,i,s);return null===n.firstChild&&(n.firstChild=l),null!==r&&(o?null==r.child&&null!==l.parent&&(r.child=l):null===r.next&&(r.next=l)),l}(n,t,e,i,s),function N8(){return vt.lFrame.inI18n}()&&(r.flags|=64);else if(64&r.type){r.type=e,r.value=i,r.attrs=s;const o=function Lh(){const n=vt.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();r.injectorIndex=null===o?-1:o.injectorIndex}return co(r,!0),r}function Ed(n,t,e,i){if(0===e)return-1;const s=t.length;for(let r=0;r<e;r++)t.push(i),n.blueprint.push(i),n.data.push(null);return s}function nf(n,t,e){tg(t);try{const i=n.viewQuery;null!==i&&q0(1,i,e);const s=n.template;null!==s&&vk(n,t,s,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&yk(n,t),n.staticViewQueries&&q0(2,n.viewQuery,e);const r=n.components;null!==r&&function f$(n,t){for(let e=0;e<t.length;e++)O$(n,t[e])}(t,r)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[2]&=-5,ng()}}function Ad(n,t,e,i){const s=t[2];if(256==(256&s))return;tg(t);const r=Jm();try{PT(t),function FT(n){return vt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&vk(n,t,e,2,i);const o=3==(3&s);if(!r)if(o){const c=n.preOrderCheckHooks;null!==c&&rg(t,c,null)}else{const c=n.preOrderHooks;null!==c&&og(t,c,0,null),jx(t,0)}if(function I$(n){for(let t=_0(n);null!==t;t=y0(t)){if(!t[2])continue;const e=t[9];for(let i=0;i<e.length;i++){const s=e[i],r=s[3];0==(1024&s[2])&&Bx(r,1),s[2]|=1024}}}(t),function R$(n){for(let t=_0(n);null!==t;t=y0(t))for(let e=10;e<t.length;e++){const i=t[e],s=i[1];Nx(i)&&Ad(s,i,s.template,i[8])}}(t),null!==n.contentQueries&&yk(n,t),!r)if(o){const c=n.contentCheckHooks;null!==c&&rg(t,c)}else{const c=n.contentHooks;null!==c&&og(t,c,1),jx(t,1)}!function u$(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const s=e[i];if(s<0)Ua(~s);else{const r=s,o=e[++i],a=e[++i];B8(o,r),a(2,t[r])}}}finally{Ua(-1)}}(n,t);const a=n.components;null!==a&&function h$(n,t){for(let e=0;e<t.length;e++)P$(n,t[e])}(t,a);const l=n.viewQuery;if(null!==l&&q0(2,l,i),!r)if(o){const c=n.viewCheckHooks;null!==c&&rg(t,c)}else{const c=n.viewHooks;null!==c&&og(t,c,2),jx(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Bx(t[3],-1))}finally{ng()}}function p$(n,t,e,i){const s=t[10],r=!Jm(),o=IT(t);try{r&&!o&&s.begin&&s.begin(),o&&nf(n,t,i),Ad(n,t,e,i)}finally{r&&!o&&s.end&&s.end()}}function vk(n,t,e,i,s){const r=ms(),o=2&i;try{Ua(-1),o&&t.length>20&&ak(n,t,20,Jm()),e(i,s)}finally{Ua(r)}}function bk(n,t,e){if(Rx(t)){const s=t.directiveEnd;for(let r=t.directiveStart;r<s;r++){const o=n.data[r];o.contentQueries&&o.contentQueries(1,e[r],r)}}}function V0(n,t,e){!OT()||(function M$(n,t,e,i){const s=e.directiveStart,r=e.directiveEnd;n.firstCreatePass||Bh(e,t),Ji(i,t);const o=e.initialInputs;for(let a=s;a<r;a++){const l=n.data[a],c=Pr(l);c&&A$(t,e,l);const d=Vh(t,n,a,e);Ji(d,t),null!==o&&T$(0,a-s,d,l,0,o),c&&(Ls(e.index,t)[8]=d)}}(n,t,e,sr(e,t)),128==(128&e.flags)&&function C$(n,t,e){const i=e.directiveStart,s=e.directiveEnd,o=e.index,a=function V8(){return vt.lFrame.currentDirectiveIndex}();try{Ua(o);for(let l=i;l<s;l++){const c=n.data[l],d=t[l];zx(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Ak(c,d)}}finally{Ua(-1),zx(a)}}(n,t,e))}function H0(n,t,e=sr){const i=t.localNames;if(null!==i){let s=t.index+1;for(let r=0;r<i.length;r+=2){const o=i[r+1],a=-1===o?e(t,n):n[o];n[s++]=a}}}function xk(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Dg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function Dg(n,t,e,i,s,r,o,a,l,c){const d=20+i,u=d+s,h=function m$(n,t){const e=[];for(let i=0;i<t;i++)e.push(i<n?null:Ct);return e}(d,u),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:u,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function Ck(n,t,e,i){const s=Ok(t);null===e?s.push(i):(s.push(e),n.firstCreatePass&&Lk(n).push(i,s.length-1))}function Sk(n,t,e){for(let i in n)if(n.hasOwnProperty(i)){const s=n[i];(e=null===e?{}:e).hasOwnProperty(i)?e[i].push(t,s):e[i]=[t,s]}return e}function Hs(n,t,e,i,s,r,o,a){const l=sr(t,e);let d,c=t.inputs;!a&&null!=c&&(d=c[i])?(Bk(n,e,d,i,s),Km(t)&&function v$(n,t){const e=Ls(t,n);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(i=function y$(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),s=null!=o?o(s,t.value||"",i):s,$n(r)?r.setProperty(l,i,s):$x(i)||(l.setProperty?l.setProperty(i,s):l[i]=s))}function z0(n,t,e,i){let s=!1;if(OT()){const r=function S$(n,t,e){const i=n.directiveRegistry;let s=null;if(i)for(let r=0;r<i.length;r++){const o=i[r];rk(e,o.selectors,!1)&&(s||(s=[]),ug(Bh(e,t),n,o.type),Pr(o)?(Tk(n,e),s.unshift(o)):s.push(o))}return s}(n,t,e),o=null===i?null:{"":-1};if(null!==r){s=!0,kk(e,n.data.length,r.length);for(let d=0;d<r.length;d++){const u=r[d];u.providersResolver&&u.providersResolver(u)}let a=!1,l=!1,c=Ed(n,t,r.length,null);for(let d=0;d<r.length;d++){const u=r[d];e.mergedAttrs=lg(e.mergedAttrs,u.hostAttrs),Rk(n,e,t,c,u),E$(c,u,o),null!==u.contentQueries&&(e.flags|=8),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=128);const h=u.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function _$(n,t){const i=t.directiveEnd,s=n.data,r=t.attrs,o=[];let a=null,l=null;for(let c=t.directiveStart;c<i;c++){const d=s[c],u=d.inputs,h=null===r||sk(t)?null:k$(u,r);o.push(h),a=Sk(u,c,a),l=Sk(d.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=a,t.outputs=l}(n,e)}o&&function D$(n,t,e){if(t){const i=n.localNames=[];for(let s=0;s<t.length;s+=2){const r=e[t[s+1]];if(null==r)throw new Xt(-301,`Export of name '${t[s+1]}' not found!`);i.push(t[s],r)}}}(e,i,o)}return e.mergedAttrs=lg(e.mergedAttrs,e.attrs),s}function Ek(n,t,e,i,s,r){const o=r.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~t.index;(function w$(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(a)!=l&&a.push(l),a.push(i,s,o)}}function Ak(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function Tk(n,t){t.flags|=2,(n.components||(n.components=[])).push(t.index)}function E$(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;Pr(t)&&(e[""]=n)}}function kk(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function Rk(n,t,e,i,s){n.data[i]=s;const r=s.factory||(s.factory=zl(s.type)),o=new Fh(r,Pr(s),null);n.blueprint[i]=o,e[i]=o,Ek(n,t,0,i,Ed(n,e,s.hostVars,Ct),s)}function A$(n,t,e){const i=sr(t,n),s=xk(e),r=n[10],o=Eg(n,tf(n,s,null,e.onPush?64:16,i,t,r,r.createRenderer(i,e),null,null));n[t.index]=o}function mo(n,t,e,i,s,r){const o=sr(n,t);!function U0(n,t,e,i,s,r,o){if(null==r)$n(n)?n.removeAttribute(t,s,e):t.removeAttribute(s);else{const a=null==o?Mt(r):o(r,i||"",s);$n(n)?n.setAttribute(t,s,a,e):e?t.setAttributeNS(e,s,a):t.setAttribute(s,a)}}(t[11],o,r,n.value,e,i,s)}function T$(n,t,e,i,s,r){const o=r[t];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],d=o[l++],u=o[l++];null!==a?i.setInput(e,u,c,d):e[d]=u}}}function k$(n,t){let e=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;n.hasOwnProperty(s)&&(null===e&&(e=[]),e.push(s,n[s],t[i+1])),i+=2}else i+=2;else i+=4}return e}function Ik(n,t,e,i){return new Array(n,!0,!1,t,null,0,i,e,null,null)}function P$(n,t){const e=Ls(t,n);if(Nx(e)){const i=e[1];80&e[2]?Ad(i,e,i.template,e[8]):e[5]>0&&G0(e)}}function G0(n){for(let i=_0(n);null!==i;i=y0(i))for(let s=10;s<i.length;s++){const r=i[s];if(1024&r[2]){const o=r[1];Ad(o,r,o.template,r[8])}else r[5]>0&&G0(r)}const e=n[1].components;if(null!==e)for(let i=0;i<e.length;i++){const s=Ls(e[i],n);Nx(s)&&s[5]>0&&G0(s)}}function O$(n,t){const e=Ls(t,n),i=e[1];(function L$(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(i,e),nf(i,e,e[8])}function Eg(n,t){return n[13]?n[14][4]=t:n[13]=t,n[14]=t,t}function j0(n){for(;n;){n[2]|=64;const t=Jh(n);if(y8(n)&&!t)return n;n=t}return null}function $0(n,t,e){const i=t[10];i.begin&&i.begin();try{Ad(n,t,n.template,e)}catch(s){throw Nk(t,s),s}finally{i.end&&i.end()}}function Pk(n){!function W0(n){for(let t=0;t<n.components.length;t++){const e=n.components[t],i=h0(e),s=i[1];p$(s,i,s.template,e)}}(n[8])}function q0(n,t,e){Gx(0),t(n,e)}const V$=(()=>Promise.resolve(null))();function Ok(n){return n[7]||(n[7]=[])}function Lk(n){return n.cleanup||(n.cleanup=[])}function Fk(n,t,e){return(null===n||Pr(n))&&(e=function A8(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(e[t.index])),e[11]}function Nk(n,t){const e=n[9],i=e?e.get(Ko,null):null;i&&i.handleError(t)}function Bk(n,t,e,i,s){for(let r=0;r<e.length;){const o=e[r++],a=e[r++],l=t[o],c=n.data[o];null!==c.setInput?c.setInput(l,s,i,a):l[a]=s}}function Zo(n,t,e){const i=Zm(t,n);!function z1(n,t,e){$n(n)?n.setValue(t,e):t.textContent=e}(n[11],i,e)}function Ag(n,t,e){let i=e?n.styles:null,s=e?n.classes:null,r=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?r=a:1==r?s=wx(s,a):2==r&&(i=wx(i,a+": "+t[++o]+";"))}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=s:n.classesWithoutHost=s}const Y0=new K("INJECTOR",-1);class Vk{get(t,e=Gh){if(e===Gh){const i=new Error(`NullInjectorError: No provider for ${cn(t)}!`);throw i.name="NullInjectorError",i}return e}}const X0=new K("Set Injector scope."),sf={},U$={};let K0;function Hk(){return void 0===K0&&(K0=new Vk),K0}function zk(n,t=null,e=null,i){const s=Uk(n,t,e,i);return s._resolveInjectorDefTypes(),s}function Uk(n,t=null,e=null,i){return new G$(n,e,t||Hk(),i)}class G${constructor(t,e,i,s=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];e&&uo(e,a=>this.processProvider(a,t,e)),uo([t],a=>this.processInjectorType(a,[],r)),this.records.set(Y0,Td(void 0,this));const o=this.records.get(X0);this.scope=null!=o?o.value:null,this.source=s||("object"==typeof t?null:cn(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Gh,i=xt.Default){this.assertNotDestroyed();const s=d1(this),r=Ba(void 0);try{if(!(i&xt.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function Q$(n){return"function"==typeof n||"object"==typeof n&&n instanceof K}(t)&&Cx(t);a=l&&this.injectableDefInScope(l)?Td(Q0(t),sf):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(i&xt.Self?Hk():this.parent).get(t,e=i&xt.Optional&&e===Gh?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[mg]=o[mg]||[]).unshift(cn(t)),s)throw o;return function xW(n,t,e,i){const s=n[mg];throw t[c1]&&s.unshift(t[c1]),n.message=function wW(n,t,e,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let s=cn(t);if(Array.isArray(t))s=t.map(cn).join(" -> ");else if("object"==typeof t){let r=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];r.push(o+":"+("string"==typeof a?JSON.stringify(a):cn(a)))}s=`{${r.join(", ")}}`}return`${e}${i?"("+i+")":""}[${s}]: ${n.replace(gW,"\n  ")}`}("\n"+n.message,s,e,i),n.ngTokenPath=s,n[mg]=null,n}(o,t,"R3InjectorError",this.source)}throw o}finally{Ba(r),d1(s)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((i,s)=>t.push(cn(s))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Xt(205,"")}processInjectorType(t,e,i){if(!(t=Rt(t)))return!1;let s=_T(t);const r=null==s&&t.ngModule||void 0,o=void 0===r?t:r,a=-1!==i.indexOf(o);if(void 0!==r&&(s=_T(r)),null==s)return!1;if(null!=s.imports&&!a){let d;i.push(o);try{uo(s.imports,u=>{this.processInjectorType(u,e,i)&&(void 0===d&&(d=[]),d.push(u))})}finally{}if(void 0!==d)for(let u=0;u<d.length;u++){const{ngModule:h,providers:f}=d[u];uo(f,p=>this.processProvider(p,h,f||bn))}}this.injectorDefTypes.add(o);const l=zl(o)||(()=>new o);this.records.set(o,Td(l,sf));const c=s.providers;if(null!=c&&!a){const d=t;uo(c,u=>this.processProvider(u,d,c))}return void 0!==r&&void 0!==t.providers}processProvider(t,e,i){let s=kd(t=Rt(t))?t:Rt(t&&t.provide);const r=function W$(n,t,e){return jk(n)?Td(void 0,n.useValue):Td(Gk(n),sf)}(t);if(kd(t)||!0!==t.multi)this.records.get(s);else{let o=this.records.get(s);o||(o=Td(void 0,sf,!0),o.factory=()=>n0(o.multi),this.records.set(s,o)),s=t,o.multi.push(t)}this.records.set(s,r)}hydrate(t,e){return e.value===sf&&(e.value=U$,e.value=e.factory()),"object"==typeof e.value&&e.value&&function K$(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Rt(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Q0(n){const t=Cx(n),e=null!==t?t.factory:zl(n);if(null!==e)return e;if(n instanceof K)throw new Xt(204,"");if(n instanceof Function)return function j$(n){const t=n.length;if(t>0)throw Uh(t,"?"),new Xt(204,"");const e=function r8(n){const t=n&&(n[Wm]||n[yT]);if(t){const e=function o8(n){if(n.hasOwnProperty("name"))return n.name;const t=(""+n).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new Xt(204,"")}function Gk(n,t,e){let i;if(kd(n)){const s=Rt(n);return zl(s)||Q0(s)}if(jk(n))i=()=>Rt(n.useValue);else if(function q$(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...n0(n.deps||[]));else if(function $$(n){return!(!n||!n.useExisting)}(n))i=()=>j(Rt(n.useExisting));else{const s=Rt(n&&(n.useClass||n.provide));if(!function X$(n){return!!n.deps}(n))return zl(s)||Q0(s);i=()=>new s(...n0(n.deps))}return i}function Td(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function jk(n){return null!==n&&"object"==typeof n&&yW in n}function kd(n){return"function"==typeof n}let zn=(()=>{class n{static create(e,i){var s;if(Array.isArray(e))return zk({name:""},i,e,"");{const r=null!==(s=e.name)&&void 0!==s?s:"";return zk({name:r},e.parent,e.providers,r)}}}return n.THROW_IF_NOT_FOUND=Gh,n.NULL=new Vk,n.\u0275prov=oe({token:n,providedIn:"any",factory:()=>j(Y0)}),n.__NG_ELEMENT_ID__=-1,n})();function rq(n,t){sg(h0(n)[1],Si())}function Y(n){let t=function nR(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const i=[n];for(;t;){let s;if(Pr(n))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Xt(903,"");s=t.\u0275dir}if(s){if(e){i.push(s);const o=n;o.inputs=ew(n.inputs),o.declaredInputs=ew(n.declaredInputs),o.outputs=ew(n.outputs);const a=s.hostBindings;a&&cq(n,a);const l=s.viewQuery,c=s.contentQueries;if(l&&aq(n,l),c&&lq(n,c),xx(n.inputs,s.inputs),xx(n.declaredInputs,s.declaredInputs),xx(n.outputs,s.outputs),Pr(s)&&s.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(s.data.animation)}}const r=s.features;if(r)for(let o=0;o<r.length;o++){const a=r[o];a&&a.ngInherit&&a(n),a===Y&&(e=!1)}}t=Object.getPrototypeOf(t)}!function oq(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){const s=n[i];s.hostVars=t+=s.hostVars,s.hostAttrs=lg(s.hostAttrs,e=lg(e,s.hostAttrs))}}(i)}function ew(n){return n===od?{}:n===bn?[]:n}function aq(n,t){const e=n.viewQuery;n.viewQuery=e?(i,s)=>{t(i,s),e(i,s)}:t}function lq(n,t){const e=n.contentQueries;n.contentQueries=e?(i,s,r)=>{t(i,s,r),e(i,s,r)}:t}function cq(n,t){const e=n.hostBindings;n.hostBindings=e?(i,s)=>{t(i,s),e(i,s)}:t}let Tg=null;function Rd(){if(!Tg){const n=gn.Symbol;if(n&&n.iterator)Tg=n.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const i=t[e];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Tg=i)}}}return Tg}function rf(n){return!!tw(n)&&(Array.isArray(n)||!(n instanceof Map)&&Rd()in n)}function tw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function go(n,t,e){return n[t]=e}function es(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function Ge(n,t,e,i){const s=ce();return es(s,hd(),t)&&(Kt(),mo(qn(),s,n,t,e,i)),Ge}function Pd(n,t,e,i){return es(n,hd(),e)?t+Mt(e)+i:Ct}function Ye(n,t,e,i,s,r,o,a){const l=ce(),c=Kt(),d=n+20,u=c.firstCreatePass?function gq(n,t,e,i,s,r,o,a,l){const c=t.consts,d=Dd(t,n,4,o||null,za(c,a));z0(t,e,d,za(c,l)),sg(t,d);const u=d.tViews=Dg(2,d,i,s,r,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,d),u.queries=t.queries.embeddedTView(d)),d}(d,c,l,t,e,i,s,r,o):c.data[d];co(u,!1);const h=l[11].createComment("");xg(c,l,h,u),Ji(h,l),Eg(l,l[d]=Ik(h,l,h,u)),Qm(u)&&V0(c,l,u),null!=o&&H0(l,u,a)}function zs(n){return ud(function F8(){return vt.lFrame.contextLView}(),20+n)}function v(n,t=xt.Default){const e=ce();return null===e?j(n,t):ZT(Si(),e,Rt(n),t)}function Ud(){throw new Error("invalid")}function te(n,t,e){const i=ce();return es(i,hd(),t)&&Hs(Kt(),qn(),i,n,t,i[11],e,!1),te}function ow(n,t,e,i,s){const o=s?"class":"style";Bk(n,e,t.inputs[o],o,i)}function N(n,t,e,i){const s=ce(),r=Kt(),o=20+n,a=s[11],l=s[o]=b0(a,t,function W8(){return vt.lFrame.currentNamespace}()),c=r.firstCreatePass?function Nq(n,t,e,i,s,r,o){const a=t.consts,c=Dd(t,n,2,s,za(a,r));return z0(t,e,c,za(a,o)),null!==c.attrs&&Ag(c,c.attrs,!1),null!==c.mergedAttrs&&Ag(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(o,r,s,0,t,e,i):r.data[o];co(c,!0);const d=c.mergedAttrs;null!==d&&ag(a,l,d);const u=c.classes;null!==u&&D0(a,l,u);const h=c.styles;null!==h&&tk(a,l,h),64!=(64&c.flags)&&xg(r,s,l,c),0===function R8(){return vt.lFrame.elementDepthCount}()&&Ji(l,s),function I8(){vt.lFrame.elementDepthCount++}(),Qm(c)&&(V0(r,s,c),bk(r,c,s)),null!==i&&H0(s,c)}function B(){let n=Si();Vx()?Hx():(n=n.parent,co(n,!1));const t=n;!function P8(){vt.lFrame.elementDepthCount--}();const e=Kt();e.firstCreatePass&&(sg(e,n),Rx(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function K8(n){return 0!=(16&n.flags)}(t)&&ow(e,t,ce(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Q8(n){return 0!=(32&n.flags)}(t)&&ow(e,t,ce(),t.stylesWithoutHost,!1)}function Ne(n,t,e,i){N(n,t,e,i),B()}function Gd(n,t,e){const i=ce(),s=Kt(),r=n+20,o=s.firstCreatePass?function Bq(n,t,e,i,s){const r=t.consts,o=za(r,i),a=Dd(t,n,8,"ng-container",o);return null!==o&&Ag(a,o,!0),z0(t,e,a,za(r,s)),null!==t.queries&&t.queries.elementStart(t,a),a}(r,s,i,t,e):s.data[r];co(o,!0);const a=i[r]=i[11].createComment("");xg(s,i,a,o),Ji(a,i),Qm(o)&&(V0(s,i,o),bk(s,o,i)),null!=e&&H0(i,o)}function jd(){let n=Si();const t=Kt();Vx()?Hx():(n=n.parent,co(n,!1)),t.firstCreatePass&&(sg(t,n),Rx(n)&&t.queries.elementEnd(n))}function Us(){return ce()}function lf(n){return!!n&&"function"==typeof n.then}const aw=function wR(n){return!!n&&"function"==typeof n.subscribe};function Ae(n,t,e,i){const s=ce(),r=Kt(),o=Si();return MR(r,s,s[11],o,n,t,!!e,i),Ae}function Ig(n,t){const e=Si(),i=ce(),s=Kt();return MR(s,i,Fk(Ux(s.data),e,i),e,n,t,!1),Ig}function MR(n,t,e,i,s,r,o,a){const l=Qm(i),d=n.firstCreatePass&&Lk(n),u=t[8],h=Ok(t);let f=!0;if(3&i.type||a){const g=sr(i,t),_=a?a(g):g,y=h.length,b=a?x=>a(hi(x[i.index])):i.index;if($n(e)){let x=null;if(!a&&l&&(x=function Vq(n,t,e,i){const s=n.cleanup;if(null!=s)for(let r=0;r<s.length-1;r+=2){const o=s[r];if(o===e&&s[r+1]===i){const a=t[7],l=s[r+2];return a.length>l?a[l]:null}"string"==typeof o&&(r+=2)}return null}(n,t,s,i.index)),null!==x)(x.__ngLastListenerFn__||x).__ngNextListenerFn__=r,x.__ngLastListenerFn__=r,f=!1;else{r=lw(i,t,u,r,!1);const w=e.listen(_,s,r);h.push(r,w),d&&d.push(s,b,y,y+1)}}else r=lw(i,t,u,r,!0),_.addEventListener(s,r,o),h.push(r),d&&d.push(s,b,y,o)}else r=lw(i,t,u,r,!1);const p=i.outputs;let m;if(f&&null!==p&&(m=p[s])){const g=m.length;if(g)for(let _=0;_<g;_+=2){const C=t[m[_]][m[_+1]].subscribe(r),S=h.length;h.push(r,C),d&&d.push(s,i.index,S,-(S+1))}}}function CR(n,t,e,i){try{return!1!==e(i)}catch(s){return Nk(n,s),!1}}function lw(n,t,e,i,s){return function r(o){if(o===Function)return i;const a=2&n.flags?Ls(n.index,t):t;0==(32&t[2])&&j0(a);let l=CR(t,0,i,o),c=r.__ngNextListenerFn__;for(;c;)l=CR(t,0,c,o)&&l,c=c.__ngNextListenerFn__;return s&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Je(n=1){return function z8(n){return(vt.lFrame.contextLView=function U8(n,t){for(;n>0;)t=t[15],n--;return t}(n,vt.lFrame.contextLView))[8]}(n)}function Hq(n,t){let e=null;const i=function Y6(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(n);for(let s=0;s<t.length;s++){const r=t[s];if("*"!==r){if(null===i?rk(n,r,!0):Q6(i,r))return s}else e=s}return e}function dn(n){const t=ce()[16][6];if(!t.projection){const i=t.projection=Uh(n?n.length:1,null),s=i.slice();let r=t.child;for(;null!==r;){const o=n?Hq(r,n):0;null!==o&&(s[o]?s[o].projectionNext=r:i[o]=r,s[o]=r),r=r.next}}}function rt(n,t=0,e){const i=ce(),s=Kt(),r=Dd(s,20+n,16,null,e||null);null===r.projection&&(r.projection=t),Hx(),64!=(64&r.flags)&&function z6(n,t,e){ek(t[11],0,t,e,j1(n,e,t),Y1(e.parent||t[6],e,t))}(s,i,r)}function OR(n,t,e,i,s){const r=n[e+1],o=null===t;let a=i?Lr(r):Qo(r),l=!1;for(;0!==a&&(!1===l||o);){const d=n[a+1];Gq(n[a],t)&&(l=!0,n[a+1]=i?T0(d):E0(d)),a=i?Lr(d):Qo(d)}l&&(n[e+1]=i?E0(r):T0(r))}function Gq(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&bd(n,t)>=0}const Ai={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function LR(n){return n.substring(Ai.key,Ai.keyEnd)}function FR(n,t){const e=Ai.textEnd;return e===t?-1:(t=Ai.keyEnd=function qq(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,Ai.key=t,e),Wd(n,t,e))}function Wd(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function ts(n,t,e){return Nr(n,t,e,!1),ts}function Ke(n,t){return Nr(n,t,null,!0),Ke}function yo(n,t){for(let e=function Wq(n){return function BR(n){Ai.key=0,Ai.keyEnd=0,Ai.value=0,Ai.valueEnd=0,Ai.textEnd=n.length}(n),FR(n,Wd(n,0,Ai.textEnd))}(t);e>=0;e=FR(t,e))Fs(n,LR(t),!0)}function Nr(n,t,e,i){const s=ce(),r=Kt(),o=Xo(2);r.firstUpdatePass&&UR(r,n,o,i),t!==Ct&&es(s,o,t)&&jR(r,r.data[ms()],s,s[11],n,s[o+1]=function s9(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=cn(Bs(n)))),n}(t,e),i,o)}function zR(n,t){return t>=n.expandoStartIndex}function UR(n,t,e,i){const s=n.data;if(null===s[e+1]){const r=s[ms()],o=zR(n,e);$R(r,i)&&null===t&&!o&&(t=!1),t=function Zq(n,t,e,i){const s=Ux(n);let r=i?t.residualClasses:t.residualStyles;if(null===s)0===(i?t.classBindings:t.styleBindings)&&(e=cf(e=dw(null,n,t,e,i),t.attrs,i),r=null);else{const o=t.directiveStylingLast;if(-1===o||n[o]!==s)if(e=dw(s,n,t,e,i),null===r){let l=function Jq(n,t,e){const i=e?t.classBindings:t.styleBindings;if(0!==Qo(i))return n[Lr(i)]}(n,t,i);void 0!==l&&Array.isArray(l)&&(l=dw(null,n,t,l[1],i),l=cf(l,t.attrs,i),function e9(n,t,e,i){n[Lr(e?t.classBindings:t.styleBindings)]=i}(n,t,i,l))}else r=function t9(n,t,e){let i;const s=t.directiveEnd;for(let r=1+t.directiveStylingLast;r<s;r++)i=cf(i,n[r].hostAttrs,e);return cf(i,t.attrs,e)}(n,t,i)}return void 0!==r&&(i?t.residualClasses=r:t.residualStyles=r),e}(s,r,t,i),function zq(n,t,e,i,s,r){let o=r?t.classBindings:t.styleBindings,a=Lr(o),l=Qo(o);n[i]=e;let d,c=!1;if(Array.isArray(e)){const u=e;d=u[1],(null===d||bd(u,d)>0)&&(c=!0)}else d=e;if(s)if(0!==l){const h=Lr(n[a+1]);n[i+1]=Mg(h,a),0!==h&&(n[h+1]=A0(n[h+1],i)),n[a+1]=function t$(n,t){return 131071&n|t<<17}(n[a+1],i)}else n[i+1]=Mg(a,0),0!==a&&(n[a+1]=A0(n[a+1],i)),a=i;else n[i+1]=Mg(l,0),0===a?a=i:n[l+1]=A0(n[l+1],i),l=i;c&&(n[i+1]=E0(n[i+1])),OR(n,d,i,!0),OR(n,d,i,!1),function Uq(n,t,e,i,s){const r=s?n.residualClasses:n.residualStyles;null!=r&&"string"==typeof t&&bd(r,t)>=0&&(e[i+1]=T0(e[i+1]))}(t,d,n,i,r),o=Mg(a,l),r?t.classBindings=o:t.styleBindings=o}(s,r,t,e,o,i)}}function dw(n,t,e,i,s){let r=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(r=t[a],i=cf(i,r.hostAttrs,s),r!==n);)a++;return null!==n&&(e.directiveStylingLast=a),i}function cf(n,t,e){const i=e?1:2;let s=-1;if(null!==t)for(let r=0;r<t.length;r++){const o=t[r];"number"==typeof o?s=o:s===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Fs(n,o,!!e||t[++r]))}return void 0===n?null:n}function jR(n,t,e,i,s,r,o,a){if(!(3&t.type))return;const l=n.data,c=l[a+1];Pg(function dk(n){return 1==(1&n)}(c)?WR(l,t,e,s,Qo(c),o):void 0)||(Pg(r)||function ck(n){return 2==(2&n)}(c)&&(r=WR(l,null,e,s,a,o)),function G6(n,t,e,i,s){const r=$n(n);if(t)s?r?n.addClass(e,i):e.classList.add(i):r?n.removeClass(e,i):e.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Vs.DashCase;if(null==s)r?n.removeStyle(e,i,o):e.style.removeProperty(i);else{const a="string"==typeof s&&s.endsWith("!important");a&&(s=s.slice(0,-10),o|=Vs.Important),r?n.setStyle(e,i,s,o):e.style.setProperty(i,s,a?"important":"")}}}(i,o,Zm(ms(),e),s,r))}function WR(n,t,e,i,s,r){const o=null===t;let a;for(;s>0;){const l=n[s],c=Array.isArray(l),d=c?l[1]:l,u=null===d;let h=e[s+1];h===Ct&&(h=u?bn:void 0);let f=u?Jx(h,i):d===i?h:void 0;if(c&&!Pg(f)&&(f=Jx(l,i)),Pg(f)&&(a=f,o))return a;const p=n[s+1];s=o?Lr(p):Qo(p)}if(null!==t){let l=r?t.residualClasses:t.residualStyles;null!=l&&(a=Jx(l,i))}return a}function Pg(n){return void 0!==n}function $R(n,t){return 0!=(n.flags&(t?16:32))}function tt(n,t=""){const e=ce(),i=Kt(),s=n+20,r=i.firstCreatePass?Dd(i,s,1,t,null):i.data[s],o=e[s]=function v0(n,t){return $n(n)?n.createText(t):n.createTextNode(t)}(e[11],t);xg(i,e,o,r),co(r,!1)}function Ui(n){return ar("",n,""),Ui}function ar(n,t,e){const i=ce(),s=Pd(i,n,t,e);return s!==Ct&&Zo(i,ms(),s),ar}function tI(n,t,e){!function Br(n,t,e,i){const s=Kt(),r=Xo(2);s.firstUpdatePass&&UR(s,null,r,i);const o=ce();if(e!==Ct&&es(o,r,e)){const a=s.data[ms()];if($R(a,i)&&!zR(s,r)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=wx(l,e||"")),ow(s,a,o,e,i)}else!function i9(n,t,e,i,s,r,o,a){s===Ct&&(s=bn);let l=0,c=0,d=0<s.length?s[0]:null,u=0<r.length?r[0]:null;for(;null!==d||null!==u;){const h=l<s.length?s[l+1]:void 0,f=c<r.length?r[c+1]:void 0;let m,p=null;d===u?(l+=2,c+=2,h!==f&&(p=u,m=f)):null===u||null!==d&&d<u?(l+=2,p=d):(c+=2,p=u,m=f),null!==p&&jR(n,t,e,i,p,m,o,a),d=l<s.length?s[l]:null,u=c<r.length?r[c]:null}}(s,a,o,o[11],o[r+1],o[r+1]=function n9(n,t,e){if(null==e||""===e)return bn;const i=[],s=Bs(e);if(Array.isArray(s))for(let r=0;r<s.length;r++)n(i,s[r],!0);else if("object"==typeof s)for(const r in s)s.hasOwnProperty(r)&&n(i,r,s[r]);else"string"==typeof s&&t(i,s);return i}(n,t,e),i,r)}}(Fs,yo,Pd(ce(),n,t,e),!0)}function Vr(n,t,e){const i=ce();return es(i,hd(),t)&&Hs(Kt(),qn(),i,n,t,i[11],e,!0),Vr}function Og(n,t,e){const i=ce();if(es(i,hd(),t)){const r=Kt(),o=qn();Hs(r,o,i,n,t,Fk(Ux(r.data),o,i),e,!0)}return Og}const Wl=void 0;var M9=["en",[["a","p"],["AM","PM"],Wl],[["AM","PM"],Wl,Wl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wl,"{1} 'at' {0}",Wl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function w9(n){const e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let $d={};function hI(n){return n in $d||($d[n]=gn.ng&&gn.ng.common&&gn.ng.common.locales&&gn.ng.common.locales[n]),$d[n]}var Le=(()=>((Le=Le||{})[Le.LocaleId=0]="LocaleId",Le[Le.DayPeriodsFormat=1]="DayPeriodsFormat",Le[Le.DayPeriodsStandalone=2]="DayPeriodsStandalone",Le[Le.DaysFormat=3]="DaysFormat",Le[Le.DaysStandalone=4]="DaysStandalone",Le[Le.MonthsFormat=5]="MonthsFormat",Le[Le.MonthsStandalone=6]="MonthsStandalone",Le[Le.Eras=7]="Eras",Le[Le.FirstDayOfWeek=8]="FirstDayOfWeek",Le[Le.WeekendRange=9]="WeekendRange",Le[Le.DateFormat=10]="DateFormat",Le[Le.TimeFormat=11]="TimeFormat",Le[Le.DateTimeFormat=12]="DateTimeFormat",Le[Le.NumberSymbols=13]="NumberSymbols",Le[Le.NumberFormats=14]="NumberFormats",Le[Le.CurrencyCode=15]="CurrencyCode",Le[Le.CurrencySymbol=16]="CurrencySymbol",Le[Le.CurrencyName=17]="CurrencyName",Le[Le.Currencies=18]="Currencies",Le[Le.Directionality=19]="Directionality",Le[Le.PluralCase=20]="PluralCase",Le[Le.ExtraData=21]="ExtraData",Le))();const Lg="en-US";let fI=Lg;function fw(n,t,e,i,s){if(n=Rt(n),Array.isArray(n))for(let r=0;r<n.length;r++)fw(n[r],t,e,i,s);else{const r=Kt(),o=ce();let a=kd(n)?n:Rt(n.provide),l=Gk(n);const c=Si(),d=1048575&c.providerIndexes,u=c.directiveStart,h=c.providerIndexes>>20;if(kd(n)||!n.multi){const f=new Fh(l,s,v),p=mw(a,t,s?d:d+h,u);-1===p?(ug(Bh(c,o),r,a),pw(r,n,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,s&&(c.providerIndexes+=1048576),e.push(f),o.push(f)):(e[p]=f,o[p]=f)}else{const f=mw(a,t,d+h,u),p=mw(a,t,d,d+h),m=f>=0&&e[f],g=p>=0&&e[p];if(s&&!g||!s&&!m){ug(Bh(c,o),r,a);const _=function M7(n,t,e,i,s){const r=new Fh(n,e,v);return r.multi=[],r.index=t,r.componentProviders=0,NI(r,s,i&&!e),r}(s?w7:x7,e.length,s,i,l);!s&&g&&(e[p].providerFactory=_),pw(r,n,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,s&&(c.providerIndexes+=1048576),e.push(_),o.push(_)}else pw(r,n,f>-1?f:p,NI(e[s?p:f],l,!s&&i));!s&&i&&g&&e[p].componentProviders++}}}function pw(n,t,e,i){const s=kd(t),r=function Y$(n){return!!n.useClass}(t);if(s||r){const l=(r?Rt(t.useClass):t).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!s&&t.multi){const d=c.indexOf(e);-1===d?c.push(e,[i,l]):c[d+1].push(i,l)}else c.push(e,l)}}}function NI(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function mw(n,t,e,i){for(let s=e;s<i;s++)if(t[s]===n)return s;return-1}function x7(n,t,e,i){return gw(this.multi,[])}function w7(n,t,e,i){const s=this.multi;let r;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Vh(e,e[1],this.providerFactory.index,i);r=a.slice(0,o),gw(s,r);for(let l=o;l<a.length;l++)r.push(a[l])}else r=[],gw(s,r);return r}function gw(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function Me(n,t=[]){return e=>{e.providersResolver=(i,s)=>function b7(n,t,e){const i=Kt();if(i.firstCreatePass){const s=Pr(n);fw(e,i.data,i.blueprint,s,!0),fw(t,i.data,i.blueprint,s,!1)}}(i,s?s(n):n,t)}}class BI{}class D7{resolveComponentFactory(t){throw function S7(n){const t=Error(`No component factory found for ${cn(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let Jo=(()=>{class n{}return n.NULL=new D7,n})();function E7(){return Yd(Si(),ce())}function Yd(n,t){return new ue(sr(n,t))}let ue=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=E7,n})();function A7(n){return n instanceof ue?n.nativeElement:n}class pf{}let Hr=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function k7(){const n=ce(),e=Ls(Si().index,n);return function T7(n){return n[11]}(lo(e)?e:n)}(),n})(),R7=(()=>{class n{}return n.\u0275prov=oe({token:n,providedIn:"root",factory:()=>null}),n})();class qa{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const I7=new qa("13.1.3"),_w={};function Hg(n,t,e,i,s=!1){for(;null!==e;){const r=t[e.index];if(null!==r&&i.push(hi(r)),Ir(r))for(let a=10;a<r.length;a++){const l=r[a],c=l[1].firstChild;null!==c&&Hg(l[1],l,c,i)}const o=e.type;if(8&o)Hg(n,t,e.child,i);else if(32&o){const a=g0(e,t);let l;for(;l=a();)i.push(l)}else if(16&o){const a=Z1(t,e);if(Array.isArray(a))i.push(...a);else{const l=Jh(t[16]);Hg(l[1],l,a,i,!0)}}e=s?e.projectionNext:e.next}return i}class mf{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Hg(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Ir(t)){const e=t[8],i=e?e.indexOf(this):-1;i>-1&&(x0(t,i),fg(e,i))}this._attachedToViewContainer=!1}G1(this._lView[1],this._lView)}onDestroy(t){Ck(this._lView[1],this._lView,null,t)}markForCheck(){j0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){$0(this._lView[1],this._lView,this.context)}checkNoChanges(){!function N$(n,t,e){eg(!0);try{$0(n,t,e)}finally{eg(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Xt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function P6(n,t){ef(n,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Xt(902,"");this._appRef=t}}class P7 extends mf{constructor(t){super(t),this._view=t}detectChanges(){Pk(this._view)}checkNoChanges(){!function B$(n){eg(!0);try{Pk(n)}finally{eg(!1)}}(this._view)}get context(){return null}}class HI extends Jo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Qi(t);return new yw(e,this.ngModule)}}function zI(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}const L7=new K("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>L1});class yw extends BI{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function J6(n){return n.map(Z6).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return zI(this.componentDef.inputs)}get outputs(){return zI(this.componentDef.outputs)}create(t,e,i,s){const r=(s=s||this.ngModule)?function F7(n,t){return{get:(e,i,s)=>{const r=n.get(e,_w,s);return r!==_w||i===_w?r:t.get(e,i,s)}}}(t,s.injector):t,o=r.get(pf,RT),a=r.get(R7,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=i?function Mk(n,t,e){if($n(n))return n.selectRootElement(t,e===kr.ShadowDom);let i="string"==typeof t?n.querySelector(t):t;return i.textContent="",i}(l,i,this.componentDef.encapsulation):b0(o.createRenderer(null,this.componentDef),c,function O7(n){const t=n.toLowerCase();return"svg"===t?TT:"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),u=this.componentDef.onPush?576:528,h=function tR(n,t){return{components:[],scheduler:n||L1,clean:V$,playerHandler:t||null,flags:0}}(),f=Dg(0,null,null,1,0,null,null,null,null,null),p=tf(null,f,h,u,null,null,o,l,a,r);let m,g;tg(p);try{const _=function Jk(n,t,e,i,s,r){const o=e[1];e[20]=n;const l=Dd(o,20,2,"#host",null),c=l.mergedAttrs=t.hostAttrs;null!==c&&(Ag(l,c,!0),null!==n&&(ag(s,n,c),null!==l.classes&&D0(s,n,l.classes),null!==l.styles&&tk(s,n,l.styles)));const d=i.createRenderer(n,t),u=tf(e,xk(t),null,t.onPush?64:16,e[20],l,i,d,r||null,null);return o.firstCreatePass&&(ug(Bh(l,e),o,t.type),Tk(o,l),kk(l,e.length,1)),Eg(e,u),e[20]=u}(d,this.componentDef,p,o,l);if(d)if(i)ag(l,d,["ng-version",I7.full]);else{const{attrs:y,classes:b}=function e$(n){const t=[],e=[];let i=1,s=2;for(;i<n.length;){let r=n[i];if("string"==typeof r)2===s?""!==r&&t.push(r,n[++i]):8===s&&e.push(r);else{if(!Or(s))break;s=r}i++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);y&&ag(l,d,y),b&&b.length>0&&D0(l,d,b.join(" "))}if(g=Fx(f,20),void 0!==e){const y=g.projection=[];for(let b=0;b<this.ngContentSelectors.length;b++){const x=e[b];y.push(null!=x?Array.from(x):null)}}m=function eR(n,t,e,i,s){const r=e[1],o=function x$(n,t,e){const i=Si();n.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),Rk(n,i,t,Ed(n,t,1,null),e));const s=Vh(t,n,i.directiveStart,i);Ji(s,t);const r=sr(i,t);return r&&Ji(r,t),s}(r,e,t);if(i.components.push(o),n[8]=o,s&&s.forEach(l=>l(o,t)),t.contentQueries){const l=Si();t.contentQueries(1,o,l.directiveStart)}const a=Si();return!r.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Ua(a.index),Ek(e[1],a,0,a.directiveStart,a.directiveEnd,t),Ak(t,o)),o}(_,this.componentDef,p,h,[rq]),nf(f,p,null)}finally{ng()}return new B7(this.componentType,m,Yd(g,p),p,g)}}class B7 extends class C7{}{constructor(t,e,i,s,r){super(),this.location=i,this._rootLView=s,this._tNode=r,this.instance=e,this.hostView=this.changeDetectorRef=new P7(s),this.componentType=t}get injector(){return new md(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class ea{}class UI{}const Xd=new Map;class WI extends ea{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new HI(this);const i=tr(t);this._bootstrapComponents=po(i.bootstrap),this._r3Injector=Uk(t,e,[{provide:ea,useValue:this},{provide:Jo,useValue:this.componentFactoryResolver}],cn(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=zn.THROW_IF_NOT_FOUND,i=xt.Default){return t===zn||t===ea||t===Y0?this:this._r3Injector.get(t,e,i)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class vw extends UI{constructor(t){super(),this.moduleType=t,null!==tr(t)&&function H7(n){const t=new Set;!function e(i){const s=tr(i,!0),r=s.id;null!==r&&(function GI(n,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${n} - ${cn(t)} vs ${cn(t.name)}`)}(r,Xd.get(r),i),Xd.set(r,i));const o=po(s.imports);for(const a of o)t.has(a)||(t.add(a),e(a))}(n)}(t)}create(t){return new WI(this.moduleType,t)}}function $I(n,t,e,i,s){return function YI(n,t,e,i,s,r,o){const a=t+e;return function jl(n,t,e,i){const s=es(n,t,e);return es(n,t+1,i)||s}(n,a,s,r)?go(n,a+2,o?i.call(o,s,r):i(s,r)):_f(n,a+2)}(ce(),ps(),n,t,e,i,s)}function _f(n,t){const e=n[t];return e===Ct?void 0:e}function qI(n,t,e,i,s,r){const o=t+e;return es(n,o,s)?go(n,o+1,r?i.call(r,s):i(s)):_f(n,o+1)}function bw(n){return t=>{setTimeout(n,void 0,t)}}const he=class eY extends ge{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,i){var s,r,o;let a=t,l=e||(()=>null),c=i;if(t&&"object"==typeof t){const u=t;a=null===(s=u.next)||void 0===s?void 0:s.bind(u),l=null===(r=u.error)||void 0===r?void 0:r.bind(u),c=null===(o=u.complete)||void 0===o?void 0:o.bind(u)}this.__isAsync&&(l=bw(l),a&&(a=bw(a)),c&&(c=bw(c)));const d=super.subscribe({next:a,error:l,complete:c});return t instanceof yt&&t.add(d),d}};function tY(){return this._results[Rd()]()}class Ya{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Rd(),i=Ya.prototype;i[e]||(i[e]=tY)}get changes(){return this._changes||(this._changes=new he)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const i=this;i.dirty=!1;const s=rr(t);(this._changesDetected=!function aW(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let s=n[i],r=t[i];if(e&&(s=e(s),r=e(r)),r!==s)return!1}return!0}(i._results,s,e))&&(i._results=s,i.length=s.length,i.last=s[this.length-1],i.first=s[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Xn=(()=>{class n{}return n.__NG_ELEMENT_ID__=sY,n})();const nY=Xn,iY=class extends nY{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(t){const e=this._declarationTContainer.tViews,i=tf(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(i[19]=r.createEmbeddedView(e)),nf(e,i,t),new mf(i)}};function sY(){return zg(Si(),ce())}function zg(n,t){return 4&n.type?new iY(t,n,Yd(n,t)):null}let In=(()=>{class n{}return n.__NG_ELEMENT_ID__=rY,n})();function rY(){return nP(Si(),ce())}const oY=In,eP=class extends oY{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Yd(this._hostTNode,this._hostLView)}get injector(){return new md(this._hostTNode,this._hostLView)}get parentInjector(){const t=dg(this._hostTNode,this._hostLView);if(qT(t)){const e=pd(t,this._hostLView),i=fd(t);return new md(e[1].data[i+8],e)}return new md(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=tP(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,i){const s=t.createEmbeddedView(e||{});return this.insert(s,i),s}createComponent(t,e,i,s,r){const o=t&&!function zh(n){return"function"==typeof n}(t);let a;if(o)a=e;else{const u=e||{};a=u.index,i=u.injector,s=u.projectableNodes,r=u.ngModuleRef}const l=o?t:new yw(Qi(t)),c=i||this.parentInjector;if(!r&&null==l.ngModule&&c){const u=c.get(ea,null);u&&(r=u)}const d=l.create(c,s,void 0,r);return this.insert(d.hostView,a),d}insert(t,e){const i=t._lView,s=i[1];if(function k8(n){return Ir(n[3])}(i)){const d=this.indexOf(t);if(-1!==d)this.detach(d);else{const u=i[3],h=new eP(u,u[6],u[3]);h.detach(h.indexOf(t))}}const r=this._adjustIndex(e),o=this._lContainer;!function L6(n,t,e,i){const s=10+i,r=e.length;i>0&&(e[s-1][4]=t),i<r-10?(t[4]=e[s],s1(e,10+i,t)):(e.push(t),t[4]=null),t[3]=e;const o=t[17];null!==o&&e!==o&&function F6(n,t){const e=n[9];t[16]!==t[3][3][16]&&(n[2]=!0),null===e?n[9]=[t]:e.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(n),t[2]|=128}(s,i,o,r);const a=C0(r,o),l=i[11],c=bg(l,o[7]);return null!==c&&function I6(n,t,e,i,s,r){i[0]=s,i[6]=t,ef(n,i,e,1,s,r)}(s,o[6],l,i,c,a),t.attachToViewContainerRef(),s1(xw(o),r,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=tP(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),i=x0(this._lContainer,e);i&&(fg(xw(this._lContainer),e),G1(i[1],i))}detach(t){const e=this._adjustIndex(t,-1),i=x0(this._lContainer,e);return i&&null!=fg(xw(this._lContainer),e)?new mf(i):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function tP(n){return n[8]}function xw(n){return n[8]||(n[8]=[])}function nP(n,t){let e;const i=t[n.index];if(Ir(i))e=i;else{let s;if(8&n.type)s=hi(i);else{const r=t[11];s=r.createComment("");const o=sr(n,t);Gl(r,bg(r,o),s,function H6(n,t){return $n(n)?n.nextSibling(t):t.nextSibling}(r,o),!1)}t[n.index]=e=Ik(i,t,s,n),Eg(t,e)}return new eP(e,n,t)}class ww{constructor(t){this.queryList=t,this.matches=null}clone(){return new ww(this.queryList)}setDirty(){this.queryList.setDirty()}}class Mw{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const i=null!==t.contentQueries?t.contentQueries[0]:e.length,s=[];for(let r=0;r<i;r++){const o=e.getByIndex(r);s.push(this.queries[o.indexInDeclarationView].clone())}return new Mw(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==aP(t,e).matches&&this.queries[e].setDirty()}}class iP{constructor(t,e,i=null){this.predicate=t,this.flags=e,this.read=i}}class Cw{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){const s=null!==e?e.length:0,r=this.getByIndex(i).embeddedTView(t,s);r&&(r.indexInDeclarationView=i,null!==e?e.push(r):e=[r])}return null!==e?new Cw(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Sw{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Sw(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let s=0;s<i.length;s++){const r=i[s];this.matchTNodeWithReadOption(t,e,cY(e,r)),this.matchTNodeWithReadOption(t,e,hg(e,t,r,!1,!1))}else i===Xn?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,hg(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(null!==i){const s=this.metadata.read;if(null!==s)if(s===ue||s===In||s===Xn&&4&e.type)this.addMatch(e.index,-2);else{const r=hg(e,t,s,!1,!1);null!==r&&this.addMatch(e.index,r)}else this.addMatch(e.index,i)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function cY(n,t){const e=n.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1];return null}function uY(n,t,e,i){return-1===e?function dY(n,t){return 11&n.type?Yd(n,t):4&n.type?zg(n,t):null}(t,n):-2===e?function hY(n,t,e){return e===ue?Yd(t,n):e===Xn?zg(t,n):e===In?nP(t,n):void 0}(n,t,i):Vh(n,n[1],e,t)}function sP(n,t,e,i){const s=t[19].queries[i];if(null===s.matches){const r=n.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:uY(t,r[c],o[l+1],e.metadata.read))}s.matches=a}return s.matches}function Dw(n,t,e,i){const s=n.queries.getByIndex(e),r=s.matches;if(null!==r){const o=sP(n,t,s,e);for(let a=0;a<r.length;a+=2){const l=r[a];if(l>0)i.push(o[a/2]);else{const c=r[a+1],d=t[-l];for(let u=10;u<d.length;u++){const h=d[u];h[17]===h[3]&&Dw(h[1],h,c,i)}if(null!==d[9]){const u=d[9];for(let h=0;h<u.length;h++){const f=u[h];Dw(f[1],f,c,i)}}}}}return i}function fe(n){const t=ce(),e=Kt(),i=BT();Gx(i+1);const s=aP(e,i);if(n.dirty&&IT(t)===(2==(2&s.metadata.flags))){if(null===s.matches)n.reset([]);else{const r=s.crossesNgTemplate?Dw(e,t,i,[]):sP(e,t,s,i);n.reset(r,A7),n.notifyOnChanges()}return!0}return!1}function dt(n,t,e){const i=Kt();i.firstCreatePass&&(oP(i,new iP(n,t,e),-1),2==(2&t)&&(i.staticViewQueries=!0)),rP(i,ce(),t)}function ht(n,t,e,i){const s=Kt();if(s.firstCreatePass){const r=Si();oP(s,new iP(t,e,i),r.index),function pY(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(s,n),2==(2&e)&&(s.staticContentQueries=!0)}rP(s,ce(),e)}function pe(){return function fY(n,t){return n[19].queries[t].queryList}(ce(),BT())}function rP(n,t,e){const i=new Ya(4==(4&e));Ck(n,t,i,i.destroy),null===t[19]&&(t[19]=new Mw),t[19].queries.push(new ww(i))}function oP(n,t,e){null===n.queries&&(n.queries=new Cw),n.queries.track(new Sw(t,e))}function aP(n,t){return n.queries.getByIndex(t)}function lP(n,t){return zg(n,t)}function jg(...n){}const Wg=new K("Application Initializer");let Qd=(()=>{class n{constructor(e){this.appInits=e,this.resolve=jg,this.reject=jg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const r=this.appInits[s]();if(lf(r))e.push(r);else if(aw(r)){const o=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});e.push(o)}}Promise.all(e).then(()=>{i()}).catch(s=>{this.reject(s)}),0===e.length&&i(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(j(Wg,8))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const bf=new K("AppId"),IY={provide:bf,useFactory:function RY(){return`${Iw()}${Iw()}${Iw()}`},deps:[]};function Iw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const SP=new K("Platform Initializer"),Gs=new K("Platform ID"),Pw=new K("appBootstrapListener");let DP=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const ta=new K("LocaleId"),EP=new K("DefaultCurrencyCode");class PY{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let $g=(()=>{class n{compileModuleSync(e){return new vw(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),r=po(tr(e).declarations).reduce((o,a)=>{const l=Qi(a);return l&&o.push(new yw(l)),o},[]);return new PY(i,r)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const LY=(()=>Promise.resolve(0))();function Ow(n){"undefined"==typeof Zone?LY.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Xe{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new he(!1),this.onMicrotaskEmpty=new he(!1),this.onStable=new he(!1),this.onError=new he(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&e,s.shouldCoalesceRunChangeDetection=i,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function FY(){let n=gn.requestAnimationFrame,t=gn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function VY(n){const t=()=>{!function BY(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(gn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Fw(n),n.isCheckStableRunning=!0,Lw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Fw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,s,r,o,a)=>{try{return AP(n),e.invokeTask(s,r,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===r.type||n.shouldCoalesceRunChangeDetection)&&t(),TP(n)}},onInvoke:(e,i,s,r,o,a,l)=>{try{return AP(n),e.invoke(s,r,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),TP(n)}},onHasTask:(e,i,s,r)=>{e.hasTask(s,r),i===s&&("microTask"==r.change?(n._hasPendingMicrotasks=r.microTask,Fw(n),Lw(n)):"macroTask"==r.change&&(n.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,i,s,r)=>(e.handleError(s,r),n.runOutsideAngular(()=>n.onError.emit(r)),!1)})}(s)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xe.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Xe.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,s){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,t,NY,jg,jg);try{return r.runTask(o,e,i)}finally{r.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}}const NY={};function Lw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Fw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function AP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function TP(n){n._nesting--,Lw(n)}class HY{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new he,this.onMicrotaskEmpty=new he,this.onStable=new he,this.onError=new he}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,s){return t.apply(e,i)}}let Nw=(()=>{class n{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xe.assertNotInAngularZone(),Ow(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ow(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,s){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==r),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:s})}whenStable(e,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,i,s){return[]}}return n.\u0275fac=function(e){return new(e||n)(j(Xe))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})(),kP=(()=>{class n{constructor(){this._applications=new Map,Bw.addToWindow(this)}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Bw.findTestabilityInTree(this,e,i)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();class zY{addToWindow(t){}findTestabilityInTree(t,e,i){return null}}let zr,Bw=new zY;const RP=new K("AllowMultipleToken");class IP{constructor(t,e){this.name=t,this.token=e}}function PP(n,t,e=[]){const i=`Platform: ${t}`,s=new K(i);return(r=[])=>{let o=OP();if(!o||o.injector.get(RP,!1))if(n)n(e.concat(r).concat({provide:s,useValue:!0}));else{const a=e.concat(r).concat({provide:s,useValue:!0},{provide:X0,useValue:"platform"});!function WY(n){if(zr&&!zr.destroyed&&!zr.injector.get(RP,!1))throw new Xt(400,"");zr=n.get(LP);const t=n.get(SP,null);t&&t.forEach(e=>e())}(zn.create({providers:a,name:i}))}return function $Y(n){const t=OP();if(!t)throw new Xt(401,"");return t}()}}function OP(){return zr&&!zr.destroyed?zr:null}let LP=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const a=function qY(n,t){let e;return e="noop"===n?new HY:("zone.js"===n?void 0:n)||new Xe({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:Xe,useValue:a}];return a.run(()=>{const c=zn.create({providers:l,parent:this.injector,name:e.moduleType.name}),d=e.create(c),u=d.injector.get(Ko,null);if(!u)throw new Xt(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{u.handleError(f)}});d.onDestroy(()=>{Vw(this._modules,d),h.unsubscribe()})}),function YY(n,t,e){try{const i=e();return lf(i)?i.catch(s=>{throw t.runOutsideAngular(()=>n.handleError(s)),s}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}(u,a,()=>{const h=d.injector.get(Qd);return h.runInitializers(),h.donePromise.then(()=>(function A9(n){Ps(n,"Expected localeId to be defined"),"string"==typeof n&&(fI=n.toLowerCase().replace(/_/g,"-"))}(d.injector.get(ta,Lg)||Lg),this._moduleDoBootstrap(d),d))})})}bootstrapModule(e,i=[]){const s=FP({},i);return function GY(n,t,e){const i=new vw(e);return Promise.resolve(i)}(0,0,e).then(r=>this.bootstrapModuleFactory(r,s))}_moduleDoBootstrap(e){const i=e.injector.get(Zd);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(s=>i.bootstrap(s));else{if(!e.instance.ngDoBootstrap)throw new Xt(403,"");e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Xt(404,"");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(j(zn))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();function FP(n,t){return Array.isArray(t)?t.reduce(FP,n):Object.assign(Object.assign({},n),t)}let Zd=(()=>{class n{constructor(e,i,s,r,o){this._zone=e,this._injector=i,this._exceptionHandler=s,this._componentFactoryResolver=r,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new Jt(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Jt(c=>{let d;this._zone.runOutsideAngular(()=>{d=this._zone.onStable.subscribe(()=>{Xe.assertNotInAngularZone(),Ow(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{Xe.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{d.unsubscribe(),u.unsubscribe()}});this.isStable=wn(a,l.pipe(pT()))}bootstrap(e,i){if(!this._initStatus.done)throw new Xt(405,"");let s;s=e instanceof BI?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(s.componentType);const r=function jY(n){return n.isBoundToModule}(s)?void 0:this._injector.get(ea),a=s.create(zn.NULL,[],i||s.selector,r),l=a.location.nativeElement,c=a.injector.get(Nw,null),d=c&&a.injector.get(kP);return c&&d&&d.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),Vw(this.components,a),d&&d.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Xt(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Vw(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Pw,[]).concat(this._bootstrapListeners).forEach(s=>s(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(e){return new(e||n)(j(Xe),j(zn),j(Ko),j(Jo),j(Qd))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();function Vw(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let BP=!0,At=(()=>{class n{}return n.__NG_ELEMENT_ID__=QY,n})();function QY(n){return function ZY(n,t,e){if(Km(n)&&!e){const i=Ls(n.index,t);return new mf(i,i)}return 47&n.type?new mf(t[16],t):null}(Si(),ce(),16==(16&n))}class WP{constructor(){}supports(t){return rf(t)}create(t){return new sX(t)}}const iX=(n,t)=>t;class sX{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||iX}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,s=0,r=null;for(;e||i;){const o=!i||e&&e.currentIndex<qP(i,s,r)?e:i,a=qP(o,s,r),l=o.currentIndex;if(o===i)s--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)s++;else{r||(r=[]);const c=a-s,d=l-s;if(c!=d){for(let h=0;h<c;h++){const f=h<r.length?r[h]:r[h]=0,p=f+h;d<=p&&p<c&&(r[h]=f+1)}r[o.previousIndex]=d-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!rf(t))throw new Xt(900,"");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let s,r,o,e=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)r=t[a],o=this._trackByFn(a,r),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,r,o,a)),Object.is(e.item,r)||this._addIdentityChange(e,r)):(e=this._mismatch(e,r,o,a),i=!0),e=e._next}else s=0,function mq(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Rd()]();let i;for(;!(i=e.next()).done;)t(i.value)}}(t,a=>{o=this._trackByFn(s,a),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,a,o,s)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,s),i=!0),e=e._next,s++}),this.length=s;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,s){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,s)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,s))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,s)):t=this._addAfter(new rX(e,i),r,s),t}_verifyReinsertion(t,e,i,s){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==r?t=this._reinsertAfter(r,t._prev,s):t.currentIndex!=s&&(t.currentIndex=s,this._addToMoves(t,s)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const s=t._prevRemoved,r=t._nextRemoved;return null===s?this._removalsHead=r:s._nextRemoved=r,null===r?this._removalsTail=s:r._prevRemoved=s,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){const s=null===e?this._itHead:e._next;return t._next=s,t._prev=e,null===s?this._itTail=t:s._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new $P),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,i=t._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $P),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class rX{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oX{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const e=t._prevDup,i=t._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class $P{constructor(){this.map=new Map}put(t){const e=t.trackById;let i=this.map.get(e);i||(i=new oX,this.map.set(e,i)),i.add(t)}get(t,e){const s=this.map.get(t);return s?s.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qP(n,t,e){const i=n.previousIndex;if(null===i)return i;let s=0;return e&&i<e.length&&(s=e[i]),i+t+s}class YP{constructor(){}supports(t){return t instanceof Map||tw(t)}create(){return new aX}}class aX{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||tw(t)))throw new Xt(900,"")}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,s)=>{if(e&&e.key===s)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(s,i);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const s=this._records.get(t);this._maybeAddToChanges(s,e);const r=s._prev,o=s._next;return r&&(r._next=o),o&&(o._prev=r),s._next=null,s._prev=null,s}const i=new lX(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}}class lX{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function XP(){return new Es([new WP])}let Es=(()=>{class n{constructor(e){this.factories=e}static create(e,i){if(null!=i){const s=i.factories.slice();e=e.concat(s)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||XP()),deps:[[n,new Ns,new Ei]]}}find(e){const i=this.factories.find(s=>s.supports(e));if(null!=i)return i;throw new Xt(901,"")}}return n.\u0275prov=oe({token:n,providedIn:"root",factory:XP}),n})();function KP(){return new Xa([new YP])}let Xa=(()=>{class n{constructor(e){this.factories=e}static create(e,i){if(i){const s=i.factories.slice();e=e.concat(s)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||KP()),deps:[[n,new Ns,new Ei]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(i)return i;throw new Xt(901,"")}}return n.\u0275prov=oe({token:n,providedIn:"root",factory:KP}),n})();const cX=[new YP],uX=new Es([new WP]),hX=new Xa(cX),fX=PP(null,"core",[{provide:Gs,useValue:"unknown"},{provide:LP,deps:[zn]},{provide:kP,deps:[]},{provide:DP,deps:[]}]),yX=[{provide:Zd,useClass:Zd,deps:[Xe,zn,Ko,Jo,Qd]},{provide:L7,deps:[Xe],useFactory:function vX(n){let t=[];return n.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Qd,useClass:Qd,deps:[[new Ei,Wg]]},{provide:$g,useClass:$g,deps:[]},IY,{provide:Es,useFactory:function pX(){return uX},deps:[]},{provide:Xa,useFactory:function mX(){return hX},deps:[]},{provide:ta,useFactory:function gX(n){return n||function _X(){return"undefined"!=typeof $localize&&$localize.locale||Lg}()},deps:[[new $h(ta),new Ei,new Ns]]},{provide:EP,useValue:"USD"}];let bX=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(j(Zd))},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:yX}),n})(),Yg=null;function vo(){return Yg}const it=new K("DocumentToken");let ql=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:function(){return function CX(){return j(QP)}()},providedIn:"platform"}),n})();const SX=new K("Location Initialized");let QP=(()=>{class n extends ql{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vo().getBaseHref(this._doc)}onPopState(e){const i=vo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=vo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,s){ZP()?this._history.pushState(e,i,s):this.location.hash=s}replaceState(e,i,s){ZP()?this._history.replaceState(e,i,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(j(it))},n.\u0275prov=oe({token:n,factory:function(){return function DX(){return new QP(j(it))}()},providedIn:"platform"}),n})();function ZP(){return!!window.history.pushState}function jw(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function JP(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function na(n){return n&&"?"!==n[0]?"?"+n:n}let Jd=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:function(){return function EX(n){const t=j(it).location;return new eO(j(ql),t&&t.origin||"")}()},providedIn:"root"}),n})();const Ww=new K("appBaseHref");let eO=(()=>{class n extends Jd{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return jw(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+na(this._platformLocation.search),s=this._platformLocation.hash;return s&&e?`${i}${s}`:i}pushState(e,i,s,r){const o=this.prepareExternalUrl(s+na(r));this._platformLocation.pushState(e,i,o)}replaceState(e,i,s,r){const o=this.prepareExternalUrl(s+na(r));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,s;null===(s=(i=this._platformLocation).historyGo)||void 0===s||s.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(j(ql),j(Ww,8))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})(),AX=(()=>{class n extends Jd{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=jw(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,s,r){let o=this.prepareExternalUrl(s+na(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,s,r){let o=this.prepareExternalUrl(s+na(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,s;null===(s=(i=this._platformLocation).historyGo)||void 0===s||s.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(j(ql),j(Ww,8))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})(),Xg=(()=>{class n{constructor(e,i){this._subject=new he,this._urlChangeListeners=[],this._platformStrategy=e;const s=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=JP(tO(s)),this._platformStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+na(i))}normalize(e){return n.stripTrailingSlash(function kX(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,tO(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",s=null){this._platformStrategy.pushState(s,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+na(i)),s)}replaceState(e,i="",s=null){this._platformStrategy.replaceState(s,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+na(i)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,s;null===(s=(i=this._platformStrategy).historyGo)||void 0===s||s.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(s=>s(e,i))}subscribe(e,i,s){return this._subject.subscribe({next:e,error:i,complete:s})}}return n.normalizeQueryParams=na,n.joinWithSlash=jw,n.stripTrailingSlash=JP,n.\u0275fac=function(e){return new(e||n)(j(Jd),j(ql))},n.\u0275prov=oe({token:n,factory:function(){return function TX(){return new Xg(j(Jd),j(ql))}()},providedIn:"root"}),n})();function tO(n){return n.replace(/\/index.html$/,"")}var pi=(()=>((pi=pi||{})[pi.Zero=0]="Zero",pi[pi.One=1]="One",pi[pi.Two=2]="Two",pi[pi.Few=3]="Few",pi[pi.Many=4]="Many",pi[pi.Other=5]="Other",pi))();const NX=function uI(n){return function _s(n){const t=function C9(n){return n.toLowerCase().replace(/_/g,"-")}(n);let e=hI(t);if(e)return e;const i=t.split("-")[0];if(e=hI(i),e)return e;if("en"===i)return M9;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[Le.PluralCase]};class r_{}let hK=(()=>{class n extends r_{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(NX(i||this.locale)(e)){case pi.Zero:return"zero";case pi.One:return"one";case pi.Two:return"two";case pi.Few:return"few";case pi.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(j(ta))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();function dO(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[s,r]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(s.trim()===t)return decodeURIComponent(r)}return null}let Yl=(()=>{class n{constructor(e,i,s,r){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=s,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(rf(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${cn(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(e){return new(e||n)(v(Es),v(Xa),v(ue),v(Hr))},n.\u0275dir=G({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class pK{constructor(t,e,i,s){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xl=(()=>{class n{constructor(e,i,s){this._viewContainer=e,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((s,r,o)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new pK(s.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===r?void 0:r);else if(null!==r){const a=i.get(r);i.move(a,o),uO(a,s)}});for(let s=0,r=i.length;s<r;s++){const a=i.get(s).context;a.index=s,a.count=r,a.ngForOf=this._ngForOf}e.forEachIdentityChange(s=>{uO(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(v(In),v(Xn),v(Es))},n.\u0275dir=G({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function uO(n,t){n.context.$implicit=t.item}let dr=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new mK,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){hO("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){hO("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(v(In),v(Xn))},n.\u0275dir=G({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class mK{constructor(){this.$implicit=null,this.ngIf=null}}function hO(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${cn(t)}'.`)}class eM{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Kl=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Mf=(()=>{class n{constructor(e,i,s){this.ngSwitch=s,s._addCase(),this._view=new eM(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(v(In),v(Xn),v(Kl,9))},n.\u0275dir=G({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),fO=(()=>{class n{constructor(e,i,s){s._addDefault(new eM(e,i))}}return n.\u0275fac=function(e){return new(e||n)(v(In),v(Xn),v(Kl,9))},n.\u0275dir=G({type:n,selectors:[["","ngSwitchDefault",""]]}),n})(),mO=(()=>{class n{transform(e){return JSON.stringify(e,null,2)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=Ss({name:"json",type:n,pure:!1}),n})(),gi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[{provide:r_,useClass:hK}]}),n})();const _O="browser";function Ql(n){return n===_O}function eu(n){return"server"===n}let zK=(()=>{class n{}return n.\u0275prov=oe({token:n,providedIn:"root",factory:()=>new UK(j(it),window)}),n})();class UK{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function GK(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=i.currentNode;for(;s;){const r=s.shadowRoot;if(r){const o=r.getElementById(t)||r.querySelector(`[name="${t}"]`);if(o)return o}s=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,s=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(i-r[0],s-r[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=yO(this.window.history)||yO(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function yO(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class vO{}class iM extends class jK extends class MX{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function wX(n){Yg||(Yg=n)}(new iM)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function WK(){return Cf=Cf||document.querySelector("base"),Cf?Cf.getAttribute("href"):null}();return null==e?null:function $K(n){a_=a_||document.createElement("a"),a_.setAttribute("href",n);const t=a_.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Cf=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return dO(document.cookie,t)}}let a_,Cf=null;const bO=new K("TRANSITION_ID"),YK=[{provide:Wg,useFactory:function qK(n,t,e){return()=>{e.get(Qd).donePromise.then(()=>{const i=vo(),s=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let r=0;r<s.length;r++)i.remove(s[r])})}},deps:[bO,it,zn],multi:!0}];class sM{static init(){!function UY(n){Bw=n}(new sM)}addToWindow(t){gn.getAngularTestability=(i,s=!0)=>{const r=t.findTestabilityInTree(i,s);if(null==r)throw new Error("Could not find testability for element.");return r},gn.getAllAngularTestabilities=()=>t.getAllTestabilities(),gn.getAllAngularRootElements=()=>t.getAllRootElements(),gn.frameworkStabilizers||(gn.frameworkStabilizers=[]),gn.frameworkStabilizers.push(i=>{const s=gn.getAllAngularTestabilities();let r=s.length,o=!1;const a=function(l){o=o||l,r--,0==r&&i(o)};s.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,i){if(null==e)return null;const s=t.getTestability(e);return null!=s?s:i?vo().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let XK=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const l_=new K("EventManagerPlugins");let c_=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(s=>s.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,s){return this._findPluginFor(i).addEventListener(e,i,s)}addGlobalEventListener(e,i,s){return this._findPluginFor(i).addGlobalEventListener(e,i,s)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const s=this._plugins;for(let r=0;r<s.length;r++){const o=s[r];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(j(l_),j(Xe))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();class xO{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const s=vo().getGlobalEventTarget(this._doc,t);if(!s)throw new Error(`Unsupported event target ${s} for event ${e}`);return this.addEventListener(s,e,i)}}let wO=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),i.add(s))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})(),Sf=(()=>{class n extends wO{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,s){e.forEach(r=>{const o=this._doc.createElement("style");o.textContent=r,s.push(i.appendChild(o))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(MO),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,s)=>{this._addStylesToHost(e,s,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(MO))}}return n.\u0275fac=function(e){return new(e||n)(j(it))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();function MO(n){vo().remove(n)}const rM={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},oM=/%COMP%/g;function d_(n,t,e){for(let i=0;i<t.length;i++){let s=t[i];Array.isArray(s)?d_(n,s,e):(s=s.replace(oM,n),e.push(s))}return e}function DO(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let u_=(()=>{class n{constructor(e,i,s){this.eventManager=e,this.sharedStylesHost=i,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new aM(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case kr.Emulated:{let s=this.rendererByCompId.get(i.id);return s||(s=new tQ(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,s)),s.applyToHost(e),s}case 1:case kr.ShadowDom:return new nQ(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const s=d_(i.id,i.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(j(c_),j(Sf),j(bf))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();class aM{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(rM[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,i){t&&t.insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,s){if(s){e=s+":"+e;const r=rM[s];r?t.setAttributeNS(r,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const s=rM[i];s?t.removeAttributeNS(s,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,s){s&(Vs.DashCase|Vs.Important)?t.style.setProperty(e,i,s&Vs.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Vs.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,DO(i)):this.eventManager.addEventListener(t,e,DO(i))}}class tQ extends aM{constructor(t,e,i,s){super(t),this.component=i;const r=d_(s+"-"+i.id,i.styles,[]);e.addStyles(r),this.contentAttr=function ZK(n){return"_ngcontent-%COMP%".replace(oM,n)}(s+"-"+i.id),this.hostAttr=function JK(n){return"_nghost-%COMP%".replace(oM,n)}(s+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class nQ extends aM{constructor(t,e,i,s){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=d_(s.id,s.styles,[]);for(let o=0;o<r.length;o++){const a=document.createElement("style");a.textContent=r[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let iQ=(()=>{class n extends xO{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,s){return e.addEventListener(i,s,!1),()=>this.removeEventListener(e,i,s)}removeEventListener(e,i,s){return e.removeEventListener(i,s)}}return n.\u0275fac=function(e){return new(e||n)(j(it))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const AO=["alt","control","meta","shift"],rQ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},TO={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},oQ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let aQ=(()=>{class n extends xO{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,s){const r=n.parseEventName(i),o=n.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vo().onAndCancel(e,r.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const r=n._normalizeKey(i.pop());let o="";if(AO.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=r,0!=i.length||0===r.length)return null;const a={};return a.domEventName=s,a.fullKey=o,a}static getEventFullKey(e){let i="",s=function lQ(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&TO.hasOwnProperty(t)&&(t=TO[t]))}return rQ[t]||t}(e);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),AO.forEach(r=>{r!=s&&oQ[r](e)&&(i+=r+".")}),i+=s,i}static eventCallback(e,i,s){return r=>{n.getEventFullKey(r)===e&&s.runGuarded(()=>i(r))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(j(it))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const hQ=PP(fX,"browser",[{provide:Gs,useValue:_O},{provide:SP,useValue:function cQ(){iM.makeCurrent(),sM.init()},multi:!0},{provide:it,useFactory:function uQ(){return function D8(n){Ox=n}(document),document},deps:[]}]),fQ=[{provide:X0,useValue:"root"},{provide:Ko,useFactory:function dQ(){return new Ko},deps:[]},{provide:l_,useClass:iQ,multi:!0,deps:[it,Xe,Gs]},{provide:l_,useClass:aQ,multi:!0,deps:[it]},{provide:u_,useClass:u_,deps:[c_,Sf,bf]},{provide:pf,useExisting:u_},{provide:wO,useExisting:Sf},{provide:Sf,useClass:Sf,deps:[it]},{provide:Nw,useClass:Nw,deps:[Xe]},{provide:c_,useClass:c_,deps:[l_,Xe]},{provide:vO,useClass:XK,deps:[]}];let kO=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:bf,useValue:e.appId},{provide:bO,useExisting:bf},YK]}}}return n.\u0275fac=function(e){return new(e||n)(j(n,12))},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:fQ,imports:[gi,bX]}),n})();"undefined"!=typeof window&&window;let h_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:function(e){let i=null;return i=e?new(e||n):j(PO),i},providedIn:"root"}),n})(),PO=(()=>{class n extends h_{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case tn.NONE:return i;case tn.HTML:return ho(i,"HTML")?Bs(i):E1(this._doc,String(i)).toString();case tn.STYLE:return ho(i,"Style")?Bs(i):i;case tn.SCRIPT:if(ho(i,"Script"))return Bs(i);throw new Error("unsafe value used in a script context");case tn.URL:return v1(i),ho(i,"URL")?Bs(i):Yh(String(i));case tn.RESOURCE_URL:if(ho(i,"ResourceURL"))return Bs(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function BW(n){return new PW(n)}(e)}bypassSecurityTrustStyle(e){return function VW(n){return new OW(n)}(e)}bypassSecurityTrustScript(e){return function HW(n){return new LW(n)}(e)}bypassSecurityTrustUrl(e){return function zW(n){return new FW(n)}(e)}bypassSecurityTrustResourceUrl(e){return function UW(n){return new NW(n)}(e)}}return n.\u0275fac=function(e){return new(e||n)(j(it))},n.\u0275prov=oe({token:n,factory:function(e){let i=null;return i=e?new e:function MQ(n){return new PO(n.get(it))}(j(zn)),i},providedIn:"root"}),n})();function Qe(...n){return Ci(n,kh(n))}class ns extends ge{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const{isArray:CQ}=Array,{getPrototypeOf:SQ,prototype:DQ,keys:EQ}=Object;function OO(n){if(1===n.length){const t=n[0];if(CQ(t))return{args:t,keys:null};if(function AQ(n){return n&&"object"==typeof n&&SQ(n)===DQ}(t)){const e=EQ(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:TQ}=Array;function cM(n){return Et(t=>function kQ(n,t){return TQ(t)?n(...t):n(t)}(n,t))}function LO(n,t){return n.reduce((e,i,s)=>(e[i]=t[s],e),{})}function FO(n,t,e){n?Wo(e,n,t):t()}const f_=Hi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function p_(...n){return function PQ(){return Th(1)}()(Ci(n,kh(n)))}function m_(n){return new Jt(t=>{Rs(n()).subscribe(t)})}function NO(){return Hn((n,t)=>{let e=null;n._refCount++;const i=new kn(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const s=n._connection,r=e;e=null,s&&(!r||s===r)&&s.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class OQ extends Jt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,KA(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new yt;const e=this.getSubject();t.add(this.source.subscribe(new kn(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=yt.EMPTY)}return t}refCount(){return NO()(this)}}function ur(n,t){return Hn((e,i)=>{let s=null,r=0,o=!1;const a=()=>o&&!s&&i.complete();e.subscribe(new kn(i,l=>{null==s||s.unsubscribe();let c=0;const d=r++;Rs(n(l,d)).subscribe(s=new kn(i,u=>i.next(t?t(l,u,d,c++):u),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function ki(...n){const t=kh(n);return Hn((e,i)=>{(t?p_(n,e,t):p_(n,e)).subscribe(i)})}function LQ(n,t,e,i,s){return(r,o)=>{let a=e,l=t,c=0;r.subscribe(new kn(o,d=>{const u=c++;l=a?n(l,d,u):(a=!0,d),i&&o.next(l)},s&&(()=>{a&&o.next(l),o.complete()})))}}function BO(n,t){return Hn(LQ(n,t,arguments.length>=2,!0))}function un(n,t){return Hn((e,i)=>{let s=0;e.subscribe(new kn(i,r=>n.call(t,r,s++)&&i.next(r)))})}function sa(n){return Hn((t,e)=>{let r,i=null,s=!1;i=t.subscribe(new kn(e,void 0,void 0,o=>{r=Rs(n(o,sa(n)(t))),i?(i.unsubscribe(),i=null,r.subscribe(e)):s=!0})),s&&(i.unsubscribe(),i=null,r.subscribe(e))})}function tu(n,t){return bt(t)?ui(n,t,1):ui(n,1)}function dM(n){return n<=0?()=>ao:Hn((t,e)=>{let i=[];t.subscribe(new kn(e,s=>{i.push(s),n<i.length&&i.shift()},()=>{for(const s of i)e.next(s);e.complete()},void 0,()=>{i=null}))})}function VO(n=FQ){return Hn((t,e)=>{let i=!1;t.subscribe(new kn(e,s=>{i=!0,e.next(s)},()=>i?e.complete():e.error(n())))})}function FQ(){return new f_}function HO(n){return Hn((t,e)=>{let i=!1;t.subscribe(new kn(e,s=>{i=!0,e.next(s)},()=>{i||e.next(n),e.complete()}))})}function nu(n,t){const e=arguments.length>=2;return i=>i.pipe(n?un((s,r)=>n(s,r,i)):Na,yn(1),e?HO(t):VO(()=>new f_))}function Ri(n,t,e){const i=bt(n)||t||e?{next:n,error:t,complete:e}:n;return i?Hn((s,r)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;s.subscribe(new kn(r,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),r.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),r.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),r.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Na}function zO(n){return Hn((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}class ra{constructor(t,e){this.id=t,this.url=e}}class uM extends ra{constructor(t,e,i="imperative",s=null){super(t,e),this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Df extends ra{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class UO extends ra{constructor(t,e,i){super(t,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class BQ extends ra{constructor(t,e,i){super(t,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class VQ extends ra{constructor(t,e,i,s){super(t,e),this.urlAfterRedirects=i,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HQ extends ra{constructor(t,e,i,s){super(t,e),this.urlAfterRedirects=i,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zQ extends ra{constructor(t,e,i,s,r){super(t,e),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class UQ extends ra{constructor(t,e,i,s){super(t,e),this.urlAfterRedirects=i,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GQ extends ra{constructor(t,e,i,s){super(t,e),this.urlAfterRedirects=i,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GO{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jO{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jQ{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WQ{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $Q{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qQ{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WO{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vt="primary";class YQ{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function iu(n){return new YQ(n)}const $O="ngNavigationCancelingError";function hM(n){const t=Error("NavigationCancelingError: "+n);return t[$O]=!0,t}function KQ(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const s={};for(let r=0;r<i.length;r++){const o=i[r],a=n[r];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:s}}function bo(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let s;for(let r=0;r<e.length;r++)if(s=e[r],!qO(n[s],t[s]))return!1;return!0}function qO(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((s,r)=>i[r]===s)}return n===t}function YO(n){return Array.prototype.concat.apply([],n)}function XO(n){return n.length>0?n[n.length-1]:null}function Xi(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function xo(n){return aw(n)?n:lf(n)?Ci(Promise.resolve(n)):Qe(n)}const JQ={exact:function ZO(n,t,e){if(!Jl(n.segments,t.segments)||!g_(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!ZO(n.children[i],t.children[i],e))return!1;return!0},subset:JO},KO={exact:function eZ(n,t){return bo(n,t)},subset:function tZ(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>qO(n[e],t[e]))},ignored:()=>!0};function QO(n,t,e){return JQ[e.paths](n.root,t.root,e.matrixParams)&&KO[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function JO(n,t,e){return eL(n,t,t.segments,e)}function eL(n,t,e,i){if(n.segments.length>e.length){const s=n.segments.slice(0,e.length);return!(!Jl(s,e)||t.hasChildren()||!g_(s,e,i))}if(n.segments.length===e.length){if(!Jl(n.segments,e)||!g_(n.segments,e,i))return!1;for(const s in t.children)if(!n.children[s]||!JO(n.children[s],t.children[s],i))return!1;return!0}{const s=e.slice(0,n.segments.length),r=e.slice(n.segments.length);return!!(Jl(n.segments,s)&&g_(n.segments,s,i)&&n.children[Vt])&&eL(n.children[Vt],t,r,i)}}function g_(n,t,e){return t.every((i,s)=>KO[e](n[s].parameters,i.parameters))}class Zl{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iu(this.queryParams)),this._queryParamMap}toString(){return sZ.serialize(this)}}class jt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Xi(e,(i,s)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return __(this)}}class Ef{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=iu(this.parameters)),this._parameterMap}toString(){return rL(this)}}function Jl(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}class tL{}class nL{parse(t){const e=new fZ(t);return new Zl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Af(t.root,!0)}`,i=function aZ(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(s=>`${y_(e)}=${y_(s)}`).join("&"):`${y_(e)}=${y_(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function rZ(n){return encodeURI(n)}(t.fragment)}`:""}`}}const sZ=new nL;function __(n){return n.segments.map(t=>rL(t)).join("/")}function Af(n,t){if(!n.hasChildren())return __(n);if(t){const e=n.children[Vt]?Af(n.children[Vt],!1):"",i=[];return Xi(n.children,(s,r)=>{r!==Vt&&i.push(`${r}:${Af(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function iZ(n,t){let e=[];return Xi(n.children,(i,s)=>{s===Vt&&(e=e.concat(t(i,s)))}),Xi(n.children,(i,s)=>{s!==Vt&&(e=e.concat(t(i,s)))}),e}(n,(i,s)=>s===Vt?[Af(n.children[Vt],!1)]:[`${s}:${Af(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${__(n)}/${e[0]}`:`${__(n)}/(${e.join("//")})`}}function iL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function y_(n){return iL(n).replace(/%3B/gi,";")}function fM(n){return iL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function v_(n){return decodeURIComponent(n)}function sL(n){return v_(n.replace(/\+/g,"%20"))}function rL(n){return`${fM(n.path)}${function oZ(n){return Object.keys(n).map(t=>`;${fM(t)}=${fM(n[t])}`).join("")}(n.parameters)}`}const lZ=/^[^\/()?;=#]+/;function b_(n){const t=n.match(lZ);return t?t[0]:""}const cZ=/^[^=?&#]+/,uZ=/^[^&#]+/;class fZ{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Vt]=new jt(t,e)),i}parseSegment(){const t=b_(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Ef(v_(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=b_(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const s=b_(this.remaining);s&&(i=s,this.capture(i))}t[v_(e)]=v_(i)}parseQueryParam(t){const e=function dZ(n){const t=n.match(cZ);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function hZ(n){const t=n.match(uZ);return t?t[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const s=sL(e),r=sL(i);if(t.hasOwnProperty(s)){let o=t[s];Array.isArray(o)||(o=[o],t[s]=o),o.push(r)}else t[s]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=b_(this.remaining),s=this.remaining[i.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let r;i.indexOf(":")>-1?(r=i.substr(0,i.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=Vt);const o=this.parseChildren();e[r]=1===Object.keys(o).length?o[Vt]:new jt([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class oL{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=pM(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=pM(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=mM(t,this._root);return e.length<2?[]:e[e.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return mM(t,this._root).map(e=>e.value)}}function pM(n,t){if(n===t.value)return t;for(const e of t.children){const i=pM(n,e);if(i)return i}return null}function mM(n,t){if(n===t.value)return[t];for(const e of t.children){const i=mM(n,e);if(i.length)return i.unshift(t),i}return[]}class oa{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function su(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class aL extends oL{constructor(t,e){super(t),this.snapshot=e,gM(this,t)}toString(){return this.snapshot.toString()}}function lL(n,t){const e=function pZ(n,t){const o=new x_([],{},{},"",{},Vt,t,null,n.root,-1,{});return new dL("",new oa(o,[]))}(n,t),i=new ns([new Ef("",{})]),s=new ns({}),r=new ns({}),o=new ns({}),a=new ns(""),l=new Qa(i,s,o,a,r,Vt,t,e.root);return l.snapshot=e.root,new aL(new oa(l,[]),e)}class Qa{constructor(t,e,i,s,r,o,a,l){this.url=t,this.params=e,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Et(t=>iu(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Et(t=>iu(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cL(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const s=e[i],r=e[i-1];if(s.routeConfig&&""===s.routeConfig.path)i--;else{if(r.component)break;i--}}return function mZ(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class x_{constructor(t,e,i,s,r,o,a,l,c,d,u){this.url=t,this.params=e,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=d,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=iu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class dL extends oL{constructor(t,e){super(e),this.url=t,gM(this,e)}toString(){return uL(this._root)}}function gM(n,t){t.value._routerState=n,t.children.forEach(e=>gM(n,e))}function uL(n){const t=n.children.length>0?` { ${n.children.map(uL).join(", ")} } `:"";return`${n.value}${t}`}function _M(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,bo(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),bo(t.params,e.params)||n.params.next(e.params),function QQ(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!bo(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),bo(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function yM(n,t){const e=bo(n.params,t.params)&&function nZ(n,t){return Jl(n,t)&&n.every((e,i)=>bo(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||yM(n.parent,t.parent))}function Tf(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const s=function _Z(n,t,e){return t.children.map(i=>{for(const s of e.children)if(n.shouldReuseRoute(i.value,s.value.snapshot))return Tf(n,i,s);return Tf(n,i)})}(n,t,e);return new oa(i,s)}{if(n.shouldAttach(t.value)){const r=n.retrieve(t.value);if(null!==r){const o=r.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Tf(n,a)),o}}const i=function yZ(n){return new Qa(new ns(n.url),new ns(n.params),new ns(n.queryParams),new ns(n.fragment),new ns(n.data),n.outlet,n.component,n)}(t.value),s=t.children.map(r=>Tf(n,r));return new oa(i,s)}}function w_(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function kf(n){return"object"==typeof n&&null!=n&&n.outlets}function vM(n,t,e,i,s){let r={};return i&&Xi(i,(o,a)=>{r[a]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new Zl(e.root===n?t:hL(e.root,n,t),r,s)}function hL(n,t,e){const i={};return Xi(n.children,(s,r)=>{i[r]=s===t?e:hL(s,t,e)}),new jt(n.segments,i)}class fL{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&w_(i[0]))throw new Error("Root segment cannot have matrix parameters");const s=i.find(kf);if(s&&s!==XO(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bM{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function pL(n,t,e){if(n||(n=new jt([],{})),0===n.segments.length&&n.hasChildren())return M_(n,t,e);const i=function CZ(n,t,e){let i=0,s=t;const r={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(i>=e.length)return r;const o=n.segments[s],a=e[i];if(kf(a))break;const l=`${a}`,c=i<e.length-1?e[i+1]:null;if(s>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!gL(l,c,o))return r;i+=2}else{if(!gL(l,{},o))return r;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}(n,t,e),s=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const r=new jt(n.segments.slice(0,i.pathIndex),{});return r.children[Vt]=new jt(n.segments.slice(i.pathIndex),n.children),M_(r,0,s)}return i.match&&0===s.length?new jt(n.segments,{}):i.match&&!n.hasChildren()?xM(n,t,e):i.match?M_(n,0,s):xM(n,t,e)}function M_(n,t,e){if(0===e.length)return new jt(n.segments,{});{const i=function MZ(n){return kf(n[0])?n[0].outlets:{[Vt]:n}}(e),s={};return Xi(i,(r,o)=>{"string"==typeof r&&(r=[r]),null!==r&&(s[o]=pL(n.children[o],t,r))}),Xi(n.children,(r,o)=>{void 0===i[o]&&(s[o]=r)}),new jt(n.segments,s)}}function xM(n,t,e){const i=n.segments.slice(0,t);let s=0;for(;s<e.length;){const r=e[s];if(kf(r)){const l=SZ(r.outlets);return new jt(i,l)}if(0===s&&w_(e[0])){i.push(new Ef(n.segments[t].path,mL(e[0]))),s++;continue}const o=kf(r)?r.outlets[Vt]:`${r}`,a=s<e.length-1?e[s+1]:null;o&&a&&w_(a)?(i.push(new Ef(o,mL(a))),s+=2):(i.push(new Ef(o,{})),s++)}return new jt(i,{})}function SZ(n){const t={};return Xi(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=xM(new jt([],{}),0,e))}),t}function mL(n){const t={};return Xi(n,(e,i)=>t[i]=`${e}`),t}function gL(n,t,e){return n==e.path&&bo(t,e.parameters)}class EZ{constructor(t,e,i,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=s}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),_M(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const s=su(e);t.children.forEach(r=>{const o=r.value.outlet;this.deactivateRoutes(r,s[o],i),delete s[o]}),Xi(s,(r,o)=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(t,e,i){const s=t.value,r=e?e.value:null;if(s===r)if(s.component){const o=i.getContext(s.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else r&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),s=i&&t.value.component?i.children:e,r=su(t);for(const o of Object.keys(r))this.deactivateRouteAndItsChildren(r[o],s);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),s=i&&t.value.component?i.children:e,r=su(t);for(const o of Object.keys(r))this.deactivateRouteAndItsChildren(r[o],s);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const s=su(e);t.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],i),this.forwardEvent(new qQ(r.value.snapshot))}),t.children.length&&this.forwardEvent(new WQ(t.value.snapshot))}activateRoutes(t,e,i){const s=t.value,r=e?e.value:null;if(_M(s),s===r)if(s.component){const o=i.getOrCreateContext(s.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(s.component){const o=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),_M(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=function AZ(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(s.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=s,o.resolver=l,o.outlet&&o.outlet.activateWith(s,l),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}}class wM{constructor(t,e){this.routes=t,this.module=e}}function Za(n){return"function"==typeof n}function ec(n){return n instanceof Zl}const Rf=Symbol("INITIAL_VALUE");function If(){return ur(n=>function RQ(...n){const t=kh(n),e=dT(n),{args:i,keys:s}=OO(n);if(0===i.length)return Ci([],t);const r=new Jt(function IQ(n,t,e=Na){return i=>{FO(t,()=>{const{length:s}=n,r=new Array(s);let o=s,a=s;for(let l=0;l<s;l++)FO(t,()=>{const c=Ci(n[l],t);let d=!1;c.subscribe(new kn(i,u=>{r[l]=u,d||(d=!0,a--),a||i.next(e(r.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,t,s?o=>LO(s,o):Na));return e?r.pipe(cM(e)):r}(n.map(t=>t.pipe(yn(1),ki(Rf)))).pipe(BO((t,e)=>{let i=!1;return e.reduce((s,r,o)=>s!==Rf?s:(r===Rf&&(i=!0),i||!1!==r&&o!==e.length-1&&!ec(r)?s:r),t)},Rf),un(t=>t!==Rf),Et(t=>ec(t)?t:!0===t),yn(1)))}class OZ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Pf,this.attachRef=null}}class Pf{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const i=this.getOrCreateContext(t);i.outlet=e,this.contexts.set(t,i)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new OZ,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let MM=(()=>{class n{constructor(e,i,s,r,o){this.parentContexts=e,this.location=i,this.resolver=s,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new he,this.deactivateEvents=new he,this.attachEvents=new he,this.detachEvents=new he,this.name=r||Vt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const o=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new LZ(e,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(v(Pf),v(In),v(Jo),fi("name"),v(At))},n.\u0275dir=G({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class LZ{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Qa?this.route:t===Pf?this.childContexts:this.parent.get(t,e)}}let _L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=We({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&Ne(0,"router-outlet")},directives:[MM],encapsulation:2}),n})();function yL(n,t=""){for(let e=0;e<n.length;e++){const i=n[e];FZ(i,NZ(t,i))}}function FZ(n,t){n.children&&yL(n.children,t)}function NZ(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function CM(n){const t=n.children&&n.children.map(CM),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Vt&&(e.component=_L),e}function hr(n){return n.outlet||Vt}function vL(n,t){const e=n.filter(i=>hr(i)===t);return e.push(...n.filter(i=>hr(i)!==t)),e}const bL={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function C_(n,t,e){var i;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},bL):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const r=(t.matcher||KQ)(e,n,t);if(!r)return Object.assign({},bL);const o={};Xi(r.posParams,(l,c)=>{o[c]=l.path});const a=r.consumed.length>0?Object.assign(Object.assign({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:a,positionalParamSegments:null!==(i=r.posParams)&&void 0!==i?i:{}}}function S_(n,t,e,i,s="corrected"){if(e.length>0&&function HZ(n,t,e){return e.some(i=>D_(n,t,i)&&hr(i)!==Vt)}(n,e,i)){const o=new jt(t,function VZ(n,t,e,i){const s={};s[Vt]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const r of e)if(""===r.path&&hr(r)!==Vt){const o=new jt([],{});o._sourceSegment=n,o._segmentIndexShift=t.length,s[hr(r)]=o}return s}(n,t,i,new jt(e,n.children)));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function zZ(n,t,e){return e.some(i=>D_(n,t,i))}(n,e,i)){const o=new jt(n.segments,function BZ(n,t,e,i,s,r){const o={};for(const a of i)if(D_(n,e,a)&&!s[hr(a)]){const l=new jt([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===r?n.segments.length:t.length,o[hr(a)]=l}return Object.assign(Object.assign({},s),o)}(n,t,e,i,n.children,s));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const r=new jt(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:e}}function D_(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function xL(n,t,e,i){return!!(hr(n)===i||i!==Vt&&D_(t,e,n))&&("**"===n.path||C_(t,n,e).matched)}function wL(n,t,e){return 0===t.length&&!n.children[e]}class Of{constructor(t){this.segmentGroup=t||null}}class ML{constructor(t){this.urlTree=t}}function E_(n){return new Jt(t=>t.error(new Of(n)))}function CL(n){return new Jt(t=>t.error(new ML(n)))}function UZ(n){return new Jt(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class WZ{constructor(t,e,i,s,r){this.configLoader=e,this.urlSerializer=i,this.urlTree=s,this.config=r,this.allowRedirects=!0,this.ngModule=t.get(ea)}apply(){const t=S_(this.urlTree.root,[],[],this.config).segmentGroup,e=new jt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Vt).pipe(Et(r=>this.createUrlTree(SM(r),this.urlTree.queryParams,this.urlTree.fragment))).pipe(sa(r=>{if(r instanceof ML)return this.allowRedirects=!1,this.match(r.urlTree);throw r instanceof Of?this.noMatchError(r):r}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Vt).pipe(Et(s=>this.createUrlTree(SM(s),t.queryParams,t.fragment))).pipe(sa(s=>{throw s instanceof Of?this.noMatchError(s):s}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,i){const s=t.segments.length>0?new jt([],{[Vt]:t}):t;return new Zl(s,e,i)}expandSegmentGroup(t,e,i,s){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe(Et(r=>new jt([],r))):this.expandSegment(t,i,e,i.segments,s,!0)}expandChildren(t,e,i){const s=[];for(const r of Object.keys(i.children))"primary"===r?s.unshift(r):s.push(r);return Ci(s).pipe(tu(r=>{const o=i.children[r],a=vL(e,r);return this.expandSegmentGroup(t,a,o,r).pipe(Et(l=>({segment:l,outlet:r})))}),BO((r,o)=>(r[o.outlet]=o.segment,r),{}),function NQ(n,t){const e=arguments.length>=2;return i=>i.pipe(n?un((s,r)=>n(s,r,i)):Na,dM(1),e?HO(t):VO(()=>new f_))}())}expandSegment(t,e,i,s,r,o){return Ci(i).pipe(tu(a=>this.expandSegmentAgainstRoute(t,e,i,a,s,r,o).pipe(sa(c=>{if(c instanceof Of)return Qe(null);throw c}))),nu(a=>!!a),sa((a,l)=>{if(a instanceof f_||"EmptyError"===a.name){if(wL(e,s,r))return Qe(new jt([],{}));throw new Of(e)}throw a}))}expandSegmentAgainstRoute(t,e,i,s,r,o,a){return xL(s,e,r,o)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(t,e,s,r,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,s,r,o):E_(e):E_(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,s,r,o){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,s,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,s,r,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,s){const r=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?CL(r):this.lineralizeSegments(i,r).pipe(ui(o=>{const a=new jt(o,{});return this.expandSegment(t,a,e,o,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,s,r,o){const{matched:a,consumedSegments:l,lastChild:c,positionalParamSegments:d}=C_(e,s,r);if(!a)return E_(e);const u=this.applyRedirectCommands(l,s.redirectTo,d);return s.redirectTo.startsWith("/")?CL(u):this.lineralizeSegments(s,u).pipe(ui(h=>this.expandSegment(t,e,i,h.concat(r.slice(c)),o,!1)))}matchSegmentAgainstRoute(t,e,i,s,r){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Qe(i._loadedConfig):this.configLoader.load(t.injector,i)).pipe(Et(h=>(i._loadedConfig=h,new jt(s,{})))):Qe(new jt(s,{}));const{matched:o,consumedSegments:a,lastChild:l}=C_(e,i,s);if(!o)return E_(e);const c=s.slice(l);return this.getChildConfig(t,i,s).pipe(ui(u=>{const h=u.module,f=u.routes,{segmentGroup:p,slicedSegments:m}=S_(e,a,c,f),g=new jt(p.segments,p.children);if(0===m.length&&g.hasChildren())return this.expandChildren(h,f,g).pipe(Et(x=>new jt(a,x)));if(0===f.length&&0===m.length)return Qe(new jt(a,{}));const _=hr(i)===r;return this.expandSegment(h,g,f,m,_?Vt:r,!0).pipe(Et(b=>new jt(a.concat(b.segments),b.children)))}))}getChildConfig(t,e,i){return e.children?Qe(new wM(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Qe(e._loadedConfig):this.runCanLoadGuards(t.injector,e,i).pipe(ui(s=>s?this.configLoader.load(t.injector,e).pipe(Et(r=>(e._loadedConfig=r,r))):function GZ(n){return new Jt(t=>t.error(hM(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(e))):Qe(new wM([],t))}runCanLoadGuards(t,e,i){const s=e.canLoad;return s&&0!==s.length?Qe(s.map(o=>{const a=t.get(o);let l;if(function kZ(n){return n&&Za(n.canLoad)}(a))l=a.canLoad(e,i);else{if(!Za(a))throw new Error("Invalid CanLoad guard");l=a(e,i)}return xo(l)})).pipe(If(),Ri(o=>{if(!ec(o))return;const a=hM(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),Et(o=>!0===o)):Qe(!0)}lineralizeSegments(t,e){let i=[],s=e.root;for(;;){if(i=i.concat(s.segments),0===s.numberOfChildren)return Qe(i);if(s.numberOfChildren>1||!s.children[Vt])return UZ(t.redirectTo);s=s.children[Vt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreatreUrlTree(t,e,i,s){const r=this.createSegmentGroup(t,e.root,i,s);return new Zl(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Xi(t,(s,r)=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=e[a]}else i[r]=s}),i}createSegmentGroup(t,e,i,s){const r=this.createSegments(t,e.segments,i,s);let o={};return Xi(e.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,i,s)}),new jt(r,o)}createSegments(t,e,i,s){return e.map(r=>r.path.startsWith(":")?this.findPosParam(t,r,s):this.findOrReturn(r,i))}findPosParam(t,e,i){const s=i[e.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return s}findOrReturn(t,e){let i=0;for(const s of e){if(s.path===t.path)return e.splice(i),s;i++}return t}}function SM(n){const t={};for(const i of Object.keys(n.children)){const r=SM(n.children[i]);(r.segments.length>0||r.hasChildren())&&(t[i]=r)}return function $Z(n){if(1===n.numberOfChildren&&n.children[Vt]){const t=n.children[Vt];return new jt(n.segments.concat(t.segments),t.children)}return n}(new jt(n.segments,t))}class SL{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class A_{constructor(t,e){this.component=t,this.route=e}}function YZ(n,t,e){const i=n._root;return Lf(i,t?t._root:null,e,[i.value])}function T_(n,t,e){const i=function KZ(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:e).get(n)}function Lf(n,t,e,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=su(t);return n.children.forEach(o=>{(function QZ(n,t,e,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){const l=function ZZ(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Jl(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Jl(n.url,t.url)||!bo(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yM(n,t)||!bo(n.queryParams,t.queryParams);default:return!yM(n,t)}}(o,r,r.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new SL(i)):(r.data=o.data,r._resolvedData=o._resolvedData),Lf(n,t,r.component?a?a.children:null:e,i,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new A_(a.outlet.component,o))}else o&&Ff(t,a,s),s.canActivateChecks.push(new SL(i)),Lf(n,null,r.component?a?a.children:null:e,i,s)})(o,r[o.value.outlet],e,i.concat([o.value]),s),delete r[o.value.outlet]}),Xi(r,(o,a)=>Ff(o,e.getContext(a),s)),s}function Ff(n,t,e){const i=su(n),s=n.value;Xi(i,(r,o)=>{Ff(r,s.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new A_(s.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,s))}class aJ{}function DL(n){return new Jt(t=>t.error(n))}class cJ{constructor(t,e,i,s,r,o){this.rootComponentType=t,this.config=e,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=o}recognize(){const t=S_(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Vt);if(null===e)return null;const i=new x_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new oa(i,e),r=new dL(this.url,s);return this.inheritParamsAndData(r._root),r}inheritParamsAndData(t){const e=t.value,i=cL(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(t,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,i)}processChildren(t,e){const i=[];for(const r of Object.keys(e.children)){const o=e.children[r],a=vL(t,r),l=this.processSegmentGroup(a,o,r);if(null===l)return null;i.push(...l)}const s=EL(i);return function dJ(n){n.sort((t,e)=>t.value.outlet===Vt?-1:e.value.outlet===Vt?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}processSegment(t,e,i,s){for(const r of t){const o=this.processSegmentAgainstRoute(r,e,i,s);if(null!==o)return o}return wL(e,i,s)?[]:null}processSegmentAgainstRoute(t,e,i,s){if(t.redirectTo||!xL(t,e,i,s))return null;let r,o=[],a=[];if("**"===t.path){const f=i.length>0?XO(i).parameters:{};r=new x_(i,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kL(t),hr(t),t.component,t,AL(e),TL(e)+i.length,RL(t))}else{const f=C_(e,t,i);if(!f.matched)return null;o=f.consumedSegments,a=i.slice(f.lastChild),r=new x_(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kL(t),hr(t),t.component,t,AL(e),TL(e)+o.length,RL(t))}const l=function uJ(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:d}=S_(e,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===d.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new oa(r,f)]}if(0===l.length&&0===d.length)return[new oa(r,[])];const u=hr(t)===s,h=this.processSegment(l,c,d,u?Vt:s);return null===h?null:[new oa(r,h)]}}function hJ(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function EL(n){const t=[],e=new Set;for(const i of n){if(!hJ(i)){t.push(i);continue}const s=t.find(r=>i.value.routeConfig===r.value.routeConfig);void 0!==s?(s.children.push(...i.children),e.add(s)):t.push(i)}for(const i of e){const s=EL(i.children);t.push(new oa(i.value,s))}return t.filter(i=>!e.has(i))}function AL(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function TL(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function kL(n){return n.data||{}}function RL(n){return n.resolve||{}}function DM(n){return ur(t=>{const e=n(t);return e?Ci(e).pipe(Et(()=>t)):Qe(t)})}class bJ extends class vJ{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const EM=new K("ROUTES");class IL{constructor(t,e,i,s){this.injector=t,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=s}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const s=this.loadModuleFactory(e.loadChildren).pipe(Et(r=>{this.onLoadEndListener&&this.onLoadEndListener(e);const o=r.create(t);return new wM(YO(o.injector.get(EM,void 0,xt.Self|xt.Optional)).map(CM),o)}),sa(r=>{throw e._loader$=void 0,r}));return e._loader$=new OQ(s,()=>new ge).pipe(NO()),e._loader$}loadModuleFactory(t){return xo(t()).pipe(ui(e=>e instanceof UI?Qe(e):Ci(this.compiler.compileModuleAsync(e))))}}class wJ{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function MJ(n){throw n}function CJ(n,t,e){return t.parse("/")}function PL(n,t){return Qe(null)}const SJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vs=(()=>{class n{constructor(e,i,s,r,o,a,l){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=s,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ge,this.errorHandler=MJ,this.malformedUriErrorHandler=CJ,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:PL,afterPreactivation:PL},this.urlHandlingStrategy=new wJ,this.routeReuseStrategy=new bJ,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(ea),this.console=o.get(DP);const u=o.get(Xe);this.isNgZoneEnabled=u instanceof Xe&&Xe.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function ZQ(){return new Zl(new jt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new IL(o,a,h=>this.triggerEvent(new GO(h)),h=>this.triggerEvent(new jO(h))),this.routerState=lL(this.currentUrlTree,this.rootComponentType),this.transitions=new ns({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(un(s=>0!==s.id),Et(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ur(s=>{let r=!1,o=!1;return Qe(s).pipe(Ri(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ur(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return k_(a.source)&&(this.browserUrlTree=a.extractedUrl),Qe(a).pipe(ur(u=>{const h=this.transitions.getValue();return i.next(new uM(u.id,this.serializeUrl(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions.getValue()?ao:Promise.resolve(u)}),function qZ(n,t,e,i){return ur(s=>function jZ(n,t,e,i,s){return new WZ(n,t,e,i,s).apply()}(n,t,e,s.extractedUrl,i).pipe(Et(r=>Object.assign(Object.assign({},s),{urlAfterRedirects:r}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ri(u=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:u.urlAfterRedirects})}),function fJ(n,t,e,i,s){return ui(r=>function lJ(n,t,e,i,s="emptyOnly",r="legacy"){try{const o=new cJ(n,t,e,i,s,r).recognize();return null===o?DL(new aJ):Qe(o)}catch(o){return DL(o)}}(n,t,r.urlAfterRedirects,e(r.urlAfterRedirects),i,s).pipe(Et(o=>Object.assign(Object.assign({},r),{targetSnapshot:o}))))}(this.rootComponentType,this.config,u=>this.serializeUrl(u),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ri(u=>{if("eager"===this.urlUpdateStrategy){if(!u.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);this.setBrowserUrl(f,u)}this.browserUrlTree=u.urlAfterRedirects}const h=new VQ(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);i.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:m,extras:g}=a,_=new uM(h,this.serializeUrl(f),p,m);i.next(_);const y=lL(f,this.rootComponentType).snapshot;return Qe(Object.assign(Object.assign({},a),{targetSnapshot:y,urlAfterRedirects:f,extras:Object.assign(Object.assign({},g),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),ao}),DM(a=>{const{targetSnapshot:l,id:c,extractedUrl:d,rawUrl:u,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:d,rawUrlTree:u,skipLocationChange:!!h,replaceUrl:!!f})}),Ri(a=>{const l=new HQ(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Et(a=>Object.assign(Object.assign({},a),{guards:YZ(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function JZ(n,t){return ui(e=>{const{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=e;return 0===o.length&&0===r.length?Qe(Object.assign(Object.assign({},e),{guardsResult:!0})):function eJ(n,t,e,i){return Ci(n).pipe(ui(s=>function oJ(n,t,e,i,s){const r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return r&&0!==r.length?Qe(r.map(a=>{const l=T_(a,t,s);let c;if(function PZ(n){return n&&Za(n.canDeactivate)}(l))c=xo(l.canDeactivate(n,t,e,i));else{if(!Za(l))throw new Error("Invalid CanDeactivate guard");c=xo(l(n,t,e,i))}return c.pipe(nu())})).pipe(If()):Qe(!0)}(s.component,s.route,e,t,i)),nu(s=>!0!==s,!0))}(o,i,s,n).pipe(ui(a=>a&&function TZ(n){return"boolean"==typeof n}(a)?function tJ(n,t,e,i){return Ci(t).pipe(tu(s=>p_(function iJ(n,t){return null!==n&&t&&t(new jQ(n)),Qe(!0)}(s.route.parent,i),function nJ(n,t){return null!==n&&t&&t(new $Q(n)),Qe(!0)}(s.route,i),function rJ(n,t,e){const i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(o=>function XZ(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(o)).filter(o=>null!==o).map(o=>m_(()=>Qe(o.guards.map(l=>{const c=T_(l,o.node,e);let d;if(function IZ(n){return n&&Za(n.canActivateChild)}(c))d=xo(c.canActivateChild(i,n));else{if(!Za(c))throw new Error("Invalid CanActivateChild guard");d=xo(c(i,n))}return d.pipe(nu())})).pipe(If())));return Qe(r).pipe(If())}(n,s.path,e),function sJ(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Qe(!0);const s=i.map(r=>m_(()=>{const o=T_(r,t,e);let a;if(function RZ(n){return n&&Za(n.canActivate)}(o))a=xo(o.canActivate(t,n));else{if(!Za(o))throw new Error("Invalid CanActivate guard");a=xo(o(t,n))}return a.pipe(nu())}));return Qe(s).pipe(If())}(n,s.route,e))),nu(s=>!0!==s,!0))}(i,r,n,t):Qe(a)),Et(a=>Object.assign(Object.assign({},e),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Ri(a=>{if(ec(a.guardsResult)){const c=hM(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new zQ(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),un(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),DM(a=>{if(a.guards.canActivateChecks.length)return Qe(a).pipe(Ri(l=>{const c=new UQ(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),ur(l=>{let c=!1;return Qe(l).pipe(function pJ(n,t){return ui(e=>{const{targetSnapshot:i,guards:{canActivateChecks:s}}=e;if(!s.length)return Qe(e);let r=0;return Ci(s).pipe(tu(o=>function mJ(n,t,e,i){return function gJ(n,t,e,i){const s=Object.keys(n);if(0===s.length)return Qe({});const r={};return Ci(s).pipe(ui(o=>function _J(n,t,e,i){const s=T_(n,t,i);return xo(s.resolve?s.resolve(t,e):s(t,e))}(n[o],t,e,i).pipe(Ri(a=>{r[o]=a}))),dM(1),ui(()=>Object.keys(r).length===s.length?Qe(r):ao))}(n._resolve,n,t,i).pipe(Et(r=>(n._resolvedData=r,n.data=Object.assign(Object.assign({},n.data),cL(n,e).resolve),null)))}(o.route,i,n,t)),Ri(()=>r++),dM(1),ui(o=>r===s.length?Qe(e):ao))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ri({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Ri(l=>{const c=new GQ(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),DM(a=>{const{targetSnapshot:l,id:c,extractedUrl:d,rawUrl:u,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:d,rawUrlTree:u,skipLocationChange:!!h,replaceUrl:!!f})}),Et(a=>{const l=function gZ(n,t,e){const i=Tf(n,t._root,e?e._root:void 0);return new aL(i,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),Ri(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,t,e)=>Et(i=>(new EZ(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Ri({next(){r=!0},complete(){r=!0}}),zO(()=>{var a;r||o||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===s.id&&(this.currentNavigation=null)}),sa(a=>{if(o=!0,function XQ(n){return n&&n[$O]}(a)){const l=ec(a.url);l||(this.navigated=!0,this.restoreHistory(s,!0));const c=new UO(s.id,this.serializeUrl(s.extractedUrl),a.message);i.next(c),l?setTimeout(()=>{const d=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||k_(s.source)};this.scheduleNavigation(d,"imperative",null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const l=new BQ(s.id,this.serializeUrl(s.extractedUrl),a);i.next(l);try{s.resolve(this.errorHandler(a))}catch(c){s.reject(c)}}return ao}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var s;const r={replaceUrl:!0},o=(null===(s=e.state)||void 0===s?void 0:s.navigationId)?e.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(r.state=l)}const a=this.parseUrl(e.url);this.scheduleNavigation(a,i,o,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){yL(e),this.config=e.map(CM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:s,queryParams:r,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=s||this.routerState.root,d=l?this.currentUrlTree.fragment:o;let u=null;switch(a){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function vZ(n,t,e,i,s){if(0===e.length)return vM(t.root,t.root,t,i,s);const r=function bZ(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new fL(!0,0,n);let t=0,e=!1;const i=n.reduce((s,r,o)=>{if("object"==typeof r&&null!=r){if(r.outlets){const a={};return Xi(r.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return"string"!=typeof r?[...s,r]:0===o?(r.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&s.push(a))}),s):[...s,r]},[]);return new fL(e,t,i)}(e);if(r.toRoot())return vM(t.root,new jt([],{}),t,i,s);const o=function xZ(n,t,e){if(n.isAbsolute)return new bM(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const r=e.snapshot._urlSegment;return new bM(r,r===t.root,0)}const i=w_(n.commands[0])?0:1;return function wZ(n,t,e){let i=n,s=t,r=e;for(;r>s;){if(r-=s,i=i.parent,!i)throw new Error("Invalid number of '../'");s=i.segments.length}return new bM(i,!1,s-r)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(r,t,n),a=o.processChildren?M_(o.segmentGroup,o.index,r.commands):pL(o.segmentGroup,o.index,r.commands);return vM(o.segmentGroup,a,t,i,s)}(c,this.currentUrlTree,e,u,null!=d?d:null)}navigateByUrl(e,i={skipLocationChange:!1}){const s=ec(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function EJ(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(s){i=this.malformedUriErrorHandler(s,this.urlSerializer,e)}return i}isActive(e,i){let s;if(s=!0===i?Object.assign({},SJ):!1===i?Object.assign({},DJ):i,ec(e))return QO(this.currentUrlTree,e,s);const r=this.parseUrl(e);return QO(this.currentUrlTree,r,s)}removeEmptyProps(e){return Object.keys(e).reduce((i,s)=>{const r=e[s];return null!=r&&(i[s]=r),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Df(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,s,r,o){var a,l,c;if(this.disposed)return Promise.resolve(!1);const d=this.transitions.value,u=k_(i)&&d&&!k_(d.source),h=d.rawUrl.toString()===e.toString(),f=d.id===(null===(a=this.currentNavigation)||void 0===a?void 0:a.id);if(u&&h&&f)return Promise.resolve(!0);let m,g,_;o?(m=o.resolve,g=o.reject,_=o.promise):_=new Promise((x,w)=>{m=x,g=w});const y=++this.navigationId;let b;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),b=s&&s.\u0275routerPageId?s.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):b=0,this.setTransition({id:y,targetPageId:b,source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:m,reject:g,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(x=>Promise.reject(x))}setBrowserUrl(e,i){const s=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl?this.location.replaceState(s,"",r):this.location.go(s,"",r)}restoreHistory(e,i=!1){var s,r;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===o?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const s=new UO(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){Ud()},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();function k_(n){return"imperative"!==n}let R_=(()=>{class n{constructor(e,i,s,r,o){this.router=e,this.route=i,this.tabIndexAttribute=s,this.renderer=r,this.el=o,this.commands=null,this.onChanges=new ge,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,s=this.el.nativeElement;null!==e?i.setAttribute(s,"tabindex",e):i.removeAttribute(s,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:ru(this.skipLocationChange),replaceUrl:ru(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ru(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(v(vs),v(Qa),fi("tabindex"),v(Hr),v(ue))},n.\u0275dir=G({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&Ae("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Gt]}),n})(),I_=(()=>{class n{constructor(e,i,s){this.router=e,this.route=i,this.locationStrategy=s,this.commands=null,this.href=null,this.onChanges=new ge,this.subscription=e.events.subscribe(r=>{r instanceof Df&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,s,r,o){if(0!==e||i||s||r||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:ru(this.skipLocationChange),replaceUrl:ru(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ru(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(v(vs),v(Qa),v(Jd))},n.\u0275dir=G({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&Ae("click",function(r){return i.onClick(r.button,r.ctrlKey,r.shiftKey,r.altKey,r.metaKey)}),2&e&&Ge("target",i.target)("href",i.href,Kh)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Gt]}),n})();function ru(n){return""===n||!!n}class OL{}class LL{preload(t,e){return Qe(null)}}let FL=(()=>{class n{constructor(e,i,s,r){this.router=e,this.injector=s,this.preloadingStrategy=r,this.loader=new IL(s,i,l=>e.triggerEvent(new GO(l)),l=>e.triggerEvent(new jO(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(un(e=>e instanceof Df),tu(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(ea);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const s=[];for(const r of i)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const o=r._loadedConfig;s.push(this.processRoutes(o.module,o.routes))}else r.loadChildren&&!r.canLoad?s.push(this.preloadConfig(e,r)):r.children&&s.push(this.processRoutes(e,r.children));return Ci(s).pipe(Th(),Et(r=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Qe(i._loadedConfig):this.loader.load(e.injector,i)).pipe(ui(r=>(i._loadedConfig=r,this.processRoutes(r.module,r.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(j(vs),j($g),j(zn),j(OL))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})(),AM=(()=>{class n{constructor(e,i,s={}){this.router=e,this.viewportScroller=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof uM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Df&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof WO&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new WO(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){Ud()},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const tc=new K("ROUTER_CONFIGURATION"),NL=new K("ROUTER_FORROOT_GUARD"),RJ=[Xg,{provide:tL,useClass:nL},{provide:vs,useFactory:function FJ(n,t,e,i,s,r,o={},a,l){const c=new vs(null,n,t,e,i,s,YO(r));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function NJ(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(d=>{var u,h;null===(u=console.group)||void 0===u||u.call(console,`Router Event: ${d.constructor.name}`),console.log(d.toString()),console.log(d),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[tL,Pf,Xg,zn,$g,EM,tc,[class xJ{},new Ei],[class yJ{},new Ei]]},Pf,{provide:Qa,useFactory:function BJ(n){return n.routerState.root},deps:[vs]},FL,LL,class kJ{preload(t,e){return e().pipe(sa(()=>Qe(null)))}},{provide:tc,useValue:{enableTracing:!1}}];function IJ(){return new IP("Router",vs)}let BL=(()=>{class n{constructor(e,i){}static forRoot(e,i){return{ngModule:n,providers:[RJ,VL(e),{provide:NL,useFactory:LJ,deps:[[vs,new Ei,new Ns]]},{provide:tc,useValue:i||{}},{provide:Jd,useFactory:OJ,deps:[ql,[new $h(Ww),new Ei],tc]},{provide:AM,useFactory:PJ,deps:[vs,zK,tc]},{provide:OL,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:LL},{provide:IP,multi:!0,useFactory:IJ},[TM,{provide:Wg,multi:!0,useFactory:VJ,deps:[TM]},{provide:HL,useFactory:HJ,deps:[TM]},{provide:Pw,multi:!0,useExisting:HL}]]}}static forChild(e){return{ngModule:n,providers:[VL(e)]}}}return n.\u0275fac=function(e){return new(e||n)(j(NL,8),j(vs,8))},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({}),n})();function PJ(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new AM(n,t,e)}function OJ(n,t,e={}){return e.useHash?new AX(n,t):new eO(n,t)}function LJ(n){return"guarded"}function VL(n){return[{provide:oW,multi:!0,useValue:n},{provide:EM,multi:!0,useValue:n}]}let TM=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ge}appInitializer(){return this.injector.get(SX,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const s=new Promise(a=>i=a),r=this.injector.get(vs),o=this.injector.get(tc);return"disabled"===o.initialNavigation?(r.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(r.hooks.afterPreactivation=()=>this.initNavigation?Qe(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),r.initialNavigation()):i(!0),s})}bootstrapListener(e){const i=this.injector.get(tc),s=this.injector.get(FL),r=this.injector.get(AM),o=this.injector.get(vs),a=this.injector.get(Zd);e===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),s.setUpPreloading(),r.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(j(zn))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();function VJ(n){return n.appInitializer.bind(n)}function HJ(n){return n.bootstrapListener.bind(n)}const HL=new K("Router Initializer");function zL(...n){const t=dT(n),{args:e,keys:i}=OO(n),s=new Jt(r=>{const{length:o}=e;if(!o)return void r.complete();const a=new Array(o);let l=o,c=o;for(let d=0;d<o;d++){let u=!1;Rs(e[d]).subscribe(new kn(r,h=>{u||(u=!0,c--),a[d]=h},()=>l--,void 0,()=>{(!l||!u)&&(c||r.next(i?LO(i,a):a),r.complete())}))}});return t?s.pipe(cM(t)):s}let UL=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(v(Hr),v(ue))},n.\u0275dir=G({type:n}),n})(),nc=(()=>{class n extends UL{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=xe(n)))(i||n)}}(),n.\u0275dir=G({type:n,features:[Y]}),n})();const _i=new K("NgValueAccessor"),GJ={provide:_i,useExisting:kt(()=>P_),multi:!0},WJ=new K("CompositionEventMode");let P_=(()=>{class n extends UL{constructor(e,i,s){super(e,i),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jJ(){const n=vo()?vo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(v(Hr),v(ue),v(WJ,8))},n.\u0275dir=G({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&Ae("input",function(r){return i._handleInput(r.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(r){return i._compositionEnd(r.target.value)})},features:[Me([GJ]),Y]}),n})();function Ja(n){return null==n||0===n.length}function jL(n){return null!=n&&"number"==typeof n.length}const oi=new K("NgValidators"),el=new K("NgAsyncValidators"),$J=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class aa{static min(t){return function WL(n){return t=>{if(Ja(t.value)||Ja(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function $L(n){return t=>{if(Ja(t.value)||Ja(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return qL(t)}static requiredTrue(t){return function YL(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function XL(n){return Ja(n.value)||$J.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function KL(n){return t=>Ja(t.value)||!jL(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function QL(n){return t=>jL(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function ZL(n){if(!n)return Nf;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Ja(i.value))return null;const s=i.value;return t.test(s)?null:{pattern:{requiredPattern:e,actualValue:s}}}}(t)}static nullValidator(t){return null}static compose(t){return sF(t)}static composeAsync(t){return rF(t)}}function qL(n){return Ja(n.value)?{required:!0}:null}function Nf(n){return null}function JL(n){return null!=n}function eF(n){const t=lf(n)?Ci(n):n;return aw(t),t}function tF(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function nF(n,t){return t.map(e=>e(n))}function iF(n){return n.map(t=>function qJ(n){return!n.validate}(t)?t:e=>t.validate(e))}function sF(n){if(!n)return null;const t=n.filter(JL);return 0==t.length?null:function(e){return tF(nF(e,t))}}function kM(n){return null!=n?sF(iF(n)):null}function rF(n){if(!n)return null;const t=n.filter(JL);return 0==t.length?null:function(e){return zL(nF(e,t).map(eF)).pipe(Et(tF))}}function RM(n){return null!=n?rF(iF(n)):null}function oF(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function aF(n){return n._rawValidators}function lF(n){return n._rawAsyncValidators}function IM(n){return n?Array.isArray(n)?n:[n]:[]}function O_(n,t){return Array.isArray(n)?n.includes(t):n===t}function cF(n,t){const e=IM(t);return IM(n).forEach(s=>{O_(e,s)||e.push(s)}),e}function dF(n,t){return IM(t).filter(e=>!O_(n,e))}class uF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=kM(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=RM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class jr extends uF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class is extends uF{get formDirective(){return null}get path(){return null}}class hF{constructor(t){this._cd=t}is(t){var e,i,s;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(s=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===s?void 0:s[t])}}let PM=(()=>{class n extends hF{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(v(jr,2))},n.\u0275dir=G({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&Ke("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[Y]}),n})(),Bf=(()=>{class n extends hF{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(v(is,10))},n.\u0275dir=G({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&Ke("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[Y]}),n})();function Vf(n,t){FM(n,t),t.valueAccessor.writeValue(n.value),function tee(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&pF(n,t)})}(n,t),function iee(n,t){const e=(i,s)=>{t.valueAccessor.writeValue(i),s&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function nee(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&pF(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function eee(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function N_(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),V_(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function B_(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function FM(n,t){const e=aF(n);null!==t.validator?n.setValidators(oF(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=lF(n);null!==t.asyncValidator?n.setAsyncValidators(oF(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const s=()=>n.updateValueAndValidity();B_(t._rawValidators,s),B_(t._rawAsyncValidators,s)}function V_(n,t){let e=!1;if(null!==n){if(null!==t.validator){const s=aF(n);if(Array.isArray(s)&&s.length>0){const r=s.filter(o=>o!==t.validator);r.length!==s.length&&(e=!0,n.setValidators(r))}}if(null!==t.asyncValidator){const s=lF(n);if(Array.isArray(s)&&s.length>0){const r=s.filter(o=>o!==t.asyncValidator);r.length!==s.length&&(e=!0,n.setAsyncValidators(r))}}}const i=()=>{};return B_(t._rawValidators,i),B_(t._rawAsyncValidators,i),e}function pF(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function mF(n,t){FM(n,t)}function gF(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function H_(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Hf="VALID",z_="INVALID",ou="PENDING",zf="DISABLED";function HM(n){return(UM(n)?n.validators:n)||null}function _F(n){return Array.isArray(n)?kM(n):n||null}function zM(n,t){return(UM(t)?t.asyncValidators:n)||null}function yF(n){return Array.isArray(n)?RM(n):n||null}function UM(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const vF=n=>n instanceof au,GM=n=>n instanceof Uf;function bF(n){return vF(n)?n.value:n.getRawValue()}function xF(n,t){const e=GM(n),i=n.controls;if(!(e?Object.keys(i):i).length)throw new Xt(1e3,"");if(!i[t])throw new Xt(1001,"")}function wF(n,t){GM(n),n._forEachChild((i,s)=>{if(void 0===t[s])throw new Xt(1002,"")})}class jM{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=_F(this._rawValidators),this._composedAsyncValidatorFn=yF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Hf}get invalid(){return this.status===z_}get pending(){return this.status==ou}get disabled(){return this.status===zf}get enabled(){return this.status!==zf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=_F(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=yF(t)}addValidators(t){this.setValidators(cF(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(cF(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(dF(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(dF(t,this._rawAsyncValidators))}hasValidator(t){return O_(this._rawValidators,t)}hasAsyncValidator(t){return O_(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ou,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=zf,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Hf,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hf||this.status===ou)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zf:Hf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ou,this._hasOwnPendingAsyncValidator=!0;const e=eF(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function aee(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let i=n;return t.forEach(s=>{i=GM(i)?i.controls.hasOwnProperty(s)?i.controls[s]:null:(n=>n instanceof cee)(i)&&i.at(s)||null}),i}(this,t,".")}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new he,this.statusChanges=new he}_calculateStatus(){return this._allControlsDisabled()?zf:this.errors?z_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ou)?ou:this._anyControlsHaveStatus(z_)?z_:Hf}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){UM(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class au extends jM{constructor(t=null,e,i){super(HM(e),zM(i,e)),this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){H_(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){H_(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Uf extends jM{constructor(t,e,i){super(HM(e),zM(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){wF(this,t),Object.keys(t).forEach(i=>{xF(this,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,s)=>{i.reset(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=bF(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,i)=>((e.enabled||this.disabled)&&(t[i]=e.value),t))}_reduceChildren(t,e){let i=t;return this._forEachChild((s,r)=>{i=e(i,s,r)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class cee extends jM{constructor(t,e,i){super(HM(e),zM(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){wF(this,t),t.forEach((i,s)=>{xF(this,s),this.at(s).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,s)=>{this.at(s)&&this.at(s).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,s)=>{i.reset(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>bF(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const dee={provide:is,useExisting:kt(()=>wo)},Gf=(()=>Promise.resolve(null))();let wo=(()=>{class n extends is{constructor(e,i){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new he,this.form=new Uf({},kM(e),RM(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Gf.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Vf(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Gf.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),H_(this._directives,e)})}addFormGroup(e){Gf.then(()=>{const i=this._findContainer(e.path),s=new Uf({});mF(s,e),i.registerControl(e.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Gf.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Gf.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,gF(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(v(oi,10),v(el,10))},n.\u0275dir=G({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&Ae("submit",function(r){return i.onSubmit(r)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Me([dee]),Y]}),n})(),U_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),AF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({}),n})();const WM=new K("NgModelWithFormControlWarning"),yee={provide:is,useExisting:kt(()=>Mo)};let Mo=(()=>{class n extends is{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new he,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(V_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return Vf(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){N_(e.control||null,e,!1),H_(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,gF(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,s=this.form.get(e.path);i!==s&&(N_(i||null,e),vF(s)&&(Vf(s,e),e.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);mF(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function see(n,t){return V_(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){FM(this.form,this),this._oldForm&&V_(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(v(oi,10),v(el,10))},n.\u0275dir=G({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&Ae("submit",function(r){return i.onSubmit(r)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Me([yee]),Y,Gt]}),n})();const xee={provide:jr,useExisting:kt(()=>G_)};let G_=(()=>{class n extends jr{constructor(e,i,s,r,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new he,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=function BM(n,t){if(!t)return null;let e,i,s;return Array.isArray(t),t.forEach(r=>{r.constructor===P_?e=r:function oee(n){return Object.getPrototypeOf(n.constructor)===nc}(r)?i=r:s=r}),s||i||e||null}(0,r)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function NM(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function F_(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(v(is,13),v(oi,10),v(el,10),v(_i,10),v(WM,8))},n.\u0275dir=G({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Me([xee]),Y,Gt]}),n})();const kee={provide:oi,useExisting:kt(()=>j_),multi:!0};let j_=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?qL(e):null}registerOnValidatorChange(e){this._onChange=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,i){2&e&&Ge("required",i.required?"":null)},inputs:{required:"required"},features:[Me([kee])]}),n})(),GF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[AF]]}),n})(),Fee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[GF]}),n})(),Nee=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:WM,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[GF]}),n})();function jF(n,t,e,i,s,r,o){try{var a=n[r](o),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(i,s)}const ac=1e3,bs=1001,yi=1003,Sn=1006,nl=1008,lc=1009,Xf=1012,Wr=1015,Co=1016,hu=1020,pr=1023,cc=1026,fu=1027,Kf=2300,pu=2301,mu=2400,gu=2401,$r=3e3,nn=3001,ca="srgb",uc="srgb-linear",Qf=35044,Zf=35048;class il{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const s=this._listeners[t];if(void 0!==s){const r=s.indexOf(e);-1!==r&&s.splice(r,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const i=this._listeners[t.type];if(void 0!==i){t.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,t);t.target=null}}}const Ki=[];for(let n=0;n<256;n++)Ki[n]=(n<16?"0":"")+n.toString(16);let SN=1234567;const hc=Math.PI/180,Jf=180/Math.PI;function js(){const n=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Ki[255&n]+Ki[n>>8&255]+Ki[n>>16&255]+Ki[n>>24&255]+"-"+Ki[255&t]+Ki[t>>8&255]+"-"+Ki[t>>16&15|64]+Ki[t>>24&255]+"-"+Ki[63&e|128]+Ki[e>>8&255]+"-"+Ki[e>>16&255]+Ki[e>>24&255]+Ki[255&i]+Ki[i>>8&255]+Ki[i>>16&255]+Ki[i>>24&255]).toLowerCase()}function ai(n,t,e){return Math.max(t,Math.min(e,n))}function lC(n,t){return(n%t+t)%t}function ep(n,t,e){return(1-e)*n+e*t}function cC(n){return 0==(n&n-1)&&0!==n}function DN(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Z_(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}var Jte=Object.freeze({__proto__:null,DEG2RAD:hc,RAD2DEG:Jf,generateUUID:js,clamp:ai,euclideanModulo:lC,mapLinear:function Bte(n,t,e,i,s){return i+(n-t)*(s-i)/(e-t)},inverseLerp:function Vte(n,t,e){return n!==t?(e-n)/(t-n):0},lerp:ep,damp:function Hte(n,t,e,i){return ep(n,t,1-Math.exp(-e*i))},pingpong:function zte(n,t=1){return t-Math.abs(lC(n,2*t)-t)},smoothstep:function Ute(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t))*n*(3-2*n)},smootherstep:function Gte(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t))*n*n*(n*(6*n-15)+10)},randInt:function jte(n,t){return n+Math.floor(Math.random()*(t-n+1))},randFloat:function Wte(n,t){return n+Math.random()*(t-n)},randFloatSpread:function $te(n){return n*(.5-Math.random())},seededRandom:function qte(n){void 0!==n&&(SN=n);let t=SN+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function Yte(n){return n*hc},radToDeg:function Xte(n){return n*Jf},isPowerOfTwo:cC,ceilPowerOfTwo:DN,floorPowerOfTwo:Z_,setQuaternionFromProperEuler:function Kte(n,t,e,i,s){const r=Math.cos,o=Math.sin,a=r(e/2),l=o(e/2),c=r((t+i)/2),d=o((t+i)/2),u=r((t-i)/2),h=o((t-i)/2),f=r((i-t)/2),p=o((i-t)/2);switch(s){case"XYX":n.set(a*d,l*u,l*h,a*c);break;case"YZY":n.set(l*h,a*d,l*u,a*c);break;case"ZXZ":n.set(l*u,l*h,a*d,a*c);break;case"XZX":n.set(a*d,l*p,l*f,a*c);break;case"YXY":n.set(l*f,a*d,l*p,a*c);break;case"ZYZ":n.set(l*p,l*f,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}},normalize:function Zte(n,t){switch(t.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}},denormalize:function Qte(n,t){switch(t.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}});class ne{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6],this.y=s[1]*e+s[4]*i+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),s=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*i-o*s+t.x,this.y=r*s+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}ne.prototype.isVector2=!0;class Gi{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,s,r,o,a,l,c){const d=this.elements;return d[0]=t,d[1]=s,d[2]=a,d[3]=e,d[4]=r,d[5]=l,d[6]=i,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,r=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],d=i[4],u=i[7],h=i[2],f=i[5],p=i[8],m=s[0],g=s[3],_=s[6],y=s[1],b=s[4],x=s[7],w=s[2],C=s[5],S=s[8];return r[0]=o*m+a*y+l*w,r[3]=o*g+a*b+l*C,r[6]=o*_+a*x+l*S,r[1]=c*m+d*y+u*w,r[4]=c*g+d*b+u*C,r[7]=c*_+d*x+u*S,r[2]=h*m+f*y+p*w,r[5]=h*g+f*b+p*C,r[8]=h*_+f*x+p*S,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8];return e*o*d-e*a*c-i*r*d+i*a*l+s*r*c-s*o*l}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],u=d*o-a*c,h=a*l-d*r,f=c*r-o*l,p=e*u+i*h+s*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return t[0]=u*m,t[1]=(s*c-d*i)*m,t[2]=(a*i-s*o)*m,t[3]=h*m,t[4]=(d*e-s*l)*m,t[5]=(s*r-a*e)*m,t[6]=f*m,t[7]=(i*l-c*e)*m,t[8]=(o*e-i*r)*m,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,s,r,o,a){const l=Math.cos(r),c=Math.sin(r);return this.set(i*l,i*c,-i*(l*o+c*a)+o+t,-s*c,s*l,-s*(-c*o+l*a)+a+e,0,0,1),this}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.elements,r=s[0],o=s[3],a=s[6],l=s[1],c=s[4],d=s[7];return s[0]=e*r+i*l,s[3]=e*o+i*c,s[6]=e*a+i*d,s[1]=-i*r+e*l,s[4]=-i*o+e*c,s[7]=-i*a+e*d,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<9;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function EN(n){for(let t=n.length-1;t>=0;--t)if(n[t]>65535)return!0;return!1}function tp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function fc(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function J_(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Gi.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const dC={[ca]:{[uc]:fc},[uc]:{[ca]:J_}},qr={legacyMode:!0,get workingColorSpace(){return uc},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,t,e){if(this.legacyMode||t===e||!t||!e)return n;if(dC[t]&&void 0!==dC[t][e]){const i=dC[t][e];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,t){return this.convert(n,this.workingColorSpace,t)},toWorkingColorSpace:function(n,t){return this.convert(n,t,this.workingColorSpace)}},AN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ii={r:0,g:0,b:0},Yr={h:0,s:0,l:0},ey={h:0,s:0,l:0};function uC(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(t-n)*e:e<.5?t:e<2/3?n+6*(t-n)*(2/3-e):n}function ty(n,t){return t.r=n.r,t.g=n.g,t.b=n.b,t}let yu,we=(()=>{class n{constructor(e,i,s){return void 0===i&&void 0===s?this.set(e):this.setRGB(e,i,s)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,i=ca){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,qr.toWorkingColorSpace(this,i),this}setRGB(e,i,s,r=uc){return this.r=e,this.g=i,this.b=s,qr.toWorkingColorSpace(this,r),this}setHSL(e,i,s,r=uc){if(e=lC(e,1),i=ai(i,0,1),s=ai(s,0,1),0===i)this.r=this.g=this.b=s;else{const o=s<=.5?s*(1+i):s+i-s*i,a=2*s-o;this.r=uC(a,o,e+1/3),this.g=uC(a,o,e),this.b=uC(a,o,e-1/3)}return qr.toWorkingColorSpace(this,r),this}setStyle(e,i=ca){function s(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=r[2];switch(r[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,qr.toWorkingColorSpace(this,i),s(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,qr.toWorkingColorSpace(this,i),s(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(o[1])/360,d=parseInt(o[2],10)/100,u=parseInt(o[3],10)/100;return s(o[4]),this.setHSL(c,d,u,i)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=r[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,qr.toWorkingColorSpace(this,i),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,qr.toWorkingColorSpace(this,i),this}return e&&e.length>0?this.setColorName(e,i):this}setColorName(e,i=ca){const s=AN[e.toLowerCase()];return void 0!==s?this.setHex(s,i):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=fc(e.r),this.g=fc(e.g),this.b=fc(e.b),this}copyLinearToSRGB(e){return this.r=J_(e.r),this.g=J_(e.g),this.b=J_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ca){return qr.fromWorkingColorSpace(ty(this,Ii),e),ai(255*Ii.r,0,255)<<16^ai(255*Ii.g,0,255)<<8^ai(255*Ii.b,0,255)<<0}getHexString(e=ca){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,i=uc){qr.fromWorkingColorSpace(ty(this,Ii),i);const s=Ii.r,r=Ii.g,o=Ii.b,a=Math.max(s,r,o),l=Math.min(s,r,o);let c,d;const u=(l+a)/2;if(l===a)c=0,d=0;else{const h=a-l;switch(d=u<=.5?h/(a+l):h/(2-a-l),a){case s:c=(r-o)/h+(r<o?6:0);break;case r:c=(o-s)/h+2;break;case o:c=(s-r)/h+4}c/=6}return e.h=c,e.s=d,e.l=u,e}getRGB(e,i=uc){return qr.fromWorkingColorSpace(ty(this,Ii),i),e.r=Ii.r,e.g=Ii.g,e.b=Ii.b,e}getStyle(e=ca){return qr.fromWorkingColorSpace(ty(this,Ii),e),e!==ca?`color(${e} ${Ii.r} ${Ii.g} ${Ii.b})`:`rgb(${255*Ii.r|0},${255*Ii.g|0},${255*Ii.b|0})`}offsetHSL(e,i,s){return this.getHSL(Yr),Yr.h+=e,Yr.s+=i,Yr.l+=s,this.setHSL(Yr.h,Yr.s,Yr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,i){return this.r=e.r+i.r,this.g=e.g+i.g,this.b=e.b+i.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,i){return this.r+=(e.r-this.r)*i,this.g+=(e.g-this.g)*i,this.b+=(e.b-this.b)*i,this}lerpColors(e,i,s){return this.r=e.r+(i.r-e.r)*s,this.g=e.g+(i.g-e.g)*s,this.b=e.b+(i.b-e.b)*s,this}lerpHSL(e,i){this.getHSL(Yr),e.getHSL(ey);const s=ep(Yr.h,ey.h,i),r=ep(Yr.s,ey.s,i),o=ep(Yr.l,ey.l,i);return this.setHSL(s,r,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,i=0){return this.r=e[i],this.g=e[i+1],this.b=e[i+2],this}toArray(e=[],i=0){return e[i]=this.r,e[i+1]=this.g,e[i+2]=this.b,e}fromBufferAttribute(e,i){return this.r=e.getX(i),this.g=e.getY(i),this.b=e.getZ(i),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return n.NAMES=AN,n})();we.prototype.isColor=!0,we.prototype.r=1,we.prototype.g=1,we.prototype.b=1;class pc{static getDataURL(t){if(/^data:/i.test(t.src)||"undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===yu&&(yu=tp("canvas")),yu.width=t.width,yu.height=t.height;const i=yu.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=yu}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=tp("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const s=i.getImageData(0,0,t.width,t.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=255*fc(r[o]/255);return i.putImageData(s,0,0),e}if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e[i]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*fc(e[i]/255)):fc(e[i]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class vu{constructor(t=null){this.uuid=js(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(null!==s){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)r.push(hC(s[o].isDataTexture?s[o].image:s[o]))}else r=hC(s);i.url=r}return e||(t.images[this.uuid]=i),i}}function hC(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?pc.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}vu.prototype.isSource=!0;let tne=0,ss=(()=>{class n extends il{constructor(e=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,s=bs,r=bs,o=Sn,a=nl,l=pr,c=lc,d=1,u=$r){super(),Object.defineProperty(this,"id",{value:tne++}),this.uuid=js(),this.name="",this.source=new vu(e),this.mipmaps=[],this.mapping=i,this.wrapS=s,this.wrapT=r,this.magFilter=o,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new ne(0,0),this.repeat=new ne(1,1),this.center=new ne(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Gi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const i=void 0===e||"string"==typeof e;if(!i&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),i||(e.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ac:e.x=e.x-Math.floor(e.x);break;case bs:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ac:e.y=e.y-Math.floor(e.y);break;case bs:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();ss.prototype.isTexture=!0;class hn{constructor(t=0,e=0,i=0,s=1){this.x=t,this.y=e,this.z=i,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*e+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*e+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*e+o[7]*i+o[11]*s+o[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,s,r;const o=.01,a=.1,l=t.elements,c=l[0],d=l[4],u=l[8],h=l[1],f=l[5],p=l[9],m=l[2],g=l[6],_=l[10];if(Math.abs(d-h)<o&&Math.abs(u-m)<o&&Math.abs(p-g)<o){if(Math.abs(d+h)<a&&Math.abs(u+m)<a&&Math.abs(p+g)<a&&Math.abs(c+f+_-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const b=(c+1)/2,x=(f+1)/2,w=(_+1)/2,C=(d+h)/4,S=(u+m)/4,E=(p+g)/4;return b>x&&b>w?b<o?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(b),s=C/i,r=S/i):x>w?x<o?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(x),i=C/s,r=E/s):w<o?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(w),i=S/r,s=E/r),this.set(i,s,r,e),this}let y=Math.sqrt((g-p)*(g-p)+(u-m)*(u-m)+(h-d)*(h-d));return Math.abs(y)<.001&&(y=1),this.x=(g-p)/y,this.y=(u-m)/y,this.z=(h-d)/y,this.w=Math.acos((c+f+_-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}hn.prototype.isVector4=!0;class Ws extends il{constructor(t,e,i={}){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new hn(0,0,t,e),this.scissorTest=!1,this.viewport=new hn(0,0,t,e),this.texture=new ss({width:t,height:e,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:Sn,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(t,e,i=1){(this.width!==t||this.height!==e||this.depth!==i)&&(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},t.texture.image),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Ws.prototype.isWebGLRenderTarget=!0;class ny extends ss{constructor(t=null,e=1,i=1,s=1){super(null),this.image={data:t,width:e,height:i,depth:s},this.magFilter=yi,this.minFilter=yi,this.wrapR=bs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}ny.prototype.isDataArrayTexture=!0,class nne extends Ws{constructor(t,e,i){super(t,e),this.depth=i,this.texture=new ny(null,t,e,i),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGLArrayRenderTarget=!0;class fC extends ss{constructor(t=null,e=1,i=1,s=1){super(null),this.image={data:t,width:e,height:i,depth:s},this.magFilter=yi,this.minFilter=yi,this.wrapR=bs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}fC.prototype.isData3DTexture=!0,class ine extends Ws{constructor(t,e,i){super(t,e),this.depth=i,this.texture=new fC(null,t,e,i),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGL3DRenderTarget=!0,class sne extends Ws{constructor(t,e,i,s={}){super(t,e,s);const r=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=r.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let s=0,r=this.texture.length;s<r;s++)this.texture[s].image.width=t,this.texture[s].image.height=e,this.texture[s].image.depth=i;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,i=t.texture.length;e<i;e++)this.texture[e]=t.texture[e].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class Pi{constructor(t=0,e=0,i=0,s=1){this._x=t,this._y=e,this._z=i,this._w=s}static slerp(t,e,i,s){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(t,e,s)}static slerpFlat(t,e,i,s,r,o,a){let l=i[s+0],c=i[s+1],d=i[s+2],u=i[s+3];const h=r[o+0],f=r[o+1],p=r[o+2],m=r[o+3];if(0===a)return t[e+0]=l,t[e+1]=c,t[e+2]=d,void(t[e+3]=u);if(1===a)return t[e+0]=h,t[e+1]=f,t[e+2]=p,void(t[e+3]=m);if(u!==m||l!==h||c!==f||d!==p){let g=1-a;const _=l*h+c*f+d*p+u*m,y=_>=0?1:-1,b=1-_*_;if(b>Number.EPSILON){const w=Math.sqrt(b),C=Math.atan2(w,_*y);g=Math.sin(g*C)/w,a=Math.sin(a*C)/w}const x=a*y;if(l=l*g+h*x,c=c*g+f*x,d=d*g+p*x,u=u*g+m*x,g===1-a){const w=1/Math.sqrt(l*l+c*c+d*d+u*u);l*=w,c*=w,d*=w,u*=w}}t[e]=l,t[e+1]=c,t[e+2]=d,t[e+3]=u}static multiplyQuaternionsFlat(t,e,i,s,r,o){const a=i[s],l=i[s+1],c=i[s+2],d=i[s+3],u=r[o],h=r[o+1],f=r[o+2],p=r[o+3];return t[e]=a*p+d*u+l*f-c*h,t[e+1]=l*p+d*h+c*u-a*f,t[e+2]=c*p+d*f+a*h-l*u,t[e+3]=d*p-a*u-l*h-c*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,s=t._y,r=t._z,o=t._order,a=Math.cos,l=Math.sin,c=a(i/2),d=a(s/2),u=a(r/2),h=l(i/2),f=l(s/2),p=l(r/2);switch(o){case"XYZ":this._x=h*d*u+c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u-h*f*p;break;case"YXZ":this._x=h*d*u+c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u+h*f*p;break;case"ZXY":this._x=h*d*u-c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u-h*f*p;break;case"ZYX":this._x=h*d*u-c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u+h*f*p;break;case"YZX":this._x=h*d*u+c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u-h*f*p;break;case"XZY":this._x=h*d*u-c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,s=Math.sin(i);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],s=e[4],r=e[8],o=e[1],a=e[5],l=e[9],c=e[2],d=e[6],u=e[10],h=i+a+u;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(d-l)*f,this._y=(r-c)*f,this._z=(o-s)*f}else if(i>a&&i>u){const f=2*Math.sqrt(1+i-a-u);this._w=(d-l)/f,this._x=.25*f,this._y=(s+o)/f,this._z=(r+c)/f}else if(a>u){const f=2*Math.sqrt(1+a-i-u);this._w=(r-c)/f,this._x=(s+o)/f,this._y=.25*f,this._z=(l+d)/f}else{const f=2*Math.sqrt(1+u-i-a);this._w=(o-s)/f,this._x=(r+c)/f,this._y=(l+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(ai(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const s=Math.min(1,e/i);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,s=t._y,r=t._z,o=t._w,a=e._x,l=e._y,c=e._z,d=e._w;return this._x=i*d+o*a+s*c-r*l,this._y=s*d+o*l+r*a-i*c,this._z=r*d+o*c+i*l-s*a,this._w=o*d-i*a-s*l-r*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*t._w+i*t._x+s*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-e;return this._w=f*o+e*this._w,this._x=f*i+e*this._x,this._y=f*s+e*this._y,this._z=f*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),u=Math.sin((1-e)*d)/c,h=Math.sin(e*d)/c;return this._w=o*u+this._w*h,this._x=i*u+this._x*h,this._y=s*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),s=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(s),i*Math.sin(r),i*Math.cos(r),e*Math.sin(s))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Pi.prototype.isQuaternion=!0;class D{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(TN.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(TN.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*s,this.y=r[1]*e+r[4]*i+r[7]*s,this.z=r[2]*e+r[5]*i+r[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,r=t.elements,o=1/(r[3]*e+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*e+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*e+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(t){const e=this.x,i=this.y,s=this.z,r=t.x,o=t.y,a=t.z,l=t.w,c=l*e+o*s-a*i,d=l*i+a*e-r*s,u=l*s+r*i-o*e,h=-r*e-o*i-a*s;return this.x=c*l+h*-r+d*-a-u*-o,this.y=d*l+h*-o+u*-r-c*-a,this.z=u*l+h*-a+c*-o-d*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*s,this.y=r[1]*e+r[5]*i+r[9]*s,this.z=r[2]*e+r[6]*i+r[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,s=t.y,r=t.z,o=e.x,a=e.y,l=e.z;return this.x=s*l-r*a,this.y=r*o-i*l,this.z=i*a-s*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return pC.copy(this).projectOnVector(t),this.sub(pC)}reflect(t){return this.sub(pC.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(ai(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return e*e+i*i+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const s=Math.sin(e)*t;return this.x=s*Math.sin(i),this.y=Math.cos(e)*t,this.z=s*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}D.prototype.isVector3=!0;const pC=new D,TN=new Pi;class $s{constructor(t=new D(1/0,1/0,1/0),e=new D(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,s=1/0,r=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.length;l<c;l+=3){const d=t[l],u=t[l+1],h=t[l+2];d<e&&(e=d),u<i&&(i=u),h<s&&(s=h),d>r&&(r=d),u>o&&(o=u),h>a&&(a=h)}return this.min.set(e,i,s),this.max.set(r,o,a),this}setFromBufferAttribute(t){let e=1/0,i=1/0,s=1/0,r=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.count;l<c;l++){const d=t.getX(l),u=t.getY(l),h=t.getZ(l);d<e&&(e=d),u<i&&(i=u),h<s&&(s=h),d>r&&(r=d),u>o&&(o=u),h>a&&(a=h)}return this.min.set(e,i,s),this.max.set(r,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=mc.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(void 0!==i)if(e&&null!=i.attributes&&void 0!==i.attributes.position){const r=i.attributes.position;for(let o=0,a=r.count;o<a;o++)mc.fromBufferAttribute(r,o).applyMatrix4(t.matrixWorld),this.expandByPoint(mc)}else null===i.boundingBox&&i.computeBoundingBox(),mC.copy(i.boundingBox),mC.applyMatrix4(t.matrixWorld),this.union(mC);const s=t.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,mc),mc.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(np),iy.subVectors(this.max,np),bu.subVectors(t.a,np),xu.subVectors(t.b,np),wu.subVectors(t.c,np),sl.subVectors(xu,bu),rl.subVectors(wu,xu),gc.subVectors(bu,wu);let e=[0,-sl.z,sl.y,0,-rl.z,rl.y,0,-gc.z,gc.y,sl.z,0,-sl.x,rl.z,0,-rl.x,gc.z,0,-gc.x,-sl.y,sl.x,0,-rl.y,rl.x,0,-gc.y,gc.x,0];return!(!gC(e,bu,xu,wu,iy)||(e=[1,0,0,0,1,0,0,0,1],!gC(e,bu,xu,wu,iy)))&&(sy.crossVectors(sl,rl),e=[sy.x,sy.y,sy.z],gC(e,bu,xu,wu,iy))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return mc.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(mc).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(da[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),da[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),da[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),da[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),da[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),da[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),da[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),da[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(da)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}$s.prototype.isBox3=!0;const da=[new D,new D,new D,new D,new D,new D,new D,new D],mc=new D,mC=new $s,bu=new D,xu=new D,wu=new D,sl=new D,rl=new D,gc=new D,np=new D,iy=new D,sy=new D,_c=new D;function gC(n,t,e,i,s){for(let r=0,o=n.length-3;r<=o;r+=3){_c.fromArray(n,r);const a=s.x*Math.abs(_c.x)+s.y*Math.abs(_c.y)+s.z*Math.abs(_c.z),l=t.dot(_c),c=e.dot(_c),d=i.dot(_c);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const rne=new $s,kN=new D,ry=new D,_C=new D;class ol{constructor(t=new D,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):rne.setFromPoints(t).getCenter(i);let s=0;for(let r=0,o=t.length;r<o;r++)s=Math.max(s,i.distanceToSquared(t[r]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){_C.subVectors(t,this.center);const e=_C.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),s=.5*(i-this.radius);this.center.add(_C.multiplyScalar(s/i)),this.radius+=s}return this}union(t){return!0===this.center.equals(t.center)?ry.set(0,0,1).multiplyScalar(t.radius):ry.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(kN.copy(t.center).add(ry)),this.expandByPoint(kN.copy(t.center).sub(ry)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ua=new D,yC=new D,oy=new D,al=new D,vC=new D,ay=new D,bC=new D;class yc{constructor(t=new D,e=new D(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,ua)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=ua.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(ua.copy(this.direction).multiplyScalar(e).add(this.origin),ua.distanceToSquared(t))}distanceSqToSegment(t,e,i,s){yC.copy(t).add(e).multiplyScalar(.5),oy.copy(e).sub(t).normalize(),al.copy(this.origin).sub(yC);const r=.5*t.distanceTo(e),o=-this.direction.dot(oy),a=al.dot(this.direction),l=-al.dot(oy),c=al.lengthSq(),d=Math.abs(1-o*o);let u,h,f,p;if(d>0)if(u=o*l-a,h=o*a-l,p=r*d,u>=0)if(h>=-p)if(h<=p){const m=1/d;u*=m,h*=m,f=u*(u+o*h+2*a)+h*(o*u+h+2*l)+c}else h=r,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;else h=-r,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;else h<=-p?(u=Math.max(0,-(-o*r+a)),h=u>0?-r:Math.min(Math.max(-r,-l),r),f=-u*u+h*(h+2*l)+c):h<=p?(u=0,h=Math.min(Math.max(-r,-l),r),f=h*(h+2*l)+c):(u=Math.max(0,-(o*r+a)),h=u>0?r:Math.min(Math.max(-r,-l),r),f=-u*u+h*(h+2*l)+c);else h=o>0?-r:r,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(u).add(this.origin),s&&s.copy(oy).multiplyScalar(h).add(yC),f}intersectSphere(t,e){ua.subVectors(t.center,this.origin);const i=ua.dot(this.direction),s=ua.dot(ua)-i*i,r=t.radius*t.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,l=i+o;return a<0&&l<0?null:this.at(a<0?l:a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,s,r,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(i=(t.min.x-h.x)*c,s=(t.max.x-h.x)*c):(i=(t.max.x-h.x)*c,s=(t.min.x-h.x)*c),d>=0?(r=(t.min.y-h.y)*d,o=(t.max.y-h.y)*d):(r=(t.max.y-h.y)*d,o=(t.min.y-h.y)*d),i>o||r>s||((r>i||i!=i)&&(i=r),(o<s||s!=s)&&(s=o),u>=0?(a=(t.min.z-h.z)*u,l=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,l=(t.min.z-h.z)*u),i>l||a>s)||((a>i||i!=i)&&(i=a),(l<s||s!=s)&&(s=l),s<0)?null:this.at(i>=0?i:s,e)}intersectsBox(t){return null!==this.intersectBox(t,ua)}intersectTriangle(t,e,i,s,r){vC.subVectors(e,t),ay.subVectors(i,t),bC.crossVectors(vC,ay);let a,o=this.direction.dot(bC);if(o>0){if(s)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}al.subVectors(this.origin,t);const l=a*this.direction.dot(ay.crossVectors(al,ay));if(l<0)return null;const c=a*this.direction.dot(vC.cross(al));if(c<0||l+c>o)return null;const d=-a*al.dot(bC);return d<0?null:this.at(d/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class $e{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,s,r,o,a,l,c,d,u,h,f,p,m,g){const _=this.elements;return _[0]=t,_[4]=e,_[8]=i,_[12]=s,_[1]=r,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=d,_[10]=u,_[14]=h,_[3]=f,_[7]=p,_[11]=m,_[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new $e).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,s=1/Mu.setFromMatrixColumn(t,0).length(),r=1/Mu.setFromMatrixColumn(t,1).length(),o=1/Mu.setFromMatrixColumn(t,2).length();return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,i=t.x,s=t.y,r=t.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(s),c=Math.sin(s),d=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){const h=o*d,f=o*u,p=a*d,m=a*u;e[0]=l*d,e[4]=-l*u,e[8]=c,e[1]=f+p*c,e[5]=h-m*c,e[9]=-a*l,e[2]=m-h*c,e[6]=p+f*c,e[10]=o*l}else if("YXZ"===t.order){const h=l*d,f=l*u,p=c*d,m=c*u;e[0]=h+m*a,e[4]=p*a-f,e[8]=o*c,e[1]=o*u,e[5]=o*d,e[9]=-a,e[2]=f*a-p,e[6]=m+h*a,e[10]=o*l}else if("ZXY"===t.order){const h=l*d,f=l*u,p=c*d,m=c*u;e[0]=h-m*a,e[4]=-o*u,e[8]=p+f*a,e[1]=f+p*a,e[5]=o*d,e[9]=m-h*a,e[2]=-o*c,e[6]=a,e[10]=o*l}else if("ZYX"===t.order){const h=o*d,f=o*u,p=a*d,m=a*u;e[0]=l*d,e[4]=p*c-f,e[8]=h*c+m,e[1]=l*u,e[5]=m*c+h,e[9]=f*c-p,e[2]=-c,e[6]=a*l,e[10]=o*l}else if("YZX"===t.order){const h=o*l,f=o*c,p=a*l,m=a*c;e[0]=l*d,e[4]=m-h*u,e[8]=p*u+f,e[1]=u,e[5]=o*d,e[9]=-a*d,e[2]=-c*d,e[6]=f*u+p,e[10]=h-m*u}else if("XZY"===t.order){const h=o*l,f=o*c,p=a*l,m=a*c;e[0]=l*d,e[4]=-u,e[8]=c*d,e[1]=h*u+m,e[5]=o*d,e[9]=f*u-p,e[2]=p*u-f,e[6]=a*d,e[10]=m*u+h}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(one,t,ane)}lookAt(t,e,i){const s=this.elements;return qs.subVectors(t,e),0===qs.lengthSq()&&(qs.z=1),qs.normalize(),ll.crossVectors(i,qs),0===ll.lengthSq()&&(1===Math.abs(i.z)?qs.x+=1e-4:qs.z+=1e-4,qs.normalize(),ll.crossVectors(i,qs)),ll.normalize(),ly.crossVectors(qs,ll),s[0]=ll.x,s[4]=ly.x,s[8]=qs.x,s[1]=ll.y,s[5]=ly.y,s[9]=qs.y,s[2]=ll.z,s[6]=ly.z,s[10]=qs.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,r=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],d=i[1],u=i[5],h=i[9],f=i[13],p=i[2],m=i[6],g=i[10],_=i[14],y=i[3],b=i[7],x=i[11],w=i[15],C=s[0],S=s[4],E=s[8],I=s[12],F=s[1],M=s[5],T=s[9],W=s[13],z=s[2],U=s[6],O=s[10],H=s[14],L=s[3],$=s[7],Z=s[11],de=s[15];return r[0]=o*C+a*F+l*z+c*L,r[4]=o*S+a*M+l*U+c*$,r[8]=o*E+a*T+l*O+c*Z,r[12]=o*I+a*W+l*H+c*de,r[1]=d*C+u*F+h*z+f*L,r[5]=d*S+u*M+h*U+f*$,r[9]=d*E+u*T+h*O+f*Z,r[13]=d*I+u*W+h*H+f*de,r[2]=p*C+m*F+g*z+_*L,r[6]=p*S+m*M+g*U+_*$,r[10]=p*E+m*T+g*O+_*Z,r[14]=p*I+m*W+g*H+_*de,r[3]=y*C+b*F+x*z+w*L,r[7]=y*S+b*M+x*U+w*$,r[11]=y*E+b*T+x*O+w*Z,r[15]=y*I+b*W+x*H+w*de,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],s=t[8],r=t[12],o=t[1],a=t[5],l=t[9],c=t[13],d=t[2],u=t[6],h=t[10],f=t[14];return t[3]*(+r*l*u-s*c*u-r*a*h+i*c*h+s*a*f-i*l*f)+t[7]*(+e*l*f-e*c*h+r*o*h-s*o*f+s*c*d-r*l*d)+t[11]*(+e*c*u-e*a*f-r*o*u+i*o*f+r*a*d-i*c*d)+t[15]*(-s*a*d-e*l*u+e*a*h+s*o*u-i*o*h+i*l*d)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],u=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],_=t[15],y=u*g*c-m*h*c+m*l*f-a*g*f-u*l*_+a*h*_,b=p*h*c-d*g*c-p*l*f+o*g*f+d*l*_-o*h*_,x=d*m*c-p*u*c+p*a*f-o*m*f-d*a*_+o*u*_,w=p*u*l-d*m*l-p*a*h+o*m*h+d*a*g-o*u*g,C=e*y+i*b+s*x+r*w;if(0===C)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/C;return t[0]=y*S,t[1]=(m*h*r-u*g*r-m*s*f+i*g*f+u*s*_-i*h*_)*S,t[2]=(a*g*r-m*l*r+m*s*c-i*g*c-a*s*_+i*l*_)*S,t[3]=(u*l*r-a*h*r-u*s*c+i*h*c+a*s*f-i*l*f)*S,t[4]=b*S,t[5]=(d*g*r-p*h*r+p*s*f-e*g*f-d*s*_+e*h*_)*S,t[6]=(p*l*r-o*g*r-p*s*c+e*g*c+o*s*_-e*l*_)*S,t[7]=(o*h*r-d*l*r+d*s*c-e*h*c-o*s*f+e*l*f)*S,t[8]=x*S,t[9]=(p*u*r-d*m*r-p*i*f+e*m*f+d*i*_-e*u*_)*S,t[10]=(o*m*r-p*a*r+p*i*c-e*m*c-o*i*_+e*a*_)*S,t[11]=(d*a*r-o*u*r-d*i*c+e*u*c+o*i*f-e*a*f)*S,t[12]=w*S,t[13]=(d*m*s-p*u*s+p*i*h-e*m*h-d*i*g+e*u*g)*S,t[14]=(p*a*s-o*m*s-p*i*l+e*m*l+o*i*g-e*a*g)*S,t[15]=(o*u*s-d*a*s+d*i*l-e*u*l-o*i*h+e*a*h)*S,this}scale(t){const e=this.elements,i=t.x,s=t.y,r=t.z;return e[0]*=i,e[4]*=s,e[8]*=r,e[1]*=i,e[5]*=s,e[9]*=r,e[2]*=i,e[6]*=s,e[10]*=r,e[3]*=i,e[7]*=s,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),s=Math.sin(e),r=1-i,o=t.x,a=t.y,l=t.z,c=r*o,d=r*a;return this.set(c*o+i,c*a-s*l,c*l+s*a,0,c*a+s*l,d*a+i,d*l-s*o,0,c*l-s*a,d*l+s*o,r*l*l+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,s,r,o){return this.set(1,i,r,0,t,1,o,0,e,s,1,0,0,0,0,1),this}compose(t,e,i){const s=this.elements,r=e._x,o=e._y,a=e._z,l=e._w,c=r+r,d=o+o,u=a+a,h=r*c,f=r*d,p=r*u,m=o*d,g=o*u,_=a*u,y=l*c,b=l*d,x=l*u,w=i.x,C=i.y,S=i.z;return s[0]=(1-(m+_))*w,s[1]=(f+x)*w,s[2]=(p-b)*w,s[3]=0,s[4]=(f-x)*C,s[5]=(1-(h+_))*C,s[6]=(g+y)*C,s[7]=0,s[8]=(p+b)*S,s[9]=(g-y)*S,s[10]=(1-(h+m))*S,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,i){const s=this.elements;let r=Mu.set(s[0],s[1],s[2]).length();const o=Mu.set(s[4],s[5],s[6]).length(),a=Mu.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),t.x=s[12],t.y=s[13],t.z=s[14],Xr.copy(this);const c=1/r,d=1/o,u=1/a;return Xr.elements[0]*=c,Xr.elements[1]*=c,Xr.elements[2]*=c,Xr.elements[4]*=d,Xr.elements[5]*=d,Xr.elements[6]*=d,Xr.elements[8]*=u,Xr.elements[9]*=u,Xr.elements[10]*=u,e.setFromRotationMatrix(Xr),i.x=r,i.y=o,i.z=a,this}makePerspective(t,e,i,s,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*r/(i-s),d=(e+t)/(e-t),u=(i+s)/(i-s),h=-(o+r)/(o-r),f=-2*o*r/(o-r);return a[0]=2*r/(e-t),a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,i,s,r,o){const a=this.elements,l=1/(e-t),c=1/(i-s),d=1/(o-r),u=(e+t)*l,h=(i+s)*c,f=(o+r)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<16;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}$e.prototype.isMatrix4=!0;const Mu=new D,Xr=new $e,one=new D(0,0,0),ane=new D(1,1,1),ll=new D,ly=new D,qs=new D,RN=new $e,IN=new Pi;class vc{constructor(t=0,e=0,i=0,s=vc.DefaultOrder){this._x=t,this._y=e,this._z=i,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,s=this._order){return this._x=t,this._y=e,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const s=t.elements,r=s[0],o=s[4],a=s[8],l=s[1],c=s[5],d=s[9],u=s[2],h=s[6],f=s[10];switch(e){case"XYZ":this._y=Math.asin(ai(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,f),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-ai(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(ai(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-ai(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(ai(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-ai(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-d,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return RN.makeRotationFromQuaternion(t),this.setFromRotationMatrix(RN,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return IN.setFromEuler(this),this.setFromQuaternion(IN,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}vc.prototype.isEuler=!0,vc.DefaultOrder="XYZ",vc.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class xC{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let lne=0;const PN=new D,Cu=new Pi,ha=new $e,cy=new D,ip=new D,cne=new D,dne=new Pi,ON=new D(1,0,0),LN=new D(0,1,0),FN=new D(0,0,1),une={type:"added"},NN={type:"removed"};class on extends il{constructor(){super(),Object.defineProperty(this,"id",{value:lne++}),this.uuid=js(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=on.DefaultUp.clone();const t=new D,e=new vc,i=new Pi,s=new D(1,1,1);e._onChange(function r(){i.setFromEuler(e,!1)}),i._onChange(function o(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new $e},normalMatrix:{value:new Gi}}),this.matrix=new $e,this.matrixWorld=new $e,this.matrixAutoUpdate=on.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new xC,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Cu.setFromAxisAngle(t,e),this.quaternion.multiply(Cu),this}rotateOnWorldAxis(t,e){return Cu.setFromAxisAngle(t,e),this.quaternion.premultiply(Cu),this}rotateX(t){return this.rotateOnAxis(ON,t)}rotateY(t){return this.rotateOnAxis(LN,t)}rotateZ(t){return this.rotateOnAxis(FN,t)}translateOnAxis(t,e){return PN.copy(t).applyQuaternion(this.quaternion),this.position.add(PN.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(ON,t)}translateY(t){return this.translateOnAxis(LN,t)}translateZ(t){return this.translateOnAxis(FN,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(ha.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?cy.copy(t):cy.set(t,e,i);const s=this.parent;this.updateWorldMatrix(!0,!1),ip.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ha.lookAt(ip,cy,this.up):ha.lookAt(cy,ip,this.up),this.quaternion.setFromRotationMatrix(ha),s&&(ha.extractRotation(s.matrixWorld),Cu.setFromRotationMatrix(ha),this.quaternion.premultiply(Cu.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(une)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(NN)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(NN)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),ha.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),ha.multiply(t.parent.matrixWorld)),t.applyMatrix4(ha),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(t,e);if(void 0!==o)return o}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ip,t,cne),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ip,dne,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function r(a,l){return void 0===a[l.uuid]&&(a[l.uuid]=l.toJSON(t)),l.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(t.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const l=a.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++)r(t.shapes,l[c]);else r(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(r(t.materials,this.material[l]));s.material=a}else s.material=r(t.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++)s.animations.push(r(t.animations,this.animations[a]))}if(e){const a=o(t.geometries),l=o(t.materials),c=o(t.textures),d=o(t.images),u=o(t.shapes),h=o(t.skeletons),f=o(t.animations),p=o(t.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),d.length>0&&(i.images=d),u.length>0&&(i.shapes=u),h.length>0&&(i.skeletons=h),f.length>0&&(i.animations=f),p.length>0&&(i.nodes=p)}return i.object=s,i;function o(a){const l=[];for(const c in a){const d=a[c];delete d.metadata,l.push(d)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let i=0;i<t.children.length;i++)this.add(t.children[i].clone());return this}}on.DefaultUp=new D(0,1,0),on.DefaultMatrixAutoUpdate=!0,on.prototype.isObject3D=!0;const Kr=new D,fa=new D,wC=new D,pa=new D,Su=new D,Du=new D,BN=new D,MC=new D,CC=new D,SC=new D;class vi{constructor(t=new D,e=new D,i=new D){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,s){s.subVectors(i,e),Kr.subVectors(t,e),s.cross(Kr);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(t,e,i,s,r){Kr.subVectors(s,e),fa.subVectors(i,e),wC.subVectors(t,e);const o=Kr.dot(Kr),a=Kr.dot(fa),l=Kr.dot(wC),c=fa.dot(fa),d=fa.dot(wC),u=o*c-a*a;if(0===u)return r.set(-2,-1,-1);const h=1/u,f=(c*l-a*d)*h,p=(o*d-a*l)*h;return r.set(1-f-p,p,f)}static containsPoint(t,e,i,s){return this.getBarycoord(t,e,i,s,pa),pa.x>=0&&pa.y>=0&&pa.x+pa.y<=1}static getUV(t,e,i,s,r,o,a,l){return this.getBarycoord(t,e,i,s,pa),l.set(0,0),l.addScaledVector(r,pa.x),l.addScaledVector(o,pa.y),l.addScaledVector(a,pa.z),l}static isFrontFacing(t,e,i,s){return Kr.subVectors(i,e),fa.subVectors(t,e),Kr.cross(fa).dot(s)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,s){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,e,i,s){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,s),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Kr.subVectors(this.c,this.b),fa.subVectors(this.a,this.b),.5*Kr.cross(fa).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return vi.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return vi.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,s,r){return vi.getUV(t,this.a,this.b,this.c,e,i,s,r)}containsPoint(t){return vi.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return vi.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,s=this.b,r=this.c;let o,a;Su.subVectors(s,i),Du.subVectors(r,i),MC.subVectors(t,i);const l=Su.dot(MC),c=Du.dot(MC);if(l<=0&&c<=0)return e.copy(i);CC.subVectors(t,s);const d=Su.dot(CC),u=Du.dot(CC);if(d>=0&&u<=d)return e.copy(s);const h=l*u-d*c;if(h<=0&&l>=0&&d<=0)return o=l/(l-d),e.copy(i).addScaledVector(Su,o);SC.subVectors(t,r);const f=Su.dot(SC),p=Du.dot(SC);if(p>=0&&f<=p)return e.copy(r);const m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),e.copy(i).addScaledVector(Du,a);const g=d*p-f*u;if(g<=0&&u-d>=0&&f-p>=0)return BN.subVectors(r,s),a=(u-d)/(u-d+(f-p)),e.copy(s).addScaledVector(BN,a);const _=1/(g+m+h);return o=m*_,a=h*_,e.copy(i).addScaledVector(Su,o).addScaledVector(Du,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let hne=0;class Gn extends il{constructor(){super(),Object.defineProperty(this,"id",{value:hne++}),this.uuid=js(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const i=t[e];if(void 0===i){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;continue}const s=this[e];void 0!==s?s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[e]=i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function s(r){const o=[];for(const a in r){const l=r[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e){const r=s(t.textures),o=s(t.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(null!==e){const s=e.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}Gn.prototype.isMaterial=!0,Gn.fromType=function(){return null};class Ys extends Gn{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new we(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}Ys.prototype.isMeshBasicMaterial=!0;const bi=new D,dy=new ne;class _n{constructor(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=Qf,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[t+s]=e.array[i+s];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let i=0;for(let s=0,r=t.length;s<r;s++){let o=t[s];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),o=new we),e[i++]=o.r,e[i++]=o.g,e[i++]=o.b}return this}copyVector2sArray(t){const e=this.array;let i=0;for(let s=0,r=t.length;s<r;s++){let o=t[s];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),o=new ne),e[i++]=o.x,e[i++]=o.y}return this}copyVector3sArray(t){const e=this.array;let i=0;for(let s=0,r=t.length;s<r;s++){let o=t[s];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),o=new D),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this}copyVector4sArray(t){const e=this.array;let i=0;for(let s=0,r=t.length;s<r;s++){let o=t[s];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),o=new hn),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)dy.fromBufferAttribute(this,e),dy.applyMatrix3(t),this.setXY(e,dy.x,dy.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)bi.fromBufferAttribute(this,e),bi.applyMatrix3(t),this.setXYZ(e,bi.x,bi.y,bi.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)bi.fromBufferAttribute(this,e),bi.applyMatrix4(t),this.setXYZ(e,bi.x,bi.y,bi.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)bi.fromBufferAttribute(this,e),bi.applyNormalMatrix(t),this.setXYZ(e,bi.x,bi.y,bi.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)bi.fromBufferAttribute(this,e),bi.transformDirection(t),this.setXYZ(e,bi.x,bi.y,bi.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=i,this}setXYZ(t,e,i,s){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=i,this.array[t+2]=s,this}setXYZW(t,e,i,s,r){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=i,this.array[t+2]=s,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Qf&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}}_n.prototype.isBufferAttribute=!0;class VN extends _n{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class HN extends _n{constructor(t,e,i){super(new Uint32Array(t),e,i)}}(class fne extends _n{constructor(t,e,i){super(new Uint16Array(t),e,i)}}).prototype.isFloat16BufferAttribute=!0;class qe extends _n{constructor(t,e,i){super(new Float32Array(t),e,i)}}let pne=0;const mr=new $e,DC=new on,Eu=new D,Xs=new $s,sp=new $s,ji=new D;class mt extends il{constructor(){super(),Object.defineProperty(this,"id",{value:pne++}),this.uuid=js(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(EN(t)?HN:VN)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const r=(new Gi).getNormalMatrix(t);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return void 0!==s&&(s.transformDirection(t),s.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return mr.makeRotationFromQuaternion(t),this.applyMatrix4(mr),this}rotateX(t){return mr.makeRotationX(t),this.applyMatrix4(mr),this}rotateY(t){return mr.makeRotationY(t),this.applyMatrix4(mr),this}rotateZ(t){return mr.makeRotationZ(t),this.applyMatrix4(mr),this}translate(t,e,i){return mr.makeTranslation(t,e,i),this.applyMatrix4(mr),this}scale(t,e,i){return mr.makeScale(t,e,i),this.applyMatrix4(mr),this}lookAt(t){return DC.lookAt(t),DC.updateMatrix(),this.applyMatrix4(DC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Eu).negate(),this.translate(Eu.x,Eu.y,Eu.z),this}setFromPoints(t){const e=[];for(let i=0,s=t.length;i<s;i++){const r=t[i];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new qe(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new $s);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new D(-1/0,-1/0,-1/0),new D(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,s=e.length;i<s;i++)Xs.setFromBufferAttribute(e[i]),this.morphTargetsRelative?(ji.addVectors(this.boundingBox.min,Xs.min),this.boundingBox.expandByPoint(ji),ji.addVectors(this.boundingBox.max,Xs.max),this.boundingBox.expandByPoint(ji)):(this.boundingBox.expandByPoint(Xs.min),this.boundingBox.expandByPoint(Xs.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ol);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new D,1/0);if(t){const i=this.boundingSphere.center;if(Xs.setFromBufferAttribute(t),e)for(let r=0,o=e.length;r<o;r++)sp.setFromBufferAttribute(e[r]),this.morphTargetsRelative?(ji.addVectors(Xs.min,sp.min),Xs.expandByPoint(ji),ji.addVectors(Xs.max,sp.max),Xs.expandByPoint(ji)):(Xs.expandByPoint(sp.min),Xs.expandByPoint(sp.max));Xs.getCenter(i);let s=0;for(let r=0,o=t.count;r<o;r++)ji.fromBufferAttribute(t,r),s=Math.max(s,i.distanceToSquared(ji));if(e)for(let r=0,o=e.length;r<o;r++){const a=e[r],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)ji.fromBufferAttribute(a,c),l&&(Eu.fromBufferAttribute(t,c),ji.add(Eu)),s=Math.max(s,i.distanceToSquared(ji))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.array,s=e.position.array,r=e.normal.array,o=e.uv.array,a=s.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new _n(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let F=0;F<a;F++)c[F]=new D,d[F]=new D;const u=new D,h=new D,f=new D,p=new ne,m=new ne,g=new ne,_=new D,y=new D;function b(F,M,T){u.fromArray(s,3*F),h.fromArray(s,3*M),f.fromArray(s,3*T),p.fromArray(o,2*F),m.fromArray(o,2*M),g.fromArray(o,2*T),h.sub(u),f.sub(u),m.sub(p),g.sub(p);const W=1/(m.x*g.y-g.x*m.y);!isFinite(W)||(_.copy(h).multiplyScalar(g.y).addScaledVector(f,-m.y).multiplyScalar(W),y.copy(f).multiplyScalar(m.x).addScaledVector(h,-g.x).multiplyScalar(W),c[F].add(_),c[M].add(_),c[T].add(_),d[F].add(y),d[M].add(y),d[T].add(y))}let x=this.groups;0===x.length&&(x=[{start:0,count:i.length}]);for(let F=0,M=x.length;F<M;++F){const T=x[F],W=T.start;for(let U=W,O=W+T.count;U<O;U+=3)b(i[U+0],i[U+1],i[U+2])}const w=new D,C=new D,S=new D,E=new D;function I(F){S.fromArray(r,3*F),E.copy(S);const M=c[F];w.copy(M),w.sub(S.multiplyScalar(S.dot(M))).normalize(),C.crossVectors(E,M);const W=C.dot(d[F])<0?-1:1;l[4*F]=w.x,l[4*F+1]=w.y,l[4*F+2]=w.z,l[4*F+3]=W}for(let F=0,M=x.length;F<M;++F){const T=x[F],W=T.start;for(let U=W,O=W+T.count;U<O;U+=3)I(i[U+0]),I(i[U+1]),I(i[U+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new _n(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const s=new D,r=new D,o=new D,a=new D,l=new D,c=new D,d=new D,u=new D;if(t)for(let h=0,f=t.count;h<f;h+=3){const p=t.getX(h+0),m=t.getX(h+1),g=t.getX(h+2);s.fromBufferAttribute(e,p),r.fromBufferAttribute(e,m),o.fromBufferAttribute(e,g),d.subVectors(o,r),u.subVectors(s,r),d.cross(u),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,g),a.add(d),l.add(d),c.add(d),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=e.count;h<f;h+=3)s.fromBufferAttribute(e,h+0),r.fromBufferAttribute(e,h+1),o.fromBufferAttribute(e,h+2),d.subVectors(o,r),u.subVectors(s,r),d.cross(u),i.setXYZ(h+0,d.x,d.y,d.z),i.setXYZ(h+1,d.x,d.y,d.z),i.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const s in i){if(void 0===t.attributes[s])continue;const o=i[s].array,a=t.attributes[s],l=a.array,c=a.itemSize*e,d=Math.min(l.length,o.length-c);for(let u=0,h=c;u<d;u++,h++)o[h]=l[u]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)ji.fromBufferAttribute(t,e),ji.normalize(),t.setXYZ(e,ji.x,ji.y,ji.z)}toNonIndexed(){function t(a,l){const c=a.array,d=a.itemSize,u=a.normalized,h=new c.constructor(l.length*d);let f=0,p=0;for(let m=0,g=l.length;m<g;m++){f=a.isInterleavedBufferAttribute?l[m]*a.data.stride+a.offset:l[m]*d;for(let _=0;_<d;_++)h[p++]=c[f++]}return new _n(h,d,u)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new mt,i=this.index.array,s=this.attributes;for(const a in s){const c=t(s[a],i);e.setAttribute(a,c)}const r=this.morphAttributes;for(const a in r){const l=[],c=r[a];for(let d=0,u=c.length;d<u;d++){const f=t(c[d],i);l.push(f)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];e.addGroup(c.start,c.count,c.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(t[c]=l[c]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const l in i)t.data.attributes[l]=i[l].toJSON(t.data);const s={};let r=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let u=0,h=c.length;u<h;u++)d.push(c[u].toJSON(t.data));d.length>0&&(s[l]=d,r=!0)}r&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(e));const s=t.attributes;for(const c in s)this.setAttribute(c,s[c].clone(e));const r=t.morphAttributes;for(const c in r){const d=[],u=r[c];for(let h=0,f=u.length;h<f;h++)d.push(u[h].clone(e));this.morphAttributes[c]=d}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let c=0,d=o.length;c<d;c++){const u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=t.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}mt.prototype.isBufferGeometry=!0;const zN=new $e,Au=new yc,EC=new ol,cl=new D,dl=new D,ul=new D,AC=new D,TC=new D,kC=new D,uy=new D,hy=new D,fy=new D,py=new ne,my=new ne,gy=new ne,RC=new D,_y=new D;class Oi extends on{constructor(t=new mt,e=new Ys){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const s=e[i[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const i=this.geometry,s=this.material,r=this.matrixWorld;if(void 0===s||(null===i.boundingSphere&&i.computeBoundingSphere(),EC.copy(i.boundingSphere),EC.applyMatrix4(r),!1===t.ray.intersectsSphere(EC))||(zN.copy(r).invert(),Au.copy(t.ray).applyMatrix4(zN),null!==i.boundingBox&&!1===Au.intersectsBox(i.boundingBox)))return;let o;if(i.isBufferGeometry){const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,d=i.morphTargetsRelative,u=i.attributes.uv,h=i.attributes.uv2,f=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(s))for(let m=0,g=f.length;m<g;m++){const _=f[m],y=s[_.materialIndex];for(let w=Math.max(_.start,p.start),C=Math.min(a.count,Math.min(_.start+_.count,p.start+p.count));w<C;w+=3){const S=a.getX(w),E=a.getX(w+1),I=a.getX(w+2);o=yy(this,y,t,Au,l,c,d,u,h,S,E,I),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=_.materialIndex,e.push(o))}}else for(let _=Math.max(0,p.start),y=Math.min(a.count,p.start+p.count);_<y;_+=3){const b=a.getX(_),x=a.getX(_+1),w=a.getX(_+2);o=yy(this,s,t,Au,l,c,d,u,h,b,x,w),o&&(o.faceIndex=Math.floor(_/3),e.push(o))}else if(void 0!==l)if(Array.isArray(s))for(let m=0,g=f.length;m<g;m++){const _=f[m],y=s[_.materialIndex];for(let w=Math.max(_.start,p.start),C=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));w<C;w+=3)o=yy(this,y,t,Au,l,c,d,u,h,w,w+1,w+2),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=_.materialIndex,e.push(o))}else for(let _=Math.max(0,p.start),y=Math.min(l.count,p.start+p.count);_<y;_+=3)o=yy(this,s,t,Au,l,c,d,u,h,_,_+1,_+2),o&&(o.faceIndex=Math.floor(_/3),e.push(o))}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function yy(n,t,e,i,s,r,o,a,l,c,d,u){cl.fromBufferAttribute(s,c),dl.fromBufferAttribute(s,d),ul.fromBufferAttribute(s,u);const h=n.morphTargetInfluences;if(r&&h){uy.set(0,0,0),hy.set(0,0,0),fy.set(0,0,0);for(let p=0,m=r.length;p<m;p++){const g=h[p],_=r[p];0!==g&&(AC.fromBufferAttribute(_,c),TC.fromBufferAttribute(_,d),kC.fromBufferAttribute(_,u),o?(uy.addScaledVector(AC,g),hy.addScaledVector(TC,g),fy.addScaledVector(kC,g)):(uy.addScaledVector(AC.sub(cl),g),hy.addScaledVector(TC.sub(dl),g),fy.addScaledVector(kC.sub(ul),g)))}cl.add(uy),dl.add(hy),ul.add(fy)}n.isSkinnedMesh&&(n.boneTransform(c,cl),n.boneTransform(d,dl),n.boneTransform(u,ul));const f=function mne(n,t,e,i,s,r,o,a){let l;if(l=1===t.side?i.intersectTriangle(o,r,s,!0,a):i.intersectTriangle(s,r,o,2!==t.side,a),null===l)return null;_y.copy(a),_y.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(_y);return c<e.near||c>e.far?null:{distance:c,point:_y.clone(),object:n}}(n,t,e,i,cl,dl,ul,RC);if(f){a&&(py.fromBufferAttribute(a,c),my.fromBufferAttribute(a,d),gy.fromBufferAttribute(a,u),f.uv=vi.getUV(RC,cl,dl,ul,py,my,gy,new ne)),l&&(py.fromBufferAttribute(l,c),my.fromBufferAttribute(l,d),gy.fromBufferAttribute(l,u),f.uv2=vi.getUV(RC,cl,dl,ul,py,my,gy,new ne));const p={a:c,b:d,c:u,normal:new D,materialIndex:0};vi.getNormal(cl,dl,ul,p.normal),f.face=p}return f}Oi.prototype.isMesh=!0;class bc extends mt{constructor(t=1,e=1,i=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const l=[],c=[],d=[],u=[];let h=0,f=0;function p(m,g,_,y,b,x,w,C,S,E,I){const F=x/S,M=w/E,T=x/2,W=w/2,z=C/2,U=S+1,O=E+1;let H=0,L=0;const $=new D;for(let Z=0;Z<O;Z++){const de=Z*M-W;for(let ie=0;ie<U;ie++)$[m]=(ie*F-T)*y,$[g]=de*b,$[_]=z,c.push($.x,$.y,$.z),$[m]=0,$[g]=0,$[_]=C>0?1:-1,d.push($.x,$.y,$.z),u.push(ie/S),u.push(1-Z/E),H+=1}for(let Z=0;Z<E;Z++)for(let de=0;de<S;de++){const Be=h+de+U*(Z+1),Ve=h+(de+1)+U*(Z+1),nt=h+(de+1)+U*Z;l.push(h+de+U*Z,Be,nt),l.push(Be,Ve,nt),L+=6}a.addGroup(f,L,I),f+=L,h+=H}p("z","y","x",-1,-1,i,e,t,o,r,0),p("z","y","x",1,-1,i,e,-t,o,r,1),p("x","z","y",1,1,t,i,e,s,o,2),p("x","z","y",1,-1,t,i,-e,s,o,3),p("x","y","z",1,-1,t,e,i,s,r,4),p("x","y","z",-1,-1,t,e,-i,s,r,5),this.setIndex(l),this.setAttribute("position",new qe(c,3)),this.setAttribute("normal",new qe(d,3)),this.setAttribute("uv",new qe(u,2))}static fromJSON(t){return new bc(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Tu(n){const t={};for(const e in n){t[e]={};for(const i in n[e]){const s=n[e][i];t[e][i]=s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.clone():Array.isArray(s)?s.slice():s}}return t}function rs(n){const t={};for(let e=0;e<n.length;e++){const i=Tu(n[e]);for(const s in i)t[s]=i[s]}return t}const gne={clone:Tu,merge:rs};class Qr extends Gn{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Tu(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;e.uniforms[s]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const i={};for(const s in this.extensions)!0===this.extensions[s]&&(i[s]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}Qr.prototype.isShaderMaterial=!0;class vy extends on{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new $e,this.projectionMatrix=new $e,this.projectionMatrixInverse=new $e}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}vy.prototype.isCamera=!0;class Li extends vy{constructor(t=50,e=1,i=.1,s=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Jf*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*hc*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Jf*Math.atan(Math.tan(.5*hc*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,s,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*hc*this.fov)/this.zoom,i=2*e,s=this.aspect*i,r=-.5*s;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;r+=o.offsetX*s/l,e-=o.offsetY*i/c,s*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}Li.prototype.isPerspectiveCamera=!0;class IC extends on{constructor(t,e,i){if(super(),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const s=new Li(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new D(1,0,0)),this.add(s);const r=new Li(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new D(-1,0,0)),this.add(r);const o=new Li(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new D(0,1,0)),this.add(o);const a=new Li(90,1,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new D(0,-1,0)),this.add(a);const l=new Li(90,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new D(0,0,1)),this.add(l);const c=new Li(90,1,t,e);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new D(0,0,-1)),this.add(c)}update(t,e){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[s,r,o,a,l,c]=this.children,d=t.getRenderTarget(),u=t.outputEncoding,h=t.toneMapping,f=t.xr.enabled;t.outputEncoding=$r,t.toneMapping=0,t.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,s),t.setRenderTarget(i,1),t.render(e,r),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,a),t.setRenderTarget(i,4),t.render(e,l),i.texture.generateMipmaps=p,t.setRenderTarget(i,5),t.render(e,c),t.setRenderTarget(d),t.outputEncoding=u,t.toneMapping=h,t.xr.enabled=f,i.texture.needsPMREMUpdate=!0}}class rp extends ss{constructor(t,e,i,s,r,o,a,l,c,d){super(t=void 0!==t?t:[],e=void 0!==e?e:301,i,s,r,o,a,l,c,d),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}rp.prototype.isCubeTexture=!0;class UN extends Ws{constructor(t,e={}){super(t,t,e);const i={width:t,height:t,depth:1};this.texture=new rp([i,i,i,i,i,i],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Sn}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new bc(5,5,5),r=new Qr({name:"CubemapFromEquirect",uniforms:Tu(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=e;const o=new Oi(s,r),a=e.minFilter;return e.minFilter===nl&&(e.minFilter=Sn),new IC(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,i,s){const r=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,i,s);t.setRenderTarget(r)}}UN.prototype.isWebGLCubeRenderTarget=!0;const PC=new D,vne=new D,bne=new Gi;class ma{constructor(t=new D(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,s){return this.normal.set(t,e,i),this.constant=s,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const s=PC.subVectors(i,e).cross(vne.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const i=t.delta(PC),s=this.normal.dot(i);if(0===s)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:e.copy(i).multiplyScalar(r).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||bne.getNormalMatrix(t),s=this.coplanarPoint(PC).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}ma.prototype.isPlane=!0;const Iu=new ol,by=new D;class xy{constructor(t=new ma,e=new ma,i=new ma,s=new ma,r=new ma,o=new ma){this.planes=[t,e,i,s,r,o]}set(t,e,i,s,r,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,s=i[0],r=i[1],o=i[2],a=i[3],l=i[4],c=i[5],d=i[6],u=i[7],h=i[8],f=i[9],p=i[10],m=i[11],g=i[12],_=i[13],y=i[14],b=i[15];return e[0].setComponents(a-s,u-l,m-h,b-g).normalize(),e[1].setComponents(a+s,u+l,m+h,b+g).normalize(),e[2].setComponents(a+r,u+c,m+f,b+_).normalize(),e[3].setComponents(a-r,u-c,m-f,b-_).normalize(),e[4].setComponents(a-o,u-d,m-p,b-y).normalize(),e[5].setComponents(a+o,u+d,m+p,b+y).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Iu.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Iu)}intersectsSprite(t){return Iu.center.set(0,0,0),Iu.radius=.7071067811865476,Iu.applyMatrix4(t.matrixWorld),this.intersectsSphere(Iu)}intersectsSphere(t){const e=this.planes,i=t.center,s=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const s=e[i];if(by.x=s.normal.x>0?t.max.x:t.min.x,by.y=s.normal.y>0?t.max.y:t.min.y,by.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(by)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function GN(){let n=null,t=!1,e=null,i=null;function s(r,o){e(r,o),i=n.requestAnimationFrame(s)}return{start:function(){!0!==t&&null!==e&&(i=n.requestAnimationFrame(s),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(r){e=r},setContext:function(r){n=r}}}function xne(n,t){const e=t.isWebGL2,i=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d&&(n.deleteBuffer(d.buffer),i.delete(c))},update:function l(c,d){if(c.isGLBufferAttribute){const h=i.get(c);return void((!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);void 0===u?i.set(c,function s(c,d){const u=c.array,h=c.usage,f=n.createBuffer();let p;if(n.bindBuffer(d,f),n.bufferData(d,u,h),c.onUploadCallback(),u instanceof Float32Array)p=5126;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!e)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=5131}else p=5123;else if(u instanceof Int16Array)p=5122;else if(u instanceof Uint32Array)p=5125;else if(u instanceof Int32Array)p=5124;else if(u instanceof Int8Array)p=5120;else if(u instanceof Uint8Array)p=5121;else{if(!(u instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);p=5121}return{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}(c,d)):u.version<c.version&&(function r(c,d,u){const h=d.array,f=d.updateRange;n.bindBuffer(u,c),-1===f.count?n.bufferSubData(u,0,h):(e?n.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(u.buffer,c,d),u.version=c.version)}}}class op extends mt{constructor(t=1,e=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:s};const r=t/2,o=e/2,a=Math.floor(i),l=Math.floor(s),c=a+1,d=l+1,u=t/a,h=e/l,f=[],p=[],m=[],g=[];for(let _=0;_<d;_++){const y=_*h-o;for(let b=0;b<c;b++)p.push(b*u-r,-y,0),m.push(0,0,1),g.push(b/a),g.push(1-_/l)}for(let _=0;_<l;_++)for(let y=0;y<a;y++){const x=y+c*(_+1),w=y+1+c*(_+1),C=y+1+c*_;f.push(y+c*_,x,C),f.push(x,w,C)}this.setIndex(f),this.setAttribute("position",new qe(p,3)),this.setAttribute("normal",new qe(m,3)),this.setAttribute("uv",new qe(g,2))}static fromJSON(t){return new op(t.width,t.height,t.widthSegments,t.heightSegments)}}const Ut={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Re={common:{diffuse:{value:new we(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Gi},uv2Transform:{value:new Gi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ne(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new we(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new we(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Gi}},sprite:{diffuse:{value:new we(16777215)},opacity:{value:1},center:{value:new ne(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Gi}}},So={basic:{uniforms:rs([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.fog]),vertexShader:Ut.meshbasic_vert,fragmentShader:Ut.meshbasic_frag},lambert:{uniforms:rs([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.fog,Re.lights,{emissive:{value:new we(0)}}]),vertexShader:Ut.meshlambert_vert,fragmentShader:Ut.meshlambert_frag},phong:{uniforms:rs([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new we(0)},specular:{value:new we(1118481)},shininess:{value:30}}]),vertexShader:Ut.meshphong_vert,fragmentShader:Ut.meshphong_frag},standard:{uniforms:rs([Re.common,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.roughnessmap,Re.metalnessmap,Re.fog,Re.lights,{emissive:{value:new we(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ut.meshphysical_vert,fragmentShader:Ut.meshphysical_frag},toon:{uniforms:rs([Re.common,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.gradientmap,Re.fog,Re.lights,{emissive:{value:new we(0)}}]),vertexShader:Ut.meshtoon_vert,fragmentShader:Ut.meshtoon_frag},matcap:{uniforms:rs([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,{matcap:{value:null}}]),vertexShader:Ut.meshmatcap_vert,fragmentShader:Ut.meshmatcap_frag},points:{uniforms:rs([Re.points,Re.fog]),vertexShader:Ut.points_vert,fragmentShader:Ut.points_frag},dashed:{uniforms:rs([Re.common,Re.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ut.linedashed_vert,fragmentShader:Ut.linedashed_frag},depth:{uniforms:rs([Re.common,Re.displacementmap]),vertexShader:Ut.depth_vert,fragmentShader:Ut.depth_frag},normal:{uniforms:rs([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,{opacity:{value:1}}]),vertexShader:Ut.meshnormal_vert,fragmentShader:Ut.meshnormal_frag},sprite:{uniforms:rs([Re.sprite,Re.fog]),vertexShader:Ut.sprite_vert,fragmentShader:Ut.sprite_frag},background:{uniforms:{uvTransform:{value:new Gi},t2D:{value:null}},vertexShader:Ut.background_vert,fragmentShader:Ut.background_frag},cube:{uniforms:rs([Re.envmap,{opacity:{value:1}}]),vertexShader:Ut.cube_vert,fragmentShader:Ut.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ut.equirect_vert,fragmentShader:Ut.equirect_frag},distanceRGBA:{uniforms:rs([Re.common,Re.displacementmap,{referencePosition:{value:new D},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ut.distanceRGBA_vert,fragmentShader:Ut.distanceRGBA_frag},shadow:{uniforms:rs([Re.lights,Re.fog,{color:{value:new we(0)},opacity:{value:1}}]),vertexShader:Ut.shadow_vert,fragmentShader:Ut.shadow_frag}};function _se(n,t,e,i,s,r){const o=new we(0);let l,c,a=!0===s?0:1,d=null,u=0,h=null;function p(m,g){e.buffers.color.setClear(m.r,m.g,m.b,g,r)}return{getClearColor:function(){return o},setClearColor:function(m,g=1){o.set(m),a=g,p(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(m){a=m,p(o,a)},render:function f(m,g){let _=!1,y=!0===g.isScene?g.background:null;y&&y.isTexture&&(y=t.get(y));const b=n.xr,x=b.getSession&&b.getSession();x&&"additive"===x.environmentBlendMode&&(y=null),null===y?p(o,a):y&&y.isColor&&(p(y,1),_=!0),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||306===y.mapping)?(void 0===c&&(c=new Oi(new bc(1,1,1),new Qr({name:"BackgroundCubeMaterial",uniforms:Tu(So.cube.uniforms),vertexShader:So.cube.vertexShader,fragmentShader:So.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,C,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,(d!==y||u!==y.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,d=y,u=y.version,h=n.toneMapping),m.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(void 0===l&&(l=new Oi(new op(2,2),new Qr({name:"BackgroundMaterial",uniforms:Tu(So.background.uniforms),vertexShader:So.background.vertexShader,fragmentShader:So.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=y,!0===y.matrixAutoUpdate&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(d!==y||u!==y.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,d=y,u=y.version,h=n.toneMapping),m.unshift(l,l.geometry,l.material,0,0,null))}}}function yse(n,t,e,i){const s=n.getParameter(34921),r=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||null!==r,a={},l=g(null);let c=l,d=!1;function f(z){return i.isWebGL2?n.bindVertexArray(z):r.bindVertexArrayOES(z)}function p(z){return i.isWebGL2?n.deleteVertexArray(z):r.deleteVertexArrayOES(z)}function g(z){const U=[],O=[],H=[];for(let L=0;L<s;L++)U[L]=0,O[L]=0,H[L]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:O,attributeDivisors:H,object:z,attributes:{},index:null}}function b(){const z=c.newAttributes;for(let U=0,O=z.length;U<O;U++)z[U]=0}function x(z){w(z,0)}function w(z,U){const H=c.enabledAttributes,L=c.attributeDivisors;c.newAttributes[z]=1,0===H[z]&&(n.enableVertexAttribArray(z),H[z]=1),L[z]!==U&&((i.isWebGL2?n:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,U),L[z]=U)}function C(){const z=c.newAttributes,U=c.enabledAttributes;for(let O=0,H=U.length;O<H;O++)U[O]!==z[O]&&(n.disableVertexAttribArray(O),U[O]=0)}function S(z,U,O,H,L,$){!0!==i.isWebGL2||5124!==O&&5125!==O?n.vertexAttribPointer(z,U,O,H,L,$):n.vertexAttribIPointer(z,U,O,L,$)}function T(){W(),d=!0,c!==l&&(c=l,f(c.object))}function W(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function u(z,U,O,H,L){let $=!1;if(o){const Z=function m(z,U,O){const H=!0===O.wireframe;let L=a[z.id];void 0===L&&(L={},a[z.id]=L);let $=L[U.id];void 0===$&&($={},L[U.id]=$);let Z=$[H];return void 0===Z&&(Z=g(function h(){return i.isWebGL2?n.createVertexArray():r.createVertexArrayOES()}()),$[H]=Z),Z}(H,O,U);c!==Z&&(c=Z,f(c.object)),$=function _(z,U){const O=c.attributes,H=z.attributes;let L=0;for(const $ in H){const Z=O[$],de=H[$];if(void 0===Z||Z.attribute!==de||Z.data!==de.data)return!0;L++}return c.attributesNum!==L||c.index!==U}(H,L),$&&function y(z,U){const O={},H=z.attributes;let L=0;for(const $ in H){const Z=H[$],de={};de.attribute=Z,Z.data&&(de.data=Z.data),O[$]=de,L++}c.attributes=O,c.attributesNum=L,c.index=U}(H,L)}else{const Z=!0===U.wireframe;(c.geometry!==H.id||c.program!==O.id||c.wireframe!==Z)&&(c.geometry=H.id,c.program=O.id,c.wireframe=Z,$=!0)}!0===z.isInstancedMesh&&($=!0),null!==L&&e.update(L,34963),($||d)&&(d=!1,function E(z,U,O,H){if(!1===i.isWebGL2&&(z.isInstancedMesh||H.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;b();const L=H.attributes,$=O.getAttributes(),Z=U.defaultAttributeValues;for(const de in $){const ie=$[de];if(ie.location>=0){let Be=L[de];if(void 0===Be&&("instanceMatrix"===de&&z.instanceMatrix&&(Be=z.instanceMatrix),"instanceColor"===de&&z.instanceColor&&(Be=z.instanceColor)),void 0!==Be){const Ve=Be.normalized,nt=Be.itemSize,se=e.get(Be);if(void 0===se)continue;const gt=se.buffer,ut=se.type,ot=se.bytesPerElement;if(Be.isInterleavedBufferAttribute){const ye=Be.data,St=ye.stride,re=Be.offset;if(ye.isInstancedInterleavedBuffer){for(let ae=0;ae<ie.locationSize;ae++)w(ie.location+ae,ye.meshPerAttribute);!0!==z.isInstancedMesh&&void 0===H._maxInstanceCount&&(H._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let ae=0;ae<ie.locationSize;ae++)x(ie.location+ae);n.bindBuffer(34962,gt);for(let ae=0;ae<ie.locationSize;ae++)S(ie.location+ae,nt/ie.locationSize,ut,Ve,St*ot,(re+nt/ie.locationSize*ae)*ot)}else{if(Be.isInstancedBufferAttribute){for(let ye=0;ye<ie.locationSize;ye++)w(ie.location+ye,Be.meshPerAttribute);!0!==z.isInstancedMesh&&void 0===H._maxInstanceCount&&(H._maxInstanceCount=Be.meshPerAttribute*Be.count)}else for(let ye=0;ye<ie.locationSize;ye++)x(ie.location+ye);n.bindBuffer(34962,gt);for(let ye=0;ye<ie.locationSize;ye++)S(ie.location+ye,nt/ie.locationSize,ut,Ve,nt*ot,nt/ie.locationSize*ye*ot)}}else if(void 0!==Z){const Ve=Z[de];if(void 0!==Ve)switch(Ve.length){case 2:n.vertexAttrib2fv(ie.location,Ve);break;case 3:n.vertexAttrib3fv(ie.location,Ve);break;case 4:n.vertexAttrib4fv(ie.location,Ve);break;default:n.vertexAttrib1fv(ie.location,Ve)}}}}C()}(z,U,O,H),null!==L&&n.bindBuffer(34963,e.get(L).buffer))},reset:T,resetDefaultState:W,dispose:function I(){T();for(const z in a){const U=a[z];for(const O in U){const H=U[O];for(const L in H)p(H[L].object),delete H[L];delete U[O]}delete a[z]}},releaseStatesOfGeometry:function F(z){if(void 0===a[z.id])return;const U=a[z.id];for(const O in U){const H=U[O];for(const L in H)p(H[L].object),delete H[L];delete U[O]}delete a[z.id]},releaseStatesOfProgram:function M(z){for(const U in a){const O=a[U];if(void 0===O[z.id])continue;const H=O[z.id];for(const L in H)p(H[L].object),delete H[L];delete O[z.id]}},initAttributes:b,enableAttribute:x,disableUnusedAttributes:C}}function vse(n,t,e,i){const s=i.isWebGL2;let r;this.setMode=function o(c){r=c},this.render=function a(c,d){n.drawArrays(r,c,d),e.update(d,r,1)},this.renderInstances=function l(c,d,u){if(0===u)return;let h,f;if(s)h=n,f="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](r,c,d,u),e.update(d,r,u)}}function bse(n,t,e){let i;function r(S){if("highp"===S){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";S="mediump"}return"mediump"===S&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==e.precision?e.precision:"highp";const l=r(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||t.has("WEBGL_draw_buffers"),d=!0===e.logarithmicDepthBuffer,u=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),p=n.getParameter(34076),m=n.getParameter(34921),g=n.getParameter(36347),_=n.getParameter(36348),y=n.getParameter(36349),b=h>0,x=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function s(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const S=t.get("EXT_texture_filter_anisotropic");i=n.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:d,maxTextures:u,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:_,maxFragmentUniforms:y,vertexTextures:b,floatFragmentTextures:x,floatVertexTextures:b&&x,maxSamples:o?n.getParameter(36183):0}}function xse(n){const t=this;let e=null,i=0,s=!1,r=!1;const o=new ma,a=new Gi,l={value:null,needsUpdate:!1};function c(){l.value!==e&&(l.value=e,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function d(u,h,f,p){const m=null!==u?u.length:0;let g=null;if(0!==m){if(g=l.value,!0!==p||null===g){const _=f+4*m,y=h.matrixWorldInverse;a.getNormalMatrix(y),(null===g||g.length<_)&&(g=new Float32Array(_));for(let b=0,x=f;b!==m;++b,x+=4)o.copy(u[b]).applyMatrix4(y,a),o.normal.toArray(g,x),g[x+3]=o.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=m,t.numIntersection=0,g}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h,f){const p=0!==u.length||h||0!==i||s;return s=h,e=d(u,f,0),i=u.length,p},this.beginShadows=function(){r=!0,d(null)},this.endShadows=function(){r=!1,c()},this.setState=function(u,h,f){const p=u.clippingPlanes,m=u.clipIntersection,g=u.clipShadows,_=n.get(u);if(!s||null===p||0===p.length||r&&!g)r?d(null):c();else{const y=r?0:i,b=4*y;let x=_.clippingState||null;l.value=x,x=d(p,h,b,f);for(let w=0;w!==b;++w)x[w]=e[w];_.clippingState=x,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}}}function wse(n){let t=new WeakMap;function e(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function s(o){const a=o.target;a.removeEventListener("dispose",s);const l=t.get(a);void 0!==l&&(t.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(t.has(o))return e(t.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new UN(l.height/2);return c.fromEquirectangularTexture(n,o),t.set(o,c),o.addEventListener("dispose",s),e(c.texture,o.mapping)}return null}}}return o},dispose:function r(){t=new WeakMap}}}So.physical={uniforms:rs([So.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ne(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new we(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ne},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new we(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new we(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ut.meshphysical_vert,fragmentShader:Ut.meshphysical_frag};class ap extends vy{constructor(t=-1,e=1,i=1,s=-1,r=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,i,s,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-t,o=i+t,a=s+e,l=s-e;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,o=r+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}ap.prototype.isOrthographicCamera=!0;const jN=[.125,.215,.35,.446,.526,.582],OC=new ap,WN=new we;let LC=null;const wc=(1+Math.sqrt(5))/2,Ou=1/wc,$N=[new D(1,1,1),new D(-1,1,1),new D(1,1,-1),new D(-1,1,-1),new D(0,wc,Ou),new D(0,wc,-Ou),new D(Ou,0,wc),new D(-Ou,0,wc),new D(wc,Ou,0),new D(-wc,Ou,0)];class qN{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,s=100){LC=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,i,s,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=KN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=XN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(LC),t.scissorTest=!1,wy(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(301===t.mapping||302===t.mapping?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),LC=this._renderer.getRenderTarget();const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize-32,i={magFilter:Sn,minFilter:Sn,generateMipmaps:!1,type:Co,format:pr,encoding:$r,depthBuffer:!1},s=YN(t,e,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=YN(t,e,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Mse(n){const t=[],e=[],i=[];let s=n;const r=n-4+1+jN.length;for(let o=0;o<r;o++){const a=Math.pow(2,s);e.push(a);let l=1/a;o>n-4?l=jN[o-n+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-1),d=-c/2,u=1+c/2,h=[d,d,u,d,u,u,d,d,u,u,d,u],f=6,p=6,m=3,g=2,_=1,y=new Float32Array(m*p*f),b=new Float32Array(g*p*f),x=new Float32Array(_*p*f);for(let C=0;C<f;C++){const S=C%3*2/3-1,E=C>2?0:-1;y.set([S,E,0,S+2/3,E,0,S+2/3,E+1,0,S,E,0,S+2/3,E+1,0,S,E+1,0],m*p*C),b.set(h,g*p*C),x.set([C,C,C,C,C,C],_*p*C)}const w=new mt;w.setAttribute("position",new _n(y,m)),w.setAttribute("uv",new _n(b,g)),w.setAttribute("faceIndex",new _n(x,_)),t.push(w),s>4&&s--}return{lodPlanes:t,sizeLods:e,sigmas:i}}(r)),this._blurMaterial=function Cse(n,t,e){const i=new Float32Array(20),s=new D(0,1,0);return new Qr({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,t,e)}return s}_compileMaterial(t){const e=new Oi(this._lodPlanes[0],t);this._renderer.compile(e,OC)}_sceneToCubeUV(t,e,i,s){const a=new Li(90,1,e,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,u=d.autoClear,h=d.toneMapping;d.getClearColor(WN),d.toneMapping=0,d.autoClear=!1;const f=new Ys({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Oi(new bc,f);let m=!1;const g=t.background;g?g.isColor&&(f.color.copy(g),t.background=null,m=!0):(f.color.copy(WN),m=!0);for(let _=0;_<6;_++){const y=_%3;0===y?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):1===y?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const b=this._cubeSize;wy(s,y*b,_>2?b:0,b,b),d.setRenderTarget(s),m&&d.render(p,a),d.render(t,a)}p.geometry.dispose(),p.material.dispose(),d.toneMapping=h,d.autoClear=u,t.background=g}_textureToCubeUV(t,e){const i=this._renderer,s=301===t.mapping||302===t.mapping;s?(null===this._cubemapMaterial&&(this._cubemapMaterial=KN()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=XN());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new Oi(this._lodPlanes[0],r);r.uniforms.envMap.value=t;const l=this._cubeSize;wy(e,0,0,3*l,2*l),i.setRenderTarget(e),i.render(o,OC)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const r=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(t,s-1,s,r,$N[(s-1)%$N.length])}e.autoClear=i}_blur(t,e,i,s,r){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,i,s,"latitudinal",r),this._halfBlur(o,t,i,i,s,"longitudinal",r)}_halfBlur(t,e,i,s,r,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new Oi(this._lodPlanes[s],c),h=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(r)?Math.PI/(2*f):2*Math.PI/39,m=r/p,g=isFinite(r)?1+Math.floor(3*m):20;g>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const _=[];let y=0;for(let S=0;S<20;++S){const E=S/m,I=Math.exp(-E*E/2);_.push(I),0===S?y+=I:S<g&&(y+=2*I)}for(let S=0;S<_.length;S++)_[S]=_[S]/y;h.envMap.value=t.texture,h.samples.value=g,h.weights.value=_,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:b}=this;h.dTheta.value=p,h.mipInt.value=b-i;const x=this._sizeLods[s];wy(e,3*x*(s>b-4?s-b+4:0),4*(this._cubeSize-x),3*x,2*x),l.setRenderTarget(e),l.render(u,OC)}}function YN(n,t,e){const i=new Ws(n,t,e);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function wy(n,t,e,i,s){n.viewport.set(t,e,i,s),n.scissor.set(t,e,i,s)}function XN(){return new Qr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function KN(){return new Qr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Sse(n){let t=new WeakMap,e=null;function r(a){const l=a.target;l.removeEventListener("dispose",r);const c=t.get(l);void 0!==c&&(t.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,d=301===l||302===l;if(c||d){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let u=t.get(a);return null===e&&(e=new qN(n)),u=c?e.fromEquirectangular(a,u):e.fromCubemap(a,u),t.set(a,u),u.texture}if(t.has(a))return t.get(a).texture;{const u=a.image;if(c&&u&&u.height>0||d&&u&&function s(a){let l=0;for(let d=0;d<6;d++)void 0!==a[d]&&l++;return 6===l}(u)){null===e&&(e=new qN(n));const h=c?e.fromEquirectangular(a):e.fromCubemap(a);return t.set(a,h),a.addEventListener("dispose",r),h.texture}return null}}}return a},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function Dse(n){const t={};function e(i){if(void 0!==t[i])return t[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return t[i]=s,s}return{has:function(i){return null!==e(i)},init:function(i){i.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(i){const s=e(i);return null===s&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function Ese(n,t,e,i){const s={},r=new WeakMap;function o(u){const h=u.target;null!==h.index&&t.remove(h.index);for(const p in h.attributes)t.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete s[h.id];const f=r.get(h);f&&(t.remove(f),r.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,e.memory.geometries--}function c(u){const h=[],f=u.index,p=u.attributes.position;let m=0;if(null!==f){const y=f.array;m=f.version;for(let b=0,x=y.length;b<x;b+=3){const w=y[b+0],C=y[b+1],S=y[b+2];h.push(w,C,C,S,S,w)}}else{m=p.version;for(let b=0,x=p.array.length/3-1;b<x;b+=3){const w=b+0,C=b+1,S=b+2;h.push(w,C,C,S,S,w)}}const g=new(EN(h)?HN:VN)(h,1);g.version=m;const _=r.get(u);_&&t.remove(_),r.set(u,g)}return{get:function a(u,h){return!0===s[h.id]||(h.addEventListener("dispose",o),s[h.id]=!0,e.memory.geometries++),h},update:function l(u){const h=u.attributes;for(const p in h)t.update(h[p],34962);const f=u.morphAttributes;for(const p in f){const m=f[p];for(let g=0,_=m.length;g<_;g++)t.update(m[g],34962)}},getWireframeAttribute:function d(u){const h=r.get(u);if(h){const f=u.index;null!==f&&h.version<f.version&&c(u)}else c(u);return r.get(u)}}}function Ase(n,t,e,i){const s=i.isWebGL2;let r,a,l;this.setMode=function o(h){r=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function d(h,f){n.drawElements(r,f,a,h*l),e.update(f,r,1)},this.renderInstances=function u(h,f,p){if(0===p)return;let m,g;if(s)m=n,g="drawElementsInstanced";else if(m=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[g](r,f,a,h*l,p),e.update(f,r,p)}}function Tse(n){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function s(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function i(r,o,a){switch(e.calls++,o){case 4:e.triangles+=a*(r/3);break;case 1:e.lines+=a*(r/2);break;case 3:e.lines+=a*(r-1);break;case 2:e.lines+=a*r;break;case 0:e.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function kse(n,t){return n[0]-t[0]}function Rse(n,t){return Math.abs(t[1])-Math.abs(n[1])}function NC(n,t){let e=1;const i=t.isInterleavedBufferAttribute?t.data.array:t.array;i instanceof Int8Array?e=127:i instanceof Int16Array?e=32767:i instanceof Int32Array?e=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(e)}function Ise(n,t,e){const i={},s=new Float32Array(8),r=new WeakMap,o=new hn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,d,u,h){const f=c.morphTargetInfluences;if(!0===t.isWebGL2){const p=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,m=void 0!==p?p.length:0;let g=r.get(d);if(void 0===g||g.count!==m){let U=function(){W.dispose(),r.delete(d),d.removeEventListener("dispose",U)};void 0!==g&&g.texture.dispose();const b=void 0!==d.morphAttributes.position,x=void 0!==d.morphAttributes.normal,w=void 0!==d.morphAttributes.color,C=d.morphAttributes.position||[],S=d.morphAttributes.normal||[],E=d.morphAttributes.color||[];let I=0;!0===b&&(I=1),!0===x&&(I=2),!0===w&&(I=3);let F=d.attributes.position.count*I,M=1;F>t.maxTextureSize&&(M=Math.ceil(F/t.maxTextureSize),F=t.maxTextureSize);const T=new Float32Array(F*M*4*m),W=new ny(T,F,M,m);W.type=Wr,W.needsUpdate=!0;const z=4*I;for(let O=0;O<m;O++){const H=C[O],L=S[O],$=E[O],Z=F*M*4*O;for(let de=0;de<H.count;de++){const ie=de*z;!0===b&&(o.fromBufferAttribute(H,de),!0===H.normalized&&NC(o,H),T[Z+ie+0]=o.x,T[Z+ie+1]=o.y,T[Z+ie+2]=o.z,T[Z+ie+3]=0),!0===x&&(o.fromBufferAttribute(L,de),!0===L.normalized&&NC(o,L),T[Z+ie+4]=o.x,T[Z+ie+5]=o.y,T[Z+ie+6]=o.z,T[Z+ie+7]=0),!0===w&&(o.fromBufferAttribute($,de),!0===$.normalized&&NC(o,$),T[Z+ie+8]=o.x,T[Z+ie+9]=o.y,T[Z+ie+10]=o.z,T[Z+ie+11]=4===$.itemSize?o.w:1)}}g={count:m,texture:W,size:new ne(F,M)},r.set(d,g),d.addEventListener("dispose",U)}let _=0;for(let b=0;b<f.length;b++)_+=f[b];const y=d.morphTargetsRelative?1:1-_;h.getUniforms().setValue(n,"morphTargetBaseInfluence",y),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",g.texture,e),h.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const p=void 0===f?0:f.length;let m=i[d.id];if(void 0===m||m.length!==p){m=[];for(let x=0;x<p;x++)m[x]=[x,0];i[d.id]=m}for(let x=0;x<p;x++){const w=m[x];w[0]=x,w[1]=f[x]}m.sort(Rse);for(let x=0;x<8;x++)x<p&&m[x][1]?(a[x][0]=m[x][0],a[x][1]=m[x][1]):(a[x][0]=Number.MAX_SAFE_INTEGER,a[x][1]=0);a.sort(kse);const g=d.morphAttributes.position,_=d.morphAttributes.normal;let y=0;for(let x=0;x<8;x++){const w=a[x],C=w[0],S=w[1];C!==Number.MAX_SAFE_INTEGER&&S?(g&&d.getAttribute("morphTarget"+x)!==g[C]&&d.setAttribute("morphTarget"+x,g[C]),_&&d.getAttribute("morphNormal"+x)!==_[C]&&d.setAttribute("morphNormal"+x,_[C]),s[x]=S,y+=S):(g&&!0===d.hasAttribute("morphTarget"+x)&&d.deleteAttribute("morphTarget"+x),_&&!0===d.hasAttribute("morphNormal"+x)&&d.deleteAttribute("morphNormal"+x),s[x]=0)}const b=d.morphTargetsRelative?1:1-y;h.getUniforms().setValue(n,"morphTargetBaseInfluence",b),h.getUniforms().setValue(n,"morphTargetInfluences",s)}}}}function Pse(n,t,e,i){let s=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),e.remove(c.instanceMatrix),null!==c.instanceColor&&e.remove(c.instanceColor)}return{update:function r(l){const c=i.render.frame,u=t.get(l,l.geometry);return s.get(u)!==c&&(t.update(u),s.set(u,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),e.update(l.instanceMatrix,34962),null!==l.instanceColor&&e.update(l.instanceColor,34962)),u},dispose:function o(){s=new WeakMap}}}const QN=new ss,ZN=new ny,JN=new fC,e2=new rp,t2=[],n2=[],s2=new Float32Array(16),r2=new Float32Array(9),o2=new Float32Array(4);function Lu(n,t,e){const i=n[0];if(i<=0||i>0)return n;const s=t*e;let r=t2[s];if(void 0===r&&(r=new Float32Array(s),t2[s]=r),0!==t){i.toArray(r,0);for(let o=1,a=0;o!==t;++o)a+=e,n[o].toArray(r,a)}return r}function xs(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function os(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function My(n,t){let e=n2[t];void 0===e&&(e=new Int32Array(t),n2[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function Ose(n,t){const e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function Lse(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(xs(e,t))return;n.uniform2fv(this.addr,t),os(e,t)}}function Fse(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(xs(e,t))return;n.uniform3fv(this.addr,t),os(e,t)}}function Nse(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(xs(e,t))return;n.uniform4fv(this.addr,t),os(e,t)}}function Bse(n,t){const e=this.cache,i=t.elements;if(void 0===i){if(xs(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),os(e,t)}else{if(xs(e,i))return;o2.set(i),n.uniformMatrix2fv(this.addr,!1,o2),os(e,i)}}function Vse(n,t){const e=this.cache,i=t.elements;if(void 0===i){if(xs(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),os(e,t)}else{if(xs(e,i))return;r2.set(i),n.uniformMatrix3fv(this.addr,!1,r2),os(e,i)}}function Hse(n,t){const e=this.cache,i=t.elements;if(void 0===i){if(xs(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),os(e,t)}else{if(xs(e,i))return;s2.set(i),n.uniformMatrix4fv(this.addr,!1,s2),os(e,i)}}function zse(n,t){const e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function Use(n,t){const e=this.cache;xs(e,t)||(n.uniform2iv(this.addr,t),os(e,t))}function Gse(n,t){const e=this.cache;xs(e,t)||(n.uniform3iv(this.addr,t),os(e,t))}function jse(n,t){const e=this.cache;xs(e,t)||(n.uniform4iv(this.addr,t),os(e,t))}function Wse(n,t){const e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function $se(n,t){const e=this.cache;xs(e,t)||(n.uniform2uiv(this.addr,t),os(e,t))}function qse(n,t){const e=this.cache;xs(e,t)||(n.uniform3uiv(this.addr,t),os(e,t))}function Yse(n,t){const e=this.cache;xs(e,t)||(n.uniform4uiv(this.addr,t),os(e,t))}function Xse(n,t,e){const i=this.cache,s=e.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),e.setTexture2D(t||QN,s)}function Kse(n,t,e){const i=this.cache,s=e.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),e.setTexture3D(t||JN,s)}function Qse(n,t,e){const i=this.cache,s=e.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),e.setTextureCube(t||e2,s)}function Zse(n,t,e){const i=this.cache,s=e.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),e.setTexture2DArray(t||ZN,s)}function ere(n,t){n.uniform1fv(this.addr,t)}function tre(n,t){const e=Lu(t,this.size,2);n.uniform2fv(this.addr,e)}function nre(n,t){const e=Lu(t,this.size,3);n.uniform3fv(this.addr,e)}function ire(n,t){const e=Lu(t,this.size,4);n.uniform4fv(this.addr,e)}function sre(n,t){const e=Lu(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function rre(n,t){const e=Lu(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function ore(n,t){const e=Lu(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function are(n,t){n.uniform1iv(this.addr,t)}function lre(n,t){n.uniform2iv(this.addr,t)}function cre(n,t){n.uniform3iv(this.addr,t)}function dre(n,t){n.uniform4iv(this.addr,t)}function ure(n,t){n.uniform1uiv(this.addr,t)}function hre(n,t){n.uniform2uiv(this.addr,t)}function fre(n,t){n.uniform3uiv(this.addr,t)}function pre(n,t){n.uniform4uiv(this.addr,t)}function mre(n,t,e){const i=t.length,s=My(e,i);n.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)e.setTexture2D(t[r]||QN,s[r])}function gre(n,t,e){const i=t.length,s=My(e,i);n.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)e.setTexture3D(t[r]||JN,s[r])}function _re(n,t,e){const i=t.length,s=My(e,i);n.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)e.setTextureCube(t[r]||e2,s[r])}function yre(n,t,e){const i=t.length,s=My(e,i);n.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)e.setTexture2DArray(t[r]||ZN,s[r])}function bre(n,t,e){this.id=n,this.addr=e,this.cache=[],this.setValue=function Jse(n){switch(n){case 5126:return Ose;case 35664:return Lse;case 35665:return Fse;case 35666:return Nse;case 35674:return Bse;case 35675:return Vse;case 35676:return Hse;case 5124:case 35670:return zse;case 35667:case 35671:return Use;case 35668:case 35672:return Gse;case 35669:case 35673:return jse;case 5125:return Wse;case 36294:return $se;case 36295:return qse;case 36296:return Yse;case 35678:case 36198:case 36298:case 36306:case 35682:return Xse;case 35679:case 36299:case 36307:return Kse;case 35680:case 36300:case 36308:case 36293:return Qse;case 36289:case 36303:case 36311:case 36292:return Zse}}(t.type)}function a2(n,t,e){this.id=n,this.addr=e,this.cache=[],this.size=t.size,this.setValue=function vre(n){switch(n){case 5126:return ere;case 35664:return tre;case 35665:return nre;case 35666:return ire;case 35674:return sre;case 35675:return rre;case 35676:return ore;case 5124:case 35670:return are;case 35667:case 35671:return lre;case 35668:case 35672:return cre;case 35669:case 35673:return dre;case 5125:return ure;case 36294:return hre;case 36295:return fre;case 36296:return pre;case 35678:case 36198:case 36298:case 36306:case 35682:return mre;case 35679:case 36299:case 36307:return gre;case 35680:case 36300:case 36308:case 36293:return _re;case 36289:case 36303:case 36311:case 36292:return yre}}(t.type)}function l2(n){this.id=n,this.seq=[],this.map={}}a2.prototype.updateCache=function(n){const t=this.cache;n instanceof Float32Array&&t.length!==n.length&&(this.cache=new Float32Array(n.length)),os(t,n)},l2.prototype.setValue=function(n,t,e){const i=this.seq;for(let s=0,r=i.length;s!==r;++s){const o=i[s];o.setValue(n,t[o.id],e)}};const BC=/(\w+)(\])?(\[|\.)?/g;function c2(n,t){n.seq.push(t),n.map[t.id]=t}function xre(n,t,e){const i=n.name,s=i.length;for(BC.lastIndex=0;;){const r=BC.exec(i),o=BC.lastIndex;let a=r[1];const c=r[3];if("]"===r[2]&&(a|=0),void 0===c||"["===c&&o+2===s){c2(e,void 0===c?new bre(a,n,t):new a2(a,n,t));break}{let u=e.map[a];void 0===u&&(u=new l2(a),c2(e,u)),e=u}}}function hl(n,t){this.seq=[],this.map={};const e=n.getProgramParameter(t,35718);for(let i=0;i<e;++i){const s=n.getActiveUniform(t,i);xre(s,n.getUniformLocation(t,s.name),this)}}function d2(n,t,e){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}hl.prototype.setValue=function(n,t,e,i){const s=this.map[t];void 0!==s&&s.setValue(n,e,i)},hl.prototype.setOptional=function(n,t,e){const i=t[e];void 0!==i&&this.setValue(n,e,i)},hl.upload=function(n,t,e,i){for(let s=0,r=t.length;s!==r;++s){const o=t[s],a=e[o.id];!1!==a.needsUpdate&&o.setValue(n,a.value,i)}},hl.seqWithValue=function(n,t){const e=[];for(let i=0,s=n.length;i!==s;++i){const r=n[i];r.id in t&&e.push(r)}return e};let wre=0;function u2(n,t,e){const i=n.getShaderParameter(t,35713),s=n.getShaderInfoLog(t).trim();if(i&&""===s)return"";const r=parseInt(/ERROR: 0:(\d+)/.exec(s)[1]);return e.toUpperCase()+"\n\n"+s+"\n\n"+function Mre(n,t){const e=n.split("\n"),i=[],s=Math.max(t-6,0),r=Math.min(t+6,e.length);for(let o=s;o<r;o++)i.push(o+1+": "+e[o]);return i.join("\n")}(n.getShaderSource(t),r)}function Sre(n,t){const e=function Cre(n){switch(n){case $r:return["Linear","( value )"];case nn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(t);return"vec4 "+n+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function Dre(n,t){let e;switch(t){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="OptimizedCineon";break;case 4:e="ACESFilmic";break;case 5:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function lp(n){return""!==n}function h2(n,t){return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function f2(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const kre=/^[ \t]*#include +<([\w\d./]+)>/gm;function VC(n){return n.replace(kre,Rre)}function Rre(n,t){const e=Ut[t];if(void 0===e)throw new Error("Can not resolve #include <"+t+">");return VC(e)}const Ire=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Pre=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function p2(n){return n.replace(Pre,m2).replace(Ire,Ore)}function Ore(n,t,e,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),m2(0,t,e,i)}function m2(n,t,e,i){let s="";for(let r=parseInt(t);r<parseInt(e);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function g2(n){let t="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?t+="\n#define HIGH_PRECISION":"mediump"===n.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(t+="\n#define LOW_PRECISION"),t}function Hre(n,t,e,i){const s=n.getContext(),r=e.defines;let o=e.vertexShader,a=e.fragmentShader;const l=function Lre(n){let t="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(e),c=function Fre(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),d=function Nre(n){let t="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(t="ENVMAP_MODE_REFRACTION"),t}(e),u=function Bre(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(e),h=function Vre(n){const t=n.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t/32+1)+3,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:i,maxMip:e}}(e),f=e.isWebGL2?"":function Ere(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(lp).join("\n")}(e),p=function Are(n){const t=[];for(const e in n){const i=n[e];!1!==i&&t.push("#define "+e+" "+i)}return t.join("\n")}(r),m=s.createProgram();let g,_,y=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(g=[p].filter(lp).join("\n"),g.length>0&&(g+="\n"),_=[f,p].filter(lp).join("\n"),_.length>0&&(_+="\n")):(g=[g2(e),"#define SHADER_NAME "+e.shaderName,p,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+e.maxBones,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(lp).join("\n"),_=[f,g2(e),"#define SHADER_NAME "+e.shaderName,p,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+c:"",e.envMap?"#define "+d:"",e.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==e.toneMapping?"#define TONE_MAPPING":"",0!==e.toneMapping?Ut.tonemapping_pars_fragment:"",0!==e.toneMapping?Dre("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Ut.encodings_pars_fragment,Sre("linearToOutputTexel",e.outputEncoding),e.depthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(lp).join("\n")),o=VC(o),o=h2(o,e),o=f2(o,e),a=VC(a),a=h2(a,e),a=f2(a,e),o=p2(o),a=p2(a),e.isWebGL2&&!0!==e.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,_=["#define varying in","300 es"===e.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===e.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const x=y+_+a,w=d2(s,35633,y+g+o),C=d2(s,35632,x);if(s.attachShader(m,w),s.attachShader(m,C),void 0!==e.index0AttributeName?s.bindAttribLocation(m,0,e.index0AttributeName):!0===e.morphTargets&&s.bindAttribLocation(m,0,"position"),s.linkProgram(m),n.debug.checkShaderErrors){const I=s.getProgramInfoLog(m).trim(),F=s.getShaderInfoLog(w).trim(),M=s.getShaderInfoLog(C).trim();let T=!0,W=!0;if(!1===s.getProgramParameter(m,35714)){T=!1;const z=u2(s,w,"vertex"),U=u2(s,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+I+"\n"+z+"\n"+U)}else""!==I?console.warn("THREE.WebGLProgram: Program Info Log:",I):(""===F||""===M)&&(W=!1);W&&(this.diagnostics={runnable:T,programLog:I,vertexShader:{log:F,prefix:g},fragmentShader:{log:M,prefix:_}})}let S,E;return s.deleteShader(w),s.deleteShader(C),this.getUniforms=function(){return void 0===S&&(S=new hl(s,m)),S},this.getAttributes=function(){return void 0===E&&(E=function Tre(n,t){const e={},i=n.getProgramParameter(t,35721);for(let s=0;s<i;s++){const r=n.getActiveAttrib(t,s),o=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),e[o]={type:r.type,location:n.getAttribLocation(t,o),locationSize:a}}return e}(s,m)),E},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(m),this.program=void 0},this.name=e.shaderName,this.id=wre++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=C,this}let zre=0;class Ure{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const i=t.fragmentShader,s=this._getShaderStage(t.vertexShader),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(t);return!1===o.has(s)&&(o.add(s),s.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const i of e)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}_getShaderStage(t){const e=this.shaderCache;if(!1===e.has(t)){const i=new Gre(t);e.set(t,i)}return e.get(t)}}class Gre{constructor(t){this.id=zre++,this.code=t,this.usedTimes=0}}function jre(n,t,e,i,s,r,o){const a=new xC,l=new Ure,c=[],d=s.isWebGL2,u=s.logarithmicDepthBuffer,h=s.floatVertexTextures,f=s.maxVertexUniforms,p=s.vertexTextures;let m=s.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function y(M,T,W,z,U){const O=z.fog,H=U.geometry,$=(M.isMeshStandardMaterial?e:t).get(M.envMap||(M.isMeshStandardMaterial?z.environment:null)),Z=$&&306===$.mapping?$.image.height:null,de=g[M.type],ie=U.isSkinnedMesh?function _(M){const W=M.skeleton.bones;if(h)return 1024;{const U=Math.floor((f-20)/4),O=Math.min(U,W.length);return O<W.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+W.length+" bones. This GPU supports "+O+"."),0):O}}(U):0;null!==M.precision&&(m=s.getMaxPrecision(M.precision),m!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",m,"instead."));const Be=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,Ve=void 0!==Be?Be.length:0;let se,gt,ut,ot,nt=0;if(void 0!==H.morphAttributes.position&&(nt=1),void 0!==H.morphAttributes.normal&&(nt=2),void 0!==H.morphAttributes.color&&(nt=3),de){const be=So[de];se=be.vertexShader,gt=be.fragmentShader}else se=M.vertexShader,gt=M.fragmentShader,l.update(M),ut=l.getVertexShaderID(M),ot=l.getFragmentShaderID(M);const ye=n.getRenderTarget(),re=M.clearcoat>0;return{isWebGL2:d,shaderID:de,shaderName:M.type,vertexShader:se,fragmentShader:gt,defines:M.defines,customVertexShaderID:ut,customFragmentShaderID:ot,isRawShaderMaterial:!0===M.isRawShaderMaterial,glslVersion:M.glslVersion,precision:m,instancing:!0===U.isInstancedMesh,instancingColor:!0===U.isInstancedMesh&&null!==U.instanceColor,supportsVertexTextures:p,outputEncoding:null===ye?n.outputEncoding:!0===ye.isXRRenderTarget?ye.texture.encoding:$r,map:!!M.map,matcap:!!M.matcap,envMap:!!$,envMapMode:$&&$.mapping,envMapCubeUVHeight:Z,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:1===M.normalMapType,tangentSpaceNormalMap:0===M.normalMapType,decodeVideoTexture:!!M.map&&!0===M.map.isVideoTexture&&M.map.encoding===nn,clearcoat:re,clearcoatMap:re&&!!M.clearcoatMap,clearcoatRoughnessMap:re&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:re&&!!M.clearcoatNormalMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:!1===M.transparent&&1===M.blending,alphaMap:!!M.alphaMap,alphaTest:M.alphaTest>0,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!H.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:!0===M.vertexColors&&!!H.attributes.color&&4===H.attributes.color.itemSize,vertexUvs:!!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatMap||M.clearcoatRoughnessMap||M.clearcoatNormalMap||M.displacementMap||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheenColorMap||M.sheenRoughnessMap),uvsVertexOnly:!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatNormalMap||M.transmission>0||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheen>0||M.sheenColorMap||M.sheenRoughnessMap||!M.displacementMap),fog:!!O,useFog:M.fog,fogExp2:O&&O.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===U.isSkinnedMesh&&ie>0,maxBones:ie,useVertexTexture:h,morphTargets:void 0!==H.morphAttributes.position,morphNormals:void 0!==H.morphAttributes.normal,morphColors:void 0!==H.morphAttributes.color,morphTargetsCount:Ve,morphTextureStride:nt,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:M.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:2===M.side,flipSided:1===M.side,depthPacking:void 0!==M.depthPacking&&M.depthPacking,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}},getProgramCacheKey:function b(M){const T=[];if(M.shaderID?T.push(M.shaderID):(T.push(M.customVertexShaderID),T.push(M.customFragmentShaderID)),void 0!==M.defines)for(const W in M.defines)T.push(W),T.push(M.defines[W]);return!1===M.isRawShaderMaterial&&(function x(M,T){M.push(T.precision),M.push(T.outputEncoding),M.push(T.envMapMode),M.push(T.envMapCubeUVHeight),M.push(T.combine),M.push(T.vertexUvs),M.push(T.fogExp2),M.push(T.sizeAttenuation),M.push(T.maxBones),M.push(T.morphTargetsCount),M.push(T.morphAttributeCount),M.push(T.numDirLights),M.push(T.numPointLights),M.push(T.numSpotLights),M.push(T.numHemiLights),M.push(T.numRectAreaLights),M.push(T.numDirLightShadows),M.push(T.numPointLightShadows),M.push(T.numSpotLightShadows),M.push(T.shadowMapType),M.push(T.toneMapping),M.push(T.numClippingPlanes),M.push(T.numClipIntersection)}(T,M),function w(M,T){a.disableAll(),T.isWebGL2&&a.enable(0),T.supportsVertexTextures&&a.enable(1),T.instancing&&a.enable(2),T.instancingColor&&a.enable(3),T.map&&a.enable(4),T.matcap&&a.enable(5),T.envMap&&a.enable(6),T.lightMap&&a.enable(7),T.aoMap&&a.enable(8),T.emissiveMap&&a.enable(9),T.bumpMap&&a.enable(10),T.normalMap&&a.enable(11),T.objectSpaceNormalMap&&a.enable(12),T.tangentSpaceNormalMap&&a.enable(13),T.clearcoat&&a.enable(14),T.clearcoatMap&&a.enable(15),T.clearcoatRoughnessMap&&a.enable(16),T.clearcoatNormalMap&&a.enable(17),T.displacementMap&&a.enable(18),T.specularMap&&a.enable(19),T.roughnessMap&&a.enable(20),T.metalnessMap&&a.enable(21),T.gradientMap&&a.enable(22),T.alphaMap&&a.enable(23),T.alphaTest&&a.enable(24),T.vertexColors&&a.enable(25),T.vertexAlphas&&a.enable(26),T.vertexUvs&&a.enable(27),T.vertexTangents&&a.enable(28),T.uvsVertexOnly&&a.enable(29),T.fog&&a.enable(30),M.push(a.mask),a.disableAll(),T.useFog&&a.enable(0),T.flatShading&&a.enable(1),T.logarithmicDepthBuffer&&a.enable(2),T.skinning&&a.enable(3),T.useVertexTexture&&a.enable(4),T.morphTargets&&a.enable(5),T.morphNormals&&a.enable(6),T.morphColors&&a.enable(7),T.premultipliedAlpha&&a.enable(8),T.shadowMapEnabled&&a.enable(9),T.physicallyCorrectLights&&a.enable(10),T.doubleSided&&a.enable(11),T.flipSided&&a.enable(12),T.depthPacking&&a.enable(13),T.dithering&&a.enable(14),T.specularIntensityMap&&a.enable(15),T.specularColorMap&&a.enable(16),T.transmission&&a.enable(17),T.transmissionMap&&a.enable(18),T.thicknessMap&&a.enable(19),T.sheen&&a.enable(20),T.sheenColorMap&&a.enable(21),T.sheenRoughnessMap&&a.enable(22),T.decodeVideoTexture&&a.enable(23),T.opaque&&a.enable(24),M.push(a.mask)}(T,M),T.push(n.outputEncoding)),T.push(M.customProgramCacheKey),T.join()},getUniforms:function C(M){const T=g[M.type];let W;return W=T?gne.clone(So[T].uniforms):M.uniforms,W},acquireProgram:function S(M,T){let W;for(let z=0,U=c.length;z<U;z++){const O=c[z];if(O.cacheKey===T){W=O,++W.usedTimes;break}}return void 0===W&&(W=new Hre(n,T,M,r),c.push(W)),W},releaseProgram:function E(M){if(0==--M.usedTimes){const T=c.indexOf(M);c[T]=c[c.length-1],c.pop(),M.destroy()}},releaseShaderCache:function I(M){l.remove(M)},programs:c,dispose:function F(){l.dispose()}}}function Wre(){let n=new WeakMap;return{get:function t(r){let o=n.get(r);return void 0===o&&(o={},n.set(r,o)),o},remove:function e(r){n.delete(r)},update:function i(r,o,a){n.get(r)[o]=a},dispose:function s(){n=new WeakMap}}}function $re(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function _2(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function y2(){const n=[];let t=0;const e=[],i=[],s=[];function o(u,h,f,p,m,g){let _=n[t];return void 0===_?(_={id:u.id,object:u,geometry:h,material:f,groupOrder:p,renderOrder:u.renderOrder,z:m,group:g},n[t]=_):(_.id=u.id,_.object=u,_.geometry=h,_.material=f,_.groupOrder=p,_.renderOrder=u.renderOrder,_.z=m,_.group=g),t++,_}return{opaque:e,transmissive:i,transparent:s,init:function r(){t=0,e.length=0,i.length=0,s.length=0},push:function a(u,h,f,p,m,g){const _=o(u,h,f,p,m,g);f.transmission>0?i.push(_):!0===f.transparent?s.push(_):e.push(_)},unshift:function l(u,h,f,p,m,g){const _=o(u,h,f,p,m,g);f.transmission>0?i.unshift(_):!0===f.transparent?s.unshift(_):e.unshift(_)},finish:function d(){for(let u=t,h=n.length;u<h;u++){const f=n[u];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(u,h){e.length>1&&e.sort(u||$re),i.length>1&&i.sort(h||_2),s.length>1&&s.sort(h||_2)}}}function qre(){let n=new WeakMap;return{get:function t(i,s){let r;return!1===n.has(i)?(r=new y2,n.set(i,[r])):s>=n.get(i).length?(r=new y2,n.get(i).push(r)):r=n.get(i)[s],r},dispose:function e(){n=new WeakMap}}}function Yre(){const n={};return{get:function(t){if(void 0!==n[t.id])return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new D,color:new we};break;case"SpotLight":e={position:new D,direction:new D,color:new we,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new D,color:new we,distance:0,decay:0};break;case"HemisphereLight":e={direction:new D,skyColor:new we,groundColor:new we};break;case"RectAreaLight":e={color:new we,position:new D,halfWidth:new D,halfHeight:new D}}return n[t.id]=e,e}}}let Kre=0;function Qre(n,t){return(t.castShadow?1:0)-(n.castShadow?1:0)}function Zre(n,t){const e=new Yre,i=function Xre(){const n={};return{get:function(t){if(void 0!==n[t.id])return n[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ne};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ne,shadowCameraNear:1,shadowCameraFar:1e3}}return n[t.id]=e,e}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)s.probe.push(new D);const r=new D,o=new $e,a=new $e;return{setup:function l(d,u){let h=0,f=0,p=0;for(let I=0;I<9;I++)s.probe[I].set(0,0,0);let m=0,g=0,_=0,y=0,b=0,x=0,w=0,C=0;d.sort(Qre);const S=!0!==u?Math.PI:1;for(let I=0,F=d.length;I<F;I++){const M=d[I],T=M.color,W=M.intensity,z=M.distance,U=M.shadow&&M.shadow.map?M.shadow.map.texture:null;if(M.isAmbientLight)h+=T.r*W*S,f+=T.g*W*S,p+=T.b*W*S;else if(M.isLightProbe)for(let O=0;O<9;O++)s.probe[O].addScaledVector(M.sh.coefficients[O],W);else if(M.isDirectionalLight){const O=e.get(M);if(O.color.copy(M.color).multiplyScalar(M.intensity*S),M.castShadow){const H=M.shadow,L=i.get(M);L.shadowBias=H.bias,L.shadowNormalBias=H.normalBias,L.shadowRadius=H.radius,L.shadowMapSize=H.mapSize,s.directionalShadow[m]=L,s.directionalShadowMap[m]=U,s.directionalShadowMatrix[m]=M.shadow.matrix,x++}s.directional[m]=O,m++}else if(M.isSpotLight){const O=e.get(M);if(O.position.setFromMatrixPosition(M.matrixWorld),O.color.copy(T).multiplyScalar(W*S),O.distance=z,O.coneCos=Math.cos(M.angle),O.penumbraCos=Math.cos(M.angle*(1-M.penumbra)),O.decay=M.decay,M.castShadow){const H=M.shadow,L=i.get(M);L.shadowBias=H.bias,L.shadowNormalBias=H.normalBias,L.shadowRadius=H.radius,L.shadowMapSize=H.mapSize,s.spotShadow[_]=L,s.spotShadowMap[_]=U,s.spotShadowMatrix[_]=M.shadow.matrix,C++}s.spot[_]=O,_++}else if(M.isRectAreaLight){const O=e.get(M);O.color.copy(T).multiplyScalar(W),O.halfWidth.set(.5*M.width,0,0),O.halfHeight.set(0,.5*M.height,0),s.rectArea[y]=O,y++}else if(M.isPointLight){const O=e.get(M);if(O.color.copy(M.color).multiplyScalar(M.intensity*S),O.distance=M.distance,O.decay=M.decay,M.castShadow){const H=M.shadow,L=i.get(M);L.shadowBias=H.bias,L.shadowNormalBias=H.normalBias,L.shadowRadius=H.radius,L.shadowMapSize=H.mapSize,L.shadowCameraNear=H.camera.near,L.shadowCameraFar=H.camera.far,s.pointShadow[g]=L,s.pointShadowMap[g]=U,s.pointShadowMatrix[g]=M.shadow.matrix,w++}s.point[g]=O,g++}else if(M.isHemisphereLight){const O=e.get(M);O.skyColor.copy(M.color).multiplyScalar(W*S),O.groundColor.copy(M.groundColor).multiplyScalar(W*S),s.hemi[b]=O,b++}}y>0&&(t.isWebGL2||!0===n.has("OES_texture_float_linear")?(s.rectAreaLTC1=Re.LTC_FLOAT_1,s.rectAreaLTC2=Re.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(s.rectAreaLTC1=Re.LTC_HALF_1,s.rectAreaLTC2=Re.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=h,s.ambient[1]=f,s.ambient[2]=p;const E=s.hash;(E.directionalLength!==m||E.pointLength!==g||E.spotLength!==_||E.rectAreaLength!==y||E.hemiLength!==b||E.numDirectionalShadows!==x||E.numPointShadows!==w||E.numSpotShadows!==C)&&(s.directional.length=m,s.spot.length=_,s.rectArea.length=y,s.point.length=g,s.hemi.length=b,s.directionalShadow.length=x,s.directionalShadowMap.length=x,s.pointShadow.length=w,s.pointShadowMap.length=w,s.spotShadow.length=C,s.spotShadowMap.length=C,s.directionalShadowMatrix.length=x,s.pointShadowMatrix.length=w,s.spotShadowMatrix.length=C,E.directionalLength=m,E.pointLength=g,E.spotLength=_,E.rectAreaLength=y,E.hemiLength=b,E.numDirectionalShadows=x,E.numPointShadows=w,E.numSpotShadows=C,s.version=Kre++)},setupView:function c(d,u){let h=0,f=0,p=0,m=0,g=0;const _=u.matrixWorldInverse;for(let y=0,b=d.length;y<b;y++){const x=d[y];if(x.isDirectionalLight){const w=s.directional[h];w.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(_),h++}else if(x.isSpotLight){const w=s.spot[p];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(_),w.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(_),p++}else if(x.isRectAreaLight){const w=s.rectArea[m];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(_),a.identity(),o.copy(x.matrixWorld),o.premultiply(_),a.extractRotation(o),w.halfWidth.set(.5*x.width,0,0),w.halfHeight.set(0,.5*x.height,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),m++}else if(x.isPointLight){const w=s.point[f];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(_),f++}else if(x.isHemisphereLight){const w=s.hemi[g];w.direction.setFromMatrixPosition(x.matrixWorld),w.direction.transformDirection(_),w.direction.normalize(),g++}}},state:s}}function v2(n,t){const e=new Zre(n,t),i=[],s=[];return{init:function r(){i.length=0,s.length=0},state:{lightsArray:i,shadowsArray:s,lights:e},setupLights:function l(u){e.setup(i,u)},setupLightsView:function c(u){e.setupView(i,u)},pushLight:function o(u){i.push(u)},pushShadow:function a(u){s.push(u)}}}function Jre(n,t){let e=new WeakMap;return{get:function i(r,o=0){let a;return!1===e.has(r)?(a=new v2(n,t),e.set(r,[a])):o>=e.get(r).length?(a=new v2(n,t),e.get(r).push(a)):a=e.get(r)[o],a},dispose:function s(){e=new WeakMap}}}class HC extends Gn{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}HC.prototype.isMeshDepthMaterial=!0;class zC extends Gn{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new D,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function b2(n,t,e){let i=new xy;const s=new ne,r=new ne,o=new hn,a=new HC({depthPacking:3201}),l=new zC,c={},d=e.maxTextureSize,u={0:1,1:0,2:2},h=new Qr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ne},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new mt;p.setAttribute("position",new _n(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Oi(p,h),g=this;function _(x,w){const C=t.update(m);h.defines.VSM_SAMPLES!==x.blurSamples&&(h.defines.VSM_SAMPLES=x.blurSamples,f.defines.VSM_SAMPLES=x.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),h.uniforms.shadow_pass.value=x.map.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,n.setRenderTarget(x.mapPass),n.clear(),n.renderBufferDirect(w,null,C,h,m,null),f.uniforms.shadow_pass.value=x.mapPass.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,n.setRenderTarget(x.map),n.clear(),n.renderBufferDirect(w,null,C,f,m,null)}function y(x,w,C,S,E,I){let F=null;const M=!0===C.isPointLight?x.customDistanceMaterial:x.customDepthMaterial;if(F=void 0!==M?M:!0===C.isPointLight?l:a,n.localClippingEnabled&&!0===w.clipShadows&&0!==w.clippingPlanes.length||w.displacementMap&&0!==w.displacementScale||w.alphaMap&&w.alphaTest>0){const T=F.uuid,W=w.uuid;let z=c[T];void 0===z&&(z={},c[T]=z);let U=z[W];void 0===U&&(U=F.clone(),z[W]=U),F=U}return F.visible=w.visible,F.wireframe=w.wireframe,F.side=3===I?null!==w.shadowSide?w.shadowSide:w.side:null!==w.shadowSide?w.shadowSide:u[w.side],F.alphaMap=w.alphaMap,F.alphaTest=w.alphaTest,F.clipShadows=w.clipShadows,F.clippingPlanes=w.clippingPlanes,F.clipIntersection=w.clipIntersection,F.displacementMap=w.displacementMap,F.displacementScale=w.displacementScale,F.displacementBias=w.displacementBias,F.wireframeLinewidth=w.wireframeLinewidth,F.linewidth=w.linewidth,!0===C.isPointLight&&!0===F.isMeshDistanceMaterial&&(F.referencePosition.setFromMatrixPosition(C.matrixWorld),F.nearDistance=S,F.farDistance=E),F}function b(x,w,C,S,E){if(!1===x.visible)return;if(x.layers.test(w.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&3===E)&&(!x.frustumCulled||i.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,x.matrixWorld);const M=t.update(x),T=x.material;if(Array.isArray(T)){const W=M.groups;for(let z=0,U=W.length;z<U;z++){const O=W[z],H=T[O.materialIndex];if(H&&H.visible){const L=y(x,H,S,C.near,C.far,E);n.renderBufferDirect(C,null,M,L,x,O)}}}else if(T.visible){const W=y(x,T,S,C.near,C.far,E);n.renderBufferDirect(C,null,M,W,x,null)}}const F=x.children;for(let M=0,T=F.length;M<T;M++)b(F[M],w,C,S,E)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(x,w,C){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===x.length)return;const S=n.getRenderTarget(),E=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),F=n.state;F.setBlending(0),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);for(let M=0,T=x.length;M<T;M++){const W=x[M],z=W.shadow;if(void 0===z){console.warn("THREE.WebGLShadowMap:",W,"has no shadow.");continue}if(!1===z.autoUpdate&&!1===z.needsUpdate)continue;s.copy(z.mapSize);const U=z.getFrameExtents();s.multiply(U),r.copy(z.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(r.x=Math.floor(d/U.x),s.x=r.x*U.x,z.mapSize.x=r.x),s.y>d&&(r.y=Math.floor(d/U.y),s.y=r.y*U.y,z.mapSize.y=r.y)),null===z.map&&!z.isPointLightShadow&&3===this.type&&(z.map=new Ws(s.x,s.y),z.map.texture.name=W.name+".shadowMap",z.mapPass=new Ws(s.x,s.y),z.camera.updateProjectionMatrix()),null===z.map&&(z.map=new Ws(s.x,s.y,{minFilter:yi,magFilter:yi,format:pr}),z.map.texture.name=W.name+".shadowMap",z.camera.updateProjectionMatrix()),n.setRenderTarget(z.map),n.clear();const O=z.getViewportCount();for(let H=0;H<O;H++){const L=z.getViewport(H);o.set(r.x*L.x,r.y*L.y,r.x*L.z,r.y*L.w),F.viewport(o),z.updateMatrices(W,H),i=z.getFrustum(),b(w,C,z.camera,W,this.type)}!z.isPointLightShadow&&3===this.type&&_(z,C),z.needsUpdate=!1}g.needsUpdate=!1,n.setRenderTarget(S,E,I)}}function noe(n,t,e){const i=e.isWebGL2,a=new function s(){let V=!1;const Se=new hn;let Ce=null;const _t=new hn(0,0,0,0);return{setMask:function(Fe){Ce!==Fe&&!V&&(n.colorMask(Fe,Fe,Fe,Fe),Ce=Fe)},setLocked:function(Fe){V=Fe},setClear:function(Fe,et,ke,Tt,Ln){!0===Ln&&(Fe*=Tt,et*=Tt,ke*=Tt),Se.set(Fe,et,ke,Tt),!1===_t.equals(Se)&&(n.clearColor(Fe,et,ke,Tt),_t.copy(Se))},reset:function(){V=!1,Ce=null,_t.set(-1,0,0,0)}}},l=new function r(){let V=!1,Se=null,Ce=null,_t=null;return{setTest:function(Fe){Fe?nt(2929):se(2929)},setMask:function(Fe){Se!==Fe&&!V&&(n.depthMask(Fe),Se=Fe)},setFunc:function(Fe){if(Ce!==Fe){if(Fe)switch(Fe){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);Ce=Fe}},setLocked:function(Fe){V=Fe},setClear:function(Fe){_t!==Fe&&(n.clearDepth(Fe),_t=Fe)},reset:function(){V=!1,Se=null,Ce=null,_t=null}}},c=new function o(){let V=!1,Se=null,Ce=null,_t=null,Fe=null,et=null,ke=null,Tt=null,Ln=null;return{setTest:function(Zt){V||(Zt?nt(2960):se(2960))},setMask:function(Zt){Se!==Zt&&!V&&(n.stencilMask(Zt),Se=Zt)},setFunc:function(Zt,zo,Uo){(Ce!==Zt||_t!==zo||Fe!==Uo)&&(n.stencilFunc(Zt,zo,Uo),Ce=Zt,_t=zo,Fe=Uo)},setOp:function(Zt,zo,Uo){(et!==Zt||ke!==zo||Tt!==Uo)&&(n.stencilOp(Zt,zo,Uo),et=Zt,ke=zo,Tt=Uo)},setLocked:function(Zt){V=Zt},setClear:function(Zt){Ln!==Zt&&(n.clearStencil(Zt),Ln=Zt)},reset:function(){V=!1,Se=null,Ce=null,_t=null,Fe=null,et=null,ke=null,Tt=null,Ln=null}}};let d={},u={},h=new WeakMap,f=[],p=null,m=!1,g=null,_=null,y=null,b=null,x=null,w=null,C=null,S=!1,E=null,I=null,F=null,M=null,T=null;const W=n.getParameter(35661);let z=!1,U=0;const O=n.getParameter(7938);-1!==O.indexOf("WebGL")?(U=parseFloat(/^WebGL (\d)/.exec(O)[1]),z=U>=1):-1!==O.indexOf("OpenGL ES")&&(U=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),z=U>=2);let H=null,L={};const $=n.getParameter(3088),Z=n.getParameter(2978),de=(new hn).fromArray($),ie=(new hn).fromArray(Z);function Be(V,Se,Ce){const _t=new Uint8Array(4),Fe=n.createTexture();n.bindTexture(V,Fe),n.texParameteri(V,10241,9728),n.texParameteri(V,10240,9728);for(let et=0;et<Ce;et++)n.texImage2D(Se+et,0,6408,1,1,0,6408,5121,_t);return Fe}const Ve={};function nt(V){!0!==d[V]&&(n.enable(V),d[V]=!0)}function se(V){!1!==d[V]&&(n.disable(V),d[V]=!1)}Ve[3553]=Be(3553,3553,1),Ve[34067]=Be(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),nt(2929),l.setFunc(3),be(!1),je(1),nt(2884),re(0);const ye={100:32774,101:32778,102:32779};if(i)ye[103]=32775,ye[104]=32776;else{const V=t.get("EXT_blend_minmax");null!==V&&(ye[103]=V.MIN_EXT,ye[104]=V.MAX_EXT)}const St={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function re(V,Se,Ce,_t,Fe,et,ke,Tt){if(0!==V){if(!1===m&&(nt(3042),m=!0),5===V)Fe=Fe||Se,et=et||Ce,ke=ke||_t,(Se!==_||Fe!==x)&&(n.blendEquationSeparate(ye[Se],ye[Fe]),_=Se,x=Fe),(Ce!==y||_t!==b||et!==w||ke!==C)&&(n.blendFuncSeparate(St[Ce],St[_t],St[et],St[ke]),y=Ce,b=_t,w=et,C=ke),g=V,S=null;else if(V!==g||Tt!==S){if((100!==_||100!==x)&&(n.blendEquation(32774),_=100,x=100),Tt)switch(V){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",V)}else switch(V){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",V)}y=null,b=null,w=null,C=null,g=V,S=Tt}}else!0===m&&(se(3042),m=!1)}function be(V){E!==V&&(n.frontFace(V?2304:2305),E=V)}function je(V){0!==V?(nt(2884),V!==I&&n.cullFace(1===V?1029:2===V?1028:1032)):se(2884),I=V}function Dt(V,Se,Ce){V?(nt(32823),(M!==Se||T!==Ce)&&(n.polygonOffset(Se,Ce),M=Se,T=Ce)):se(32823)}function at(V){void 0===V&&(V=33984+W-1),H!==V&&(n.activeTexture(V),H=V)}return{buffers:{color:a,depth:l,stencil:c},enable:nt,disable:se,bindFramebuffer:function gt(V,Se){return u[V]!==Se&&(n.bindFramebuffer(V,Se),u[V]=Se,i&&(36009===V&&(u[36160]=Se),36160===V&&(u[36009]=Se)),!0)},drawBuffers:function ut(V,Se){let Ce=f,_t=!1;if(V)if(Ce=h.get(Se),void 0===Ce&&(Ce=[],h.set(Se,Ce)),V.isWebGLMultipleRenderTargets){const Fe=V.texture;if(Ce.length!==Fe.length||36064!==Ce[0]){for(let et=0,ke=Fe.length;et<ke;et++)Ce[et]=36064+et;Ce.length=Fe.length,_t=!0}}else 36064!==Ce[0]&&(Ce[0]=36064,_t=!0);else 1029!==Ce[0]&&(Ce[0]=1029,_t=!0);_t&&(e.isWebGL2?n.drawBuffers(Ce):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ce))},useProgram:function ot(V){return p!==V&&(n.useProgram(V),p=V,!0)},setBlending:re,setMaterial:function ae(V,Se){2===V.side?se(2884):nt(2884);let Ce=1===V.side;Se&&(Ce=!Ce),be(Ce),1===V.blending&&!1===V.transparent?re(0):re(V.blending,V.blendEquation,V.blendSrc,V.blendDst,V.blendEquationAlpha,V.blendSrcAlpha,V.blendDstAlpha,V.premultipliedAlpha),l.setFunc(V.depthFunc),l.setTest(V.depthTest),l.setMask(V.depthWrite),a.setMask(V.colorWrite);const _t=V.stencilWrite;c.setTest(_t),_t&&(c.setMask(V.stencilWriteMask),c.setFunc(V.stencilFunc,V.stencilRef,V.stencilFuncMask),c.setOp(V.stencilFail,V.stencilZFail,V.stencilZPass)),Dt(V.polygonOffset,V.polygonOffsetFactor,V.polygonOffsetUnits),!0===V.alphaToCoverage?nt(32926):se(32926)},setFlipSided:be,setCullFace:je,setLineWidth:function Oe(V){V!==F&&(z&&n.lineWidth(V),F=V)},setPolygonOffset:Dt,setScissorTest:function pt(V){V?nt(3089):se(3089)},activeTexture:at,bindTexture:function Tn(V,Se){null===H&&at();let Ce=L[H];void 0===Ce&&(Ce={type:void 0,texture:void 0},L[H]=Ce),(Ce.type!==V||Ce.texture!==Se)&&(n.bindTexture(V,Se||Ve[V]),Ce.type=V,Ce.texture=Se)},unbindTexture:function an(){const V=L[H];void 0!==V&&void 0!==V.type&&(n.bindTexture(V.type,null),V.type=void 0,V.texture=void 0)},compressedTexImage2D:function P(){try{n.compressedTexImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texImage2D:function lt(){try{n.texImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texImage3D:function k(){try{n.texImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texStorage2D:function Ie(){try{n.texStorage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texStorage3D:function ze(){try{n.texStorage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texSubImage2D:function A(){try{n.texSubImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texSubImage3D:function J(){try{n.texSubImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},compressedTexSubImage2D:function me(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},scissor:function _e(V){!1===de.equals(V)&&(n.scissor(V.x,V.y,V.z,V.w),de.copy(V))},viewport:function Ze(V){!1===ie.equals(V)&&(n.viewport(V.x,V.y,V.z,V.w),ie.copy(V))},reset:function Te(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},H=null,L={},u={},h=new WeakMap,f=[],p=null,m=!1,g=null,_=null,y=null,b=null,x=null,w=null,C=null,S=!1,E=null,I=null,F=null,M=null,T=null,de.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function ioe(n,t,e,i,s,r,o){const a=s.isWebGL2,l=s.maxTextures,c=s.maxCubemapSize,d=s.maxTextureSize,u=s.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let _=!1;try{_="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(P){}function y(P,A){return _?new OffscreenCanvas(P,A):tp("canvas")}function b(P,A,J,me){let Ie=1;if((P.width>me||P.height>me)&&(Ie=me/Math.max(P.width,P.height)),Ie<1||!0===A){if("undefined"!=typeof HTMLImageElement&&P instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&P instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&P instanceof ImageBitmap){const ze=A?Z_:Math.floor,lt=ze(Ie*P.width),k=ze(Ie*P.height);void 0===m&&(m=y(lt,k));const _e=J?y(lt,k):m;return _e.width=lt,_e.height=k,_e.getContext("2d").drawImage(P,0,0,lt,k),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+P.width+"x"+P.height+") to ("+lt+"x"+k+")."),_e}return"data"in P&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+P.width+"x"+P.height+")."),P}return P}function x(P){return cC(P.width)&&cC(P.height)}function C(P,A){return P.generateMipmaps&&A&&P.minFilter!==yi&&P.minFilter!==Sn}function S(P){n.generateMipmap(P)}function E(P,A,J,me,Ie=!1){if(!1===a)return A;if(null!==P){if(void 0!==n[P])return n[P];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+P+"'")}let ze=A;return 6403===A&&(5126===J&&(ze=33326),5131===J&&(ze=33325),5121===J&&(ze=33321)),33319===A&&(5126===J&&(ze=33328),5131===J&&(ze=33327),5121===J&&(ze=33323)),6408===A&&(5126===J&&(ze=34836),5131===J&&(ze=34842),5121===J&&(ze=me===nn&&!1===Ie?35907:32856),32819===J&&(ze=32854),32820===J&&(ze=32855)),(33325===ze||33326===ze||33327===ze||33328===ze||34842===ze||34836===ze)&&t.get("EXT_color_buffer_float"),ze}function I(P,A,J){return!0===C(P,J)||P.isFramebufferTexture&&P.minFilter!==yi&&P.minFilter!==Sn?Math.log2(Math.max(A.width,A.height))+1:void 0!==P.mipmaps&&P.mipmaps.length>0?P.mipmaps.length:P.isCompressedTexture&&Array.isArray(P.image)?A.mipmaps.length:1}function F(P){return P===yi||1004===P||1005===P?9728:9729}function M(P){const A=P.target;A.removeEventListener("dispose",M),function W(P){const A=i.get(P);if(void 0===A.__webglInit)return;const J=P.source,me=g.get(J);if(me){const Ie=me[A.__cacheKey];Ie.usedTimes--,0===Ie.usedTimes&&z(P),0===Object.keys(me).length&&g.delete(J)}i.remove(P)}(A),A.isVideoTexture&&p.delete(A)}function T(P){const A=P.target;A.removeEventListener("dispose",T),function U(P){const A=P.texture,J=i.get(P),me=i.get(A);if(void 0!==me.__webglTexture&&(n.deleteTexture(me.__webglTexture),o.memory.textures--),P.depthTexture&&P.depthTexture.dispose(),P.isWebGLCubeRenderTarget)for(let Ie=0;Ie<6;Ie++)n.deleteFramebuffer(J.__webglFramebuffer[Ie]),J.__webglDepthbuffer&&n.deleteRenderbuffer(J.__webglDepthbuffer[Ie]);else n.deleteFramebuffer(J.__webglFramebuffer),J.__webglDepthbuffer&&n.deleteRenderbuffer(J.__webglDepthbuffer),J.__webglMultisampledFramebuffer&&n.deleteFramebuffer(J.__webglMultisampledFramebuffer),J.__webglColorRenderbuffer&&n.deleteRenderbuffer(J.__webglColorRenderbuffer),J.__webglDepthRenderbuffer&&n.deleteRenderbuffer(J.__webglDepthRenderbuffer);if(P.isWebGLMultipleRenderTargets)for(let Ie=0,ze=A.length;Ie<ze;Ie++){const lt=i.get(A[Ie]);lt.__webglTexture&&(n.deleteTexture(lt.__webglTexture),o.memory.textures--),i.remove(A[Ie])}i.remove(A),i.remove(P)}(A)}function z(P){const A=i.get(P);n.deleteTexture(A.__webglTexture),delete g.get(P.source)[A.__cacheKey],o.memory.textures--}let O=0;function Z(P,A){const J=i.get(P);if(P.isVideoTexture&&function Tn(P){const A=o.render.frame;p.get(P)!==A&&(p.set(P,A),P.update())}(P),!1===P.isRenderTargetTexture&&P.version>0&&J.__version!==P.version){const me=P.image;if(null===me)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==me.complete)return void ut(J,P,A);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.activeTexture(33984+A),e.bindTexture(3553,J.__webglTexture)}const Ve={[ac]:10497,[bs]:33071,1002:33648},nt={[yi]:9728,1004:9984,1005:9986,[Sn]:9729,1007:9985,[nl]:9987};function se(P,A,J){if(J?(n.texParameteri(P,10242,Ve[A.wrapS]),n.texParameteri(P,10243,Ve[A.wrapT]),(32879===P||35866===P)&&n.texParameteri(P,32882,Ve[A.wrapR]),n.texParameteri(P,10240,nt[A.magFilter]),n.texParameteri(P,10241,nt[A.minFilter])):(n.texParameteri(P,10242,33071),n.texParameteri(P,10243,33071),(32879===P||35866===P)&&n.texParameteri(P,32882,33071),(A.wrapS!==bs||A.wrapT!==bs)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(P,10240,F(A.magFilter)),n.texParameteri(P,10241,F(A.minFilter)),A.minFilter!==yi&&A.minFilter!==Sn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const me=t.get("EXT_texture_filter_anisotropic");if(A.type===Wr&&!1===t.has("OES_texture_float_linear")||!1===a&&A.type===Co&&!1===t.has("OES_texture_half_float_linear"))return;(A.anisotropy>1||i.get(A).__currentAnisotropy)&&(n.texParameterf(P,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(A.anisotropy,s.getMaxAnisotropy())),i.get(A).__currentAnisotropy=A.anisotropy)}}function gt(P,A){let J=!1;void 0===P.__webglInit&&(P.__webglInit=!0,A.addEventListener("dispose",M));const me=A.source;let Ie=g.get(me);void 0===Ie&&(Ie={},g.set(me,Ie));const ze=function $(P){const A=[];return A.push(P.wrapS),A.push(P.wrapT),A.push(P.magFilter),A.push(P.minFilter),A.push(P.anisotropy),A.push(P.internalFormat),A.push(P.format),A.push(P.type),A.push(P.generateMipmaps),A.push(P.premultiplyAlpha),A.push(P.flipY),A.push(P.unpackAlignment),A.push(P.encoding),A.join()}(A);if(ze!==P.__cacheKey){void 0===Ie[ze]&&(Ie[ze]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,J=!0),Ie[ze].usedTimes++;const lt=Ie[P.__cacheKey];void 0!==lt&&(Ie[P.__cacheKey].usedTimes--,0===lt.usedTimes&&z(A)),P.__cacheKey=ze,P.__webglTexture=Ie[ze].texture}return J}function ut(P,A,J){let me=3553;A.isDataArrayTexture&&(me=35866),A.isData3DTexture&&(me=32879);const Ie=gt(P,A),ze=A.source;if(e.activeTexture(33984+J),e.bindTexture(me,P.__webglTexture),ze.version!==ze.__currentVersion||!0===Ie){n.pixelStorei(37440,A.flipY),n.pixelStorei(37441,A.premultiplyAlpha),n.pixelStorei(3317,A.unpackAlignment),n.pixelStorei(37443,0);const lt=function w(P){return!a&&(P.wrapS!==bs||P.wrapT!==bs||P.minFilter!==yi&&P.minFilter!==Sn)}(A)&&!1===x(A.image);let k=b(A.image,lt,!1,d);k=an(A,k);const _e=x(k)||a,Ze=r.convert(A.format,A.encoding);let Se,Te=r.convert(A.type),V=E(A.internalFormat,Ze,Te,A.encoding,A.isVideoTexture);se(me,A,_e);const Ce=A.mipmaps,_t=a&&!0!==A.isVideoTexture,Fe=void 0===P.__version,et=I(A,k,_e);if(A.isDepthTexture)V=6402,a?V=A.type===Wr?36012:1014===A.type?33190:A.type===hu?35056:33189:A.type===Wr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),A.format===cc&&6402===V&&A.type!==Xf&&1014!==A.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),A.type=Xf,Te=r.convert(A.type)),A.format===fu&&6402===V&&(V=34041,A.type!==hu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),A.type=hu,Te=r.convert(A.type))),_t&&Fe?e.texStorage2D(3553,1,V,k.width,k.height):e.texImage2D(3553,0,V,k.width,k.height,0,Ze,Te,null);else if(A.isDataTexture)if(Ce.length>0&&_e){_t&&Fe&&e.texStorage2D(3553,et,V,Ce[0].width,Ce[0].height);for(let ke=0,Tt=Ce.length;ke<Tt;ke++)Se=Ce[ke],_t?e.texSubImage2D(3553,ke,0,0,Se.width,Se.height,Ze,Te,Se.data):e.texImage2D(3553,ke,V,Se.width,Se.height,0,Ze,Te,Se.data);A.generateMipmaps=!1}else _t?(Fe&&e.texStorage2D(3553,et,V,k.width,k.height),e.texSubImage2D(3553,0,0,0,k.width,k.height,Ze,Te,k.data)):e.texImage2D(3553,0,V,k.width,k.height,0,Ze,Te,k.data);else if(A.isCompressedTexture){_t&&Fe&&e.texStorage2D(3553,et,V,Ce[0].width,Ce[0].height);for(let ke=0,Tt=Ce.length;ke<Tt;ke++)Se=Ce[ke],A.format!==pr?null!==Ze?_t?e.compressedTexSubImage2D(3553,ke,0,0,Se.width,Se.height,Ze,Se.data):e.compressedTexImage2D(3553,ke,V,Se.width,Se.height,0,Se.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_t?e.texSubImage2D(3553,ke,0,0,Se.width,Se.height,Ze,Te,Se.data):e.texImage2D(3553,ke,V,Se.width,Se.height,0,Ze,Te,Se.data)}else if(A.isDataArrayTexture)_t?(Fe&&e.texStorage3D(35866,et,V,k.width,k.height,k.depth),e.texSubImage3D(35866,0,0,0,0,k.width,k.height,k.depth,Ze,Te,k.data)):e.texImage3D(35866,0,V,k.width,k.height,k.depth,0,Ze,Te,k.data);else if(A.isData3DTexture)_t?(Fe&&e.texStorage3D(32879,et,V,k.width,k.height,k.depth),e.texSubImage3D(32879,0,0,0,0,k.width,k.height,k.depth,Ze,Te,k.data)):e.texImage3D(32879,0,V,k.width,k.height,k.depth,0,Ze,Te,k.data);else if(A.isFramebufferTexture)_t&&Fe?e.texStorage2D(3553,et,V,k.width,k.height):e.texImage2D(3553,0,V,k.width,k.height,0,Ze,Te,null);else if(Ce.length>0&&_e){_t&&Fe&&e.texStorage2D(3553,et,V,Ce[0].width,Ce[0].height);for(let ke=0,Tt=Ce.length;ke<Tt;ke++)Se=Ce[ke],_t?e.texSubImage2D(3553,ke,0,0,Ze,Te,Se):e.texImage2D(3553,ke,V,Ze,Te,Se);A.generateMipmaps=!1}else _t?(Fe&&e.texStorage2D(3553,et,V,k.width,k.height),e.texSubImage2D(3553,0,0,0,Ze,Te,k)):e.texImage2D(3553,0,V,Ze,Te,k);C(A,_e)&&S(me),ze.__currentVersion=ze.version,A.onUpdate&&A.onUpdate(A)}P.__version=A.version}function ye(P,A,J,me,Ie){const ze=r.convert(J.format,J.encoding),lt=r.convert(J.type),k=E(J.internalFormat,ze,lt,J.encoding);i.get(A).__hasExternalTextures||(32879===Ie||35866===Ie?e.texImage3D(Ie,0,k,A.width,A.height,A.depth,0,ze,lt,null):e.texImage2D(Ie,0,k,A.width,A.height,0,ze,lt,null)),e.bindFramebuffer(36160,P),at(A)?h.framebufferTexture2DMultisampleEXT(36160,me,Ie,i.get(J).__webglTexture,0,pt(A)):n.framebufferTexture2D(36160,me,Ie,i.get(J).__webglTexture,0),e.bindFramebuffer(36160,null)}function St(P,A,J){if(n.bindRenderbuffer(36161,P),A.depthBuffer&&!A.stencilBuffer){let me=33189;if(J||at(A)){const Ie=A.depthTexture;Ie&&Ie.isDepthTexture&&(Ie.type===Wr?me=36012:1014===Ie.type&&(me=33190));const ze=pt(A);at(A)?h.renderbufferStorageMultisampleEXT(36161,ze,me,A.width,A.height):n.renderbufferStorageMultisample(36161,ze,me,A.width,A.height)}else n.renderbufferStorage(36161,me,A.width,A.height);n.framebufferRenderbuffer(36160,36096,36161,P)}else if(A.depthBuffer&&A.stencilBuffer){const me=pt(A);J&&!1===at(A)?n.renderbufferStorageMultisample(36161,me,35056,A.width,A.height):at(A)?h.renderbufferStorageMultisampleEXT(36161,me,35056,A.width,A.height):n.renderbufferStorage(36161,34041,A.width,A.height),n.framebufferRenderbuffer(36160,33306,36161,P)}else{const me=!0===A.isWebGLMultipleRenderTargets?A.texture[0]:A.texture,Ie=r.convert(me.format,me.encoding),ze=r.convert(me.type),lt=E(me.internalFormat,Ie,ze,me.encoding),k=pt(A);J&&!1===at(A)?n.renderbufferStorageMultisample(36161,k,lt,A.width,A.height):at(A)?h.renderbufferStorageMultisampleEXT(36161,k,lt,A.width,A.height):n.renderbufferStorage(36161,lt,A.width,A.height)}n.bindRenderbuffer(36161,null)}function ae(P){const A=i.get(P),J=!0===P.isWebGLCubeRenderTarget;if(P.depthTexture&&!A.__autoAllocateDepthBuffer){if(J)throw new Error("target.depthTexture not supported in Cube render targets");!function re(P,A){if(A&&A.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,P),!A.depthTexture||!A.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(A.depthTexture).__webglTexture||A.depthTexture.image.width!==A.width||A.depthTexture.image.height!==A.height)&&(A.depthTexture.image.width=A.width,A.depthTexture.image.height=A.height,A.depthTexture.needsUpdate=!0),Z(A.depthTexture,0);const me=i.get(A.depthTexture).__webglTexture,Ie=pt(A);if(A.depthTexture.format===cc)at(A)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,me,0,Ie):n.framebufferTexture2D(36160,36096,3553,me,0);else{if(A.depthTexture.format!==fu)throw new Error("Unknown depthTexture format");at(A)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,me,0,Ie):n.framebufferTexture2D(36160,33306,3553,me,0)}}(A.__webglFramebuffer,P)}else if(J){A.__webglDepthbuffer=[];for(let me=0;me<6;me++)e.bindFramebuffer(36160,A.__webglFramebuffer[me]),A.__webglDepthbuffer[me]=n.createRenderbuffer(),St(A.__webglDepthbuffer[me],P,!1)}else e.bindFramebuffer(36160,A.__webglFramebuffer),A.__webglDepthbuffer=n.createRenderbuffer(),St(A.__webglDepthbuffer,P,!1);e.bindFramebuffer(36160,null)}function pt(P){return Math.min(u,P.samples)}function at(P){const A=i.get(P);return a&&P.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==A.__useRenderToTexture}function an(P,A){const J=P.encoding,me=P.format,Ie=P.type;return!0===P.isCompressedTexture||!0===P.isVideoTexture||1035===P.format||J!==$r&&(J===nn?!1===a?!0===t.has("EXT_sRGB")&&me===pr?(P.format=1035,P.minFilter=Sn,P.generateMipmaps=!1):A=pc.sRGBToLinear(A):(me!==pr||Ie!==lc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",J)),A}this.allocateTextureUnit=function L(){const P=O;return P>=l&&console.warn("THREE.WebGLTextures: Trying to use "+P+" texture units while this GPU supports only "+l),O+=1,P},this.resetTextureUnits=function H(){O=0},this.setTexture2D=Z,this.setTexture2DArray=function de(P,A){const J=i.get(P);P.version>0&&J.__version!==P.version?ut(J,P,A):(e.activeTexture(33984+A),e.bindTexture(35866,J.__webglTexture))},this.setTexture3D=function ie(P,A){const J=i.get(P);P.version>0&&J.__version!==P.version?ut(J,P,A):(e.activeTexture(33984+A),e.bindTexture(32879,J.__webglTexture))},this.setTextureCube=function Be(P,A){const J=i.get(P);P.version>0&&J.__version!==P.version?function ot(P,A,J){if(6!==A.image.length)return;const me=gt(P,A),Ie=A.source;if(e.activeTexture(33984+J),e.bindTexture(34067,P.__webglTexture),Ie.version!==Ie.__currentVersion||!0===me){n.pixelStorei(37440,A.flipY),n.pixelStorei(37441,A.premultiplyAlpha),n.pixelStorei(3317,A.unpackAlignment),n.pixelStorei(37443,0);const ze=A.isCompressedTexture||A.image[0].isCompressedTexture,lt=A.image[0]&&A.image[0].isDataTexture,k=[];for(let ke=0;ke<6;ke++)k[ke]=ze||lt?lt?A.image[ke].image:A.image[ke]:b(A.image[ke],!1,!0,c),k[ke]=an(A,k[ke]);const _e=k[0],Ze=x(_e)||a,Te=r.convert(A.format,A.encoding),V=r.convert(A.type),Se=E(A.internalFormat,Te,V,A.encoding),Ce=a&&!0!==A.isVideoTexture,_t=void 0===P.__version;let et,Fe=I(A,_e,Ze);if(se(34067,A,Ze),ze){Ce&&_t&&e.texStorage2D(34067,Fe,Se,_e.width,_e.height);for(let ke=0;ke<6;ke++){et=k[ke].mipmaps;for(let Tt=0;Tt<et.length;Tt++){const Ln=et[Tt];A.format!==pr?null!==Te?Ce?e.compressedTexSubImage2D(34069+ke,Tt,0,0,Ln.width,Ln.height,Te,Ln.data):e.compressedTexImage2D(34069+ke,Tt,Se,Ln.width,Ln.height,0,Ln.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ce?e.texSubImage2D(34069+ke,Tt,0,0,Ln.width,Ln.height,Te,V,Ln.data):e.texImage2D(34069+ke,Tt,Se,Ln.width,Ln.height,0,Te,V,Ln.data)}}}else{et=A.mipmaps,Ce&&_t&&(et.length>0&&Fe++,e.texStorage2D(34067,Fe,Se,k[0].width,k[0].height));for(let ke=0;ke<6;ke++)if(lt){Ce?e.texSubImage2D(34069+ke,0,0,0,k[ke].width,k[ke].height,Te,V,k[ke].data):e.texImage2D(34069+ke,0,Se,k[ke].width,k[ke].height,0,Te,V,k[ke].data);for(let Tt=0;Tt<et.length;Tt++){const Zt=et[Tt].image[ke].image;Ce?e.texSubImage2D(34069+ke,Tt+1,0,0,Zt.width,Zt.height,Te,V,Zt.data):e.texImage2D(34069+ke,Tt+1,Se,Zt.width,Zt.height,0,Te,V,Zt.data)}}else{Ce?e.texSubImage2D(34069+ke,0,0,0,Te,V,k[ke]):e.texImage2D(34069+ke,0,Se,Te,V,k[ke]);for(let Tt=0;Tt<et.length;Tt++){const Ln=et[Tt];Ce?e.texSubImage2D(34069+ke,Tt+1,0,0,Te,V,Ln.image[ke]):e.texImage2D(34069+ke,Tt+1,Se,Te,V,Ln.image[ke])}}}C(A,Ze)&&S(34067),Ie.__currentVersion=Ie.version,A.onUpdate&&A.onUpdate(A)}P.__version=A.version}(J,P,A):(e.activeTexture(33984+A),e.bindTexture(34067,J.__webglTexture))},this.rebindTextures=function be(P,A,J){const me=i.get(P);void 0!==A&&ye(me.__webglFramebuffer,P,P.texture,36064,3553),void 0!==J&&ae(P)},this.setupRenderTarget=function je(P){const A=P.texture,J=i.get(P),me=i.get(A);P.addEventListener("dispose",T),!0!==P.isWebGLMultipleRenderTargets&&(void 0===me.__webglTexture&&(me.__webglTexture=n.createTexture()),me.__version=A.version,o.memory.textures++);const Ie=!0===P.isWebGLCubeRenderTarget,ze=!0===P.isWebGLMultipleRenderTargets,lt=x(P)||a;if(Ie){J.__webglFramebuffer=[];for(let k=0;k<6;k++)J.__webglFramebuffer[k]=n.createFramebuffer()}else if(J.__webglFramebuffer=n.createFramebuffer(),ze)if(s.drawBuffers){const k=P.texture;for(let _e=0,Ze=k.length;_e<Ze;_e++){const Te=i.get(k[_e]);void 0===Te.__webglTexture&&(Te.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(a&&P.samples>0&&!1===at(P)){J.__webglMultisampledFramebuffer=n.createFramebuffer(),J.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,J.__webglColorRenderbuffer);const k=r.convert(A.format,A.encoding),_e=r.convert(A.type),Ze=E(A.internalFormat,k,_e,A.encoding),Te=pt(P);n.renderbufferStorageMultisample(36161,Te,Ze,P.width,P.height),e.bindFramebuffer(36160,J.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,J.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),P.depthBuffer&&(J.__webglDepthRenderbuffer=n.createRenderbuffer(),St(J.__webglDepthRenderbuffer,P,!0)),e.bindFramebuffer(36160,null)}if(Ie){e.bindTexture(34067,me.__webglTexture),se(34067,A,lt);for(let k=0;k<6;k++)ye(J.__webglFramebuffer[k],P,A,36064,34069+k);C(A,lt)&&S(34067),e.unbindTexture()}else if(ze){const k=P.texture;for(let _e=0,Ze=k.length;_e<Ze;_e++){const Te=k[_e],V=i.get(Te);e.bindTexture(3553,V.__webglTexture),se(3553,Te,lt),ye(J.__webglFramebuffer,P,Te,36064+_e,3553),C(Te,lt)&&S(3553)}e.unbindTexture()}else{let k=3553;(P.isWebGL3DRenderTarget||P.isWebGLArrayRenderTarget)&&(a?k=P.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(k,me.__webglTexture),se(k,A,lt),ye(J.__webglFramebuffer,P,A,36064,k),C(A,lt)&&S(k),e.unbindTexture()}P.depthBuffer&&ae(P)},this.updateRenderTargetMipmap=function Oe(P){const A=x(P)||a,J=!0===P.isWebGLMultipleRenderTargets?P.texture:[P.texture];for(let me=0,Ie=J.length;me<Ie;me++){const ze=J[me];if(C(ze,A)){const lt=P.isWebGLCubeRenderTarget?34067:3553,k=i.get(ze).__webglTexture;e.bindTexture(lt,k),S(lt),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function Dt(P){if(a&&P.samples>0&&!1===at(P)){const A=P.width,J=P.height;let me=16384;const Ie=[36064],ze=P.stencilBuffer?33306:36096;P.depthBuffer&&Ie.push(ze);const lt=i.get(P),k=void 0!==lt.__ignoreDepthValues&&lt.__ignoreDepthValues;!1===k&&(P.depthBuffer&&(me|=256),P.stencilBuffer&&(me|=1024)),e.bindFramebuffer(36008,lt.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,lt.__webglFramebuffer),!0===k&&(n.invalidateFramebuffer(36008,[ze]),n.invalidateFramebuffer(36009,[ze])),n.blitFramebuffer(0,0,A,J,0,0,A,J,me,9728),f&&n.invalidateFramebuffer(36008,Ie),e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,lt.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ae,this.setupFrameBufferTexture=ye,this.useMultisampledRTT=at}function soe(n,t,e){const i=e.isWebGL2;return{convert:function s(r,o=null){let a;if(r===lc)return 5121;if(1017===r)return 32819;if(1018===r)return 32820;if(1010===r)return 5120;if(1011===r)return 5122;if(r===Xf)return 5123;if(1013===r)return 5124;if(1014===r)return 5125;if(r===Wr)return 5126;if(r===Co)return i?5131:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===r)return 6406;if(r===pr)return 6408;if(1024===r)return 6409;if(1025===r)return 6410;if(r===cc)return 6402;if(r===fu)return 34041;if(1028===r)return 6403;if(1022===r)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===r)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===r)return 36244;if(1030===r)return 33319;if(1031===r)return 33320;if(1033===r)return 36249;if(33776===r||33777===r||33778===r||33779===r)if(o===nn){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===r)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===r)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===r)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===r)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===r)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===r)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===r)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===r)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===r||35841===r||35842===r||35843===r){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===r)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===r)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===r)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===r)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===r)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===r||37496===r){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===r)return o===nn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===r||37809===r||37810===r||37811===r||37812===r||37813===r||37814===r||37815===r||37816===r||37817===r||37818===r||37819===r||37820===r||37821===r){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===r)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===r){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===r)return o===nn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return r===hu?i?34042:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}zC.prototype.isMeshDistanceMaterial=!0;class x2 extends Li{constructor(t=[]){super(),this.cameras=t}}x2.prototype.isArrayCamera=!0;class ga extends on{constructor(){super(),this.type="Group"}}ga.prototype.isGroup=!0;const roe={type:"move"};class UC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ga,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ga,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new D,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new D),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ga,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new D,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new D),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,i){let s=null,r=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==a&&(s=e.getPose(t.targetRaySpace,i),null!==s&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(roe))),c&&t.hand){o=!0;for(const m of t.hand.values()){const g=e.getJointPose(m,i);if(void 0===c.joints[m.jointName]){const y=new ga;y.matrixAutoUpdate=!1,y.visible=!1,c.joints[m.jointName]=y,c.add(y)}const _=c.joints[m.jointName];null!==g&&(_.matrix.fromArray(g.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=g.radius),_.visible=null!==g}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==l&&t.gripSpace&&(r=e.getPose(t.gripSpace,i),null!==r&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==s),null!==l&&(l.visible=null!==r),null!==c&&(c.visible=null!==o),this}}class w2 extends ss{constructor(t,e,i,s,r,o,a,l,c,d){if((d=void 0!==d?d:cc)!==cc&&d!==fu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&d===cc&&(i=Xf),void 0===i&&d===fu&&(i=hu),super(null,s,r,o,a,l,d,i,c),this.image={width:t,height:e},this.magFilter=void 0!==a?a:yi,this.minFilter=void 0!==l?l:yi,this.flipY=!1,this.generateMipmaps=!1}}w2.prototype.isDepthTexture=!0;class ooe extends il{constructor(t,e){super();const i=this;let s=null,r=1,o=null,a="local-floor",l=null,c=null,d=null,u=null,h=null;const f=e.getContextAttributes();let p=null,m=null;const g=[],_=new Map,y=new Li;y.layers.enable(1),y.viewport=new hn;const b=new Li;b.layers.enable(2),b.viewport=new hn;const x=[y,b],w=new x2;w.layers.enable(1),w.layers.enable(2);let C=null,S=null;function E(L){const $=_.get(L.inputSource);$&&$.dispatchEvent({type:L.type,data:L.inputSource})}function I(){_.forEach(function(L,$){L.disconnect($)}),_.clear(),C=null,S=null,t.setRenderTarget(p),u=null,d=null,c=null,s=null,m=null,H.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function F(L){const $=s.inputSources;for(let Z=0;Z<g.length;Z++)_.set($[Z],g[Z]);for(let Z=0;Z<L.removed.length;Z++){const de=L.removed[Z],ie=_.get(de);ie&&(ie.dispatchEvent({type:"disconnected",data:de}),_.delete(de))}for(let Z=0;Z<L.added.length;Z++){const de=L.added[Z],ie=_.get(de);ie&&ie.dispatchEvent({type:"connected",data:de})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(L){let $=g[L];return void 0===$&&($=new UC,g[L]=$),$.getTargetRaySpace()},this.getControllerGrip=function(L){let $=g[L];return void 0===$&&($=new UC,g[L]=$),$.getGripSpace()},this.getHand=function(L){let $=g[L];return void 0===$&&($=new UC,g[L]=$),$.getHandSpace()},this.setFramebufferScaleFactor=function(L){r=L,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(L){a=L,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==d?d:u},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return s},this.setSession=function(){var L=function Bee(n){return function(){var t=this,e=arguments;return new Promise(function(i,s){var r=n.apply(t,e);function o(l){jF(r,i,s,o,a,"next",l)}function a(l){jF(r,i,s,o,a,"throw",l)}o(void 0)})}}(function*($){if(s=$,null!==s){if(p=t.getRenderTarget(),s.addEventListener("select",E),s.addEventListener("selectstart",E),s.addEventListener("selectend",E),s.addEventListener("squeeze",E),s.addEventListener("squeezestart",E),s.addEventListener("squeezeend",E),s.addEventListener("end",I),s.addEventListener("inputsourceschange",F),!0!==f.xrCompatible&&(yield e.makeXRCompatible()),void 0===s.renderState.layers||!1===t.capabilities.isWebGL2)u=new XRWebGLLayer(s,e,{antialias:void 0!==s.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r}),s.updateRenderState({baseLayer:u}),m=new Ws(u.framebufferWidth,u.framebufferHeight,{format:pr,type:lc,encoding:t.outputEncoding});else{let Z=null,de=null,ie=null;f.depth&&(ie=f.stencil?35056:33190,Z=f.stencil?fu:cc,de=f.stencil?hu:Xf);const Be={colorFormat:t.outputEncoding===nn?35907:32856,depthFormat:ie,scaleFactor:r};c=new XRWebGLBinding(s,e),d=c.createProjectionLayer(Be),s.updateRenderState({layers:[d]}),m=new Ws(d.textureWidth,d.textureHeight,{format:pr,type:lc,depthTexture:new w2(d.textureWidth,d.textureHeight,de,void 0,void 0,void 0,void 0,void 0,void 0,Z),stencilBuffer:f.stencil,encoding:t.outputEncoding,samples:f.antialias?4:0}),t.properties.get(m).__ignoreDepthValues=d.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),o=yield s.requestReferenceSpace(a),H.setContext(s),H.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function($){return L.apply(this,arguments)}}();const M=new D,T=new D;function z(L,$){null===$?L.matrixWorld.copy(L.matrix):L.matrixWorld.multiplyMatrices($.matrixWorld,L.matrix),L.matrixWorldInverse.copy(L.matrixWorld).invert()}this.updateCamera=function(L){if(null===s)return;w.near=b.near=y.near=L.near,w.far=b.far=y.far=L.far,(C!==w.near||S!==w.far)&&(s.updateRenderState({depthNear:w.near,depthFar:w.far}),C=w.near,S=w.far);const $=L.parent,Z=w.cameras;z(w,$);for(let ie=0;ie<Z.length;ie++)z(Z[ie],$);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),L.position.copy(w.position),L.quaternion.copy(w.quaternion),L.scale.copy(w.scale),L.matrix.copy(w.matrix),L.matrixWorld.copy(w.matrixWorld);const de=L.children;for(let ie=0,Be=de.length;ie<Be;ie++)de[ie].updateMatrixWorld(!0);2===Z.length?function W(L,$,Z){M.setFromMatrixPosition($.matrixWorld),T.setFromMatrixPosition(Z.matrixWorld);const de=M.distanceTo(T),ie=$.projectionMatrix.elements,Be=Z.projectionMatrix.elements,Ve=ie[14]/(ie[10]-1),nt=ie[14]/(ie[10]+1),se=(ie[9]+1)/ie[5],gt=(ie[9]-1)/ie[5],ut=(ie[8]-1)/ie[0],ot=(Be[8]+1)/Be[0],ye=Ve*ut,St=Ve*ot,re=de/(-ut+ot),ae=re*-ut;$.matrixWorld.decompose(L.position,L.quaternion,L.scale),L.translateX(ae),L.translateZ(re),L.matrixWorld.compose(L.position,L.quaternion,L.scale),L.matrixWorldInverse.copy(L.matrixWorld).invert();const be=Ve+re,je=nt+re;L.projectionMatrix.makePerspective(ye-ae,St+(de-ae),se*nt/je*be,gt*nt/je*be,be,je)}(w,y,b):w.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==u?u.fixedFoveation:void 0},this.setFoveation=function(L){null!==d&&(d.fixedFoveation=L),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=L)};let U=null;const H=new GN;H.setAnimationLoop(function O(L,$){if(l=$.getViewerPose(o),h=$,null!==l){const de=l.views;null!==u&&(t.setRenderTargetFramebuffer(m,u.framebuffer),t.setRenderTarget(m));let ie=!1;de.length!==w.cameras.length&&(w.cameras.length=0,ie=!0);for(let Be=0;Be<de.length;Be++){const Ve=de[Be];let nt=null;if(null!==u)nt=u.getViewport(Ve);else{const gt=c.getViewSubImage(d,Ve);nt=gt.viewport,0===Be&&(t.setRenderTargetTextures(m,gt.colorTexture,d.ignoreDepthValues?void 0:gt.depthStencilTexture),t.setRenderTarget(m))}const se=x[Be];se.matrix.fromArray(Ve.transform.matrix),se.projectionMatrix.fromArray(Ve.projectionMatrix),se.viewport.set(nt.x,nt.y,nt.width,nt.height),0===Be&&w.matrix.copy(se.matrix),!0===ie&&w.cameras.push(se)}}const Z=s.inputSources;for(let de=0;de<g.length;de++)g[de].update(Z[de],$,o);U&&U(L,$),h=null}),this.setAnimationLoop=function(L){U=L},this.dispose=function(){}}}function aoe(n,t){function s(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,1===g.side&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),1===g.side&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const _=t.get(g).envMap;if(_&&(m.envMap.value=_,m.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const x=!0!==n.physicallyCorrectLights?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*x}let y,b;g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity),g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),void 0!==y&&(y.isWebGLRenderTarget&&(y=y.texture),!0===y.matrixAutoUpdate&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix)),g.aoMap?b=g.aoMap:g.lightMap&&(b=g.lightMap),void 0!==b&&(b.isWebGLRenderTarget&&(b=b.texture),!0===b.matrixAutoUpdate&&b.updateMatrix(),m.uv2Transform.value.copy(b.matrix))}return{refreshFogUniforms:function e(m,g){m.fogColor.value.copy(g.color),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)},refreshMaterialUniforms:function i(m,g,_,y,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(m,g):g.isMeshToonMaterial?(s(m,g),function d(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}(m,g)):g.isMeshPhongMaterial?(s(m,g),function c(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}(m,g)):g.isMeshStandardMaterial?(s(m,g),function u(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}(m,g),g.isMeshPhysicalMaterial&&function h(m,g,_){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,1===g.side&&m.clearcoatNormalScale.value.negate())),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=_.texture,m.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}(m,g,b)):g.isMeshMatcapMaterial?(s(m,g),function f(m,g){g.matcap&&(m.matcap.value=g.matcap)}(m,g)):g.isMeshDepthMaterial?s(m,g):g.isMeshDistanceMaterial?(s(m,g),function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}(m,g)):g.isMeshNormalMaterial?s(m,g):g.isLineBasicMaterial?(function r(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}(m,g),g.isLineDashedMaterial&&function o(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}(m,g)):g.isPointsMaterial?function a(m,g,_,y){let b;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*_,m.scale.value=.5*y,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?b=g.map:g.alphaMap&&(b=g.alphaMap),void 0!==b&&(!0===b.matrixAutoUpdate&&b.updateMatrix(),m.uvTransform.value.copy(b.matrix))}(m,g,_,y):g.isSpriteMaterial?function l(m,g){let _;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?_=g.map:g.alphaMap&&(_=g.alphaMap),void 0!==_&&(!0===_.matrixAutoUpdate&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix))}(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function fn(n={}){const t=void 0!==n.canvas?n.canvas:function loe(){const n=tp("canvas");return n.style.display="block",n}(),e=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,s=void 0===n.stencil||n.stencil,r=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,l=void 0!==n.powerPreference?n.powerPreference:"default",c=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let d;d=void 0!==n.context?e.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let u=null,h=null;const f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=$r,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let g=!1,_=0,y=0,b=null,x=-1,w=null;const C=new hn,S=new hn;let E=null,I=t.width,F=t.height,M=1,T=null,W=null;const z=new hn(0,0,I,F),U=new hn(0,0,I,F);let O=!1;const H=new xy;let L=!1,$=!1,Z=null;const de=new $e,ie=new ne,Be=new D,Ve={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function nt(){return null===b?M:1}let ut,ot,ye,St,re,ae,be,je,Oe,Dt,pt,at,Tn,an,P,A,J,me,Ie,ze,lt,k,_e,se=e;function gt(R,q){for(let ee=0;ee<R.length;ee++){const le=t.getContext(R[ee],q);if(null!==le)return le}return null}try{const R={alpha:!0,depth:i,stencil:s,antialias:r,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r139"),t.addEventListener("webglcontextlost",V,!1),t.addEventListener("webglcontextrestored",Se,!1),null===se){const q=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&q.shift(),se=gt(q,R),null===se)throw gt(q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===se.getShaderPrecisionFormat&&(se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(R){throw console.error("THREE.WebGLRenderer: "+R.message),R}function Ze(){ut=new Dse(se),ot=new bse(se,ut,n),ut.init(ot),k=new soe(se,ut,ot),ye=new noe(se,ut,ot),St=new Tse(se),re=new Wre,ae=new ioe(se,ut,ye,re,ot,k,St),be=new wse(m),je=new Sse(m),Oe=new xne(se,ot),_e=new yse(se,ut,Oe,ot),Dt=new Ese(se,Oe,St,_e),pt=new Pse(se,Dt,Oe,St),Ie=new Ise(se,ot,ae),A=new xse(re),at=new jre(m,be,je,ut,ot,_e,A),Tn=new aoe(m,re),an=new qre,P=new Jre(ut,ot),me=new _se(m,be,ye,pt,d,o),J=new b2(m,pt,ot),ze=new vse(se,ut,St,ot),lt=new Ase(se,ut,St,ot),St.programs=at.programs,m.capabilities=ot,m.extensions=ut,m.properties=re,m.renderLists=an,m.shadowMap=J,m.state=ye,m.info=St}Ze();const Te=new ooe(m,se);function V(R){R.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Se(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const R=St.autoReset,q=J.enabled,ee=J.autoUpdate,X=J.needsUpdate,le=J.type;Ze(),St.autoReset=R,J.enabled=q,J.autoUpdate=ee,J.needsUpdate=X,J.type=le}function Ce(R){const q=R.target;q.removeEventListener("dispose",Ce),function _t(R){(function Fe(R){const q=re.get(R).programs;void 0!==q&&(q.forEach(function(ee){at.releaseProgram(ee)}),R.isShaderMaterial&&at.releaseShaderCache(R))})(R),re.remove(R)}(q)}this.xr=Te,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){const R=ut.get("WEBGL_lose_context");R&&R.loseContext()},this.forceContextRestore=function(){const R=ut.get("WEBGL_lose_context");R&&R.restoreContext()},this.getPixelRatio=function(){return M},this.setPixelRatio=function(R){void 0!==R&&(M=R,this.setSize(I,F,!1))},this.getSize=function(R){return R.set(I,F)},this.setSize=function(R,q,ee){Te.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(I=R,F=q,t.width=Math.floor(R*M),t.height=Math.floor(q*M),!1!==ee&&(t.style.width=R+"px",t.style.height=q+"px"),this.setViewport(0,0,R,q))},this.getDrawingBufferSize=function(R){return R.set(I*M,F*M).floor()},this.setDrawingBufferSize=function(R,q,ee){I=R,F=q,M=ee,t.width=Math.floor(R*ee),t.height=Math.floor(q*ee),this.setViewport(0,0,R,q)},this.getCurrentViewport=function(R){return R.copy(C)},this.getViewport=function(R){return R.copy(z)},this.setViewport=function(R,q,ee,X){R.isVector4?z.set(R.x,R.y,R.z,R.w):z.set(R,q,ee,X),ye.viewport(C.copy(z).multiplyScalar(M).floor())},this.getScissor=function(R){return R.copy(U)},this.setScissor=function(R,q,ee,X){R.isVector4?U.set(R.x,R.y,R.z,R.w):U.set(R,q,ee,X),ye.scissor(S.copy(U).multiplyScalar(M).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(R){ye.setScissorTest(O=R)},this.setOpaqueSort=function(R){T=R},this.setTransparentSort=function(R){W=R},this.getClearColor=function(R){return R.copy(me.getClearColor())},this.setClearColor=function(){me.setClearColor.apply(me,arguments)},this.getClearAlpha=function(){return me.getClearAlpha()},this.setClearAlpha=function(){me.setClearAlpha.apply(me,arguments)},this.clear=function(R=!0,q=!0,ee=!0){let X=0;R&&(X|=16384),q&&(X|=256),ee&&(X|=1024),se.clear(X)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",V,!1),t.removeEventListener("webglcontextrestored",Se,!1),an.dispose(),P.dispose(),re.dispose(),be.dispose(),je.dispose(),pt.dispose(),_e.dispose(),at.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",Tt),Te.removeEventListener("sessionend",Ln),Z&&(Z.dispose(),Z=null),Zt.stop()},this.renderBufferDirect=function(R,q,ee,X,le,wt){null===q&&(q=Ve);const Ft=le.isMesh&&le.matrixWorld.determinant()<0,Ht=function qTe(R,q,ee,X,le){!0!==q.isScene&&(q=Ve),ae.resetTextureUnits();const wt=q.fog,Ht=null===b?m.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:$r,Nt=(X.isMeshStandardMaterial?je:be).get(X.envMap||(X.isMeshStandardMaterial?q.environment:null)),mn=!0===X.vertexColors&&!!ee.attributes.color&&4===ee.attributes.color.itemSize,en=!!X.normalMap&&!!ee.attributes.tangent,rn=!!ee.morphAttributes.position,ni=!!ee.morphAttributes.normal,id=!!ee.morphAttributes.color,Dh=X.toneMapped?m.toneMapping:0,Eh=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,Go=void 0!==Eh?Eh.length:0,ln=re.get(X),Ah=h.state.lights;!0!==L||!0!==$&&R===w||A.setState(X,R,R===w&&X.id===x);let Mi=!1;X.version===ln.__version?(ln.needsLights&&ln.lightsStateVersion!==Ah.state.version||ln.outputEncoding!==Ht||le.isInstancedMesh&&!1===ln.instancing||!le.isInstancedMesh&&!0===ln.instancing||le.isSkinnedMesh&&!1===ln.skinning||!le.isSkinnedMesh&&!0===ln.skinning||ln.envMap!==Nt||X.fog&&ln.fog!==wt||void 0!==ln.numClippingPlanes&&(ln.numClippingPlanes!==A.numPlanes||ln.numIntersection!==A.numIntersection)||ln.vertexAlphas!==mn||ln.vertexTangents!==en||ln.morphTargets!==rn||ln.morphNormals!==ni||ln.morphColors!==id||ln.toneMapping!==Dh||!0===ot.isWebGL2&&ln.morphTargetsCount!==Go)&&(Mi=!0):(Mi=!0,ln.__version=X.version);let jo=ln.currentProgram;!0===Mi&&(jo=NA(X,q,le));let Pl=!1,Hm=!1,BA=!1;const us=jo.getUniforms(),zm=ln.uniforms;if(ye.useProgram(jo.program)&&(Pl=!0,Hm=!0,BA=!0),X.id!==x&&(x=X.id,Hm=!0),Pl||w!==R){if(us.setValue(se,"projectionMatrix",R.projectionMatrix),ot.logarithmicDepthBuffer&&us.setValue(se,"logDepthBufFC",2/(Math.log(R.far+1)/Math.LN2)),w!==R&&(w=R,Hm=!0,BA=!0),X.isShaderMaterial||X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshStandardMaterial||X.envMap){const oo=us.map.cameraPosition;void 0!==oo&&oo.setValue(se,Be.setFromMatrixPosition(R.matrixWorld))}(X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshLambertMaterial||X.isMeshBasicMaterial||X.isMeshStandardMaterial||X.isShaderMaterial)&&us.setValue(se,"isOrthographic",!0===R.isOrthographicCamera),(X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshLambertMaterial||X.isMeshBasicMaterial||X.isMeshStandardMaterial||X.isShaderMaterial||X.isShadowMaterial||le.isSkinnedMesh)&&us.setValue(se,"viewMatrix",R.matrixWorldInverse)}if(le.isSkinnedMesh){us.setOptional(se,le,"bindMatrix"),us.setOptional(se,le,"bindMatrixInverse");const oo=le.skeleton;oo&&(ot.floatVertexTextures?(null===oo.boneTexture&&oo.computeBoneTexture(),us.setValue(se,"boneTexture",oo.boneTexture,ae),us.setValue(se,"boneTextureSize",oo.boneTextureSize)):us.setOptional(se,oo,"boneMatrices"))}const VA=ee.morphAttributes;return(void 0!==VA.position||void 0!==VA.normal||void 0!==VA.color&&!0===ot.isWebGL2)&&Ie.update(le,ee,X,jo),(Hm||ln.receiveShadow!==le.receiveShadow)&&(ln.receiveShadow=le.receiveShadow,us.setValue(se,"receiveShadow",le.receiveShadow)),Hm&&(us.setValue(se,"toneMappingExposure",m.toneMappingExposure),ln.needsLights&&function YTe(R,q){R.ambientLightColor.needsUpdate=q,R.lightProbe.needsUpdate=q,R.directionalLights.needsUpdate=q,R.directionalLightShadows.needsUpdate=q,R.pointLights.needsUpdate=q,R.pointLightShadows.needsUpdate=q,R.spotLights.needsUpdate=q,R.spotLightShadows.needsUpdate=q,R.rectAreaLights.needsUpdate=q,R.hemisphereLights.needsUpdate=q}(zm,BA),wt&&X.fog&&Tn.refreshFogUniforms(zm,wt),Tn.refreshMaterialUniforms(zm,X,M,F,Z),hl.upload(se,ln.uniformsList,zm,ae)),X.isShaderMaterial&&!0===X.uniformsNeedUpdate&&(hl.upload(se,ln.uniformsList,zm,ae),X.uniformsNeedUpdate=!1),X.isSpriteMaterial&&us.setValue(se,"center",le.center),us.setValue(se,"modelViewMatrix",le.modelViewMatrix),us.setValue(se,"normalMatrix",le.normalMatrix),us.setValue(se,"modelMatrix",le.matrixWorld),jo}(R,q,ee,X,le);ye.setMaterial(X,Ft);let Nt=ee.index;const mn=ee.attributes.position;if(null===Nt){if(void 0===mn||0===mn.count)return}else if(0===Nt.count)return;let en=1;!0===X.wireframe&&(Nt=Dt.getWireframeAttribute(ee),en=2),_e.setup(le,X,Ht,ee,Nt);let rn,ni=ze;null!==Nt&&(rn=Oe.get(Nt),ni=lt,ni.setIndex(rn));const id=null!==Nt?Nt.count:mn.count,Dh=ee.drawRange.start*en,Eh=ee.drawRange.count*en,Go=null!==wt?wt.start*en:0,ln=null!==wt?wt.count*en:1/0,Ah=Math.max(Dh,Go),Mi=Math.min(id,Dh+Eh,Go+ln)-1,jo=Math.max(0,Mi-Ah+1);if(0!==jo){if(le.isMesh)!0===X.wireframe?(ye.setLineWidth(X.wireframeLinewidth*nt()),ni.setMode(1)):ni.setMode(4);else if(le.isLine){let Pl=X.linewidth;void 0===Pl&&(Pl=1),ye.setLineWidth(Pl*nt()),ni.setMode(le.isLineSegments?1:le.isLineLoop?2:3)}else le.isPoints?ni.setMode(0):le.isSprite&&ni.setMode(4);if(le.isInstancedMesh)ni.renderInstances(Ah,jo,le.count);else if(ee.isInstancedBufferGeometry){const Pl=Math.min(ee.instanceCount,ee._maxInstanceCount);ni.renderInstances(Ah,jo,Pl)}else ni.render(Ah,jo)}},this.compile=function(R,q){h=P.get(R),h.init(),p.push(h),R.traverseVisible(function(ee){ee.isLight&&ee.layers.test(q.layers)&&(h.pushLight(ee),ee.castShadow&&h.pushShadow(ee))}),h.setupLights(m.physicallyCorrectLights),R.traverse(function(ee){const X=ee.material;if(X)if(Array.isArray(X))for(let le=0;le<X.length;le++)NA(X[le],R,ee);else NA(X,R,ee)}),p.pop(),h=null};let et=null;function Tt(){Zt.stop()}function Ln(){Zt.start()}const Zt=new GN;function zo(R,q,ee,X){if(!1===R.visible)return;if(R.layers.test(q.layers))if(R.isGroup)ee=R.renderOrder;else if(R.isLOD)!0===R.autoUpdate&&R.update(q);else if(R.isLight)h.pushLight(R),R.castShadow&&h.pushShadow(R);else if(R.isSprite){if(!R.frustumCulled||H.intersectsSprite(R)){X&&Be.setFromMatrixPosition(R.matrixWorld).applyMatrix4(de);const Ft=pt.update(R),Ht=R.material;Ht.visible&&u.push(R,Ft,Ht,ee,Be.z,null)}}else if((R.isMesh||R.isLine||R.isPoints)&&(R.isSkinnedMesh&&R.skeleton.frame!==St.render.frame&&(R.skeleton.update(),R.skeleton.frame=St.render.frame),!R.frustumCulled||H.intersectsObject(R))){X&&Be.setFromMatrixPosition(R.matrixWorld).applyMatrix4(de);const Ft=pt.update(R),Ht=R.material;if(Array.isArray(Ht)){const Nt=Ft.groups;for(let mn=0,en=Nt.length;mn<en;mn++){const rn=Nt[mn],ni=Ht[rn.materialIndex];ni&&ni.visible&&u.push(R,Ft,ni,ee,Be.z,rn)}}else Ht.visible&&u.push(R,Ft,Ht,ee,Be.z,null)}const wt=R.children;for(let Ft=0,Ht=wt.length;Ft<Ht;Ft++)zo(wt[Ft],q,ee,X)}function Uo(R,q,ee,X){const le=R.opaque,wt=R.transmissive,Ft=R.transparent;h.setupLightsView(ee),wt.length>0&&function WTe(R,q,ee){const X=ot.isWebGL2;null===Z&&(Z=new Ws(1,1,{generateMipmaps:!0,type:null!==k.convert(Co)?Co:lc,minFilter:nl,samples:X&&!0===r?4:0})),m.getDrawingBufferSize(ie),X?Z.setSize(ie.x,ie.y):Z.setSize(Z_(ie.x),Z_(ie.y));const le=m.getRenderTarget();m.setRenderTarget(Z),m.clear();const wt=m.toneMapping;m.toneMapping=0,dx(R,q,ee),m.toneMapping=wt,ae.updateMultisampleRenderTarget(Z),ae.updateRenderTargetMipmap(Z),m.setRenderTarget(le)}(le,q,ee),X&&ye.viewport(C.copy(X)),le.length>0&&dx(le,q,ee),wt.length>0&&dx(wt,q,ee),Ft.length>0&&dx(Ft,q,ee),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function dx(R,q,ee){const X=!0===q.isScene?q.overrideMaterial:null;for(let le=0,wt=R.length;le<wt;le++){const Ft=R[le],Ht=Ft.object,Nt=Ft.geometry,mn=null===X?Ft.material:X,en=Ft.group;Ht.layers.test(ee.layers)&&$Te(Ht,q,ee,Nt,mn,en)}}function $Te(R,q,ee,X,le,wt){R.onBeforeRender(m,q,ee,X,le,wt),R.modelViewMatrix.multiplyMatrices(ee.matrixWorldInverse,R.matrixWorld),R.normalMatrix.getNormalMatrix(R.modelViewMatrix),le.onBeforeRender(m,q,ee,X,R,wt),!0===le.transparent&&2===le.side?(le.side=1,le.needsUpdate=!0,m.renderBufferDirect(ee,q,X,le,R,wt),le.side=0,le.needsUpdate=!0,m.renderBufferDirect(ee,q,X,le,R,wt),le.side=2):m.renderBufferDirect(ee,q,X,le,R,wt),R.onAfterRender(m,q,ee,X,le,wt)}function NA(R,q,ee){!0!==q.isScene&&(q=Ve);const X=re.get(R),le=h.state.lights,Ft=le.state.version,Ht=at.getParameters(R,le.state,h.state.shadowsArray,q,ee),Nt=at.getProgramCacheKey(Ht);let mn=X.programs;X.environment=R.isMeshStandardMaterial?q.environment:null,X.fog=q.fog,X.envMap=(R.isMeshStandardMaterial?je:be).get(R.envMap||X.environment),void 0===mn&&(R.addEventListener("dispose",Ce),mn=new Map,X.programs=mn);let en=mn.get(Nt);if(void 0!==en){if(X.currentProgram===en&&X.lightsStateVersion===Ft)return wj(R,Ht),en}else Ht.uniforms=at.getUniforms(R),R.onBuild(ee,Ht,m),R.onBeforeCompile(Ht,m),en=at.acquireProgram(Ht,Nt),mn.set(Nt,en),X.uniforms=Ht.uniforms;const rn=X.uniforms;(!R.isShaderMaterial&&!R.isRawShaderMaterial||!0===R.clipping)&&(rn.clippingPlanes=A.uniform),wj(R,Ht),X.needsLights=function XTe(R){return R.isMeshLambertMaterial||R.isMeshToonMaterial||R.isMeshPhongMaterial||R.isMeshStandardMaterial||R.isShadowMaterial||R.isShaderMaterial&&!0===R.lights}(R),X.lightsStateVersion=Ft,X.needsLights&&(rn.ambientLightColor.value=le.state.ambient,rn.lightProbe.value=le.state.probe,rn.directionalLights.value=le.state.directional,rn.directionalLightShadows.value=le.state.directionalShadow,rn.spotLights.value=le.state.spot,rn.spotLightShadows.value=le.state.spotShadow,rn.rectAreaLights.value=le.state.rectArea,rn.ltc_1.value=le.state.rectAreaLTC1,rn.ltc_2.value=le.state.rectAreaLTC2,rn.pointLights.value=le.state.point,rn.pointLightShadows.value=le.state.pointShadow,rn.hemisphereLights.value=le.state.hemi,rn.directionalShadowMap.value=le.state.directionalShadowMap,rn.directionalShadowMatrix.value=le.state.directionalShadowMatrix,rn.spotShadowMap.value=le.state.spotShadowMap,rn.spotShadowMatrix.value=le.state.spotShadowMatrix,rn.pointShadowMap.value=le.state.pointShadowMap,rn.pointShadowMatrix.value=le.state.pointShadowMatrix);const ni=en.getUniforms(),id=hl.seqWithValue(ni.seq,rn);return X.currentProgram=en,X.uniformsList=id,en}function wj(R,q){const ee=re.get(R);ee.outputEncoding=q.outputEncoding,ee.instancing=q.instancing,ee.skinning=q.skinning,ee.morphTargets=q.morphTargets,ee.morphNormals=q.morphNormals,ee.morphColors=q.morphColors,ee.morphTargetsCount=q.morphTargetsCount,ee.numClippingPlanes=q.numClippingPlanes,ee.numIntersection=q.numClipIntersection,ee.vertexAlphas=q.vertexAlphas,ee.vertexTangents=q.vertexTangents,ee.toneMapping=q.toneMapping}Zt.setAnimationLoop(function ke(R){et&&et(R)}),"undefined"!=typeof self&&Zt.setContext(self),this.setAnimationLoop=function(R){et=R,Te.setAnimationLoop(R),null===R?Zt.stop():Zt.start()},Te.addEventListener("sessionstart",Tt),Te.addEventListener("sessionend",Ln),this.render=function(R,q){if(void 0===q||!0===q.isCamera){if(!0!==g){if(!0===R.autoUpdate&&R.updateMatrixWorld(),null===q.parent&&q.updateMatrixWorld(),!0===Te.enabled&&!0===Te.isPresenting&&(!0===Te.cameraAutoUpdate&&Te.updateCamera(q),q=Te.getCamera()),!0===R.isScene&&R.onBeforeRender(m,R,q,b),h=P.get(R,p.length),h.init(),p.push(h),de.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse),H.setFromProjectionMatrix(de),$=this.localClippingEnabled,L=A.init(this.clippingPlanes,$,q),u=an.get(R,f.length),u.init(),f.push(u),zo(R,q,0,m.sortObjects),u.finish(),!0===m.sortObjects&&u.sort(T,W),!0===L&&A.beginShadows(),J.render(h.state.shadowsArray,R,q),!0===L&&A.endShadows(),!0===this.info.autoReset&&this.info.reset(),me.render(u,R),h.setupLights(m.physicallyCorrectLights),q.isArrayCamera){const X=q.cameras;for(let le=0,wt=X.length;le<wt;le++){const Ft=X[le];Uo(u,R,Ft,Ft.viewport)}}else Uo(u,R,q);null!==b&&(ae.updateMultisampleRenderTarget(b),ae.updateRenderTargetMipmap(b)),!0===R.isScene&&R.onAfterRender(m,R,q),_e.resetDefaultState(),x=-1,w=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),u=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(R,q,ee){re.get(R.texture).__webglTexture=q,re.get(R.depthTexture).__webglTexture=ee;const X=re.get(R);X.__hasExternalTextures=!0,X.__hasExternalTextures&&(X.__autoAllocateDepthBuffer=void 0===ee,X.__autoAllocateDepthBuffer||!0===ut.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),X.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(R,q){const ee=re.get(R);ee.__webglFramebuffer=q,ee.__useDefaultFramebuffer=void 0===q},this.setRenderTarget=function(R,q=0,ee=0){b=R,_=q,y=ee;let X=!0;if(R){const Nt=re.get(R);void 0!==Nt.__useDefaultFramebuffer?(ye.bindFramebuffer(36160,null),X=!1):void 0===Nt.__webglFramebuffer?ae.setupRenderTarget(R):Nt.__hasExternalTextures&&ae.rebindTextures(R,re.get(R.texture).__webglTexture,re.get(R.depthTexture).__webglTexture)}let le=null,wt=!1,Ft=!1;if(R){const Nt=R.texture;(Nt.isData3DTexture||Nt.isDataArrayTexture)&&(Ft=!0);const mn=re.get(R).__webglFramebuffer;R.isWebGLCubeRenderTarget?(le=mn[q],wt=!0):le=ot.isWebGL2&&R.samples>0&&!1===ae.useMultisampledRTT(R)?re.get(R).__webglMultisampledFramebuffer:mn,C.copy(R.viewport),S.copy(R.scissor),E=R.scissorTest}else C.copy(z).multiplyScalar(M).floor(),S.copy(U).multiplyScalar(M).floor(),E=O;if(ye.bindFramebuffer(36160,le)&&ot.drawBuffers&&X&&ye.drawBuffers(R,le),ye.viewport(C),ye.scissor(S),ye.setScissorTest(E),wt){const Nt=re.get(R.texture);se.framebufferTexture2D(36160,36064,34069+q,Nt.__webglTexture,ee)}else if(Ft){const Nt=re.get(R.texture);se.framebufferTextureLayer(36160,36064,Nt.__webglTexture,ee||0,q||0)}x=-1},this.readRenderTargetPixels=function(R,q,ee,X,le,wt,Ft){if(!R||!R.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ht=re.get(R).__webglFramebuffer;if(R.isWebGLCubeRenderTarget&&void 0!==Ft&&(Ht=Ht[Ft]),Ht){ye.bindFramebuffer(36160,Ht);try{const Nt=R.texture,mn=Nt.format,en=Nt.type;if(mn!==pr&&k.convert(mn)!==se.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const rn=en===Co&&(ut.has("EXT_color_buffer_half_float")||ot.isWebGL2&&ut.has("EXT_color_buffer_float"));if(!(en===lc||k.convert(en)===se.getParameter(35738)||en===Wr&&(ot.isWebGL2||ut.has("OES_texture_float")||ut.has("WEBGL_color_buffer_float"))||rn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");q>=0&&q<=R.width-X&&ee>=0&&ee<=R.height-le&&se.readPixels(q,ee,X,le,k.convert(mn),k.convert(en),wt)}finally{const Nt=null!==b?re.get(b).__webglFramebuffer:null;ye.bindFramebuffer(36160,Nt)}}},this.copyFramebufferToTexture=function(R,q,ee=0){if(!0!==q.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const X=Math.pow(2,-ee),le=Math.floor(q.image.width*X),wt=Math.floor(q.image.height*X);ae.setTexture2D(q,0),se.copyTexSubImage2D(3553,ee,0,0,R.x,R.y,le,wt),ye.unbindTexture()},this.copyTextureToTexture=function(R,q,ee,X=0){const le=q.image.width,wt=q.image.height,Ft=k.convert(ee.format),Ht=k.convert(ee.type);ae.setTexture2D(ee,0),se.pixelStorei(37440,ee.flipY),se.pixelStorei(37441,ee.premultiplyAlpha),se.pixelStorei(3317,ee.unpackAlignment),q.isDataTexture?se.texSubImage2D(3553,X,R.x,R.y,le,wt,Ft,Ht,q.image.data):q.isCompressedTexture?se.compressedTexSubImage2D(3553,X,R.x,R.y,q.mipmaps[0].width,q.mipmaps[0].height,Ft,q.mipmaps[0].data):se.texSubImage2D(3553,X,R.x,R.y,Ft,Ht,q.image),0===X&&ee.generateMipmaps&&se.generateMipmap(3553),ye.unbindTexture()},this.copyTextureToTexture3D=function(R,q,ee,X,le=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const wt=R.max.x-R.min.x+1,Ft=R.max.y-R.min.y+1,Ht=R.max.z-R.min.z+1,Nt=k.convert(X.format),mn=k.convert(X.type);let en;if(X.isData3DTexture)ae.setTexture3D(X,0),en=32879;else{if(!X.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ae.setTexture2DArray(X,0),en=35866}se.pixelStorei(37440,X.flipY),se.pixelStorei(37441,X.premultiplyAlpha),se.pixelStorei(3317,X.unpackAlignment);const rn=se.getParameter(3314),ni=se.getParameter(32878),id=se.getParameter(3316),Dh=se.getParameter(3315),Eh=se.getParameter(32877),Go=ee.isCompressedTexture?ee.mipmaps[0]:ee.image;se.pixelStorei(3314,Go.width),se.pixelStorei(32878,Go.height),se.pixelStorei(3316,R.min.x),se.pixelStorei(3315,R.min.y),se.pixelStorei(32877,R.min.z),ee.isDataTexture||ee.isData3DTexture?se.texSubImage3D(en,le,q.x,q.y,q.z,wt,Ft,Ht,Nt,mn,Go.data):ee.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),se.compressedTexSubImage3D(en,le,q.x,q.y,q.z,wt,Ft,Ht,Nt,Go.data)):se.texSubImage3D(en,le,q.x,q.y,q.z,wt,Ft,Ht,Nt,mn,Go),se.pixelStorei(3314,rn),se.pixelStorei(32878,ni),se.pixelStorei(3316,id),se.pixelStorei(3315,Dh),se.pixelStorei(32877,Eh),0===le&&X.generateMipmaps&&se.generateMipmap(en),ye.unbindTexture()},this.initTexture=function(R){ae.setTexture2D(R,0),ye.unbindTexture()},this.resetState=function(){_=0,y=0,b=null,ye.reset(),_e.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}fn.prototype.isWebGLRenderer=!0,class coe extends fn{}.prototype.isWebGL1Renderer=!0;class Cy{constructor(t,e=25e-5){this.name="",this.color=new we(t),this.density=e}clone(){return new Cy(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Cy.prototype.isFogExp2=!0;class Sy{constructor(t,e=1,i=1e3){this.name="",this.color=new we(t),this.near=e,this.far=i}clone(){return new Sy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Sy.prototype.isFog=!0;class Dy extends on{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}Dy.prototype.isScene=!0;class Mc{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Qf,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=js()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let s=0,r=this.stride;s<r;s++)this.array[t+s]=e.array[i+s];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=js()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=js()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Mc.prototype.isInterleavedBuffer=!0;const ws=new D;class fl{constructor(t,e,i,s=!1){this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)ws.fromBufferAttribute(this,e),ws.applyMatrix4(t),this.setXYZ(e,ws.x,ws.y,ws.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)ws.fromBufferAttribute(this,e),ws.applyNormalMatrix(t),this.setXYZ(e,ws.x,ws.y,ws.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)ws.fromBufferAttribute(this,e),ws.transformDirection(t),this.setXYZ(e,ws.x,ws.y,ws.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,i){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,s){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=s,this}setXYZW(t,e,i,s,r){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=s,this.data.array[t+3]=r,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return new _n(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new fl(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}fl.prototype.isInterleavedBufferAttribute=!0;class GC extends Gn{constructor(t){super(),this.type="SpriteMaterial",this.color=new we(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}let Fu;GC.prototype.isSpriteMaterial=!0;const cp=new D,Nu=new D,Bu=new D,Vu=new ne,dp=new ne,M2=new $e,Ey=new D,up=new D,Ay=new D,C2=new ne,jC=new ne,S2=new ne;function Ty(n,t,e,i,s,r){Vu.subVectors(n,e).addScalar(.5).multiply(i),void 0!==s?(dp.x=r*Vu.x-s*Vu.y,dp.y=s*Vu.x+r*Vu.y):dp.copy(Vu),n.copy(t),n.x+=dp.x,n.y+=dp.y,n.applyMatrix4(M2)}(class D2 extends on{constructor(t){if(super(),this.type="Sprite",void 0===Fu){Fu=new mt;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Mc(e,5);Fu.setIndex([0,1,2,0,2,3]),Fu.setAttribute("position",new fl(i,3,0,!1)),Fu.setAttribute("uv",new fl(i,2,3,!1))}this.geometry=Fu,this.material=void 0!==t?t:new GC,this.center=new ne(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Nu.setFromMatrixScale(this.matrixWorld),M2.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Bu.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Nu.multiplyScalar(-Bu.z);const i=this.material.rotation;let s,r;0!==i&&(r=Math.cos(i),s=Math.sin(i));const o=this.center;Ty(Ey.set(-.5,-.5,0),Bu,o,Nu,s,r),Ty(up.set(.5,-.5,0),Bu,o,Nu,s,r),Ty(Ay.set(.5,.5,0),Bu,o,Nu,s,r),C2.set(0,0),jC.set(1,0),S2.set(1,1);let a=t.ray.intersectTriangle(Ey,up,Ay,!1,cp);if(null===a&&(Ty(up.set(-.5,.5,0),Bu,o,Nu,s,r),jC.set(0,1),a=t.ray.intersectTriangle(Ey,Ay,up,!1,cp),null===a))return;const l=t.ray.origin.distanceTo(cp);l<t.near||l>t.far||e.push({distance:l,point:cp.clone(),uv:vi.getUV(cp,Ey,up,Ay,C2,jC,S2,new ne),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}).prototype.isSprite=!0;const A2=new D,T2=new hn,k2=new hn,uoe=new D,R2=new $e;class Ry extends Oi{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new $e,this.bindMatrixInverse=new $e}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new hn,e=this.geometry.attributes.skinWeight;for(let i=0,s=e.count;i<s;i++){t.fromBufferAttribute(e,i);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const i=this.skeleton,s=this.geometry;T2.fromBufferAttribute(s.attributes.skinIndex,t),k2.fromBufferAttribute(s.attributes.skinWeight,t),A2.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const o=k2.getComponent(r);if(0!==o){const a=T2.getComponent(r);R2.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),e.addScaledVector(uoe.copy(A2).applyMatrix4(R2),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}Ry.prototype.isSkinnedMesh=!0;class Iy extends on{constructor(){super(),this.type="Bone"}}Iy.prototype.isBone=!0;class Hu extends ss{constructor(t=null,e=1,i=1,s,r,o,a,l,c=yi,d=yi,u,h){super(null,o,a,l,c,d,s,r,u,h),this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Hu.prototype.isDataTexture=!0;const I2=new $e,hoe=new $e;class Py{constructor(t=[],e=[]){this.uuid=js(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new $e)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const i=new $e;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let r=0,o=t.length;r<o;r++)I2.multiplyMatrices(t[r]?t[r].matrixWorld:hoe,e[r]),I2.toArray(i,16*r);null!==s&&(s.needsUpdate=!0)}clone(){return new Py(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=DN(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const i=new Hu(e,t,t,pr,Wr);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){const s=this.bones[e];if(s.name===t)return s}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,s=t.bones.length;i<s;i++){const r=t.bones[i];let o=e[r];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new Iy),this.bones.push(o),this.boneInverses.push((new $e).fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,i=this.boneInverses;for(let s=0,r=e.length;s<r;s++)t.bones.push(e[s].uuid),t.boneInverses.push(i[s].toArray());return t}}class zu extends _n{constructor(t,e,i,s=1){"number"==typeof i&&(s=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,i),this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}zu.prototype.isInstancedBufferAttribute=!0;const P2=new $e,O2=new $e,Oy=[],hp=new Oi;(class L2 extends Oi{constructor(t,e,i){super(t,e),this.instanceMatrix=new zu(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const i=this.matrixWorld,s=this.count;if(hp.geometry=this.geometry,hp.material=this.material,void 0!==hp.material)for(let r=0;r<s;r++){this.getMatrixAt(r,P2),O2.multiplyMatrices(i,P2),hp.matrixWorld=O2,hp.raycast(t,Oy);for(let o=0,a=Oy.length;o<a;o++){const l=Oy[o];l.instanceId=r,l.object=this,e.push(l)}Oy.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new zu(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Wi extends Gn{constructor(t){super(),this.type="LineBasicMaterial",this.color=new we(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}Wi.prototype.isLineBasicMaterial=!0;const F2=new D,N2=new D,B2=new $e,WC=new yc,Ly=new ol;class pl extends on{constructor(t=new mt,e=new Wi){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,i=[0];for(let s=1,r=e.count;s<r;s++)F2.fromBufferAttribute(e,s-1),N2.fromBufferAttribute(e,s),i[s]=i[s-1],i[s]+=F2.distanceTo(N2);t.setAttribute("lineDistance",new qe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const i=this.geometry,s=this.matrixWorld,r=t.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Ly.copy(i.boundingSphere),Ly.applyMatrix4(s),Ly.radius+=r,!1===t.ray.intersectsSphere(Ly))return;B2.copy(s).invert(),WC.copy(t.ray).applyMatrix4(B2);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new D,d=new D,u=new D,h=new D,f=this.isLineSegments?2:1;if(i.isBufferGeometry){const p=i.index,g=i.attributes.position;if(null!==p)for(let b=Math.max(0,o.start),x=Math.min(p.count,o.start+o.count)-1;b<x;b+=f){const w=p.getX(b),C=p.getX(b+1);if(c.fromBufferAttribute(g,w),d.fromBufferAttribute(g,C),WC.distanceSqToSegment(c,d,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const E=t.ray.origin.distanceTo(h);E<t.near||E>t.far||e.push({distance:E,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}else for(let b=Math.max(0,o.start),x=Math.min(g.count,o.start+o.count)-1;b<x;b+=f){if(c.fromBufferAttribute(g,b),d.fromBufferAttribute(g,b+1),WC.distanceSqToSegment(c,d,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const C=t.ray.origin.distanceTo(h);C<t.near||C>t.far||e.push({distance:C,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const s=e[i[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}pl.prototype.isLine=!0;const V2=new D,H2=new D;class Cc extends pl{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,i=[];for(let s=0,r=e.count;s<r;s+=2)V2.fromBufferAttribute(e,s),H2.fromBufferAttribute(e,s+1),i[s]=0===s?0:i[s-1],i[s+1]=i[s]+V2.distanceTo(H2);t.setAttribute("lineDistance",new qe(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Cc.prototype.isLineSegments=!0;class $C extends pl{constructor(t,e){super(t,e),this.type="LineLoop"}}$C.prototype.isLineLoop=!0;class Fy extends Gn{constructor(t){super(),this.type="PointsMaterial",this.color=new we(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}Fy.prototype.isPointsMaterial=!0;const z2=new $e,qC=new yc,Ny=new ol,By=new D;class YC extends on{constructor(t=new mt,e=new Fy){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const i=this.geometry,s=this.matrixWorld,r=t.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Ny.copy(i.boundingSphere),Ny.applyMatrix4(s),Ny.radius+=r,!1===t.ray.intersectsSphere(Ny))return;z2.copy(s).invert(),qC.copy(t.ray).applyMatrix4(z2);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(i.isBufferGeometry){const c=i.index,u=i.attributes.position;if(null!==c)for(let p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);p<m;p++){const g=c.getX(p);By.fromBufferAttribute(u,g),U2(By,g,l,s,t,e,this)}else for(let p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);p<m;p++)By.fromBufferAttribute(u,p),U2(By,p,l,s,t,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const s=e[i[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function U2(n,t,e,i,s,r,o){const a=qC.distanceSqToPoint(n);if(a<e){const l=new D;qC.closestPointToPoint(n,l),l.applyMatrix4(i);const c=s.ray.origin.distanceTo(l);if(c<s.near||c>s.far)return;r.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:o})}}YC.prototype.isPoints=!0,class foe extends ss{constructor(t,e,i,s,r,o,a,l,c){super(t,e,i,s,r,o,a,l,c),this.minFilter=void 0!==o?o:Sn,this.magFilter=void 0!==r?r:Sn,this.generateMipmaps=!1;const d=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function u(){d.needsUpdate=!0,t.requestVideoFrameCallback(u)})}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t==0&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class poe extends ss{constructor(t,e,i){super({width:t,height:e}),this.format=i,this.magFilter=yi,this.minFilter=yi,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class G2 extends ss{constructor(t,e,i,s,r,o,a,l,c,d,u,h){super(null,o,a,l,c,d,s,r,u,h),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class moe extends ss{constructor(t,e,i,s,r,o,a,l,c){super(t,e,i,s,r,o,a,l,c),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;class gr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,s=this.getPoint(0),r=0;e.push(0);for(let o=1;o<=t;o++)i=this.getPoint(o/t),r+=i.distanceTo(s),e.push(r),s=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const i=this.getLengths();let s=0;const r=i.length;let o;o=e||t*i[r-1];let c,a=0,l=r-1;for(;a<=l;)if(s=Math.floor(a+(l-a)/2),c=i[s]-o,c<0)a=s+1;else{if(!(c>0)){l=s;break}l=s-1}if(s=l,i[s]===o)return s/(r-1);const d=i[s];return(s+(o-d)/(i[s+1]-d))/(r-1)}getTangent(t,e){const i=1e-4;let s=t-i,r=t+i;s<0&&(s=0),r>1&&(r=1);const o=this.getPoint(s),a=this.getPoint(r),l=e||(o.isVector2?new ne:new D);return l.copy(a).sub(o).normalize(),l}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){const i=new D,s=[],r=[],o=[],a=new D,l=new $e;for(let f=0;f<=t;f++)s[f]=this.getTangentAt(f/t,new D);r[0]=new D,o[0]=new D;let c=Number.MAX_VALUE;const d=Math.abs(s[0].x),u=Math.abs(s[0].y),h=Math.abs(s[0].z);d<=c&&(c=d,i.set(1,0,0)),u<=c&&(c=u,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(s[0],i).normalize(),r[0].crossVectors(s[0],a),o[0].crossVectors(s[0],r[0]);for(let f=1;f<=t;f++){if(r[f]=r[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(s[f-1],s[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(ai(s[f-1].dot(s[f]),-1,1));r[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(s[f],r[f])}if(!0===e){let f=Math.acos(ai(r[0].dot(r[t]),-1,1));f/=t,s[0].dot(a.crossVectors(r[0],r[t]))>0&&(f=-f);for(let p=1;p<=t;p++)r[p].applyMatrix4(l.makeRotationAxis(s[p],f*p)),o[p].crossVectors(s[p],r[p])}return{tangents:s,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Vy extends gr{constructor(t=0,e=0,i=1,s=1,r=0,o=2*Math.PI,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(t,e){const i=e||new ne,s=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(r=o?0:s),!0===this.aClockwise&&!o&&(r===s?r=-s:r-=s);const a=this.aStartAngle+t*r;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const d=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*d-f*u+this.aX,c=h*u+f*d+this.aY}return i.set(l,c)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}Vy.prototype.isEllipseCurve=!0;class j2 extends Vy{constructor(t,e,i,s,r,o){super(t,e,i,i,s,r,o),this.type="ArcCurve"}}function XC(){let n=0,t=0,e=0,i=0;function s(r,o,a,l){n=r,t=a,e=-3*r+3*o-2*a-l,i=2*r-2*o+a+l}return{initCatmullRom:function(r,o,a,l,c){s(o,a,c*(a-r),c*(l-o))},initNonuniformCatmullRom:function(r,o,a,l,c,d,u){let h=(o-r)/c-(a-r)/(c+d)+(a-o)/d,f=(a-o)/d-(l-o)/(d+u)+(l-a)/u;h*=d,f*=d,s(o,a,h,f)},calc:function(r){const o=r*r;return n+t*r+e*o+i*(o*r)}}}j2.prototype.isArcCurve=!0;const Hy=new D,KC=new XC,QC=new XC,ZC=new XC;class W2 extends gr{constructor(t=[],e=!1,i="centripetal",s=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=s}getPoint(t,e=new D){const i=e,s=this.points,r=s.length,o=(r-(this.closed?0:1))*t;let c,d,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/r)+1)*r:0===l&&a===r-1&&(a=r-2,l=1),this.closed||a>0?c=s[(a-1)%r]:(Hy.subVectors(s[0],s[1]).add(s[0]),c=Hy);const u=s[a%r],h=s[(a+1)%r];if(this.closed||a+2<r?d=s[(a+2)%r]:(Hy.subVectors(s[r-1],s[r-2]).add(s[r-1]),d=Hy),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let p=Math.pow(c.distanceToSquared(u),f),m=Math.pow(u.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(d),f);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),KC.initNonuniformCatmullRom(c.x,u.x,h.x,d.x,p,m,g),QC.initNonuniformCatmullRom(c.y,u.y,h.y,d.y,p,m,g),ZC.initNonuniformCatmullRom(c.z,u.z,h.z,d.z,p,m,g)}else"catmullrom"===this.curveType&&(KC.initCatmullRom(c.x,u.x,h.x,d.x,this.tension),QC.initCatmullRom(c.y,u.y,h.y,d.y,this.tension),ZC.initCatmullRom(c.z,u.z,h.z,d.z,this.tension));return i.set(KC.calc(l),QC.calc(l),ZC.calc(l)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const s=t.points[e];this.points.push((new D).fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function $2(n,t,e,i,s){const r=.5*(i-t),o=.5*(s-e),a=n*n;return(2*e-2*i+r+o)*(n*a)+(-3*e+3*i-2*r-o)*a+r*n+e}function fp(n,t,e,i){return function goe(n,t){const e=1-n;return e*e*t}(n,t)+function _oe(n,t){return 2*(1-n)*n*t}(n,e)+function yoe(n,t){return n*n*t}(n,i)}function pp(n,t,e,i,s){return function voe(n,t){const e=1-n;return e*e*e*t}(n,t)+function boe(n,t){const e=1-n;return 3*e*e*n*t}(n,e)+function xoe(n,t){return 3*(1-n)*n*n*t}(n,i)+function woe(n,t){return n*n*n*t}(n,s)}W2.prototype.isCatmullRomCurve3=!0;class JC extends gr{constructor(t=new ne,e=new ne,i=new ne,s=new ne){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=s}getPoint(t,e=new ne){const i=e,s=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(pp(t,s.x,r.x,o.x,a.x),pp(t,s.y,r.y,o.y,a.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}JC.prototype.isCubicBezierCurve=!0;class q2 extends gr{constructor(t=new D,e=new D,i=new D,s=new D){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=s}getPoint(t,e=new D){const i=e,s=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(pp(t,s.x,r.x,o.x,a.x),pp(t,s.y,r.y,o.y,a.y),pp(t,s.z,r.z,o.z,a.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}q2.prototype.isCubicBezierCurve3=!0;class zy extends gr{constructor(t=new ne,e=new ne){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new ne){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const i=e||new ne;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}zy.prototype.isLineCurve=!0;class eS extends gr{constructor(t=new ne,e=new ne,i=new ne){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new ne){const i=e,s=this.v0,r=this.v1,o=this.v2;return i.set(fp(t,s.x,r.x,o.x),fp(t,s.y,r.y,o.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}eS.prototype.isQuadraticBezierCurve=!0;class tS extends gr{constructor(t=new D,e=new D,i=new D){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new D){const i=e,s=this.v0,r=this.v1,o=this.v2;return i.set(fp(t,s.x,r.x,o.x),fp(t,s.y,r.y,o.y),fp(t,s.z,r.z,o.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}tS.prototype.isQuadraticBezierCurve3=!0;class nS extends gr{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new ne){const i=e,s=this.points,r=(s.length-1)*t,o=Math.floor(r),a=r-o,l=s[0===o?o:o-1],c=s[o],d=s[o>s.length-2?s.length-1:o+1],u=s[o>s.length-3?s.length-1:o+2];return i.set($2(a,l.x,c.x,d.x,u.x),$2(a,l.y,c.y,d.y,u.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const s=t.points[e];this.points.push((new ne).fromArray(s))}return this}}nS.prototype.isSplineCurve=!0;var iS=Object.freeze({__proto__:null,ArcCurve:j2,CatmullRomCurve3:W2,CubicBezierCurve:JC,CubicBezierCurve3:q2,EllipseCurve:Vy,LineCurve:zy,LineCurve3:class Moe extends gr{constructor(t=new D,e=new D){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new D){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:eS,QuadraticBezierCurve3:tS,SplineCurve:nS});class Coe extends gr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new zy(e,t))}getPoint(t,e){const i=t*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=i){const o=s[r]-i,a=this.curves[r],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,s=this.curves.length;i<s;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let s=0,r=this.curves;s<r.length;s++){const o=r[s],l=o.getPoints(o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t);for(let c=0;c<l.length;c++){const d=l[c];i&&i.equals(d)||(e.push(d),i=d)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const s=t.curves[e];this.curves.push((new iS[s.type]).fromJSON(s))}return this}}class mp extends Coe{constructor(t){super(),this.type="Path",this.currentPoint=new ne,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new zy(this.currentPoint.clone(),new ne(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,s){const r=new eS(this.currentPoint.clone(),new ne(t,e),new ne(i,s));return this.curves.push(r),this.currentPoint.set(i,s),this}bezierCurveTo(t,e,i,s,r,o){const a=new JC(this.currentPoint.clone(),new ne(t,e),new ne(i,s),new ne(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new nS(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,s,r,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,i,s,r,o),this}absarc(t,e,i,s,r,o){return this.absellipse(t,e,i,i,s,r,o),this}ellipse(t,e,i,s,r,o,a,l){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,i,s,r,o,a,l),this}absellipse(t,e,i,s,r,o,a,l){const c=new Vy(t,e,i,s,r,o,a,l);if(this.curves.length>0){const u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}new D,new D,new D,new vi;class _a extends mp{constructor(t){super(t),this.uuid=js(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,s=this.holes.length;i<s;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++)this.holes.push(t.holes[e].clone());return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++)t.holes.push(this.holes[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const s=t.holes[e];this.holes.push((new mp).fromJSON(s))}return this}}function X2(n,t,e,i,s){let r,o;if(s===function zoe(n,t,e,i){let s=0;for(let r=t,o=e-i;r<e;r+=i)s+=(n[o]-n[r])*(n[r+1]+n[o+1]),o=r;return s}(n,t,e,i)>0)for(r=t;r<e;r+=i)o=Z2(r,n[r],n[r+1],o);else for(r=e-i;r>=t;r-=i)o=Z2(r,n[r],n[r+1],o);return o&&Xy(o,o.next)&&(vp(o),o=o.next),o}function gl(n,t){if(!n)return n;t||(t=n);let i,e=n;do{if(i=!1,e.steiner||!Xy(e,e.next)&&0!==jn(e.prev,e,e.next))e=e.next;else{if(vp(e),e=t=e.prev,e===e.next)break;i=!0}}while(i||e!==t);return t}function _p(n,t,e,i,s,r,o){if(!n)return;!o&&r&&function Loe(n,t,e,i){let s=n;do{null===s.z&&(s.z=rS(s.x,s.y,t,e,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,function Foe(n){let t,e,i,s,r,o,a,l,c=1;do{for(e=n,n=null,r=null,o=0;e;){for(o++,i=e,a=0,t=0;t<c&&(a++,i=i.nextZ,i);t++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||e.z<=i.z)?(s=e,e=e.nextZ,a--):(s=i,i=i.nextZ,l--),r?r.nextZ=s:n=s,s.prevZ=r,r=s;e=i}r.nextZ=null,c*=2}while(o>1)}(s)}(n,i,s,r);let l,c,a=n;for(;n.prev!==n.next;)if(l=n.prev,c=n.next,r?Eoe(n,i,s,r):Doe(n))t.push(l.i/e),t.push(n.i/e),t.push(c.i/e),vp(n),n=c.next,a=c.next;else if((n=c)===a){o?1===o?_p(n=Aoe(gl(n),t,e),t,e,i,s,r,2):2===o&&Toe(n,t,e,i,s,r):_p(gl(n),t,e,i,s,r,1);break}}function Doe(n){const t=n.prev,e=n,i=n.next;if(jn(t,e,i)>=0)return!1;let s=n.next.next;for(;s!==n.prev;){if(Gu(t.x,t.y,e.x,e.y,i.x,i.y,s.x,s.y)&&jn(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function Eoe(n,t,e,i){const s=n.prev,r=n,o=n.next;if(jn(s,r,o)>=0)return!1;const c=s.x>r.x?s.x>o.x?s.x:o.x:r.x>o.x?r.x:o.x,d=s.y>r.y?s.y>o.y?s.y:o.y:r.y>o.y?r.y:o.y,u=rS(s.x<r.x?s.x<o.x?s.x:o.x:r.x<o.x?r.x:o.x,s.y<r.y?s.y<o.y?s.y:o.y:r.y<o.y?r.y:o.y,t,e,i),h=rS(c,d,t,e,i);let f=n.prevZ,p=n.nextZ;for(;f&&f.z>=u&&p&&p.z<=h;){if(f!==n.prev&&f!==n.next&&Gu(s.x,s.y,r.x,r.y,o.x,o.y,f.x,f.y)&&jn(f.prev,f,f.next)>=0||(f=f.prevZ,p!==n.prev&&p!==n.next&&Gu(s.x,s.y,r.x,r.y,o.x,o.y,p.x,p.y)&&jn(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=u;){if(f!==n.prev&&f!==n.next&&Gu(s.x,s.y,r.x,r.y,o.x,o.y,f.x,f.y)&&jn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==n.prev&&p!==n.next&&Gu(s.x,s.y,r.x,r.y,o.x,o.y,p.x,p.y)&&jn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Aoe(n,t,e){let i=n;do{const s=i.prev,r=i.next.next;!Xy(s,r)&&K2(s,i,i.next,r)&&yp(s,r)&&yp(r,s)&&(t.push(s.i/e),t.push(i.i/e),t.push(r.i/e),vp(i),vp(i.next),i=n=r),i=i.next}while(i!==n);return gl(i)}function Toe(n,t,e,i,s,r){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Boe(o,a)){let l=Q2(o,a);return o=gl(o,o.next),l=gl(l,l.next),_p(o,t,e,i,s,r),void _p(l,t,e,i,s,r)}a=a.next}o=o.next}while(o!==n)}function Roe(n,t){return n.x-t.x}function Ioe(n,t){if(t=function Poe(n,t){let e=t;const i=n.x,s=n.y;let o,r=-1/0;do{if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){const h=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(h<=i&&h>r){if(r=h,h===i){if(s===e.y)return e;if(s===e.next.y)return e.next}o=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!o)return null;if(i===r)return o;const a=o,l=o.x,c=o.y;let u,d=1/0;e=o;do{i>=e.x&&e.x>=l&&i!==e.x&&Gu(s<c?i:r,s,l,c,s<c?r:i,s,e.x,e.y)&&(u=Math.abs(s-e.y)/(i-e.x),yp(e,n)&&(u<d||u===d&&(e.x>o.x||e.x===o.x&&Ooe(o,e)))&&(o=e,d=u)),e=e.next}while(e!==a);return o}(n,t),t){const e=Q2(t,n);gl(t,t.next),gl(e,e.next)}}function Ooe(n,t){return jn(n.prev,n,t.prev)<0&&jn(t.next,n,n.next)<0}function rS(n,t,e,i,s){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-e)*s)|n<<8))|n<<4))|n<<2))|n<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*s)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Noe(n){let t=n,e=n;do{(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next}while(t!==n);return e}function Gu(n,t,e,i,s,r,o,a){return(s-o)*(t-a)-(n-o)*(r-a)>=0&&(n-o)*(i-a)-(e-o)*(t-a)>=0&&(e-o)*(r-a)-(s-o)*(i-a)>=0}function Boe(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!function Voe(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&K2(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}(n,t)&&(yp(n,t)&&yp(t,n)&&function Hoe(n,t){let e=n,i=!1;const s=(n.x+t.x)/2,r=(n.y+t.y)/2;do{e.y>r!=e.next.y>r&&e.next.y!==e.y&&s<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next}while(e!==n);return i}(n,t)&&(jn(n.prev,n,t.prev)||jn(n,t.prev,t))||Xy(n,t)&&jn(n.prev,n,n.next)>0&&jn(t.prev,t,t.next)>0)}function jn(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function Xy(n,t){return n.x===t.x&&n.y===t.y}function K2(n,t,e,i){const s=Qy(jn(n,t,e)),r=Qy(jn(n,t,i)),o=Qy(jn(e,i,n)),a=Qy(jn(e,i,t));return!!(s!==r&&o!==a||0===s&&Ky(n,e,t)||0===r&&Ky(n,i,t)||0===o&&Ky(e,n,i)||0===a&&Ky(e,t,i))}function Ky(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function Qy(n){return n>0?1:n<0?-1:0}function yp(n,t){return jn(n.prev,n,n.next)<0?jn(n,t,n.next)>=0&&jn(n,n.prev,t)>=0:jn(n,t,n.prev)<0||jn(n,n.next,t)<0}function Q2(n,t){const e=new oS(n.i,n.x,n.y),i=new oS(t.i,t.x,t.y),s=n.next,r=t.prev;return n.next=t,t.prev=n,e.next=s,s.prev=e,i.next=e,e.prev=i,r.next=i,i.prev=r,i}function Z2(n,t,e,i){const s=new oS(n,t,e);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function vp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function oS(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ya{static area(t){const e=t.length;let i=0;for(let s=e-1,r=0;r<e;s=r++)i+=t[s].x*t[r].y-t[r].x*t[s].y;return.5*i}static isClockWise(t){return ya.area(t)<0}static triangulateShape(t,e){const i=[],s=[],r=[];J2(t),eB(i,t);let o=t.length;e.forEach(J2);for(let l=0;l<e.length;l++)s.push(o),o+=e[l].length,eB(i,e[l]);const a=function(n,t,e=2){const i=t&&t.length,s=i?t[0]*e:n.length;let r=X2(n,0,s,e,!0);const o=[];if(!r||r.next===r.prev)return o;let a,l,c,d,u,h,f;if(i&&(r=function koe(n,t,e,i){const s=[];let r,o,a,l,c;for(r=0,o=t.length;r<o;r++)a=t[r]*i,l=r<o-1?t[r+1]*i:n.length,c=X2(n,a,l,i,!1),c===c.next&&(c.steiner=!0),s.push(Noe(c));for(s.sort(Roe),r=0;r<s.length;r++)Ioe(s[r],e),e=gl(e,e.next);return e}(n,t,r,e)),n.length>80*e){a=c=n[0],l=d=n[1];for(let p=e;p<s;p+=e)u=n[p],h=n[p+1],u<a&&(a=u),h<l&&(l=h),u>c&&(c=u),h>d&&(d=h);f=Math.max(c-a,d-l),f=0!==f?1/f:0}return _p(r,o,e,a,l,f),o}(i,s);for(let l=0;l<a.length;l+=3)r.push(a.slice(l,l+3));return r}}function J2(n){const t=n.length;t>2&&n[t-1].equals(n[0])&&n.pop()}function eB(n,t){for(let e=0;e<t.length;e++)n.push(t[e].x),n.push(t[e].y)}class _l extends mt{constructor(t=new _a([new ne(.5,.5),new ne(-.5,.5),new ne(-.5,-.5),new ne(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,s=[],r=[];for(let a=0,l=t.length;a<l;a++)o(t[a]);function o(a){const l=[],c=void 0!==e.curveSegments?e.curveSegments:12,d=void 0!==e.steps?e.steps:1;let u=void 0!==e.depth?e.depth:1,h=void 0===e.bevelEnabled||e.bevelEnabled,f=void 0!==e.bevelThickness?e.bevelThickness:.2,p=void 0!==e.bevelSize?e.bevelSize:f-.1,m=void 0!==e.bevelOffset?e.bevelOffset:0,g=void 0!==e.bevelSegments?e.bevelSegments:3;const _=e.extrudePath,y=void 0!==e.UVGenerator?e.UVGenerator:Uoe;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=e.amount);let b,w,C,S,E,x=!1;_&&(b=_.getSpacedPoints(d),x=!0,h=!1,w=_.computeFrenetFrames(d,!1),C=new D,S=new D,E=new D),h||(g=0,f=0,p=0,m=0);const I=a.extractPoints(c);let F=I.shape;const M=I.holes;if(!ya.isClockWise(F)){F=F.reverse();for(let re=0,ae=M.length;re<ae;re++){const be=M[re];ya.isClockWise(be)&&(M[re]=be.reverse())}}const W=ya.triangulateShape(F,M),z=F;for(let re=0,ae=M.length;re<ae;re++)F=F.concat(M[re]);function U(re,ae,be){return ae||console.error("THREE.ExtrudeGeometry: vec does not exist"),ae.clone().multiplyScalar(be).add(re)}const O=F.length,H=W.length;function L(re,ae,be){let je,Oe,Dt;const pt=re.x-ae.x,at=re.y-ae.y,Tn=be.x-re.x,an=be.y-re.y,P=pt*pt+at*at;if(Math.abs(pt*an-at*Tn)>Number.EPSILON){const J=Math.sqrt(P),me=Math.sqrt(Tn*Tn+an*an),Ie=ae.x-at/J,ze=ae.y+pt/J,_e=((be.x-an/me-Ie)*an-(be.y+Tn/me-ze)*Tn)/(pt*an-at*Tn);je=Ie+pt*_e-re.x,Oe=ze+at*_e-re.y;const Ze=je*je+Oe*Oe;if(Ze<=2)return new ne(je,Oe);Dt=Math.sqrt(Ze/2)}else{let J=!1;pt>Number.EPSILON?Tn>Number.EPSILON&&(J=!0):pt<-Number.EPSILON?Tn<-Number.EPSILON&&(J=!0):Math.sign(at)===Math.sign(an)&&(J=!0),J?(je=-at,Oe=pt,Dt=Math.sqrt(P)):(je=pt,Oe=at,Dt=Math.sqrt(P/2))}return new ne(je/Dt,Oe/Dt)}const $=[];for(let re=0,ae=z.length,be=ae-1,je=re+1;re<ae;re++,be++,je++)be===ae&&(be=0),je===ae&&(je=0),$[re]=L(z[re],z[be],z[je]);const Z=[];let de,ie=$.concat();for(let re=0,ae=M.length;re<ae;re++){const be=M[re];de=[];for(let je=0,Oe=be.length,Dt=Oe-1,pt=je+1;je<Oe;je++,Dt++,pt++)Dt===Oe&&(Dt=0),pt===Oe&&(pt=0),de[je]=L(be[je],be[Dt],be[pt]);Z.push(de),ie=ie.concat(de)}for(let re=0;re<g;re++){const ae=re/g,be=f*Math.cos(ae*Math.PI/2),je=p*Math.sin(ae*Math.PI/2)+m;for(let Oe=0,Dt=z.length;Oe<Dt;Oe++){const pt=U(z[Oe],$[Oe],je);gt(pt.x,pt.y,-be)}for(let Oe=0,Dt=M.length;Oe<Dt;Oe++){const pt=M[Oe];de=Z[Oe];for(let at=0,Tn=pt.length;at<Tn;at++){const an=U(pt[at],de[at],je);gt(an.x,an.y,-be)}}}const Be=p+m;for(let re=0;re<O;re++){const ae=h?U(F[re],ie[re],Be):F[re];x?(S.copy(w.normals[0]).multiplyScalar(ae.x),C.copy(w.binormals[0]).multiplyScalar(ae.y),E.copy(b[0]).add(S).add(C),gt(E.x,E.y,E.z)):gt(ae.x,ae.y,0)}for(let re=1;re<=d;re++)for(let ae=0;ae<O;ae++){const be=h?U(F[ae],ie[ae],Be):F[ae];x?(S.copy(w.normals[re]).multiplyScalar(be.x),C.copy(w.binormals[re]).multiplyScalar(be.y),E.copy(b[re]).add(S).add(C),gt(E.x,E.y,E.z)):gt(be.x,be.y,u/d*re)}for(let re=g-1;re>=0;re--){const ae=re/g,be=f*Math.cos(ae*Math.PI/2),je=p*Math.sin(ae*Math.PI/2)+m;for(let Oe=0,Dt=z.length;Oe<Dt;Oe++){const pt=U(z[Oe],$[Oe],je);gt(pt.x,pt.y,u+be)}for(let Oe=0,Dt=M.length;Oe<Dt;Oe++){const pt=M[Oe];de=Z[Oe];for(let at=0,Tn=pt.length;at<Tn;at++){const an=U(pt[at],de[at],je);x?gt(an.x,an.y+b[d-1].y,b[d-1].x+be):gt(an.x,an.y,u+be)}}}function se(re,ae){let be=re.length;for(;--be>=0;){const je=be;let Oe=be-1;Oe<0&&(Oe=re.length-1);for(let Dt=0,pt=d+2*g;Dt<pt;Dt++){const at=O*Dt,Tn=O*(Dt+1);ot(ae+je+at,ae+Oe+at,ae+Oe+Tn,ae+je+Tn)}}}function gt(re,ae,be){l.push(re),l.push(ae),l.push(be)}function ut(re,ae,be){ye(re),ye(ae),ye(be);const je=s.length/3,Oe=y.generateTopUV(i,s,je-3,je-2,je-1);St(Oe[0]),St(Oe[1]),St(Oe[2])}function ot(re,ae,be,je){ye(re),ye(ae),ye(je),ye(ae),ye(be),ye(je);const Oe=s.length/3,Dt=y.generateSideWallUV(i,s,Oe-6,Oe-3,Oe-2,Oe-1);St(Dt[0]),St(Dt[1]),St(Dt[3]),St(Dt[1]),St(Dt[2]),St(Dt[3])}function ye(re){s.push(l[3*re+0]),s.push(l[3*re+1]),s.push(l[3*re+2])}function St(re){r.push(re.x),r.push(re.y)}(function Ve(){const re=s.length/3;if(h){let ae=0,be=O*ae;for(let je=0;je<H;je++){const Oe=W[je];ut(Oe[2]+be,Oe[1]+be,Oe[0]+be)}ae=d+2*g,be=O*ae;for(let je=0;je<H;je++){const Oe=W[je];ut(Oe[0]+be,Oe[1]+be,Oe[2]+be)}}else{for(let ae=0;ae<H;ae++){const be=W[ae];ut(be[2],be[1],be[0])}for(let ae=0;ae<H;ae++){const be=W[ae];ut(be[0]+O*d,be[1]+O*d,be[2]+O*d)}}i.addGroup(re,s.length/3-re,0)})(),function nt(){const re=s.length/3;let ae=0;se(z,ae),ae+=z.length;for(let be=0,je=M.length;be<je;be++){const Oe=M[be];se(Oe,ae),ae+=Oe.length}i.addGroup(re,s.length/3-re,1)}()}this.setAttribute("position",new qe(s,3)),this.setAttribute("uv",new qe(r,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function Goe(n,t,e){if(e.shapes=[],Array.isArray(n))for(let i=0,s=n.length;i<s;i++)e.shapes.push(n[i].uuid);else e.shapes.push(n.uuid);return void 0!==t.extrudePath&&(e.options.extrudePath=t.extrudePath.toJSON()),e}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const i=[];for(let r=0,o=t.shapes.length;r<o;r++)i.push(e[t.shapes[r]]);const s=t.options.extrudePath;return void 0!==s&&(t.options.extrudePath=(new iS[s.type]).fromJSON(s)),new _l(i,t.options)}}const Uoe={generateTopUV:function(n,t,e,i,s){const a=t[3*i],l=t[3*i+1],c=t[3*s],d=t[3*s+1];return[new ne(t[3*e],t[3*e+1]),new ne(a,l),new ne(c,d)]},generateSideWallUV:function(n,t,e,i,s,r){const o=t[3*e],a=t[3*e+1],l=t[3*e+2],c=t[3*i],d=t[3*i+1],u=t[3*i+2],h=t[3*s],f=t[3*s+1],p=t[3*s+2],m=t[3*r],g=t[3*r+1],_=t[3*r+2];return Math.abs(a-d)<Math.abs(o-c)?[new ne(o,1-l),new ne(c,1-u),new ne(h,1-p),new ne(m,1-_)]:[new ne(a,1-l),new ne(d,1-u),new ne(f,1-p),new ne(g,1-_)]}};class xp extends mt{constructor(t=new _a([new ne(0,.5),new ne(-.5,-.5),new ne(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const i=[],s=[],r=[],o=[];let a=0,l=0;if(!1===Array.isArray(t))c(t);else for(let d=0;d<t.length;d++)c(t[d]),this.addGroup(a,l,d),a+=l,l=0;function c(d){const u=s.length/3,h=d.extractPoints(e);let f=h.shape;const p=h.holes;!1===ya.isClockWise(f)&&(f=f.reverse());for(let g=0,_=p.length;g<_;g++){const y=p[g];!0===ya.isClockWise(y)&&(p[g]=y.reverse())}const m=ya.triangulateShape(f,p);for(let g=0,_=p.length;g<_;g++)f=f.concat(p[g]);for(let g=0,_=f.length;g<_;g++){const y=f[g];s.push(y.x,y.y,0),r.push(0,0,1),o.push(y.x,y.y)}for(let g=0,_=m.length;g<_;g++){const y=m[g];i.push(y[0]+u,y[1]+u,y[2]+u),l+=3}}this.setIndex(i),this.setAttribute("position",new qe(s,3)),this.setAttribute("normal",new qe(r,3)),this.setAttribute("uv",new qe(o,2))}toJSON(){const t=super.toJSON();return function joe(n,t){if(t.shapes=[],Array.isArray(n))for(let e=0,i=n.length;e<i;e++)t.shapes.push(n[e].uuid);else t.shapes.push(n.uuid);return t}(this.parameters.shapes,t)}static fromJSON(t,e){const i=[];for(let s=0,r=t.shapes.length;s<r;s++)i.push(e[t.shapes[s]]);return new xp(i,t.curveSegments)}}class sB extends Gn{constructor(t){super(),this.type="ShadowMaterial",this.color=new we(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}sB.prototype.isShadowMaterial=!0;class rB extends Qr{constructor(t){super(t),this.type="RawShaderMaterial"}}rB.prototype.isRawShaderMaterial=!0;class ju extends Gn{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new we(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new we(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}ju.prototype.isMeshStandardMaterial=!0;class yl extends ju{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ne(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ai(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenColor=new we(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new we(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new we(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}yl.prototype.isMeshPhysicalMaterial=!0;class oB extends Gn{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new we(16777215),this.specular=new we(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new we(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}oB.prototype.isMeshPhongMaterial=!0;class aB extends Gn{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new we(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new we(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}aB.prototype.isMeshToonMaterial=!0;class lB extends Gn{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}lB.prototype.isMeshNormalMaterial=!0;class cB extends Gn{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new we(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new we(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}cB.prototype.isMeshLambertMaterial=!0;class dB extends Gn{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new we(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}dB.prototype.isMeshMatcapMaterial=!0;class uB extends Wi{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}uB.prototype.isLineDashedMaterial=!0;const Woe={ShadowMaterial:sB,SpriteMaterial:GC,RawShaderMaterial:rB,ShaderMaterial:Qr,PointsMaterial:Fy,MeshPhysicalMaterial:yl,MeshStandardMaterial:ju,MeshPhongMaterial:oB,MeshToonMaterial:aB,MeshNormalMaterial:lB,MeshLambertMaterial:cB,MeshDepthMaterial:HC,MeshDistanceMaterial:zC,MeshBasicMaterial:Ys,MeshMatcapMaterial:dB,LineDashedMaterial:uB,LineBasicMaterial:Wi,Material:Gn};Gn.fromType=function(n){return new Woe[n]};const Nn={arraySlice:function(n,t,e){return Nn.isTypedArray(n)?new n.constructor(n.subarray(t,void 0!==e?e:n.length)):n.slice(t,e)},convertArray:function(n,t,e){return!n||!e&&n.constructor===t?n:"number"==typeof t.BYTES_PER_ELEMENT?new t(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const e=n.length,i=new Array(e);for(let s=0;s!==e;++s)i[s]=s;return i.sort(function t(s,r){return n[s]-n[r]}),i},sortedArray:function(n,t,e){const i=n.length,s=new n.constructor(i);for(let r=0,o=0;o!==i;++r){const a=e[r]*t;for(let l=0;l!==t;++l)s[o++]=n[a+l]}return s},flattenJSON:function(n,t,e,i){let s=1,r=n[0];for(;void 0!==r&&void 0===r[i];)r=n[s++];if(void 0===r)return;let o=r[i];if(void 0!==o)if(Array.isArray(o))do{o=r[i],void 0!==o&&(t.push(r.time),e.push.apply(e,o)),r=n[s++]}while(void 0!==r);else if(void 0!==o.toArray)do{o=r[i],void 0!==o&&(t.push(r.time),o.toArray(e,e.length)),r=n[s++]}while(void 0!==r);else do{o=r[i],void 0!==o&&(t.push(r.time),e.push(o)),r=n[s++]}while(void 0!==r)},subclip:function(n,t,e,i,s=30){const r=n.clone();r.name=t;const o=[];for(let l=0;l<r.tracks.length;++l){const c=r.tracks[l],d=c.getValueSize(),u=[],h=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*s;if(!(p<e||p>=i)){u.push(c.times[f]);for(let m=0;m<d;++m)h.push(c.values[f*d+m])}}0!==u.length&&(c.times=Nn.convertArray(u,c.times.constructor),c.values=Nn.convertArray(h,c.values.constructor),o.push(c))}r.tracks=o;let a=1/0;for(let l=0;l<r.tracks.length;++l)a>r.tracks[l].times[0]&&(a=r.tracks[l].times[0]);for(let l=0;l<r.tracks.length;++l)r.tracks[l].shift(-1*a);return r.resetDuration(),r},makeClipAdditive:function(n,t=0,e=n,i=30){i<=0&&(i=30);const s=e.tracks.length,r=t/i;for(let o=0;o<s;++o){const a=e.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(void 0===c)continue;let d=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=u/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const p=a.times.length-1;let m;if(r<=a.times[0])m=Nn.arraySlice(a.values,d,u-d);else if(r>=a.times[p]){const _=p*u+d;m=Nn.arraySlice(a.values,_,_+u-d)}else{const _=a.createInterpolant(),y=d,b=u-d;_.evaluate(r),m=Nn.arraySlice(_.resultBuffer,y,b)}"quaternion"===l&&(new Pi).fromArray(m).normalize().conjugate().toArray(m);const g=c.times.length;for(let _=0;_<g;++_){const y=_*f+h;if("quaternion"===l)Pi.multiplyQuaternionsFlat(c.values,y,m,0,c.values,y);else{const b=f-2*h;for(let x=0;x<b;++x)c.values[y+x]-=m[x]}}}return n.blendMode=2501,n}};class va{constructor(t,e,i,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==s?s:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,s=e[i],r=e[i-1];e:{t:{let o;n:{i:if(!(t<s)){for(let a=i+2;;){if(void 0===s){if(t<r)break i;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,r)}if(i===a)break;if(r=s,s=e[++i],t<s)break t}o=e.length;break n}if(t>=r)break e;{const a=e[1];t<a&&(i=2,r=a);for(let l=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,s);if(i===l)break;if(s=r,r=e[--i-1],t>=r)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;t<e[a]?o=a:i=a+1}if(s=e[i],r=e[i-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,s);if(void 0===s)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,s)}return this.interpolate_(i,r,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=t*s;for(let o=0;o!==s;++o)e[o]=i[r+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}va.prototype.beforeStart_=va.prototype.copySampleValue_,va.prototype.afterEnd_=va.prototype.copySampleValue_;class $oe extends va{constructor(t,e,i,s){super(t,e,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:mu,endingEnd:mu}}intervalChanged_(t,e,i){const s=this.parameterPositions;let r=t-2,o=t+1,a=s[r],l=s[o];if(void 0===a)switch(this.getSettings_().endingStart){case gu:r=t,a=2*e-i;break;case 2402:r=s.length-2,a=e+s[r]-s[r+1];break;default:r=t,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case gu:o=t,l=2*i-e;break;case 2402:o=1,l=i+s[1]-s[0];break;default:o=t-1,l=e}const c=.5*(i-e),d=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(l-i),this._offsetPrev=r*d,this._offsetNext=o*d}interpolate_(t,e,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-e)/(s-e),m=p*p,g=m*p,_=-h*g+2*h*m-h*p,y=(1+h)*g+(-1.5-2*h)*m+(-.5+h)*p+1,b=(-1-f)*g+(1.5+f)*m+.5*p,x=f*g-f*m;for(let w=0;w!==a;++w)r[w]=_*o[d+w]+y*o[c+w]+b*o[l+w]+x*o[u+w];return r}}class hB extends va{constructor(t,e,i,s){super(t,e,i,s)}interpolate_(t,e,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,d=(i-e)/(s-e),u=1-d;for(let h=0;h!==a;++h)r[h]=o[c+h]*u+o[l+h]*d;return r}}class qoe extends va{constructor(t,e,i,s){super(t,e,i,s)}interpolate_(t){return this.copySampleValue_(t-1)}}class Do{constructor(t,e,i,s){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Nn.convertArray(e,this.TimeBufferType),this.values=Nn.convertArray(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:Nn.convertArray(t.times,Array),values:Nn.convertArray(t.values,Array)};const s=t.getInterpolation();s!==t.DefaultInterpolation&&(i.interpolation=s)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new qoe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new hB(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new $oe(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Kf:e=this.InterpolantFactoryMethodDiscrete;break;case pu:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Kf;case this.InterpolantFactoryMethodLinear:return pu;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let i=0,s=e.length;i!==s;++i)e[i]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let i=0,s=e.length;i!==s;++i)e[i]*=t}return this}trim(t,e){const i=this.times,s=i.length;let r=0,o=s-1;for(;r!==s&&i[r]<t;)++r;for(;-1!==o&&i[o]>e;)--o;if(++o,0!==r||o!==s){r>=o&&(o=Math.max(o,1),r=o-1);const a=this.getValueSize();this.times=Nn.arraySlice(i,r,o),this.values=Nn.arraySlice(this.values,r*a,o*a)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,s=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==r;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),t=!1;break}o=l}if(void 0!==s&&Nn.isTypedArray(s))for(let a=0,l=s.length;a!==l;++a){const c=s[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}return t}optimize(){const t=Nn.arraySlice(this.times),e=Nn.arraySlice(this.values),i=this.getValueSize(),s=2302===this.getInterpolation(),r=t.length-1;let o=1;for(let a=1;a<r;++a){let l=!1;const c=t[a];if(c!==t[a+1]&&(1!==a||c!==t[0]))if(s)l=!0;else{const u=a*i,h=u-i,f=u+i;for(let p=0;p!==i;++p){const m=e[u+p];if(m!==e[h+p]||m!==e[f+p]){l=!0;break}}}if(l){if(a!==o){t[o]=t[a];const u=a*i,h=o*i;for(let f=0;f!==i;++f)e[h+f]=e[u+f]}++o}}if(r>0){t[o]=t[r];for(let a=r*i,l=o*i,c=0;c!==i;++c)e[l+c]=e[a+c];++o}return o!==t.length?(this.times=Nn.arraySlice(t,0,o),this.values=Nn.arraySlice(e,0,o*i)):(this.times=t,this.values=e),this}clone(){const t=Nn.arraySlice(this.times,0),e=Nn.arraySlice(this.values,0),s=new(0,this.constructor)(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}}Do.prototype.TimeBufferType=Float32Array,Do.prototype.ValueBufferType=Float32Array,Do.prototype.DefaultInterpolation=pu;class Wu extends Do{}Wu.prototype.ValueTypeName="bool",Wu.prototype.ValueBufferType=Array,Wu.prototype.DefaultInterpolation=Kf,Wu.prototype.InterpolantFactoryMethodLinear=void 0,Wu.prototype.InterpolantFactoryMethodSmooth=void 0;class fB extends Do{}fB.prototype.ValueTypeName="color";class Mp extends Do{}Mp.prototype.ValueTypeName="number";class Yoe extends va{constructor(t,e,i,s){super(t,e,i,s)}interpolate_(t,e,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-e)/(s-e);let c=t*a;for(let d=c+a;c!==d;c+=4)Pi.slerpFlat(r,0,o,c-a,o,c,l);return r}}class Sc extends Do{InterpolantFactoryMethodLinear(t){return new Yoe(this.times,this.values,this.getValueSize(),t)}}Sc.prototype.ValueTypeName="quaternion",Sc.prototype.DefaultInterpolation=pu,Sc.prototype.InterpolantFactoryMethodSmooth=void 0;class $u extends Do{}$u.prototype.ValueTypeName="string",$u.prototype.ValueBufferType=Array,$u.prototype.DefaultInterpolation=Kf,$u.prototype.InterpolantFactoryMethodLinear=void 0,$u.prototype.InterpolantFactoryMethodSmooth=void 0;class Cp extends Do{}Cp.prototype.ValueTypeName="vector";class Sp{constructor(t,e=-1,i,s=2500){this.name=t,this.tracks=i,this.duration=e,this.blendMode=s,this.uuid=js(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],i=t.tracks,s=1/(t.fps||1);for(let o=0,a=i.length;o!==a;++o)e.push(Koe(i[o]).scale(s));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],i=t.tracks,s={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,o=i.length;r!==o;++r)e.push(Do.toJSON(i[r]));return s}static CreateFromMorphTargetSequence(t,e,i,s){const r=e.length,o=[];for(let a=0;a<r;a++){let l=[],c=[];l.push((a+r-1)%r,a,(a+1)%r),c.push(0,1,0);const d=Nn.getKeyframeOrder(l);l=Nn.sortedArray(l,1,d),c=Nn.sortedArray(c,1,d),!s&&0===l[0]&&(l.push(r),c.push(c[0])),o.push(new Mp(".morphTargetInfluences["+e[a].name+"]",l,c).scale(1/i))}return new this(t,-1,o)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const s=t;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===e)return i[s];return null}static CreateClipsFromMorphTargetSequences(t,e,i){const s={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,l=t.length;a<l;a++){const c=t[a],d=c.name.match(r);if(d&&d.length>1){const u=d[1];let h=s[u];h||(s[u]=h=[]),h.push(c)}}const o=[];for(const a in s)o.push(this.CreateFromMorphTargetSequence(a,s[a],e,i));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(u,h,f,p,m){if(0!==f.length){const g=[],_=[];Nn.flattenJSON(f,g,_,p),0!==g.length&&m.push(new u(h,g,_))}},s=[],r=t.name||"default",o=t.fps||30,a=t.blendMode;let l=t.length||-1;const c=t.hierarchy||[];for(let u=0;u<c.length;u++){const h=c[u].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)f[h[p].morphTargets[m]]=-1;for(const m in f){const g=[],_=[];for(let y=0;y!==h[p].morphTargets.length;++y){const b=h[p];g.push(b.time),_.push(b.morphTarget===m?1:0)}s.push(new Mp(".morphTargetInfluence["+m+"]",g,_))}l=f.length*o}else{const f=".bones["+e[u].name+"]";i(Cp,f+".position",h,"pos",s),i(Sc,f+".quaternion",h,"rot",s),i(Cp,f+".scale",h,"scl",s)}}return 0===s.length?null:new this(r,l,s,a)}resetDuration(){let e=0;for(let i=0,s=this.tracks.length;i!==s;++i){const r=this.tracks[i];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Koe(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function Xoe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Mp;case"vector":case"vector2":case"vector3":case"vector4":return Cp;case"color":return fB;case"quaternion":return Sc;case"bool":case"boolean":return Wu;case"string":return $u}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const e=[],i=[];Nn.flattenJSON(n.keys,e,i,"value"),n.times=e,n.values=i}return void 0!==t.parse?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}const qu={enabled:!1,files:{},add:function(n,t){!1!==this.enabled&&(this.files[n]=t)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class aS{constructor(t,e,i){const s=this;let l,r=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(d){a++,!1===r&&void 0!==s.onStart&&s.onStart(d,o,a),r=!0},this.itemEnd=function(d){o++,void 0!==s.onProgress&&s.onProgress(d,o,a),o===a&&(r=!1,void 0!==s.onLoad&&s.onLoad())},this.itemError=function(d){void 0!==s.onError&&s.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,u){return c.push(d,u),this},this.removeHandler=function(d){const u=c.indexOf(d);return-1!==u&&c.splice(u,2),this},this.getHandler=function(d){for(let u=0,h=c.length;u<h;u+=2){const f=c[u],p=c[u+1];if(f.global&&(f.lastIndex=0),f.test(d))return p}return null}}}const Qoe=new aS;class Eo{constructor(t){this.manager=void 0!==t?t:Qoe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(s,r){i.load(t,s,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const ba={};class Ao extends Eo{constructor(t){super(t)}load(t,e,i,s){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=qu.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(void 0!==ba[t])return void ba[t].push({onLoad:e,onProgress:i,onError:s});ba[t]=[],ba[t].push({onLoad:e,onProgress:i,onError:s});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===c.body||void 0===c.body.getReader)return c;const d=ba[t],u=c.body.getReader(),h=c.headers.get("Content-Length"),f=h?parseInt(h):0,p=0!==f;let m=0;const g=new ReadableStream({start(_){!function y(){u.read().then(({done:b,value:x})=>{if(b)_.close();else{m+=x.byteLength;const w=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let C=0,S=d.length;C<S;C++){const E=d[C];E.onProgress&&E.onProgress(w)}_.enqueue(x),y()}})}()}});return new Response(g)}throw Error(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>(new DOMParser).parseFromString(d,a));case"json":return c.json();default:if(void 0===a)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{qu.add(t,c);const d=ba[t];delete ba[t];for(let u=0,h=d.length;u<h;u++){const f=d[u];f.onLoad&&f.onLoad(c)}}).catch(c=>{const d=ba[t];if(void 0===d)throw this.manager.itemError(t),c;delete ba[t];for(let u=0,h=d.length;u<h;u++){const f=d[u];f.onError&&f.onError(c)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class sv extends Eo{constructor(t){super(t)}load(t,e,i,s){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=qu.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;const a=tp("img");function l(){d(),qu.add(t,this),e&&e(this),r.manager.itemEnd(t)}function c(u){d(),s&&s(u),r.manager.itemError(t),r.manager.itemEnd(t)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a}}class Zoe extends Eo{constructor(t){super(t)}load(t,e,i,s){const r=new rp,o=new sv(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(t[c],function(d){r.images[c]=d,a++,6===a&&(r.needsUpdate=!0,e&&e(r))},void 0,s)}for(let c=0;c<t.length;++c)l(c);return r}}class Joe extends Eo{constructor(t){super(t)}load(t,e,i,s){const r=this,o=new Hu,a=new Ao(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(t,function(l){const c=r.parse(l);!c||(void 0!==c.image?o.image=c.image:void 0!==c.data&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=void 0!==c.wrapS?c.wrapS:bs,o.wrapT=void 0!==c.wrapT?c.wrapT:bs,o.magFilter=void 0!==c.magFilter?c.magFilter:Sn,o.minFilter=void 0!==c.minFilter?c.minFilter:Sn,o.anisotropy=void 0!==c.anisotropy?c.anisotropy:1,void 0!==c.encoding&&(o.encoding=c.encoding),void 0!==c.flipY&&(o.flipY=c.flipY),void 0!==c.format&&(o.format=c.format),void 0!==c.type&&(o.type=c.type),void 0!==c.mipmaps&&(o.mipmaps=c.mipmaps,o.minFilter=nl),1===c.mipmapCount&&(o.minFilter=Sn),void 0!==c.generateMipmaps&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,e&&e(o,c))},i,s),o}}class pB extends Eo{constructor(t){super(t)}load(t,e,i,s){const r=new ss,o=new sv(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(a){r.image=a,r.needsUpdate=!0,void 0!==e&&e(r)},i,s),r}}class To extends on{constructor(t,e=1){super(),this.type="Light",this.color=new we(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}To.prototype.isLight=!0;class lS extends To{constructor(t,e,i){super(t,i),this.type="HemisphereLight",this.position.copy(on.DefaultUp),this.updateMatrix(),this.groundColor=new we(e)}copy(t){return To.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}lS.prototype.isHemisphereLight=!0;const mB=new $e,gB=new D,_B=new D;class cS{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ne(512,512),this.map=null,this.mapPass=null,this.matrix=new $e,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new xy,this._frameExtents=new ne(1,1),this._viewportCount=1,this._viewports=[new hn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;gB.setFromMatrixPosition(t.matrixWorld),e.position.copy(gB),_B.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(_B),e.updateMatrixWorld(),mB.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mB),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e.projectionMatrix),i.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class yB extends cS{constructor(){super(new Li(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,i=2*Jf*t.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;(i!==e.fov||s!==e.aspect||r!==e.far)&&(e.fov=i,e.aspect=s,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}yB.prototype.isSpotLightShadow=!0;class dS extends To{constructor(t,e,i=0,s=Math.PI/3,r=0,o=1){super(t,e),this.type="SpotLight",this.position.copy(on.DefaultUp),this.updateMatrix(),this.target=new on,this.distance=i,this.angle=s,this.penumbra=r,this.decay=o,this.shadow=new yB}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}dS.prototype.isSpotLight=!0;const vB=new $e,Dp=new D,uS=new D;class bB extends cS{constructor(){super(new Li(90,1,.5,500)),this._frameExtents=new ne(4,2),this._viewportCount=6,this._viewports=[new hn(2,1,1,1),new hn(0,1,1,1),new hn(3,1,1,1),new hn(1,1,1,1),new hn(3,0,1,1),new hn(1,0,1,1)],this._cubeDirections=[new D(1,0,0),new D(-1,0,0),new D(0,0,1),new D(0,0,-1),new D(0,1,0),new D(0,-1,0)],this._cubeUps=[new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,0,1),new D(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,s=this.matrix,r=t.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),Dp.setFromMatrixPosition(t.matrixWorld),i.position.copy(Dp),uS.copy(i.position),uS.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(uS),i.updateMatrixWorld(),s.makeTranslation(-Dp.x,-Dp.y,-Dp.z),vB.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vB)}}bB.prototype.isPointLightShadow=!0;class hS extends To{constructor(t,e,i=0,s=1){super(t,e),this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new bB}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}hS.prototype.isPointLight=!0;class xB extends cS{constructor(){super(new ap(-5,5,5,-5,.5,500))}}xB.prototype.isDirectionalLightShadow=!0;class fS extends To{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(on.DefaultUp),this.updateMatrix(),this.target=new on,this.shadow=new xB}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}fS.prototype.isDirectionalLight=!0;class pS extends To{constructor(t,e){super(t,e),this.type="AmbientLight"}}pS.prototype.isAmbientLight=!0;(class wB extends To{constructor(t,e,i=10,s=10){super(t,e),this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}).prototype.isRectAreaLight=!0;class MB{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new D)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const i=t.x,s=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*s),e.addScaledVector(o[2],.488603*r),e.addScaledVector(o[3],.488603*i),e.addScaledVector(o[4],i*s*1.092548),e.addScaledVector(o[5],s*r*1.092548),e.addScaledVector(o[6],.315392*(3*r*r-1)),e.addScaledVector(o[7],i*r*1.092548),e.addScaledVector(o[8],.546274*(i*i-s*s)),e}getIrradianceAt(t,e){const i=t.x,s=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*s),e.addScaledVector(o[2],1.023328*r),e.addScaledVector(o[3],1.023328*i),e.addScaledVector(o[4],.858086*i*s),e.addScaledVector(o[5],.858086*s*r),e.addScaledVector(o[6],.743125*r*r-.247708),e.addScaledVector(o[7],.858086*i*r),e.addScaledVector(o[8],.429043*(i*i-s*s)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(t,e+3*s);return this}toArray(t=[],e=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(t,e+3*s);return t}static getBasisAt(t,e){const i=t.x,s=t.y,r=t.z;e[0]=.282095,e[1]=.488603*s,e[2]=.488603*r,e[3]=.488603*i,e[4]=1.092548*i*s,e[5]=1.092548*s*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*i*r,e[8]=.546274*(i*i-s*s)}}MB.prototype.isSphericalHarmonics3=!0;class rv extends To{constructor(t=new MB,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}rv.prototype.isLightProbe=!0;class ko{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let i=0,s=t.length;i<s;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(i){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}(class CB extends mt{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}).prototype.isInstancedBufferGeometry=!0;class EB extends Eo{constructor(t){super(t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,s){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=qu.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(l){qu.add(t,l),e&&e(l),r.manager.itemEnd(t)}).catch(function(l){s&&s(l),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)}}let ov;EB.prototype.isImageBitmapLoader=!0;class iae extends Eo{constructor(t){super(t)}load(t,e,i,s){const r=this,o=new Ao(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(a){try{const l=a.slice(0);(void 0===ov&&(ov=new(window.AudioContext||window.webkitAudioContext)),ov).decodeAudioData(l,function(d){e(d)})}catch(l){s?s(l):console.error(l),r.manager.itemError(t)}},i,s)}}(class sae extends rv{constructor(t,e,i=1){super(void 0,i);const s=(new we).set(t),r=(new we).set(e),o=new D(s.r,s.g,s.b),a=new D(r.r,r.g,r.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}).prototype.isHemisphereLightProbe=!0,class rae extends rv{constructor(t,e=1){super(void 0,e);const i=(new we).set(t);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class RB{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=IB(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=IB();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function IB(){return("undefined"==typeof performance?Date:performance).now()}class dae{constructor(t,e,i){let s,r,o;switch(this.binding=t,this.valueSize=i,e){case"quaternion":s=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:s=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const i=this.buffer,s=this.valueSize,r=t*s+s;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==s;++a)i[r+a]=i[a];o=e}else o+=e,this._mixBufferRegion(i,r,0,e/o,s);this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,i=this.valueSize,s=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,s,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,i=this.buffer,s=t*e+e,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1&&this._mixBufferRegion(i,s,e*this._origIndex,1-r,e),o>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*e,1,e);for(let l=e,c=e+e;l!==c;++l)if(i[l]!==i[l+e]){a.setValue(i,s);break}}saveOriginalState(){const e=this.buffer,i=this.valueSize,s=i*this._origIndex;this.binding.getValue(e,s);for(let r=i,o=s;r!==o;++r)e[r]=e[s+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,s,r){if(s>=.5)for(let o=0;o!==r;++o)t[e+o]=t[i+o]}_slerp(t,e,i,s){Pi.slerpFlat(t,e,t,e,t,i,s)}_slerpAdditive(t,e,i,s,r){const o=this._workIndex*r;Pi.multiplyQuaternionsFlat(t,o,t,e,t,i),Pi.slerpFlat(t,e,t,e,t,o,s)}_lerp(t,e,i,s,r){const o=1-s;for(let a=0;a!==r;++a){const l=e+a;t[l]=t[l]*o+t[i+a]*s}}_lerpAdditive(t,e,i,s,r){for(let o=0;o!==r;++o){const a=e+o;t[a]=t[a]+t[i+o]*s}}}const mS="\\[\\]\\.:\\/",uae=new RegExp("["+mS+"]","g"),gS="[^"+mS+"]",hae="[^"+mS.replace("\\.","")+"]",fae=/((?:WC+[\/:])*)/.source.replace("WC",gS),pae=/(WCOD+)?/.source.replace("WCOD",hae),mae=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",gS),gae=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",gS),_ae=new RegExp("^"+fae+pae+mae+gae+"$"),yae=["material","materials","bones"];class vae{constructor(t,e,i){const s=i||Dn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,s)}getValue(t,e){this.bind();const s=this._bindings[this._targetGroup.nCachedObjects_];void 0!==s&&s.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=i.length;s!==r;++s)i[s].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}let Dn=(()=>{class n{constructor(e,i,s){this.path=i,this.parsedPath=s||n.parseTrackName(i),this.node=n.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,s){return e&&e.isAnimationObjectGroup?new n.Composite(e,i,s):new n(e,i,s)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(uae,"")}static parseTrackName(e){const i=_ae.exec(e);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const s={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},r=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const o=s.nodeName.substring(r+1);-1!==yae.indexOf(o)&&(s.nodeName=s.nodeName.substring(0,r),s.objectName=o)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return s}static findNode(e,i){if(void 0===i||""===i||"."===i||-1===i||i===e.name||i===e.uuid)return e;if(e.skeleton){const s=e.skeleton.getBoneByName(i);if(void 0!==s)return s}if(e.children){const s=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=s(l.children);if(c)return c}return null},r=s(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){const s=this.resolvedProperty;for(let r=0,o=s.length;r!==o;++r)e[i++]=s[r]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){const s=this.resolvedProperty;for(let r=0,o=s.length;r!==o;++r)s[r]=e[i++]}_setValue_array_setNeedsUpdate(e,i){const s=this.resolvedProperty;for(let r=0,o=s.length;r!==o;++r)s[r]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){const s=this.resolvedProperty;for(let r=0,o=s.length;r!==o;++r)s[r]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node;const i=this.parsedPath,s=i.objectName,r=i.propertyName;let o=i.propertyIndex;if(e||(e=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(s){let d=i.objectIndex;switch(s){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===d){d=u;break}break;default:if(void 0===e[s])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[s]}if(void 0!==d){if(void 0===e[d])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[d]}}const a=e[r];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+r+" but it wasn't found.",e);let l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=vae,n})();Dn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Dn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Dn.prototype.GetterByBindingType=[Dn.prototype._getValue_direct,Dn.prototype._getValue_array,Dn.prototype._getValue_arrayElement,Dn.prototype._getValue_toArray],Dn.prototype.SetterByBindingTypeAndVersioning=[[Dn.prototype._setValue_direct,Dn.prototype._setValue_direct_setNeedsUpdate,Dn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_array,Dn.prototype._setValue_array_setNeedsUpdate,Dn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_arrayElement,Dn.prototype._setValue_arrayElement_setNeedsUpdate,Dn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_fromArray,Dn.prototype._setValue_fromArray_setNeedsUpdate,Dn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class xae{constructor(t,e,i=null,s=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=s;const r=e.tracks,o=r.length,a=new Array(o),l={endingStart:mu,endingEnd:mu};for(let c=0;c!==o;++c){const d=r[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){const s=this._clip.duration,r=t._clip.duration,a=s/r;t.warp(1,r/s,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const s=this._mixer,r=s.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=s._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=r,l[1]=r+i,c[0]=t/o,c[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,s){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const l=(t-r)*i;if(l<0||0===i)return;this._startTime=null,e=i*l}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(o),c[d].accumulateAdditive(a);else for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(o),c[d].accumulate(s,a)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const i=this._weightInterpolant;if(null!==i){const s=i.evaluate(t)[0];e*=s,t>i.parameterPositions[1]&&(this.stopFading(),0===s&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,i=this.loop;let s=this.time+t,r=this._loopCount;const o=2202===i;if(0===t)return-1===r?s:o&&1==(1&r)?e-s:s;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=e)s=e;else{if(!(s<0)){this.time=s;break e}s=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),s>=e||s<0){const a=Math.floor(s/e);s-=e*a,r+=Math.abs(a);const l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=t>0?e:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===l){const c=t<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=s;if(o&&1==(1&r))return e-s}return s}_setEndings(t,e,i){const s=this._interpolantSettings;i?(s.endingStart=gu,s.endingEnd=gu):(s.endingStart=t?this.zeroSlopeAtStart?gu:mu:2402,s.endingEnd=e?this.zeroSlopeAtEnd?gu:mu:2402)}_scheduleFading(t,e,i){const s=this._mixer,r=s.time;let o=this._weightInterpolant;null===o&&(o=s._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=r,l[0]=e,a[1]=r+t,l[1]=i,this}}class LB extends il{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const i=t._localRoot||this._root,s=t._clip.tracks,r=s.length,o=t._propertyBindings,a=t._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let d=c[l];void 0===d&&(d={},c[l]=d);for(let u=0;u!==r;++u){const h=s[u],f=h.name;let p=d[f];if(void 0!==p)++p.referenceCount,o[u]=p;else{if(p=o[u],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}p=new dae(Dn.create(i,f,e&&e._propertyBindings[u].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[u]=p}a[u].resultBuffer=p.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const i=(t._localRoot||this._root).uuid,s=t._clip.uuid,r=this._actionsByClip[s];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,s,i)}const e=t._propertyBindings;for(let i=0,s=e.length;i!==s;++i){const r=e[i];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let i=0,s=e.length;i!==s;++i){const r=e[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,i){const s=this._actions,r=this._actionsByClip;let o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{const a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=s.length,s.push(t),o.actionByRoot[i]=t}_removeInactiveAction(t){const e=this._actions,i=e[e.length-1],s=t._cacheIndex;i._cacheIndex=s,e[s]=i,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,o=this._actionsByClip,a=o[r],l=a.knownActions,c=l[l.length-1],d=t._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===l.length&&delete o[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let i=0,s=e.length;i!==s;++i){const r=e[i];0==--r.referenceCount&&this._removeInactiveBinding(r)}}_lendAction(t){const e=this._actions,i=t._cacheIndex,s=this._nActiveActions++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=i,e[i]=r}_takeBackAction(t){const e=this._actions,i=t._cacheIndex,s=--this._nActiveActions,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=i,e[i]=r}_addInactiveBinding(t,e,i){const s=this._bindingsByRootAndName,r=this._bindings;let o=s[e];void 0===o&&(o={},s[e]=o),o[i]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,i=t.binding,s=i.rootNode.uuid,r=i.path,o=this._bindingsByRootAndName,a=o[s],l=e[e.length-1],c=t._cacheIndex;l._cacheIndex=c,e[c]=l,e.pop(),delete a[r],0===Object.keys(a).length&&delete o[s]}_lendBinding(t){const e=this._bindings,i=t._cacheIndex,s=this._nActiveBindings++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=i,e[i]=r}_takeBackBinding(t){const e=this._bindings,i=t._cacheIndex,s=--this._nActiveBindings,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=i,e[i]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return void 0===i&&(i=new hB(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){const e=this._controlInterpolants,i=t.__cacheIndex,s=--this._nActiveControlInterpolants,r=e[s];t.__cacheIndex=s,e[s]=t,r.__cacheIndex=i,e[i]=r}clipAction(t,e,i){const s=e||this._root,r=s.uuid;let o="string"==typeof t?Sp.findByName(s,t):t;const a=null!==o?o.uuid:t,l=this._actionsByClip[a];let c=null;if(void 0===i&&(i=null!==o?o.blendMode:2500),void 0!==l){const u=l.actionByRoot[r];if(void 0!==u&&u.blendMode===i)return u;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const d=new xae(this,o,e,i);return this._bindAction(d,c),this._addInactiveAction(d,a,r),d}existingAction(t,e){const i=e||this._root,s=i.uuid,r="string"==typeof t?Sp.findByName(i,t):t,a=this._actionsByClip[r?r.uuid:t];return void 0!==a&&a.actionByRoot[s]||null}stopAllAction(){const t=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)t[i].stop();return this}update(t){const e=this._actions,i=this._nActiveActions,s=this.time+=t*=this.timeScale,r=Math.sign(t),o=this._accuIndex^=1;for(let c=0;c!==i;++c)e[c]._update(s,t,r,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,i=t.uuid,s=this._actionsByClip,r=s[i];if(void 0!==r){const o=r.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const d=c._cacheIndex,u=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=d,e[d]=u,e.pop(),this._removeInactiveBindingsForAction(c)}delete s[i]}}uncacheRoot(t){const e=t.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot[e];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const o in r){const a=r[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(t,e){const i=this.existingAction(t,e);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}LB.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class _S{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new _S(void 0===this.value.clone?this.value:this.value.clone())}}(class wae extends Mc{constructor(t,e,i=1){super(t,e),this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}).prototype.isInstancedInterleavedBuffer=!0;class NB{constructor(t=1,e=0,i=0){return this.radius=t,this.phi=e,this.theta=i,this}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(ai(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const BB=new ne;class Ep{constructor(t=new ne(1/0,1/0),e=new ne(-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=BB.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return BB.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Ep.prototype.isBox2=!0;const vl=new D,lv=new $e,vS=new $e;function zB(n){const t=[];!0===n.isBone&&t.push(n);for(let e=0;e<n.children.length;e++)t.push.apply(t,zB(n.children[e]));return t}class fv{static toHalfFloat(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=ai(t,-65504,65504),YB[0]=t;const e=XB[0],i=e>>23&511;return Zr[i]+((8388607&e)>>Jr[i])}static fromHalfFloat(t){const e=t>>10;return XB[0]=xS[KB[e]+(1023&t)]+Yu[e],YB[0]}}const qB=new ArrayBuffer(4),YB=new Float32Array(qB),XB=new Uint32Array(qB),Zr=new Uint32Array(512),Jr=new Uint32Array(512);for(let n=0;n<256;++n){const t=n-127;t<-27?(Zr[n]=0,Zr[256|n]=32768,Jr[n]=24,Jr[256|n]=24):t<-14?(Zr[n]=1024>>-t-14,Zr[256|n]=1024>>-t-14|32768,Jr[n]=-t-1,Jr[256|n]=-t-1):t<=15?(Zr[n]=t+15<<10,Zr[256|n]=t+15<<10|32768,Jr[n]=13,Jr[256|n]=13):t<128?(Zr[n]=31744,Zr[256|n]=64512,Jr[n]=24,Jr[256|n]=24):(Zr[n]=31744,Zr[256|n]=64512,Jr[n]=13,Jr[256|n]=13)}const xS=new Uint32Array(2048),Yu=new Uint32Array(64),KB=new Uint32Array(64);for(let n=1;n<1024;++n){let t=n<<13,e=0;for(;0==(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,xS[n]=t|e}for(let n=1024;n<2048;++n)xS[n]=939524096+(n-1024<<13);for(let n=1;n<31;++n)Yu[n]=n<<23;Yu[31]=1199570944,Yu[32]=2147483648;for(let n=33;n<63;++n)Yu[n]=2147483648+(n-32<<23);Yu[63]=3347054592;for(let n=1;n<64;++n)32!==n&&(KB[n]=1024);gr.create=function(n,t){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(gr.prototype),n.prototype.constructor=n,n.prototype.getPoint=t,n},mp.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)},class Eae extends Cc{constructor(t=10,e=10,i=4473924,s=8947848){i=new we(i),s=new we(s);const r=e/2,o=t/e,a=t/2,l=[],c=[];for(let h=0,f=0,p=-a;h<=e;h++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const m=h===r?i:s;m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3}const d=new mt;d.setAttribute("position",new qe(l,3)),d.setAttribute("color",new qe(c,3)),super(d,new Wi({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class Sae extends Cc{constructor(t){const e=zB(t),i=new mt,s=[],r=[],o=new we(0,0,1),a=new we(0,1,0);for(let c=0;c<e.length;c++){const d=e[c];d.parent&&d.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}i.setAttribute("position",new qe(s,3)),i.setAttribute("color",new qe(r,3)),super(i,new Wi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,i=this.geometry,s=i.getAttribute("position");vS.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<e.length;r++){const a=e[r];a.parent&&a.parent.isBone&&(lv.multiplyMatrices(vS,a.matrixWorld),vl.setFromMatrixPosition(lv),s.setXYZ(o,vl.x,vl.y,vl.z),lv.multiplyMatrices(vS,a.parent.matrixWorld),vl.setFromMatrixPosition(lv),s.setXYZ(o+1,vl.x,vl.y,vl.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Eo.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ko.extractUrlBase(n)},Eo.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Ep.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},Ep.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ep.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Ep.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)},$s.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},$s.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},$s.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},$s.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},$s.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)},vc.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},ol.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},xy.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)},Gi.prototype.flattenToArrayOffset=function(n,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,t)},Gi.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Gi.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Gi.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Gi.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Gi.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},$e.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},$e.prototype.flattenToArrayOffset=function(n,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,t)},$e.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new D).setFromMatrixColumn(this,3)},$e.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},$e.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},$e.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},$e.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},$e.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},$e.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},$e.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},$e.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},$e.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},$e.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},$e.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},$e.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},$e.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},$e.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},$e.prototype.makeFrustum=function(n,t,e,i,s,r){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,t,i,e,s,r)},$e.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},ma.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)},Pi.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},Pi.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},yc.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},yc.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},yc.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},vi.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},vi.prototype.barycoordFromPoint=function(n,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,t)},vi.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},vi.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},vi.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)},vi.barycoordFromPoint=function(n,t,e,i,s){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),vi.getBarycoord(n,t,e,i,s)},vi.normal=function(n,t,e,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),vi.getNormal(n,t,e,i)},_a.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},_a.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new _l(this,n)},_a.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new xp(this,n)},ne.prototype.fromAttribute=function(n,t,e){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,t,e)},ne.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},ne.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},D.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},D.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},D.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},D.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},D.prototype.getColumnFromMatrix=function(n,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,n)},D.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},D.prototype.fromAttribute=function(n,t,e){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,t,e)},D.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},D.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},hn.prototype.fromAttribute=function(n,t,e){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,t,e)},hn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},on.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},on.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},on.prototype.translate=function(n,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,n)},on.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},on.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(on.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Oi.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Oi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Ry.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Li.prototype.setLens=function(n,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(n)},Object.defineProperties(To.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}}),Object.defineProperties(_n.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Zf},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Zf)}}}),_n.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?Zf:Qf),this},_n.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},_n.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},mt.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},mt.prototype.addAttribute=function(n,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===n?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(n,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new _n(arguments[1],arguments[2])))},mt.prototype.addDrawCall=function(n,t,e){void 0!==e&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,t)},mt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},mt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},mt.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},mt.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(mt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Mc.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?Zf:Qf),this},Mc.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},_l.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},_l.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},_l.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Dy.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},_S.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Gn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new we}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Qr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}}),fn.prototype.clearTarget=function(n,t,e,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(t,e,i)},fn.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},fn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},fn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},fn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},fn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},fn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},fn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},fn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},fn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},fn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},fn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},fn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},fn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},fn.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},fn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},fn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},fn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},fn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},fn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},fn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},fn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},fn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},fn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},fn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(fn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===n?nn:$r}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(b2.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ws.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}}),class aae extends on{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new iae).load(n,function(i){t.setBuffer(i)}),this},IC.prototype.updateCubeMap=function(n,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,t)},IC.prototype.clear=function(n,t,e,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,t,e,i)},pc.crossOrigin=void 0,pc.loadTexture=function(n,t,e,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const s=new pB;s.setCrossOrigin(this.crossOrigin);const r=s.load(n,e,void 0,i);return t&&(r.mapping=t),r},pc.loadTextureCube=function(n,t,e,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const s=new Zoe;s.setCrossOrigin(this.crossOrigin);const r=s.load(n,e,void 0,i);return t&&(r.mapping=t),r},pc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},pc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"139"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="139");class Aae extends Eo{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new Iae(e)}),this.register(function(e){return new Bae(e)}),this.register(function(e){return new Vae(e)}),this.register(function(e){return new Pae(e)}),this.register(function(e){return new Oae(e)}),this.register(function(e){return new Lae(e)}),this.register(function(e){return new Fae(e)}),this.register(function(e){return new Nae(e)}),this.register(function(e){return new kae(e)}),this.register(function(e){return new Hae(e)})}load(t,e,i,s){const r=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:ko.extractUrlBase(t),this.manager.itemStart(t);const a=function(c){s?s(c):console.error(c),r.manager.itemError(t),r.manager.itemEnd(t)},l=new Ao(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(c){try{r.parse(c,o,function(d){e(d),r.manager.itemEnd(t)},a)}catch(d){a(d)}},i,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,s){let r;const o={},a={};if("string"==typeof t)r=t;else if(ko.decodeText(new Uint8Array(t,0,4))===QB){try{o[qt.KHR_BINARY_GLTF]=new zae(t)}catch(u){return void(s&&s(u))}r=o[qt.KHR_BINARY_GLTF].content}else r=ko.decodeText(new Uint8Array(t));const l=JSON.parse(r);if(void 0===l.asset||l.asset.version[0]<2)return void(s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new ele(l,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const u=this.pluginCallbacks[d](c);a[u.name]=u,o[u.name]=!0}if(l.extensionsUsed)for(let d=0;d<l.extensionsUsed.length;++d){const u=l.extensionsUsed[d],h=l.extensionsRequired||[];switch(u){case qt.KHR_MATERIALS_UNLIT:o[u]=new Rae;break;case qt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[u]=new jae;break;case qt.KHR_DRACO_MESH_COMPRESSION:o[u]=new Uae(l,this.dracoLoader);break;case qt.KHR_TEXTURE_TRANSFORM:o[u]=new Gae;break;case qt.KHR_MESH_QUANTIZATION:o[u]=new Wae;break;default:h.indexOf(u)>=0&&void 0===a[u]&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,s)}parseAsync(t,e){const i=this;return new Promise(function(s,r){i.parse(t,e,s,r)})}}function Tae(){let n={};return{get:function(t){return n[t]},add:function(t,e){n[t]=e},remove:function(t){delete n[t]},removeAll:function(){n={}}}}const qt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class kae{constructor(t){this.parser=t,this.name=qt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let i=0,s=e.length;i<s;i++){const r=e[i];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,i="light:"+t;let s=e.cache.get(i);if(s)return s;const r=e.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let c;const d=new we(16777215);void 0!==l.color&&d.fromArray(l.color);const u=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new fS(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new hS(d),c.distance=u;break;case"spot":c=new dS(d),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,void 0!==l.intensity&&(c.intensity=l.intensity),c.name=e.createUniqueName(l.name||"light_"+t),s=Promise.resolve(c),e.cache.add(i,s),s}createNodeAttachment(t){const e=this,i=this.parser,r=i.json.nodes[t],a=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return i._getNodeRef(e.cache,a,l)})}}class Rae{constructor(){this.name=qt.KHR_MATERIALS_UNLIT}getMaterialType(){return Ys}extendParams(t,e,i){const s=[];t.color=new we(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;t.color.fromArray(o),t.opacity=o[3]}void 0!==r.baseColorTexture&&s.push(i.assignTexture(t,"map",r.baseColorTexture,nn))}return Promise.all(s)}}class Iae{constructor(t){this.parser=t,this.name=qt.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?yl:null}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(void 0!==o.clearcoatFactor&&(e.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(i.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(i.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(i.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new ne(a,a)}return Promise.all(r)}}class Pae{constructor(t){this.parser=t,this.name=qt.KHR_MATERIALS_SHEEN}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?yl:null}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new we(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=s.extensions[this.name];return void 0!==o.sheenColorFactor&&e.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(e.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(i.assignTexture(e,"sheenColorMap",o.sheenColorTexture,nn)),void 0!==o.sheenRoughnessTexture&&r.push(i.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class Oae{constructor(t){this.parser=t,this.name=qt.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?yl:null}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(i.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class Lae{constructor(t){this.parser=t,this.name=qt.KHR_MATERIALS_VOLUME}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?yl:null}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];e.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(i.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return e.attenuationColor=new we(a[0],a[1],a[2]),Promise.all(r)}}class Fae{constructor(t){this.parser=t,this.name=qt.KHR_MATERIALS_IOR}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?yl:null}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return e.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class Nae{constructor(t){this.parser=t,this.name=qt.KHR_MATERIALS_SPECULAR}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?yl:null}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];e.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(i.assignTexture(e,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return e.specularColor=new we(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&r.push(i.assignTexture(e,"specularColorMap",o.specularColorTexture,nn)),Promise.all(r)}}class Bae{constructor(t){this.parser=t,this.name=qt.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,i=e.json,s=i.textures[t];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r.source,o)}}class Vae{constructor(t){this.parser=t,this.name=qt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,i=this.parser,s=i.json,r=s.textures[t];if(!r.extensions||!r.extensions[e])return null;const o=r.extensions[e],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(t,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class Hae{constructor(t){this.name=qt.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,o.ready]).then(function(a){const l=s.byteOffset||0,c=s.byteLength||0,d=s.count,u=s.byteStride,h=new ArrayBuffer(d*u),f=new Uint8Array(a[0],l,c);return o.decodeGltfBuffer(new Uint8Array(h),d,u,f,s.mode,s.filter),h})}return null}}const QB="glTF";class zae{constructor(t){this.name=qt.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:ko.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==QB)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,s=new DataView(t,12);let r=0;for(;r<i;){const o=s.getUint32(r,!0);r+=4;const a=s.getUint32(r,!0);if(r+=4,1313821514===a){const l=new Uint8Array(t,12+r,o);this.content=ko.decodeText(l)}else if(5130562===a){const l=12+r;this.body=t.slice(l,l+o)}r+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Uae{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=qt.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const i=this.json,s=this.dracoLoader,r=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},l={},c={};for(const d in o){const u=MS[d]||d.toLowerCase();a[u]=o[d]}for(const d in t.attributes){const u=MS[d]||d.toLowerCase();if(void 0!==o[d]){const h=i.accessors[t.attributes[d]];c[u]=Tp[h.componentType],l[u]=!0===h.normalized}}return e.getDependency("bufferView",r).then(function(d){return new Promise(function(u){s.decodeDracoFile(d,function(h){for(const f in h.attributes){const p=h.attributes[f],m=l[f];void 0!==m&&(p.normalized=m)}u(h)},a,c)})})}}class Gae{constructor(){this.name=qt.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class wS extends ju{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),s=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new we).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",s).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class jae{constructor(){this.name=qt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return wS}extendParams(t,e,i){const s=e.extensions[this.name];t.color=new we(1,1,1),t.opacity=1;const r=[];if(Array.isArray(s.diffuseFactor)){const o=s.diffuseFactor;t.color.fromArray(o),t.opacity=o[3]}if(void 0!==s.diffuseTexture&&r.push(i.assignTexture(t,"map",s.diffuseTexture,nn)),t.emissive=new we(0,0,0),t.glossiness=void 0!==s.glossinessFactor?s.glossinessFactor:1,t.specular=new we(1,1,1),Array.isArray(s.specularFactor)&&t.specular.fromArray(s.specularFactor),void 0!==s.specularGlossinessTexture){const o=s.specularGlossinessTexture;r.push(i.assignTexture(t,"glossinessMap",o)),r.push(i.assignTexture(t,"specularMap",o,nn))}return Promise.all(r)}createMaterial(t){const e=new wS(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=0,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e}}class Wae{constructor(){this.name=qt.KHR_MESH_QUANTIZATION}}class Rc extends va{constructor(t,e,i,s){super(t,e,i,s)}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=t*s*3+s;for(let o=0;o!==s;o++)e[o]=i[r+o];return e}}Rc.prototype.beforeStart_=Rc.prototype.copySampleValue_,Rc.prototype.afterEnd_=Rc.prototype.copySampleValue_,Rc.prototype.interpolate_=function(n,t,e,i){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,c=i-t,d=(e-t)/c,u=d*d,h=u*d,f=n*l,p=f-l,m=-2*h+3*u,g=h-u,_=1-m,y=g-u+d;for(let b=0;b!==o;b++)s[b]=_*r[p+b+o]+y*(r[p+b+a]*c)+m*r[f+b+o]+g*(r[f+b]*c);return s};const $ae=new Pi;class qae extends Rc{interpolate_(t,e,i,s){const r=super.interpolate_(t,e,i,s);return $ae.fromArray(r).normalize().toArray(r),r}}const Tp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},JB={9728:yi,9729:Sn,9984:1004,9985:1007,9986:1005,9987:nl},eV={33071:bs,33648:1002,10497:ac},tV={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},MS={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},bl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Yae={CUBICSPLINE:void 0,LINEAR:pu,STEP:Kf};function kp(n,t,e){for(const i in e.extensions)void 0===n[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=e.extensions[i])}function Ic(n,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(n.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Qae(n,t){if(n.updateMorphTargets(),void 0!==t.weights)for(let e=0,i=t.weights.length;e<i;e++)n.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(n.morphTargetInfluences.length===e.length){n.morphTargetDictionary={};for(let i=0,s=e.length;i<s;i++)n.morphTargetDictionary[e[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Zae(n){const t=n.extensions&&n.extensions[qt.KHR_DRACO_MESH_COMPRESSION];let e;return e=t?"draco:"+t.bufferView+":"+t.indices+":"+nV(t.attributes):n.indices+":"+nV(n.attributes)+":"+n.mode,e}function nV(n){let t="";const e=Object.keys(n).sort();for(let i=0,s=e.length;i<s;i++)t+=e[i]+":"+n[e[i]]+";";return t}function SS(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class ele{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new Tae,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={},this.textureLoader="undefined"!=typeof createImageBitmap&&!1===/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?new EB(this.options.manager):new pB(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ao(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};kp(r,a,s),Ic(a,s),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){t(a)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=e.length;s<r;s++){const o=e[s].joints;for(let a=0,l=o.length;a<l;a++)t[o[a]].isBone=!0}for(let s=0,r=t.length;s<r;s++){const o=t[s];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;const s=i.clone(),r=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,d]of o.children.entries())r(d,a.children[c])};return r(i,s),s.name+="_instance_"+t.uses[e]++,s}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){const s=t(e[i]);if(s)return s}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const i=[];for(let s=0;s<e.length;s++){const r=t(e[s]);r&&i.push(r)}return i}getDependency(t,e){const i=t+":"+e;let s=this.cache.get(i);if(!s){switch(t){case"scene":s=this.loadScene(e);break;case"node":s=this.loadNode(e);break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(e)});break;case"accessor":s=this.loadAccessor(e);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(e)});break;case"buffer":s=this.loadBuffer(e);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(e)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(e)});break;case"skin":s=this.loadSkin(e);break;case"animation":s=this.loadAnimation(e);break;case"camera":s=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(i,s)}return s}getDependencies(t){let e=this.cache.get(t);if(!e){const i=this;e=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(r,o){return i.getDependency(t,o)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],i=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[qt.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load(ko.resolveURL(e.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(i){const r=e.byteOffset||0;return i.slice(r,r+(e.byteLength||0))})}loadAccessor(t){const e=this,i=this.json,s=this.json.accessors[t];if(void 0===s.bufferView&&void 0===s.sparse)return Promise.resolve(null);const r=[];return r.push(void 0!==s.bufferView?this.getDependency("bufferView",s.bufferView):null),void 0!==s.sparse&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],l=tV[s.type],c=Tp[s.componentType],d=c.BYTES_PER_ELEMENT,h=s.byteOffset||0,f=void 0!==s.bufferView?i.bufferViews[s.bufferView].byteStride:void 0,p=!0===s.normalized;let m,g;if(f&&f!==d*l){const _=Math.floor(h/f),y="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+_+":"+s.count;let b=e.cache.get(y);b||(m=new c(a,_*f,s.count*f/d),b=new Mc(m,f/d),e.cache.add(y,b)),g=new fl(b,l,h%f/d,p)}else m=null===a?new c(s.count*l):new c(a,h,s.count*l),g=new _n(m,l,p);if(void 0!==s.sparse){const x=s.sparse.values.byteOffset||0,w=new(0,Tp[s.sparse.indices.componentType])(o[1],s.sparse.indices.byteOffset||0,s.sparse.count*tV.SCALAR),C=new c(o[2],x,s.sparse.count*l);null!==a&&(g=new _n(g.array.slice(),g.itemSize,g.normalized));for(let S=0,E=w.length;S<E;S++){const I=w[S];if(g.setX(I,C[S*l]),l>=2&&g.setY(I,C[S*l+1]),l>=3&&g.setZ(I,C[S*l+2]),l>=4&&g.setW(I,C[S*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(t){const e=this.json,r=e.textures[t].source,o=e.images[r];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(t,r,a)}loadTextureImage(t,e,i){const s=this,r=this.json,o=r.textures[t],a=r.images[e],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(e,i).then(function(d){d.flipY=!1,o.name&&(d.name=o.name);const h=(r.samplers||{})[o.sampler]||{};return d.magFilter=JB[h.magFilter]||Sn,d.minFilter=JB[h.minFilter]||nl,d.wrapS=eV[h.wrapS]||ac,d.wrapT=eV[h.wrapT]||ac,s.associations.set(d,{textures:t}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(t,e){const s=this.json,r=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(u=>u.clone());const o=s.images[t],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(u){c=!0;const h=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(u){return new Promise(function(h,f){let p=h;!0===e.isImageBitmapLoader&&(p=function(m){const g=new ss(m);g.needsUpdate=!0,h(g)}),e.load(ko.resolveURL(u,r.path),p,void 0,f)})}).then(function(u){return!0===c&&a.revokeObjectURL(l),u.userData.mimeType=o.mimeType||function Jae(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[t]=d,d}assignTexture(t,e,i,s){const r=this;return this.getDependency("texture",i.index).then(function(o){if(void 0!==i.texCoord&&0!=i.texCoord&&!("aoMap"===e&&1==i.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+e+" not yet supported."),r.extensions[qt.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[qt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=r.associations.get(o);o=r.extensions[qt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,l)}}return void 0!==s&&(o.encoding=s),t[e]=o,o})}assignFinalMaterial(t){const e=t.geometry;let i=t.material;const s=void 0===e.attributes.tangent,r=void 0!==e.attributes.color,o=void 0===e.attributes.normal;if(t.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Fy,Gn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(t.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Wi,Gn.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(a,l)),i=l}if(s||r||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),s&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),r&&(l.vertexColors=!0),o&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=i}getMaterialType(){return ju}loadMaterial(t){const e=this,s=this.extensions,r=this.json.materials[t];let o;const a={},l=r.extensions||{},c=[];if(l[qt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=s[qt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=u.getMaterialType(),c.push(u.extendParams(a,r,e))}else if(l[qt.KHR_MATERIALS_UNLIT]){const u=s[qt.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,r,e))}else{const u=r.pbrMetallicRoughness||{};if(a.color=new we(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}void 0!==u.baseColorTexture&&c.push(e.assignTexture(a,"map",u.baseColorTexture,nn)),a.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,a.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture&&(c.push(e.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(e.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(t)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(t,a)})))}!0===r.doubleSided&&(a.side=2);const d=r.alphaMode||"OPAQUE";if("BLEND"===d?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===d&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==Ys&&(c.push(e.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new ne(1,1),void 0!==r.normalTexture.scale)){const u=r.normalTexture.scale;a.normalScale.set(u,u)}return void 0!==r.occlusionTexture&&o!==Ys&&(c.push(e.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==Ys&&(a.emissive=(new we).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&o!==Ys&&c.push(e.assignTexture(a,"emissiveMap",r.emissiveTexture,nn)),Promise.all(c).then(function(){let u;return u=o===wS?s[qt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),r.name&&(u.name=r.name),Ic(u,r),e.associations.set(u,{materials:t}),r.extensions&&kp(s,u,r),u})}createUniqueName(t){const e=Dn.sanitizeNodeName(t||"");let i=e;for(let s=1;this.nodeNamesUsed[i];++s)i=e+"_"+s;return this.nodeNamesUsed[i]=!0,i}loadGeometries(t){const e=this,i=this.extensions,s=this.primitiveCache;function r(a){return i[qt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(l){return sV(l,a,e)})}const o=[];for(let a=0,l=t.length;a<l;a++){const c=t[a],d=Zae(c),u=s[d];if(u)o.push(u.promise);else{let h;h=c.extensions&&c.extensions[qt.KHR_DRACO_MESH_COMPRESSION]?r(c):sV(new mt,c,e),s[d]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(t){const e=this,s=this.extensions,r=this.json.meshes[t],o=r.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const d=void 0===o[l].material?(void 0===(n=this.cache).DefaultMaterial&&(n.DefaultMaterial=new ju({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial):this.getDependency("material",o[l].material);a.push(d)}var n;return a.push(e.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],u=[];for(let f=0,p=d.length;f<p;f++){const m=d[f],g=o[f];let _;const y=c[f];if(4===g.mode||5===g.mode||6===g.mode||void 0===g.mode)_=!0===r.isSkinnedMesh?new Ry(m,y):new Oi(m,y),!0===_.isSkinnedMesh&&!_.geometry.attributes.skinWeight.normalized&&_.normalizeSkinWeights(),5===g.mode?_.geometry=rV(_.geometry,1):6===g.mode&&(_.geometry=rV(_.geometry,2));else if(1===g.mode)_=new Cc(m,y);else if(3===g.mode)_=new pl(m,y);else if(2===g.mode)_=new $C(m,y);else{if(0!==g.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);_=new YC(m,y)}Object.keys(_.geometry.morphAttributes).length>0&&Qae(_,r),_.name=e.createUniqueName(r.name||"mesh_"+t),Ic(_,r),g.extensions&&kp(s,_,g),e.assignFinalMaterial(_),u.push(_)}for(let f=0,p=u.length;f<p;f++)e.associations.set(u[f],{meshes:t,primitives:f});if(1===u.length)return u[0];const h=new ga;e.associations.set(h,{meshes:t});for(let f=0,p=u.length;f<p;f++)h.add(u[f]);return h})}loadCamera(t){let e;const i=this.json.cameras[t],s=i[i.type];if(s)return"perspective"===i.type?e=new Li(Jte.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===i.type&&(e=new ap(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),Ic(e,i),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],i={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",e.inverseBindMatrices).then(function(s){return i.inverseBindMatrices=s,i})}loadAnimation(t){const i=this.json.animations[t],s=[],r=[],o=[],a=[],l=[];for(let c=0,d=i.channels.length;c<d;c++){const u=i.channels[c],h=i.samplers[u.sampler],f=u.target,m=void 0!==i.parameters?i.parameters[h.input]:h.input,g=void 0!==i.parameters?i.parameters[h.output]:h.output;s.push(this.getDependency("node",void 0!==f.node?f.node:f.id)),r.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",g)),a.push(h),l.push(f)}return Promise.all([Promise.all(s),Promise.all(r),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[0],u=c[1],h=c[2],f=c[3],p=c[4],m=[];for(let _=0,y=d.length;_<y;_++){const b=d[_],x=u[_],w=h[_],C=f[_],S=p[_];if(void 0===b)continue;let E;switch(b.updateMatrix(),b.matrixAutoUpdate=!0,bl[S.path]){case bl.weights:E=Mp;break;case bl.rotation:E=Sc;break;default:E=Cp}const I=b.name?b.name:b.uuid,F=void 0!==C.interpolation?Yae[C.interpolation]:pu,M=[];bl[S.path]===bl.weights?b.traverse(function(W){W.morphTargetInfluences&&M.push(W.name?W.name:W.uuid)}):M.push(I);let T=w.array;if(w.normalized){const W=SS(T.constructor),z=new Float32Array(T.length);for(let U=0,O=T.length;U<O;U++)z[U]=T[U]*W;T=z}for(let W=0,z=M.length;W<z;W++){const U=new E(M[W]+"."+bl[S.path],x.array,T,F);"CUBICSPLINE"===C.interpolation&&(U.createInterpolant=function(H){return new(this instanceof Sc?qae:Rc)(this.times,this.values,this.getValueSize()/3,H)},U.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(U)}}return new Sp(i.name?i.name:"animation_"+t,void 0,m)})}createNodeMesh(t){const i=this,s=this.json.nodes[t];return void 0===s.mesh?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return void 0!==s.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=s.weights.length;l<c;l++)a.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(t){const i=this.extensions,s=this,r=this.json.nodes[t],o=r.name?s.createUniqueName(r.name):"";return function(){const a=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(t)});return l&&a.push(l),void 0!==r.camera&&a.push(s.getDependency("camera",r.camera).then(function(c){return s._getNodeRef(s.cameraCache,r.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(t)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(l=!0===r.isBone?new Iy:a.length>1?new ga:1===a.length?a[0]:new on,l!==a[0])for(let c=0,d=a.length;c<d;c++)l.add(a[c]);if(r.name&&(l.userData.name=r.name,l.name=o),Ic(l,r),r.extensions&&kp(i,l,r),void 0!==r.matrix){const c=new $e;c.fromArray(r.matrix),l.applyMatrix4(c)}else void 0!==r.translation&&l.position.fromArray(r.translation),void 0!==r.rotation&&l.quaternion.fromArray(r.rotation),void 0!==r.scale&&l.scale.fromArray(r.scale);return s.associations.has(l)||s.associations.set(l,{}),s.associations.get(l).nodes=t,l})}loadScene(t){const e=this.json,i=this.extensions,s=this.json.scenes[t],r=this,o=new ga;s.name&&(o.name=r.createUniqueName(s.name)),Ic(o,s),s.extensions&&kp(i,o,s);const a=s.nodes||[],l=[];for(let c=0,d=a.length;c<d;c++)l.push(iV(a[c],o,e,r));return Promise.all(l).then(function(){return r.associations=(d=>{const u=new Map;for(const[h,f]of r.associations)(h instanceof Gn||h instanceof ss)&&u.set(h,f);return d.traverse(h=>{const f=r.associations.get(h);null!=f&&u.set(h,f)}),u})(o),o})}}function iV(n,t,e,i){const s=e.nodes[n];return i.getDependency("node",n).then(function(r){if(void 0===s.skin)return r;let o;return i.getDependency("skin",s.skin).then(function(a){o=a;const l=[];for(let c=0,d=o.joints.length;c<d;c++)l.push(i.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return r.traverse(function(l){if(!l.isMesh)return;const c=[],d=[];for(let u=0,h=a.length;u<h;u++){const f=a[u];if(f){c.push(f);const p=new $e;void 0!==o.inverseBindMatrices&&p.fromArray(o.inverseBindMatrices.array,16*u),d.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[u])}l.bind(new Py(c,d),l.matrixWorld)}),r})}).then(function(r){t.add(r);const o=[];if(s.children){const a=s.children;for(let l=0,c=a.length;l<c;l++)o.push(iV(a[l],r,e,i))}return Promise.all(o)})}function sV(n,t,e){const i=t.attributes,s=[];function r(o,a){return e.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=MS[o]||o.toLowerCase();a in n.attributes||s.push(r(i[o],a))}if(void 0!==t.indices&&!n.index){const o=e.getDependency("accessor",t.indices).then(function(a){n.setIndex(a)});s.push(o)}return Ic(n,t),function tle(n,t,e){const i=t.attributes,s=new $s;if(void 0===i.POSITION)return;{const a=e.json.accessors[i.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(s.set(new D(l[0],l[1],l[2]),new D(c[0],c[1],c[2])),a.normalized){const d=SS(Tp[a.componentType]);s.min.multiplyScalar(d),s.max.multiplyScalar(d)}}const r=t.targets;if(void 0!==r){const a=new D,l=new D;for(let c=0,d=r.length;c<d;c++){const u=r[c];if(void 0!==u.POSITION){const h=e.json.accessors[u.POSITION],f=h.min,p=h.max;if(void 0!==f&&void 0!==p){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const m=SS(Tp[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}n.boundingBox=s;const o=new ol;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}(n,t,e),Promise.all(s).then(function(){return void 0!==t.targets?function Kae(n,t,e){let i=!1,s=!1,r=!1;for(let c=0,d=t.length;c<d;c++){const u=t[c];if(void 0!==u.POSITION&&(i=!0),void 0!==u.NORMAL&&(s=!0),void 0!==u.COLOR_0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,d=t.length;c<d;c++){const u=t[c];if(i){const h=void 0!==u.POSITION?e.getDependency("accessor",u.POSITION):n.attributes.position;o.push(h)}if(s){const h=void 0!==u.NORMAL?e.getDependency("accessor",u.NORMAL):n.attributes.normal;a.push(h)}if(r){const h=void 0!==u.COLOR_0?e.getDependency("accessor",u.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[1],h=c[2];return i&&(n.morphAttributes.position=c[0]),s&&(n.morphAttributes.normal=u),r&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}(n,t.targets,e):n})}function rV(n,t){let e=n.getIndex();if(null===e){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),e=n.getIndex()}const i=e.count-2,s=[];if(2===t)for(let o=1;o<=i;o++)s.push(e.getX(0)),s.push(e.getX(o)),s.push(e.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(s.push(e.getX(o)),s.push(e.getX(o+1)),s.push(e.getX(o+2))):(s.push(e.getX(o+2)),s.push(e.getX(o+1)),s.push(e.getX(o)));s.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r}const oV={type:"change"},DS={type:"start"},aV={type:"end"};class nle extends il{constructor(t,e){super(),void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new D,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(k){k.addEventListener("keydown",an),this._domElementKeyEvents=k},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(oV),i.update(),r=s.NONE},this.update=function(){const k=new D,_e=(new Pi).setFromUnitVectors(t.up,new D(0,1,0)),Ze=_e.clone().invert(),Te=new D,V=new Pi,Se=2*Math.PI;return function(){const _t=i.object.position;k.copy(_t).sub(i.target),k.applyQuaternion(_e),a.setFromVector3(k),i.autoRotate&&r===s.NONE&&I(function S(){return 2*Math.PI/60/60*i.autoRotateSpeed}()),i.enableDamping?(a.theta+=l.theta*i.dampingFactor,a.phi+=l.phi*i.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Fe=i.minAzimuthAngle,et=i.maxAzimuthAngle;return isFinite(Fe)&&isFinite(et)&&(Fe<-Math.PI?Fe+=Se:Fe>Math.PI&&(Fe-=Se),et<-Math.PI?et+=Se:et>Math.PI&&(et-=Se),a.theta=Fe<=et?Math.max(Fe,Math.min(et,a.theta)):a.theta>(Fe+et)/2?Math.max(Fe,a.theta):Math.min(et,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),!0===i.enableDamping?i.target.addScaledVector(d,i.dampingFactor):i.target.add(d),k.setFromSpherical(a),k.applyQuaternion(Ze),_t.copy(i.target).add(k),i.object.lookAt(i.target),!0===i.enableDamping?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,d.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),d.set(0,0,0)),c=1,!!(u||Te.distanceToSquared(i.object.position)>o||8*(1-V.dot(i.object.quaternion))>o)&&(i.dispatchEvent(oV),Te.copy(i.object.position),V.copy(i.object.quaternion),u=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",J),i.domElement.removeEventListener("pointerdown",be),i.domElement.removeEventListener("pointercancel",Dt),i.domElement.removeEventListener("wheel",Tn),i.domElement.removeEventListener("pointermove",je),i.domElement.removeEventListener("pointerup",Oe),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",an)};const i=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=s.NONE;const o=1e-6,a=new NB,l=new NB;let c=1;const d=new D;let u=!1;const h=new ne,f=new ne,p=new ne,m=new ne,g=new ne,_=new ne,y=new ne,b=new ne,x=new ne,w=[],C={};function E(){return Math.pow(.95,i.zoomSpeed)}function I(k){l.theta-=k}function F(k){l.phi-=k}const M=function(){const k=new D;return function(Ze,Te){k.setFromMatrixColumn(Te,0),k.multiplyScalar(-Ze),d.add(k)}}(),T=function(){const k=new D;return function(Ze,Te){!0===i.screenSpacePanning?k.setFromMatrixColumn(Te,1):(k.setFromMatrixColumn(Te,0),k.crossVectors(i.object.up,k)),k.multiplyScalar(Ze),d.add(k)}}(),W=function(){const k=new D;return function(Ze,Te){const V=i.domElement;if(i.object.isPerspectiveCamera){k.copy(i.object.position).sub(i.target);let Ce=k.length();Ce*=Math.tan(i.object.fov/2*Math.PI/180),M(2*Ze*Ce/V.clientHeight,i.object.matrix),T(2*Te*Ce/V.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(M(Ze*(i.object.right-i.object.left)/i.object.zoom/V.clientWidth,i.object.matrix),T(Te*(i.object.top-i.object.bottom)/i.object.zoom/V.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function z(k){i.object.isPerspectiveCamera?c/=k:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*k)),i.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function U(k){i.object.isPerspectiveCamera?c*=k:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/k)),i.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function O(k){h.set(k.clientX,k.clientY)}function L(k){m.set(k.clientX,k.clientY)}function Ve(){1===w.length?h.set(w[0].pageX,w[0].pageY):h.set(.5*(w[0].pageX+w[1].pageX),.5*(w[0].pageY+w[1].pageY))}function nt(){1===w.length?m.set(w[0].pageX,w[0].pageY):m.set(.5*(w[0].pageX+w[1].pageX),.5*(w[0].pageY+w[1].pageY))}function se(){const k=w[0].pageX-w[1].pageX,_e=w[0].pageY-w[1].pageY,Ze=Math.sqrt(k*k+_e*_e);y.set(0,Ze)}function ot(k){if(1==w.length)f.set(k.pageX,k.pageY);else{const Ze=lt(k);f.set(.5*(k.pageX+Ze.x),.5*(k.pageY+Ze.y))}p.subVectors(f,h).multiplyScalar(i.rotateSpeed);const _e=i.domElement;I(2*Math.PI*p.x/_e.clientHeight),F(2*Math.PI*p.y/_e.clientHeight),h.copy(f)}function ye(k){if(1===w.length)g.set(k.pageX,k.pageY);else{const _e=lt(k);g.set(.5*(k.pageX+_e.x),.5*(k.pageY+_e.y))}_.subVectors(g,m).multiplyScalar(i.panSpeed),W(_.x,_.y),m.copy(g)}function St(k){const _e=lt(k),Ze=k.pageX-_e.x,Te=k.pageY-_e.y,V=Math.sqrt(Ze*Ze+Te*Te);b.set(0,V),x.set(0,Math.pow(b.y/y.y,i.zoomSpeed)),z(x.y),y.copy(b)}function be(k){!1!==i.enabled&&(0===w.length&&(i.domElement.setPointerCapture(k.pointerId),i.domElement.addEventListener("pointermove",je),i.domElement.addEventListener("pointerup",Oe)),function me(k){w.push(k)}(k),"touch"===k.pointerType?function P(k){switch(ze(k),w.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;Ve(),r=s.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;nt(),r=s.TOUCH_PAN;break;default:r=s.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function gt(){i.enableZoom&&se(),i.enablePan&&nt()})(),r=s.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function ut(){i.enableZoom&&se(),i.enableRotate&&Ve()})(),r=s.TOUCH_DOLLY_ROTATE;break;default:r=s.NONE}break;default:r=s.NONE}r!==s.NONE&&i.dispatchEvent(DS)}(k):function pt(k){let _e;switch(k.button){case 0:_e=i.mouseButtons.LEFT;break;case 1:_e=i.mouseButtons.MIDDLE;break;case 2:_e=i.mouseButtons.RIGHT;break;default:_e=-1}switch(_e){case 1:if(!1===i.enableZoom)return;(function H(k){y.set(k.clientX,k.clientY)})(k),r=s.DOLLY;break;case 0:if(k.ctrlKey||k.metaKey||k.shiftKey){if(!1===i.enablePan)return;L(k),r=s.PAN}else{if(!1===i.enableRotate)return;O(k),r=s.ROTATE}break;case 2:if(k.ctrlKey||k.metaKey||k.shiftKey){if(!1===i.enableRotate)return;O(k),r=s.ROTATE}else{if(!1===i.enablePan)return;L(k),r=s.PAN}break;default:r=s.NONE}r!==s.NONE&&i.dispatchEvent(DS)}(k))}function je(k){!1!==i.enabled&&("touch"===k.pointerType?function A(k){switch(ze(k),r){case s.TOUCH_ROTATE:if(!1===i.enableRotate)return;ot(k),i.update();break;case s.TOUCH_PAN:if(!1===i.enablePan)return;ye(k),i.update();break;case s.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function re(k){i.enableZoom&&St(k),i.enablePan&&ye(k)})(k),i.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function ae(k){i.enableZoom&&St(k),i.enableRotate&&ot(k)})(k),i.update();break;default:r=s.NONE}}(k):function at(k){if(!1!==i.enabled)switch(r){case s.ROTATE:if(!1===i.enableRotate)return;!function $(k){f.set(k.clientX,k.clientY),p.subVectors(f,h).multiplyScalar(i.rotateSpeed);const _e=i.domElement;I(2*Math.PI*p.x/_e.clientHeight),F(2*Math.PI*p.y/_e.clientHeight),h.copy(f),i.update()}(k);break;case s.DOLLY:if(!1===i.enableZoom)return;!function Z(k){b.set(k.clientX,k.clientY),x.subVectors(b,y),x.y>0?z(E()):x.y<0&&U(E()),y.copy(b),i.update()}(k);break;case s.PAN:if(!1===i.enablePan)return;!function de(k){g.set(k.clientX,k.clientY),_.subVectors(g,m).multiplyScalar(i.panSpeed),W(_.x,_.y),m.copy(g),i.update()}(k)}}(k))}function Oe(k){Ie(k),0===w.length&&(i.domElement.releasePointerCapture(k.pointerId),i.domElement.removeEventListener("pointermove",je),i.domElement.removeEventListener("pointerup",Oe)),i.dispatchEvent(aV),r=s.NONE}function Dt(k){Ie(k)}function Tn(k){!1===i.enabled||!1===i.enableZoom||r!==s.NONE||(k.preventDefault(),i.dispatchEvent(DS),function ie(k){k.deltaY<0?U(E()):k.deltaY>0&&z(E()),i.update()}(k),i.dispatchEvent(aV))}function an(k){!1===i.enabled||!1===i.enablePan||function Be(k){let _e=!1;switch(k.code){case i.keys.UP:W(0,i.keyPanSpeed),_e=!0;break;case i.keys.BOTTOM:W(0,-i.keyPanSpeed),_e=!0;break;case i.keys.LEFT:W(i.keyPanSpeed,0),_e=!0;break;case i.keys.RIGHT:W(-i.keyPanSpeed,0),_e=!0}_e&&(k.preventDefault(),i.update())}(k)}function J(k){!1!==i.enabled&&k.preventDefault()}function Ie(k){delete C[k.pointerId];for(let _e=0;_e<w.length;_e++)if(w[_e].pointerId==k.pointerId)return void w.splice(_e,1)}function ze(k){let _e=C[k.pointerId];void 0===_e&&(_e=new ne,C[k.pointerId]=_e),_e.set(k.pageX,k.pageY)}function lt(k){return C[(k.pointerId===w[0].pointerId?w[1]:w[0]).pointerId]}i.domElement.addEventListener("contextmenu",J),i.domElement.addEventListener("pointerdown",be),i.domElement.addEventListener("pointercancel",Dt),i.domElement.addEventListener("wheel",Tn,{passive:!1}),this.update()}}class ile extends Joe{constructor(t){super(t),this.type=Co}parse(t){const a=function(b,x){switch(b){case 1:console.error("THREE.RGBELoader Read Error: "+(x||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(x||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(x||""));break;default:console.error("THREE.RGBELoader: Error: "+(x||""))}return-1},h=function(b,x,w){x=x||1024;let S=b.pos,E=-1,I=0,F="",M=String.fromCharCode.apply(null,new Uint16Array(b.subarray(S,S+128)));for(;0>(E=M.indexOf("\n"))&&I<x&&S<b.byteLength;)F+=M,I+=M.length,S+=128,M+=String.fromCharCode.apply(null,new Uint16Array(b.subarray(S,S+128)));return-1<E&&(!1!==w&&(b.pos+=I+E+1),F+M.slice(0,E))},m=function(b,x,w,C){const E=Math.pow(2,b[x+3]-128)/255;w[C+0]=b[x+0]*E,w[C+1]=b[x+1]*E,w[C+2]=b[x+2]*E,w[C+3]=1},g=function(b,x,w,C){const E=Math.pow(2,b[x+3]-128)/255;w[C+0]=fv.toHalfFloat(Math.min(b[x+0]*E,65504)),w[C+1]=fv.toHalfFloat(Math.min(b[x+1]*E,65504)),w[C+2]=fv.toHalfFloat(Math.min(b[x+2]*E,65504)),w[C+3]=fv.toHalfFloat(1)},_=new Uint8Array(t);_.pos=0;const y=function(b){const w=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,C=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,S=/^\s*FORMAT=(\S+)\s*$/,E=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,I={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let F,M;if(b.pos>=b.byteLength||!(F=h(b)))return a(1,"no header found");if(!(M=F.match(/^#\?(\S+)/)))return a(3,"bad initial token");for(I.valid|=1,I.programtype=M[1],I.string+=F+"\n";F=h(b),!1!==F;)if(I.string+=F+"\n","#"!==F.charAt(0)){if((M=F.match(w))&&(I.gamma=parseFloat(M[1])),(M=F.match(C))&&(I.exposure=parseFloat(M[1])),(M=F.match(S))&&(I.valid|=2,I.format=M[1]),(M=F.match(E))&&(I.valid|=4,I.height=parseInt(M[1],10),I.width=parseInt(M[2],10)),2&I.valid&&4&I.valid)break}else I.comments+=F+"\n";return 2&I.valid?4&I.valid?I:a(3,"missing image size specifier"):a(3,"missing format specifier")}(_);if(-1!==y){const b=y.width,x=y.height,w=function(b,x,w){const C=x;if(C<8||C>32767||2!==b[0]||2!==b[1]||128&b[2])return new Uint8Array(b);if(C!==(b[2]<<8|b[3]))return a(3,"wrong scanline width");const S=new Uint8Array(4*x*w);if(!S.length)return a(4,"unable to allocate buffer space");let E=0,I=0;const F=4*C,M=new Uint8Array(4),T=new Uint8Array(F);let W=w;for(;W>0&&I<b.byteLength;){if(I+4>b.byteLength)return a(1);if(M[0]=b[I++],M[1]=b[I++],M[2]=b[I++],M[3]=b[I++],2!=M[0]||2!=M[1]||(M[2]<<8|M[3])!=C)return a(3,"bad rgbe scanline format");let U,z=0;for(;z<F&&I<b.byteLength;){U=b[I++];const H=U>128;if(H&&(U-=128),0===U||z+U>F)return a(3,"bad scanline data");if(H){const L=b[I++];for(let $=0;$<U;$++)T[z++]=L}else T.set(b.subarray(I,I+U),z),z+=U,I+=U}const O=C;for(let H=0;H<O;H++){let L=0;S[E]=T[H+L],L+=C,S[E+1]=T[H+L],L+=C,S[E+2]=T[H+L],L+=C,S[E+3]=T[H+L],E+=4}W--}return S}(_.subarray(_.pos),b,x);if(-1!==w){let C,S,E,I;switch(this.type){case Wr:I=w.length/4;const F=new Float32Array(4*I);for(let T=0;T<I;T++)m(w,4*T,F,4*T);C=F,E=Wr;break;case Co:I=w.length/4;const M=new Uint16Array(4*I);for(let T=0;T<I;T++)g(w,4*T,M,4*T);C=M,E=Co;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:b,height:x,data:C,header:y.string,gamma:y.gamma,exposure:y.exposure,format:S,type:E}}}return null}setDataType(t){return this.type=t,this}load(t,e,i,s){return super.load(t,function r(o,a){switch(o.type){case Wr:case Co:o.encoding=$r,o.minFilter=Sn,o.magFilter=Sn,o.generateMipmaps=!1,o.flipY=!0}e&&e(o,a)},i,s)}}let ES=(()=>{class n{constructor(){this.deltaX=.01,this.deltaY=.01,this.deltaZ=.01,this.far=100,this.fov=35,this.gammaFactor=2.2,this.gammaOutput=!0,this.near=1,this.physicallyCorrectLights=!0,this.sceneBackground=9419988,this.renderer=new fn({antialias:!0}),this.clock=new RB,this.mixers=new Array,this.modelPosition=new D(0,-1,0),this.modelScale=new D(.01,.01,.01),this.loadingManager=new aS,this.directionalLightOptions={color:15524284,intensity:20},this.hemisphereOptions={skyColor:16772785,groundColor:32800,intensity:4},this.createCamera=()=>{this.camera=new Li(this.fov,this.aspect,this.near,this.far),this.camera.position.set(7,4,9.5)},this.createControls=()=>this.controls=new nle(this.camera,this.container),this.createLight=()=>{this.hemisphere=new lS(this.hemisphereOptions.skyColor,this.hemisphereOptions.groundColor,this.hemisphereOptions.intensity),this.mainLight=new pS(this.directionalLightOptions.color,this.directionalLightOptions.intensity),this.mainLight.position.set(-7,-4,-9.5),this.scene.add(this.hemisphere)},this.createModels=(e,i,s)=>{this.loader=new Aae(this.loadingManager);const r=o=>{const a=o.scene.children[0];a.position.copy(i),a.scale.copy(s);const l=o.animations[0];if(l){const c=new LB(a);this.mixers.push(c),c.clipAction(l).play()}this.scene.add(a),console.log(this.scene)};this.loader.load(e,o=>{r(o)},()=>{},o=>console.log(o))},this.onWindowResize=()=>{this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer&&this.renderer.setSize(this.container.clientWidth,this.container.clientHeight)},this.createRenderer=()=>{this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=nn,this.container.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize)},this.update=()=>{const e=this.clock.getDelta();this.mixers.forEach(i=>i.update(e))},this.render=()=>this.renderer.render(this.scene,this.camera),this.start=()=>this.renderer.setAnimationLoop(()=>{this.update(),this.render()}),this.stop=()=>this.renderer.setAnimationLoop(()=>{}),this.initialize=(e,i)=>{this.container=e,this.scene=new Dy,this.scene.background=new we(this.sceneBackground),this.aspect=e.clientWidth/e.clientHeight,this.createCamera(),this.createControls(),this.createLight(),this.initializeLoadingManager(),this.createModels(i.modelUrl,i.modelPosition,i.modelScale),this.createRenderer(),this.setEnviromentLighting().then(s=>{this.scene.environment=s}),this.start()}}setEnviromentLighting(){return new Promise((e,i)=>{new ile(this.loadingManager).load("./assets/hdr/venice_sunset.hdr",s=>{s.mapping=303,e(s)})})}initializeLoadingManager(){this.loadingManager.onStart=(e,i,s)=>{var r,o;(null===(o=null===(r=this.container)||void 0===r?void 0:r.parentElement)||void 0===o?void 0:o.lastChild).classList.remove("fade-out")},this.loadingManager.onLoad=()=>{var e,i;(null===(i=null===(e=this.container)||void 0===e?void 0:e.parentElement)||void 0===i?void 0:i.lastChild).classList.add("fade-out")},this.loadingManager.onProgress=(e,i,s)=>{var r,o;const a=null===(o=null===(r=this.container)||void 0===r?void 0:r.parentElement)||void 0===o?void 0:o.lastChild;(null==a?void 0:a.lastChild).innerText=Math.round(i/s*100)+"%"},this.loadingManager.onError=e=>{console.log("There was an error loading "+e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const sle=new K("cdk-dir-doc",{providedIn:"root",factory:function rle(){return xd(it)}}),ole=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Qn=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new he,e){const s=e.documentElement?e.documentElement.dir:null;this.value=function ale(n){const t=(null==n?void 0:n.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?ole.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||s||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(j(sle,8))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({}),n})();function lV(n){for(let t in n){let e=n[t]||"";switch(t){case"display":n.display="flex"===e?["-webkit-flex","flex"]:"inline-flex"===e?["-webkit-inline-flex","inline-flex"]:e;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+t]=e;break;case"flex-direction":e=e||"row",n["-webkit-flex-direction"]=e,n["flex-direction"]=e;break;case"order":n.order=n["-webkit-"+t]=isNaN(+e)?"0":e}}return n}const AS="inline",pv=["row","column","row-reverse","column-reverse"];function cV(n){let[t,e,i]=dV(n);return function cle(n,t=null,e=!1){return{display:e?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":t||null}}(t,e,i)}function dV(n){var t;n=null!==(t=null==n?void 0:n.toLowerCase())&&void 0!==t?t:"";let[e,i,s]=n.split(" ");return pv.find(r=>r===e)||(e=pv[0]),i===AS&&(i=s!==AS?s:"",s=AS),[e,lle(i),!!s]}function Rp(n){let[t]=dV(n);return t.indexOf("row")>-1}function lle(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}function wa(n,...t){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let e of t)if(null!=e)for(let i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}const ule={provide:Pw,useFactory:function dle(n,t){return()=>{if(Ql(t)){const e=Array.from(n.querySelectorAll(`[class*=${uV}]`)),i=/\bflex-layout-.+?\b/g;e.forEach(s=>{s.classList.contains(`${uV}ssr`)&&s.parentNode?s.parentNode.removeChild(s):s.className.replace(i,"")})}}},deps:[it,Gs],multi:!0},uV="flex-layout-";let TS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[ule]}),n})();class Oc{constructor(t=!1,e="all",i="",s="",r=0){this.matches=t,this.mediaQuery=e,this.mqAlias=i,this.suffix=s,this.priority=r,this.property=""}clone(){return new Oc(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let hle=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(e,i,s){const r=this.stylesheet.get(e);r?r.set(i,s):this.stylesheet.set(e,new Map([[i,s]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(e,i){const s=this.stylesheet.get(e);let r="";if(s){const o=s.get(i);("number"==typeof o||"string"==typeof o)&&(r=o+"")}return r}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kS={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},eo=new K("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>kS}),Xu=new K("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),RS=new K("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function hV(n,t){return n=n?n.clone():new Oc,t&&(n.mqAlias=t.alias,n.mediaQuery=t.mediaQuery,n.suffix=t.suffix,n.priority=t.priority),n}class Zn{constructor(){this.shouldCache=!0}sideEffect(t,e,i){}}let Pn=(()=>{class n{constructor(e,i,s,r){this._serverStylesheet=e,this._serverModuleLoaded=i,this._platformId=s,this.layoutConfig=r}applyStyleToElement(e,i,s=null){let r={};"string"==typeof i&&(r[i]=s,i=r),r=this.layoutConfig.disableVendorPrefixes?i:lV(i),this._applyMultiValueStyleToElement(r,e)}applyStyleToElements(e,i=[]){const s=this.layoutConfig.disableVendorPrefixes?e:lV(e);i.forEach(r=>{this._applyMultiValueStyleToElement(s,r)})}getFlowDirection(e){const i="flex-direction";let s=this.lookupStyle(e,i);return[s||"row",this.lookupInlineStyle(e,i)||eu(this._platformId)&&this._serverModuleLoaded?s:""]}hasWrap(e){return"wrap"===this.lookupStyle(e,"flex-wrap")}lookupAttributeValue(e,i){var s;return null!==(s=e.getAttribute(i))&&void 0!==s?s:""}lookupInlineStyle(e,i){return Ql(this._platformId)?e.style.getPropertyValue(i):function fle(n,t){var e;return null!==(e=fV(n)[t])&&void 0!==e?e:""}(e,i)}lookupStyle(e,i,s=!1){let r="";return e&&((r=this.lookupInlineStyle(e,i))||(Ql(this._platformId)?s||(r=getComputedStyle(e).getPropertyValue(i)):this._serverModuleLoaded&&(r=this._serverStylesheet.getStyleForElement(e,i)))),r?r.trim():""}_applyMultiValueStyleToElement(e,i){Object.keys(e).sort().forEach(s=>{const r=e[s],o=Array.isArray(r)?r:[r];o.sort();for(let a of o)a=a?a+"":"",Ql(this._platformId)||!this._serverModuleLoaded?Ql(this._platformId)?i.style.setProperty(s,a):ple(i,s,a):this._serverStylesheet.addStyleToElement(i,s,a)})}}return n.\u0275fac=function(e){return new(e||n)(j(hle),j(Xu),j(Gs),j(eo))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ple(n,t,e){t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=fV(n);i[t]=null!=e?e:"",function mle(n,t){let e="";for(const i in t)t[i]&&(e+=`${i}:${t[i]};`);n.setAttribute("style",e)}(n,i)}function fV(n){const t={},e=n.getAttribute("style");if(e){const i=e.split(/;+/g);for(let s=0;s<i.length;s++){const r=i[s].trim();if(r.length>0){const o=r.indexOf(":");if(-1===o)throw new Error(`Invalid CSS style: ${r}`);t[r.substr(0,o).trim()]=r.substr(o+1).trim()}}}return t}function Ip(n,t){return(t&&t.priority||0)-(n&&n.priority||0)}function gle(n,t){return(n.priority||0)-(t.priority||0)}let IS=(()=>{class n{constructor(e,i,s){this._zone=e,this._platformId=i,this._document=s,this.source=new ns(new Oc(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const e=[];return this.registry.forEach((i,s)=>{i.matches&&e.push(s)}),e}isActive(e){var i;const s=this.registry.get(e);return null!==(i=null==s?void 0:s.matches)&&void 0!==i?i:this.registerQuery(e).some(r=>r.matches)}observe(e,i=!1){if(e&&e.length){const s=this._observable$.pipe(un(o=>!i||e.indexOf(o.mediaQuery)>-1));return wn(new Jt(o=>{const a=this.registerQuery(e);if(a.length){const l=a.pop();a.forEach(c=>{o.next(c)}),this.source.next(l)}o.complete()}),s)}return this._observable$}registerQuery(e){const i=Array.isArray(e)?e:[e],s=[];return function _le(n,t){const e=n.filter(i=>!pV[i]);if(e.length>0){const i=e.join(", ");try{const s=t.createElement("style");s.setAttribute("type","text/css"),s.styleSheet||s.appendChild(t.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),t.head.appendChild(s),e.forEach(r=>pV[r]=s)}catch(s){console.error(s)}}}(i,this._document),i.forEach(r=>{const o=l=>{this._zone.run(()=>this.source.next(new Oc(l.matches,r)))};let a=this.registry.get(r);a||(a=this.buildMQL(r),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(r,a)),a.matches&&s.push(new Oc(!0,r))}),s}ngOnDestroy(){let e;for(;e=this.pendingRemoveListenerFns.pop();)e()}buildMQL(e){return function yle(n,t){return t&&window.matchMedia("all").addListener?window.matchMedia(n):{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(e,Ql(this._platformId))}}return n.\u0275fac=function(e){return new(e||n)(j(Xe),j(Gs),j(it))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pV={},vle=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],mV="(orientation: portrait) and (max-width: 599.98px)",gV="(orientation: landscape) and (max-width: 959.98px)",_V="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",yV="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",vV="(orientation: portrait) and (min-width: 840px)",bV="(orientation: landscape) and (min-width: 1280px)",Ma={HANDSET:`${mV}, ${gV}`,TABLET:`${_V} , ${yV}`,WEB:`${vV}, ${bV} `,HANDSET_PORTRAIT:`${mV}`,TABLET_PORTRAIT:`${_V} `,WEB_PORTRAIT:`${vV}`,HANDSET_LANDSCAPE:`${gV}`,TABLET_LANDSCAPE:`${yV}`,WEB_LANDSCAPE:`${bV}`},ble=[{alias:"handset",priority:2e3,mediaQuery:Ma.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Ma.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Ma.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Ma.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Ma.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Ma.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Ma.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Ma.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Ma.WEB_PORTRAIT,overlapping:!0}],xle=/(\.|-|_)/g;function wle(n){let t=n.length>0?n.charAt(0):"",e=n.length>1?n.slice(1):"";return t.toUpperCase()+e}const Dle=new K("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=xd(RS),t=xd(eo),e=[].concat.apply([],(n||[]).map(s=>Array.isArray(s)?s:[s]));return function Sle(n,t=[]){const e={};return n.forEach(i=>{e[i.alias]=i}),t.forEach(i=>{e[i.alias]?wa(e[i.alias],i):e[i.alias]=i}),function Cle(n){return n.forEach(t=>{t.suffix||(t.suffix=function Mle(n){return n.replace(xle,"|").split("|").map(wle).join("")}(t.alias),t.overlapping=!!t.overlapping)}),n}(Object.keys(e).map(i=>e[i]))}((t.disableDefaultBps?[]:vle).concat(t.addOrientationBps?ble:[]),e)}});let PS=(()=>{class n{constructor(e){this.findByMap=new Map,this.items=[...e].sort(gle)}findByAlias(e){return e?this.findWithPredicate(e,i=>i.alias===e):null}findByQuery(e){return this.findWithPredicate(e,i=>i.mediaQuery===e)}get overlappings(){return this.items.filter(e=>e.overlapping)}get aliases(){return this.items.map(e=>e.alias)}get suffixes(){return this.items.map(e=>{var i;return null!==(i=null==e?void 0:e.suffix)&&void 0!==i?i:""})}findWithPredicate(e,i){var s;let r=this.findByMap.get(e);return r||(r=null!==(s=this.items.find(i))&&void 0!==s?s:null,this.findByMap.set(e,r)),null!=r?r:null}}return n.\u0275fac=function(e){return new(e||n)(j(Dle))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ku="print",Ele={alias:Ku,mediaQuery:Ku,priority:1e3};let Ale=(()=>{class n{constructor(e,i,s){this.breakpoints=e,this.layoutConfig=i,this._document=s,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new Tle,this.deactivations=[]}withPrintQuery(e){return[...e,Ku]}isPrintEvent(e){return e.mediaQuery.startsWith(Ku)}get printAlias(){var e;return[...null!==(e=this.layoutConfig.printWithBreakpoints)&&void 0!==e?e:[]]}get printBreakPoints(){return this.printAlias.map(e=>this.breakpoints.findByAlias(e)).filter(e=>null!==e)}getEventBreakpoints({mediaQuery:e}){const i=this.breakpoints.findByQuery(e);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(Ip)}updateEvent(e){var i;let s=this.breakpoints.findByQuery(e.mediaQuery);return this.isPrintEvent(e)&&(s=this.getEventBreakpoints(e)[0],e.mediaQuery=null!==(i=null==s?void 0:s.mediaQuery)&&void 0!==i?i:""),hV(e,s)}registerBeforeAfterPrintHooks(e){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(e,this.getEventBreakpoints(new Oc(!0,Ku))),e.updateStyles())},s=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(e),e.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",s),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(s)}interceptEvents(e){return i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(e,this.getEventBreakpoints(i)),e.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(e),e.updateStyles()):this.collectActivations(e,i)}}blockPropagation(){return e=>!(this.isPrinting||this.isPrintEvent(e))}startPrinting(e,i){this.isPrinting=!0,this.formerActivations=e.activatedBreakpoints,e.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(e){e.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(e,i){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!i.matches){const s=this.breakpoints.findByQuery(i.mediaQuery);if(s){const r=this.formerActivations&&this.formerActivations.includes(s),o=!this.formerActivations&&e.activatedBreakpoints.includes(s);(r||o)&&(this.deactivations.push(s),this.deactivations.sort(Ip))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("beforeprint",e)),this.afterPrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("afterprint",e)))}}return n.\u0275fac=function(e){return new(e||n)(j(PS),j(eo),j(it))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Tle{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(t){return t.push(Ele),t.sort(Ip),t.forEach(e=>this.addBreakpoint(e)),this.printBreakpoints}addBreakpoint(t){t&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===t.mediaQuery)&&(this.printBreakpoints=function kle(n){var t;return null!==(t=null==n?void 0:n.mediaQuery.startsWith(Ku))&&void 0!==t&&t}(t)?[t,...this.printBreakpoints]:[...this.printBreakpoints,t])}clear(){this.printBreakpoints=[]}}let Bn=(()=>{class n{constructor(e,i,s){this.matchMedia=e,this.breakpoints=i,this.hook=s,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new ge,this.observeActivations()}get activatedAlias(){var e,i;return null!==(i=null===(e=this.activatedBreakpoints[0])||void 0===e?void 0:e.alias)&&void 0!==i?i:""}set activatedBreakpoints(e){this._activatedBreakpoints=[...e]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(e){this._useFallbacks=e}onMediaChange(e){const i=this.findByQuery(e.mediaQuery);if(i){e=hV(e,i);const s=this.activatedBreakpoints.indexOf(i);e.matches&&-1===s?(this._activatedBreakpoints.push(i),this._activatedBreakpoints.sort(Ip),this.updateStyles()):!e.matches&&-1!==s&&(this._activatedBreakpoints.splice(s,1),this._activatedBreakpoints.sort(Ip),this.updateStyles())}}init(e,i,s,r,o=[]){xV(this.updateMap,e,i,s),xV(this.clearMap,e,i,r),this.buildElementKeyMap(e,i),this.watchExtraTriggers(e,i,o)}getValue(e,i,s){const r=this.elementMap.get(e);if(r){const o=void 0!==s?r.get(s):this.getActivatedValues(r,i);if(o)return o.get(i)}}hasValue(e,i){const s=this.elementMap.get(e);if(s){const r=this.getActivatedValues(s,i);if(r)return void 0!==r.get(i)||!1}return!1}setValue(e,i,s,r){var o;let a=this.elementMap.get(e);if(a){const c=(null!==(o=a.get(r))&&void 0!==o?o:new Map).set(i,s);a.set(r,c),this.elementMap.set(e,a)}else a=(new Map).set(r,(new Map).set(i,s)),this.elementMap.set(e,a);const l=this.getValue(e,i);void 0!==l&&this.updateElement(e,i,l)}trackValue(e,i){return this.subject.asObservable().pipe(un(s=>s.element===e&&s.key===i))}updateStyles(){this.elementMap.forEach((e,i)=>{const s=new Set(this.elementKeyMap.get(i));let r=this.getActivatedValues(e);r&&r.forEach((o,a)=>{this.updateElement(i,a,o),s.delete(a)}),s.forEach(o=>{if(r=this.getActivatedValues(e,o),r){const a=r.get(o);this.updateElement(i,o,a)}else this.clearElement(i,o)})})}clearElement(e,i){const s=this.clearMap.get(e);if(s){const r=s.get(i);r&&(r(),this.subject.next({element:e,key:i,value:""}))}}updateElement(e,i,s){const r=this.updateMap.get(e);if(r){const o=r.get(i);o&&(o(s),this.subject.next({element:e,key:i,value:s}))}}releaseElement(e){const i=this.watcherMap.get(e);i&&(i.forEach(r=>r.unsubscribe()),this.watcherMap.delete(e));const s=this.elementMap.get(e);s&&(s.forEach((r,o)=>s.delete(o)),this.elementMap.delete(e))}triggerUpdate(e,i){const s=this.elementMap.get(e);if(s){const r=this.getActivatedValues(s,i);r&&(i?this.updateElement(e,i,r.get(i)):r.forEach((o,a)=>this.updateElement(e,a,o)))}}buildElementKeyMap(e,i){let s=this.elementKeyMap.get(e);s||(s=new Set,this.elementKeyMap.set(e,s)),s.add(i)}watchExtraTriggers(e,i,s){if(s&&s.length){let r=this.watcherMap.get(e);if(r||(r=new Map,this.watcherMap.set(e,r)),!r.get(i)){const a=wn(...s).subscribe(()=>{const l=this.getValue(e,i);this.updateElement(e,i,l)});r.set(i,a)}}}findByQuery(e){return this.breakpoints.findByQuery(e)}getActivatedValues(e,i){for(let r=0;r<this.activatedBreakpoints.length;r++){const a=e.get(this.activatedBreakpoints[r].alias);if(a&&(void 0===i||a.has(i)&&null!=a.get(i)))return a}if(!this._useFallbacks)return;const s=e.get("");return void 0===i||s&&s.has(i)?s:void 0}observeActivations(){const e=this.breakpoints.items.map(i=>i.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(e)).pipe(Ri(this.hook.interceptEvents(this)),un(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(e){return new(e||n)(j(IS),j(PS),j(Ale))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xV(n,t,e,i){var s;if(void 0!==i){const r=null!==(s=n.get(t))&&void 0!==s?s:new Map;r.set(e,i),n.set(t,r)}}let Wn=(()=>{class n{constructor(e,i,s,r){this.elementRef=e,this.styleBuilder=i,this.styler=s,this.marshal=r,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new ge,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,this.marshal.activatedAlias)}ngOnChanges(e){Object.keys(e).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const s=i.split(".").slice(1).join(".");this.setValue(e[i].currentValue,s)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(e=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),e)}addStyles(e,i){const s=this.styleBuilder,r=s.shouldCache;let o=this.styleCache.get(e);(!o||!r)&&(o=s.buildStyles(e,i),r&&this.styleCache.set(e,o)),this.mru=Object.assign({},o),this.applyStyleToElement(o),s.sideEffect(e,o,i)}clearStyles(){Object.keys(this.mru).forEach(e=>{this.mru[e]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(e,i=!1){if(e){const[s,r]=this.styler.getFlowDirection(e);if(!r&&i){const o=cV(s);this.styler.applyStyleToElements(o,[e])}return s.trim()}return"row"}hasWrap(e){return this.styler.hasWrap(e)}applyStyleToElement(e,i,s=this.nativeElement){this.styler.applyStyleToElement(s,e,i)}setValue(e,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,i)}updateWithValue(e){this.currentValue!==e&&(this.addStyles(e),this.currentValue=e)}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(Zn),v(Pn),v(Bn))},n.\u0275dir=G({type:n,features:[Gt]}),n})();function wV(n,t="1",e="1"){let i=[t,e,n],s=n.indexOf("calc");if(s>0){i[2]=MV(n.substring(s).trim());let r=n.substr(0,s).trim().split(" ");2==r.length&&(i[0]=r[0],i[1]=r[1])}else if(0==s)i[2]=MV(n.trim());else{let r=n.split(" ");i=3===r.length?r:[t,e,n]}return i}function MV(n){return n.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}function mv(n,t){if(void 0===t)return n;const e=i=>{const s=+i.slice(0,-"x".length);return n.endsWith("x")&&!isNaN(s)?`${s*t.value}${t.unit}`:n};return n.includes(" ")?n.split(" ").map(e).join(" "):e(n)}function st(n){return Hn((t,e)=>{Rs(n).subscribe(new kn(e,()=>e.complete(),rd)),!e.closed&&t.subscribe(e)})}let Ple=(()=>{class n extends Zn{buildStyles(e,{display:i}){const s=cV(e);return Object.assign(Object.assign({},s),{display:"none"===i?i:s.display})}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=xe(n)))(i||n)}}(),n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ole=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let Lle=(()=>{class n extends Wn{constructor(e,i,s,r,o){super(e,s,i,r),this._config=o,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(e){var i;const r=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=null!==(i=SV.get(r))&&void 0!==i?i:new Map,SV.set(r,this.styleCache),this.currentValue!==e&&(this.addStyles(e,{display:r}),this.currentValue=e)}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(Pn),v(Ple),v(Bn),v(eo))},n.\u0275dir=G({type:n,features:[Y]}),n})(),Pp=(()=>{class n extends Lle{constructor(){super(...arguments),this.inputs=Ole}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=xe(n)))(i||n)}}(),n.\u0275dir=G({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[Y]}),n})();const SV=new Map,DV={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let Fle=(()=>{class n extends Zn{constructor(e,i){super(),this._styler=e,this._config=i}buildStyles(e,i){return e.endsWith(gv)?function jle(n,t){const[e,i]=n.split(" "),r=c=>`-${c}`;let o="0px",a=r(null!=i?i:e),l="0px";return"rtl"===t?l=r(e):o=r(e),{margin:`0px ${o} ${a} ${l}`}}(e=mv(e=e.slice(0,e.indexOf(gv)),this._config.multiplier),i.directionality):{}}sideEffect(e,i,s){const r=s.items;if(e.endsWith(gv)){const o=function Gle(n,t){const[e,i]=n.split(" ");let r="0px",a="0px";return"rtl"===t?a=e:r=e,{padding:`0px ${r} ${null!=i?i:e} ${a}`}}(e=mv(e=e.slice(0,e.indexOf(gv)),this._config.multiplier),s.directionality);this._styler.applyStyleToElements(o,s.items)}else{e=mv(e,this._config.multiplier),e=this.addFallbackUnit(e);const o=r.pop(),a=function Wle(n,t){const e=EV(t.directionality,t.layout),i=Object.assign({},DV);return i[e]=n,i}(e,s);this._styler.applyStyleToElements(a,r),this._styler.applyStyleToElements(DV,[o])}}addFallbackUnit(e){return isNaN(+e)?e:`${e}${this._config.defaultUnit}`}}return n.\u0275fac=function(e){return new(e||n)(j(Pn),j(eo))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Nle=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let Ble=(()=>{class n extends Wn{constructor(e,i,s,r,o,a){super(e,o,r,a),this.zone=i,this.directionality=s,this.styleUtils=r,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new ge;const l=[this.directionality.change,this.observerSubject.asObservable()];this.init(l),this.marshal.trackValue(this.nativeElement,"layout").pipe(st(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const e=this.nativeElement.children,i=[];for(let s=e.length;s--;)i[s]=e[s];return i}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(e){const s=e.value.split(" ");this.layout=s[0],pv.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(e){const i=this.childrenNodes.filter(s=>1===s.nodeType&&this.willDisplay(s)).sort((s,r)=>{const o=+this.styler.lookupStyle(s,"order"),a=+this.styler.lookupStyle(r,"order");return isNaN(o)||isNaN(a)||o===a?0:o>a?1:-1});if(i.length>0){const s=this.directionality.value,r=this.layout;"row"===r&&"rtl"===s?this.styleCache=Vle:"row"===r&&"rtl"!==s?this.styleCache=zle:"column"===r&&"rtl"===s?this.styleCache=Hle:"column"===r&&"rtl"!==s&&(this.styleCache=Ule),this.addStyles(e,{directionality:s,items:i,layout:r})}}clearStyles(){const e=Object.keys(this.mru).length>0,i=e?"padding":EV(this.directionality.value,this.layout);e&&super.clearStyles(),this.styleUtils.applyStyleToElements({[i]:""},this.childrenNodes)}willDisplay(e){const i=this.marshal.getValue(e,"show-hide");return!0===i||void 0===i&&"none"!==this.styleUtils.lookupStyle(e,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{"undefined"!=typeof MutationObserver&&(this.observer=new MutationObserver(e=>{e.some(s=>s.addedNodes&&s.addedNodes.length>0||s.removedNodes&&s.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(Xe),v(Qn),v(Pn),v(Fle),v(Bn))},n.\u0275dir=G({type:n,features:[Y]}),n})(),OS=(()=>{class n extends Ble{constructor(){super(...arguments),this.inputs=Nle}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=xe(n)))(i||n)}}(),n.\u0275dir=G({type:n,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[Y]}),n})();const Vle=new Map,Hle=new Map,zle=new Map,Ule=new Map,gv=" grid";function EV(n,t){switch(t){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":default:return"rtl"===n?"margin-left":"margin-right";case"row-reverse":return"rtl"===n?"margin-right":"margin-left"}}let $le=(()=>{class n extends Zn{constructor(e){super(),this.layoutConfig=e}buildStyles(e,i){let[s,r,...o]=e.split(" "),a=o.join(" ");const l=i.direction.indexOf("column")>-1?"column":"row",c=Rp(l)?"max-width":"max-height",d=Rp(l)?"min-width":"min-height",u=String(a).indexOf("calc")>-1,h=u||"auto"===a,f=String(a).indexOf("%")>-1&&!u,p=String(a).indexOf("px")>-1||String(a).indexOf("rem")>-1||String(a).indexOf("em")>-1||String(a).indexOf("vw")>-1||String(a).indexOf("vh")>-1;let m=u||p;s="0"==s?0:s,r="0"==r?0:r;const g=!s&&!r;let _={};const y={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(a||""){case"":const b=!1!==this.layoutConfig.useColumnBasisZero;a="row"===l?"0%":b?"0.000000001px":"auto";break;case"initial":case"nogrow":s=0,a="auto";break;case"grow":a="100%";break;case"noshrink":r=0,a="auto";break;case"auto":break;case"none":s=0,r=0,a="auto";break;default:!m&&!f&&!isNaN(a)&&(a+="%"),"0%"===a&&(m=!0),"0px"===a&&(a="0%"),_=wa(y,u?{"flex-grow":s,"flex-shrink":r,"flex-basis":m?a:"100%"}:{flex:`${s} ${r} ${m?a:"100%"}`})}return _.flex||_["flex-grow"]||(_=wa(y,u?{"flex-grow":s,"flex-shrink":r,"flex-basis":a}:{flex:`${s} ${r} ${a}`})),"0%"!==a&&"0px"!==a&&"0.000000001px"!==a&&"auto"!==a&&(_[d]=g||m&&s?a:null,_[c]=g||!h&&r?a:null),_[d]||_[c]?i.hasWrap&&(_[u?"flex-basis":"flex"]=_[c]?u?_[c]:`${s} ${r} ${_[c]}`:u?_[d]:`${s} ${r} ${_[d]}`):_=wa(y,u?{"flex-grow":s,"flex-shrink":r,"flex-basis":a}:{flex:`${s} ${r} ${a}`}),wa(_,{"box-sizing":"border-box"})}}return n.\u0275fac=function(e){return new(e||n)(j(eo))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qle=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let Yle=(()=>{class n extends Wn{constructor(e,i,s,r,o){super(e,r,i,o),this.layoutConfig=s,this.marshal=o,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(e){this.flexShrink=e||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(e){this.flexGrow=e||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(st(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(st(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(e){const s=e.value.split(" ");this.direction=s[0],this.wrap=void 0!==s[1]&&"wrap"===s[1],this.triggerUpdate()}updateWithValue(e){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const s=this.direction,r=s.startsWith("row"),o=this.wrap;r&&o?this.styleCache=Qle:r&&!o?this.styleCache=Xle:!r&&o?this.styleCache=Zle:!r&&!o&&(this.styleCache=Kle);const l=wV(String(e).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(l.join(" "),{direction:s,hasWrap:o})}triggerReflow(){const e=this.activatedValue;if(void 0!==e){const i=wV(e+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,i.join(" "))}}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(Pn),v(eo),v($le),v(Bn))},n.\u0275dir=G({type:n,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[Y]}),n})(),Op=(()=>{class n extends Yle{constructor(){super(...arguments),this.inputs=qle}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=xe(n)))(i||n)}}(),n.\u0275dir=G({type:n,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[Y]}),n})();const Xle=new Map,Kle=new Map,Qle=new Map,Zle=new Map;let xce=(()=>{class n extends Zn{buildStyles(e,i){const s={},[r,o]=e.split(" ");switch(r){case"center":s["justify-content"]="center";break;case"space-around":s["justify-content"]="space-around";break;case"space-between":s["justify-content"]="space-between";break;case"space-evenly":s["justify-content"]="space-evenly";break;case"end":case"flex-end":s["justify-content"]="flex-end";break;default:s["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":s["align-items"]=s["align-content"]="flex-start";break;case"center":s["align-items"]=s["align-content"]="center";break;case"end":case"flex-end":s["align-items"]=s["align-content"]="flex-end";break;case"space-between":s["align-content"]="space-between",s["align-items"]="stretch";break;case"space-around":s["align-content"]="space-around",s["align-items"]="stretch";break;case"baseline":s["align-content"]="stretch",s["align-items"]="baseline";break;default:s["align-items"]=s["align-content"]="stretch"}return wa(s,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===o?Rp(i.layout)?null:"100%":null,"max-height":"stretch"===o&&Rp(i.layout)?"100%":null})}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=xe(n)))(i||n)}}(),n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wce=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let Mce=(()=>{class n extends Wn{constructor(e,i,s,r){super(e,s,i,r),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(st(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(e){const i=this.layout||"row",s=this.inline;"row"===i&&s?this.styleCache=Ace:"row"!==i||s?"row-reverse"===i&&s?this.styleCache=kce:"row-reverse"!==i||s?"column"===i&&s?this.styleCache=Tce:"column"!==i||s?"column-reverse"===i&&s?this.styleCache=Rce:"column-reverse"===i&&!s&&(this.styleCache=Ece):this.styleCache=Sce:this.styleCache=Dce:this.styleCache=Cce,this.addStyles(e,{layout:i,inline:s})}onLayoutChange(e){const i=e.value.split(" ");this.layout=i[0],this.inline=e.value.includes("inline"),pv.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(Pn),v(xce),v(Bn))},n.\u0275dir=G({type:n,features:[Y]}),n})(),LS=(()=>{class n extends Mce{constructor(){super(...arguments),this.inputs=wce}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=xe(n)))(i||n)}}(),n.\u0275dir=G({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[Y]}),n})();const Cce=new Map,Sce=new Map,Dce=new Map,Ece=new Map,Ace=new Map,Tce=new Map,kce=new Map,Rce=new Map;let AV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[TS,Pc]]}),n})();function ve(n){return null!=n&&"false"!=`${n}`}function $i(n,t=0){return function Ice(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function TV(n){return Array.isArray(n)?n:[n]}function xi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Fi(n){return n instanceof ue?n.nativeElement:n}class Oce extends yt{constructor(t,e){super()}schedule(t,e=0){return this}}const _v={setInterval(...n){const{delegate:t}=_v;return((null==t?void 0:t.setInterval)||setInterval)(...n)},clearInterval(n){const{delegate:t}=_v;return((null==t?void 0:t.clearInterval)||clearInterval)(n)},delegate:void 0};class FS extends Oce{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return _v.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;_v.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let s,i=!1;try{this.work(t)}catch(r){i=!0,s=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,sd(i,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const kV={now:()=>(kV.delegate||Date).now(),delegate:void 0};class Lp{constructor(t,e=Lp.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}}Lp.now=kV.now;class NS extends Lp{constructor(t,e=Lp.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const yv=new NS(FS),RV=yv;function BS(n,t=yv){return Hn((e,i)=>{let s=null,r=null,o=null;const a=()=>{if(s){s.unsubscribe(),s=null;const c=r;r=null,i.next(c)}};function l(){const c=o+n,d=t.now();if(d<c)return s=this.schedule(void 0,c-d),void i.add(s);a()}e.subscribe(new kn(i,c=>{r=c,o=t.now(),s||(s=t.schedule(l,n),i.add(s))},()=>{a(),i.complete()},void 0,()=>{r=s=null}))})}let VS,IV=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lce=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=Fi(e);return new Jt(s=>{const o=this._observeElement(i).subscribe(s);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new ge,s=this._mutationObserverFactory.create(r=>i.next(r));s&&s.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:s,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:s}=this._observedElements.get(e);i&&i.disconnect(),s.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(j(IV))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vv=(()=>{class n{constructor(e,i,s){this._contentObserver=e,this._elementRef=i,this._ngZone=s,this.event=new he,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=ve(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=$i(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(BS(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(v(Lce),v(ue),v(Xe))},n.\u0275dir=G({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Fp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[IV]}),n})();try{VS="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){VS=!1}let Np,bv,Lc,HS,Ni=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Ql(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!VS)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(j(Gs))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function to(n){return function Fce(){if(null==Np&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Np=!0}))}finally{Np=Np||!1}return Np}()?n:!!n.capture}function LV(){if(null==Lc){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Lc=!1,Lc;if("scrollBehavior"in document.documentElement.style)Lc=!0;else{const n=Element.prototype.scrollTo;Lc=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Lc}function Bp(){if("object"!=typeof document||!document)return 0;if(null==bv){const n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),bv=0,0===n.scrollLeft&&(n.scrollLeft=1,bv=0===n.scrollLeft?1:2),n.remove()}return bv}function xv(n){if(function Nce(){if(null==HS){const n="undefined"!=typeof document?document.head:null;HS=!(!n||!n.createShadowRoot&&!n.attachShadow)}return HS}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function FV(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function _r(n){return n.composedPath?n.composedPath()[0]:n.target}function zS(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function Bi(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function th(n,t=Na){return n=null!=n?n:Yce,Hn((e,i)=>{let s,r=!0;e.subscribe(new kn(i,o=>{const a=t(o);(r||!n(s,a))&&(r=!1,s=a,i.next(o))}))})}function Yce(n,t){return n===t}class VV{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ge,this._typeaheadSubscription=yt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new ge,this.change=new ge,t instanceof Ya&&t.changes.subscribe(e=>{if(this._activeItem){const s=e.toArray().indexOf(this._activeItem);s>-1&&s!==this._activeItemIndex&&(this._activeItemIndex=s)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Ri(e=>this._pressedLetters.push(e)),BS(t),un(()=>this._pressedLetters.length>0),Et(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let s=1;s<i.length+1;s++){const r=(this._activeItemIndex+s)%i.length,o=i[r];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(r);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,s=["altKey","ctrlKey","metaKey","shiftKey"].every(r=>!t[r]||this._allowedModifierKeys.indexOf(r)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&s){this.setNextItemActive();break}return;case 38:if(this._vertical&&s){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&s){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&s){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&s){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&s){this.setLastItemActive();break}return;default:return void((s||Bi(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),i="number"==typeof t?t:e.indexOf(t),s=e[i];this._activeItem=null==s?null:s,this._activeItemIndex=i}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const s=(this._activeItemIndex+t*i+e.length)%e.length;if(!this._skipPredicateFn(e[s]))return void this.setActiveItem(s)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(!i[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof Ya?this._items.toArray():this._items}}class Qce extends VV{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class Sv extends VV{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let HV=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function Jce(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function Zce(n){try{return n.frameElement}catch(t){return null}}(function ade(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===UV(i)||!this.isVisible(i)))return!1;let s=e.nodeName.toLowerCase(),r=UV(e);return e.hasAttribute("contenteditable")?-1!==r:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function rde(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===s?!!e.hasAttribute("controls")&&-1!==r:"video"===s?-1!==r&&(null!==r||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function ode(n){return!function tde(n){return function ide(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function ede(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function nde(n){return function sde(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||zV(n))}(e)&&!this.isDisabled(e)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(j(Ni))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zV(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function UV(n){if(!zV(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class lde{constructor(t,e,i,s,r=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=s,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return null==i||i.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const s=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(s)return s}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const s=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(s)return s}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(yn(1)).subscribe(t)}}let GV=(()=>{class n{constructor(e,i,s){this._checker=e,this._ngZone=i,this._document=s}create(e,i=!1){return new lde(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(j(HV),j(Xe),j(it))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cde=(()=>{class n{constructor(e,i,s){this._elementRef=e,this._focusTrapFactory=i,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=ve(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=ve(e)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const i=e.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=FV(),this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(GV),v(it))},n.\u0275dir=G({type:n,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[Gt]}),n})();function jS(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function WS(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const dde=new K("cdk-input-modality-detector-options"),ude={ignoreKeys:[18,17,224,91,16]},nh=to({passive:!0,capture:!0});let hde=(()=>{class n{constructor(e,i,s,r){this._platform=e,this._mostRecentTarget=null,this._modality=new ns(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=_r(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(jS(o)?"keyboard":"mouse"),this._mostRecentTarget=_r(o))},this._onTouchstart=o=>{WS(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=_r(o))},this._options=Object.assign(Object.assign({},ude),r),this.modalityDetected=this._modality.pipe(function qce(n){return un((t,e)=>n<=e)}(1)),this.modalityChanged=this.modalityDetected.pipe(th()),e.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,nh),s.addEventListener("mousedown",this._onMousedown,nh),s.addEventListener("touchstart",this._onTouchstart,nh)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,nh),document.removeEventListener("mousedown",this._onMousedown,nh),document.removeEventListener("touchstart",this._onTouchstart,nh))}}return n.\u0275fac=function(e){return new(e||n)(j(Ni),j(Xe),j(it),j(dde,8))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fde=new K("liveAnnouncerElement",{providedIn:"root",factory:function pde(){return null}}),mde=new K("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let gde=(()=>{class n{constructor(e,i,s,r){this._ngZone=i,this._defaultOptions=r,this._document=s,this._liveElement=e||this._createLiveElement()}announce(e,...i){const s=this._defaultOptions;let r,o;return 1===i.length&&"number"==typeof i[0]?o=i[0]:[r,o]=i,this.clear(),clearTimeout(this._previousTimeout),r||(r=s&&s.politeness?s.politeness:"polite"),null==o&&s&&(o=s.duration),this._liveElement.setAttribute("aria-live",r),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var e,i;clearTimeout(this._previousTimeout),null===(e=this._liveElement)||void 0===e||e.remove(),this._liveElement=null,null===(i=this._currentResolve)||void 0===i||i.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),s=this._document.createElement("div");for(let r=0;r<i.length;r++)i[r].remove();return s.classList.add(e),s.classList.add("cdk-visually-hidden"),s.setAttribute("aria-atomic","true"),s.setAttribute("aria-live","polite"),this._document.body.appendChild(s),s}}return n.\u0275fac=function(e){return new(e||n)(j(fde,8),j(Xe),j(it),j(mde,8))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _de=new K("cdk-focus-monitor-default-options"),Dv=to({passive:!0,capture:!0});let Io=(()=>{class n{constructor(e,i,s,r,o){this._ngZone=e,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ge,this._rootNodeFocusAndBlurListener=a=>{const l=_r(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let d=l;d;d=d.parentElement)c.call(this,a,d)},this._document=r,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(e,i=!1){const s=Fi(e);if(!this._platform.isBrowser||1!==s.nodeType)return Qe(null);const r=xv(s)||this._getDocument(),o=this._elementInfo.get(s);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new ge,rootNode:r};return this._elementInfo.set(s,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const i=Fi(e),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(e,i,s){const r=Fi(e);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof r.focus&&r.focus(s))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const s=this._elementInfo.get(i),r=_r(e);!s||!s.checkChildren&&i!==r||this._originChanged(i,this._getFocusOrigin(r),s)}_onBlur(e,i){const s=this._elementInfo.get(i);!s||s.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(s.subject,null))}_emitOrigin(e,i){this._ngZone.run(()=>e.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Dv),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Dv)}),this._rootNodeFocusListenerCount.set(i,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(st(this._stopInputModalityDetector)).subscribe(r=>{this._setOrigin(r,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Dv),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Dv),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,s){this._setClasses(e,i),this._emitOrigin(s.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((s,r)=>{(r===e||s.checkChildren&&r.contains(e))&&i.push([r,s])}),i}}return n.\u0275fac=function(e){return new(e||n)(j(Xe),j(Ni),j(hde),j(it,8),j(_de,8))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$S=(()=>{class n{constructor(e,i){this._elementRef=e,this._focusMonitor=i,this.cdkFocusChange=new he}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>this.cdkFocusChange.emit(i))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(Io))},n.\u0275dir=G({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),n})();const WV="cdk-high-contrast-black-on-white",$V="cdk-high-contrast-white-on-black",qS="cdk-high-contrast-active";let qV=(()=>{class n{constructor(e,i){this._platform=e,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(e):null,r=(s&&s.backgroundColor||"").replace(/ /g,"");switch(e.remove(),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(qS),e.remove(WV),e.remove($V),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(e.add(qS),e.add(WV)):2===i&&(e.add(qS),e.add($V))}}}return n.\u0275fac=function(e){return new(e||n)(j(Ni),j(it))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ev=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(j(qV))},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Fp]]}),n})();class YV{}const Ca="*";function Jn(n,t){return{type:7,name:n,definitions:t,options:{}}}function Qt(n,t=null){return{type:4,styles:t,timings:n}}function KV(n,t=null){return{type:2,steps:n,options:t}}function He(n){return{type:6,styles:n,offset:null}}function Ot(n,t,e){return{type:0,name:n,styles:t,options:e}}function Fc(n){return{type:5,steps:n}}function Wt(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function Av(n=null){return{type:9,options:n}}function Tv(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function QV(n){Promise.resolve(null).then(n)}class ih{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){QV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class ZV{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,s=0;const r=this.players.length;0==r?QV(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==r&&this._onFinish()}),o.onDestroy(()=>{++i==r&&this._onDestroy()}),o.onStart(()=>{++s==r&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const s=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(s)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}function JV(){return"undefined"!=typeof window&&void 0!==window.document}function XS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function xl(n){switch(n.length){case 0:return new ih;case 1:return n[0];default:return new ZV(n)}}function e3(n,t,e,i,s={},r={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(d=>{const u=d.offset,h=u==l,f=h&&c||{};Object.keys(d).forEach(p=>{let m=p,g=d[p];if("offset"!==p)switch(m=t.normalizePropertyName(m,o),g){case"!":g=s[p];break;case Ca:g=r[p];break;default:g=t.normalizeStyleValue(p,m,g,o)}f[m]=g}),h||a.push(f),c=f,l=u}),o.length){const d="\n - ";throw new Error(`Unable to animate due to the following errors:${d}${o.join(d)}`)}return a}function KS(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&QS(e,"start",n)));break;case"done":n.onDone(()=>i(e&&QS(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&QS(e,"destroy",n)))}}function QS(n,t,e){const i=e.totalTime,r=ZS(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==i?n.totalTime:i,!!e.disabled),o=n._data;return null!=o&&(r._data=o),r}function ZS(n,t,e,i,s="",r=0,o){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:s,totalTime:r,disabled:!!o}}function Qs(n,t,e){let i;return n instanceof Map?(i=n.get(t),i||n.set(t,i=e)):(i=n[t],i||(i=n[t]=e)),i}function t3(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let JS=(n,t)=>!1,n3=(n,t,e)=>[];(XS()||"undefined"!=typeof Element)&&(JS=JV()?(n,t)=>{for(;t&&t!==document.documentElement;){if(t===n)return!0;t=t.parentNode||t.host}return!1}:(n,t)=>n.contains(t),n3=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let Nc=null,s3=!1;function eD(n){Nc||(Nc=function bde(){return"undefined"!=typeof document?document.body:null}()||{},s3=!!Nc.style&&"WebkitAppearance"in Nc.style);let t=!0;return Nc.style&&!function vde(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Nc.style,!t&&s3&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Nc.style)),t}const tD=JS,nD=n3;function r3(n){const t={};return Object.keys(n).forEach(e=>{const i=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[i]=n[e]}),t}let o3=(()=>{class n{validateStyleProperty(e){return eD(e)}matchesElement(e,i){return!1}containsElement(e,i){return tD(e,i)}query(e,i,s){return nD(e,i,s)}computeStyle(e,i,s){return s||""}animate(e,i,s,r,o,a=[],l){return new ih(s,r)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})(),iD=(()=>{class n{}return n.NOOP=new o3,n})();const sD="ng-enter",kv="ng-leave",Rv="ng-trigger",Iv=".ng-trigger",l3="ng-animating",rD=".ng-animating";function Bc(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:oD(parseFloat(t[1]),t[2])}function oD(n,t){return"s"===t?1e3*n:n}function Pv(n,t,e){return n.hasOwnProperty("duration")?n:function Mde(n,t,e){let s,r=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};s=oD(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(r=oD(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else s=n;if(!e){let a=!1,l=t.length;s<0&&(t.push("Duration values below 0 are not allowed for this animation step."),a=!0),r<0&&(t.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&t.splice(l,0,`The provided timing value "${n}" is invalid.`)}return{duration:s,delay:r,easing:o}}(n,t,e)}function sh(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function wl(n,t,e={}){if(t)for(let i in n)e[i]=n[i];else sh(n,e);return e}function d3(n,t,e){return e?t+":"+e+";":""}function u3(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=d3(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=d3(0,Dde(e),n.style[e]));n.setAttribute("style",t)}function Po(n,t,e){n.style&&(Object.keys(t).forEach(i=>{const s=lD(i);e&&!e.hasOwnProperty(i)&&(e[i]=n.style[s]),n.style[s]=t[i]}),XS()&&u3(n))}function Vc(n,t){n.style&&(Object.keys(t).forEach(e=>{const i=lD(e);n.style[i]=""}),XS()&&u3(n))}function zp(n){return Array.isArray(n)?1==n.length?n[0]:KV(n):n}const aD=new RegExp("{{\\s*(.+?)\\s*}}","g");function h3(n){let t=[];if("string"==typeof n){let e;for(;e=aD.exec(n);)t.push(e[1]);aD.lastIndex=0}return t}function Ov(n,t,e){const i=n.toString(),s=i.replace(aD,(r,o)=>{let a=t[o];return t.hasOwnProperty(o)||(e.push(`Please provide a value for the animation param ${o}`),a=""),a.toString()});return s==i?n:s}function Lv(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const Sde=/-+([a-z0-9])/g;function lD(n){return n.replace(Sde,(...t)=>t[1].toUpperCase())}function Dde(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function f3(n,t){return 0===n||0===t}function p3(n,t,e){const i=Object.keys(e);if(i.length&&t.length){let r=t[0],o=[];if(i.forEach(a=>{r.hasOwnProperty(a)||o.push(a),r[a]=e[a]}),o.length)for(var s=1;s<t.length;s++){let a=t[s];o.forEach(function(l){a[l]=cD(n,l)})}}return t}function Zs(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function cD(n,t){return window.getComputedStyle(n)[t]}function Ede(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Ade(n,t,e){if(":"==n[0]){const l=function Tde(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,e);if("function"==typeof l)return void t.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(`The provided transition expression "${n}" is not supported`),t;const s=i[1],r=i[2],o=i[3];t.push(m3(s,o));"<"==r[0]&&!("*"==s&&"*"==o)&&t.push(m3(o,s))}(i,e,t)):e.push(n),e}const Nv=new Set(["true","1"]),Bv=new Set(["false","0"]);function m3(n,t){const e=Nv.has(n)||Bv.has(n),i=Nv.has(t)||Bv.has(t);return(s,r)=>{let o="*"==n||n==s,a="*"==t||t==r;return!o&&e&&"boolean"==typeof s&&(o=s?Nv.has(n):Bv.has(n)),!a&&i&&"boolean"==typeof r&&(a=r?Nv.has(t):Bv.has(t)),o&&a}}const kde=new RegExp("s*:selfs*,?","g");function dD(n,t,e){return new Rde(n).build(t,e)}class Rde{constructor(t){this._driver=t}build(t,e){const i=new Ode(e);return this._resetContextStyleTimingState(i),Zs(this,zp(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,s=e.depCount=0;const r=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,r.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);i+=l.queryCount,s+=l.depCount,o.push(l)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:r,transitions:o,queryCount:i,depCount:s,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),s=t.options&&t.options.params||null;if(i.containsDynamicStyles){const r=new Set,o=s||{};if(i.styles.forEach(a=>{if(Vv(a)){const l=a;Object.keys(l).forEach(c=>{h3(l[c]).forEach(d=>{o.hasOwnProperty(d)||r.add(d)})})}}),r.size){const a=Lv(r.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${a.join(", ")}`)}}return{type:0,name:t.name,style:i,options:s?{params:s}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Zs(this,zp(t.animation),e);return{type:1,matchers:Ede(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Hc(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Zs(this,i,e)),options:Hc(t.options)}}visitGroup(t,e){const i=e.currentTime;let s=0;const r=t.steps.map(o=>{e.currentTime=i;const a=Zs(this,o,e);return s=Math.max(s,e.currentTime),a});return e.currentTime=s,{type:3,steps:r,options:Hc(t.options)}}visitAnimate(t,e){const i=function Fde(n,t){let e=null;if(n.hasOwnProperty("duration"))e=n;else if("number"==typeof n)return uD(Pv(n,t).duration,0,"");const i=n;if(i.split(/\s+/).some(r=>"{"==r.charAt(0)&&"{"==r.charAt(1))){const r=uD(0,0,"");return r.dynamic=!0,r.strValue=i,r}return e=e||Pv(i,t),uD(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let s,r=t.styles?t.styles:He({});if(5==r.type)s=this.visitKeyframes(r,e);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=He(c)}e.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,s=l}return e.currentAnimateTimings=null,{type:4,timings:i,style:s,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[];Array.isArray(t.styles)?t.styles.forEach(o=>{"string"==typeof o?o==Ca?i.push(o):e.errors.push(`The provided style string value ${o} is not allowed.`):i.push(o)}):i.push(t.styles);let s=!1,r=null;return i.forEach(o=>{if(Vv(o)){const a=o,l=a.easing;if(l&&(r=l,delete a.easing),!s)for(let c in a)if(a[c].toString().indexOf("{{")>=0){s=!0;break}}}),{type:6,styles:i,easing:r,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let s=e.currentTime,r=e.currentTime;i&&r>0&&(r-=i.duration+i.delay),t.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void e.errors.push(`The provided animation property "${a}" is not a supported CSS property for animations`);const l=e.collectedStyles[e.currentQuerySelector],c=l[a];let d=!0;c&&(r!=s&&r>=c.startTime&&s<=c.endTime&&(e.errors.push(`The CSS property "${a}" that exists between the times of "${c.startTime}ms" and "${c.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${s}ms"`),d=!1),r=c.startTime),d&&(l[a]={startTime:r,endTime:s}),e.options&&function Cde(n,t,e){const i=t.params||{},s=h3(n);s.length&&s.forEach(r=>{i.hasOwnProperty(r)||e.push(`Unable to resolve the local animation param ${r} in the given list of values`)})}(o[a],e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),i;let r=0;const o=[];let a=!1,l=!1,c=0;const d=t.steps.map(_=>{const y=this._makeStyleAst(_,e);let b=null!=y.offset?y.offset:function Lde(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(Vv(e)&&e.hasOwnProperty("offset")){const i=e;t=parseFloat(i.offset),delete i.offset}});else if(Vv(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(y.styles),x=0;return null!=b&&(r++,x=y.offset=b),l=l||x<0||x>1,a=a||x<c,c=x,o.push(x),y});l&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");const u=t.steps.length;let h=0;r>0&&r<u?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(h=1/(u-1));const f=u-1,p=e.currentTime,m=e.currentAnimateTimings,g=m.duration;return d.forEach((_,y)=>{const b=h>0?y==f?1:h*y:o[y],x=b*g;e.currentTime=p+m.delay+x,m.duration=x,this._validateStyleAst(_,e),_.offset=b,i.styles.push(_)}),i}visitReference(t,e){return{type:8,animation:Zs(this,zp(t.animation),e),options:Hc(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Hc(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Hc(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,s=t.options||{};e.queryCount++,e.currentQuery=t;const[r,o]=function Ide(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(kde,"")),n=n.replace(/@\*/g,Iv).replace(/@\w+/g,e=>Iv+"-"+e.substr(1)).replace(/:animating/g,rD),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+r:r,Qs(e.collectedStyles,e.currentQuerySelector,{});const a=Zs(this,zp(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:r,limit:s.limit||0,optional:!!s.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:Hc(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:Pv(t.timings,e.errors,!0);return{type:12,animation:Zs(this,zp(t.animation),e),timings:i,options:null}}}class Ode{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Vv(n){return!Array.isArray(n)&&"object"==typeof n}function Hc(n){return n?(n=sh(n)).params&&(n.params=function Pde(n){return n?sh(n):null}(n.params)):n={},n}function uD(n,t,e){return{duration:n,delay:t,easing:e}}function hD(n,t,e,i,s,r,o=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:s,delay:r,totalTime:s+r,easing:o,subTimeline:a}}class Hv{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Vde=new RegExp(":enter","g"),zde=new RegExp(":leave","g");function fD(n,t,e,i,s,r={},o={},a,l,c=[]){return(new Ude).buildKeyframes(n,t,e,i,s,r,o,a,l,c)}class Ude{buildKeyframes(t,e,i,s,r,o,a,l,c,d=[]){c=c||new Hv;const u=new pD(t,e,c,s,r,d,[]);u.options=l,u.currentTimeline.setStyles([o],null,u.errors,l),Zs(this,i,u);const h=u.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let p=h.length-1;p>=0;p--){const m=h[p];if(m.element===e){f=m;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,u.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[hD(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const s=e.createSubContext(t.options),r=e.currentTimeline.currentTime,o=this._visitSubInstructions(i,s,s.options);r!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let r=e.currentTimeline.currentTime;const o=null!=i.duration?Bc(i.duration):null,a=null!=i.delay?Bc(i.delay):null;return 0!==o&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);r=Math.max(r,c.duration+c.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Zs(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let s=e;const r=t.options;if(r&&(r.params||r.delay)&&(s=e.createSubContext(r),s.transformIntoNewTimeline(),null!=r.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=zv);const o=Bc(r.delay);s.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Zs(this,o,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>i&&s.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let s=e.currentTimeline.currentTime;const r=t.options&&t.options.delay?Bc(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);r&&a.delayNextStep(r),Zs(this,o,a),s=Math.max(s,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(s),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return Pv(e.params?Ov(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),s=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),s.snapshotCurrentStyles());const r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(i.duration),this.visitStyle(r,e),s.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,s=e.currentAnimateTimings;!s&&i.getCurrentStyleProperties().length&&i.forwardFrame();const r=s&&s.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(r):i.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,s=e.currentTimeline.duration,r=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*r),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(s+r),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,s=t.options||{},r=s.delay?Bc(s.delay):0;r&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=zv);let o=i;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!s.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{e.currentQueryIndex=d;const u=e.createSubContext(t.options,c);r&&u.delayNextStep(r),c===e.element&&(l=u.currentTimeline),Zs(this,t.animation,u),u.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,u.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,s=e.currentTimeline,r=t.timings,o=Math.abs(r.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const d=e.currentTimeline;l&&d.delayNextStep(l);const u=d.currentTime;Zs(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=s.currentTime-u+(s.startTime-i.currentTimeline.startTime)}}const zv={};class pD{constructor(t,e,i,s,r,o,a,l){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=s,this._leaveClassName=r,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=zv,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Uv(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let s=this.options;null!=i.duration&&(s.duration=Bc(i.duration)),null!=i.delay&&(s.delay=Bc(i.delay));const r=i.params;if(r){let o=s.params;o||(o=this.options.params={}),Object.keys(r).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=Ov(r[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(s=>{i[s]=e[s]})}}return t}createSubContext(t=null,e,i){const s=e||this.element,r=new pD(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,i||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=zv,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const s={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},r=new Gde(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,s,t.stretchStartingKeyframe);return this.timelines.push(r),s}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,s,r,o){let a=[];if(s&&a.push(this.element),t.length>0){t=(t=t.replace(Vde,"."+this._enterClassName)).replace(zde,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!r&&0==a.length&&o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),a}}class Uv{constructor(t,e,i,s){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Uv(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Ca,this._currentKeyframe[e]=Ca}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,s){e&&(this._previousKeyframe.easing=e);const r=s&&s.params||{},o=function jde(n,t){const e={};let i;return n.forEach(s=>{"*"===s?(i=i||Object.keys(t),i.forEach(r=>{e[r]=Ca})):wl(s,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=Ov(o[a],r,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:Ca),this._updateStyle(a,l)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const i=this._styleSummary[e],s=t._styleSummary[e];(!i||s.time>i.time)&&this._updateStyle(e,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((a,l)=>{const c=wl(a,!0);Object.keys(c).forEach(d=>{const u=c[d];"!"==u?t.add(d):u==Ca&&e.add(d)}),i||(c.offset=l/this.duration),s.push(c)});const r=t.size?Lv(t.values()):[],o=e.size?Lv(e.values()):[];if(i){const a=s[0],l=sh(a);a.offset=0,l.offset=1,s=[a,l]}return hD(this.element,s,r,o,this.duration,this.startTime,this.easing,!1)}}class Gde extends Uv{constructor(t,e,i,s,r,o,a=!1){super(t,e,o.delay),this.keyframes=i,this.preStyleProps=s,this.postStyleProps=r,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:s}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],o=i+e,a=e/o,l=wl(t[0],!1);l.offset=0,r.push(l);const c=wl(t[0],!1);c.offset=y3(a),r.push(c);const d=t.length-1;for(let u=1;u<=d;u++){let h=wl(t[u],!1);h.offset=y3((e+h.offset*i)/o),r.push(h)}i=o,e=0,s="",t=r}return hD(this.element,t,this.preStyleProps,this.postStyleProps,i,e,s,!0)}}function y3(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class mD{}class Wde extends mD{normalizePropertyName(t,e){return lD(t)}normalizeStyleValue(t,e,i,s){let r="";const o=i.toString().trim();if($de[e]&&0!==i&&"0"!==i)if("number"==typeof i)r="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&s.push(`Please provide a CSS unit value for ${t}:${i}`)}return o+r}}const $de=(()=>function qde(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function v3(n,t,e,i,s,r,o,a,l,c,d,u,h){return{type:0,element:n,triggerName:t,isRemovalTransition:s,fromState:e,fromStyles:r,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:u,errors:h}}const gD={};class b3{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,s){return function Yde(n,t,e,i,s){return n.some(r=>r(t,e,i,s))}(this.ast.matchers,t,e,i,s)}buildStyles(t,e,i){const s=this._stateStyles["*"],r=this._stateStyles[t],o=s?s.buildStyles(e,i):{};return r?r.buildStyles(e,i):o}build(t,e,i,s,r,o,a,l,c,d){const u=[],h=this.ast.options&&this.ast.options.params||gD,p=this.buildStyles(i,a&&a.params||gD,u),m=l&&l.params||gD,g=this.buildStyles(s,m,u),_=new Set,y=new Map,b=new Map,x="void"===s,w={params:Object.assign(Object.assign({},h),m)},C=d?[]:fD(t,e,this.ast.animation,r,o,p,g,w,c,u);let S=0;if(C.forEach(I=>{S=Math.max(I.duration+I.delay,S)}),u.length)return v3(e,this._triggerName,i,s,x,p,g,[],[],y,b,S,u);C.forEach(I=>{const F=I.element,M=Qs(y,F,{});I.preStyleProps.forEach(W=>M[W]=!0);const T=Qs(b,F,{});I.postStyleProps.forEach(W=>T[W]=!0),F!==e&&_.add(F)});const E=Lv(_.values());return v3(e,this._triggerName,i,s,x,p,g,C,E,y,b,S)}}class Xde{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i={},s=sh(this.defaultParams);return Object.keys(t).forEach(r=>{const o=t[r];null!=o&&(s[r]=o)}),this.styles.styles.forEach(r=>{if("string"!=typeof r){const o=r;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=Ov(l,s,e));const c=this.normalizer.normalizePropertyName(a,e);l=this.normalizer.normalizeStyleValue(a,c,l,e),i[c]=l})}}),i}}class Qde{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states={},e.states.forEach(s=>{this.states[s.name]=new Xde(s.style,s.options&&s.options.params||{},i)}),x3(this.states,"true","1"),x3(this.states,"false","0"),e.transitions.forEach(s=>{this.transitionFactories.push(new b3(t,s,this.states))}),this.fallbackTransition=function Zde(n,t,e){return new b3(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,s){return this.transitionFactories.find(o=>o.match(t,e,i,s))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function x3(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const Jde=new Hv;class eue{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,e){const i=[],s=dD(this._driver,e,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[t]=s}_buildPlayer(t,e,i){const s=t.element,r=e3(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(s,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const s=[],r=this._animations[t];let o;const a=new Map;if(r?(o=fD(this._driver,e,r,sD,kv,{},{},i,Jde,s),o.forEach(d=>{const u=Qs(a,d.element,{});d.postStyleProps.forEach(h=>u[h]=null)})):(s.push("The requested animation doesn't exist or has already been destroyed"),o=[]),s.length)throw new Error(`Unable to create the animation due to the following errors: ${s.join("\n")}`);a.forEach((d,u)=>{Object.keys(d).forEach(h=>{d[h]=this._driver.computeStyle(u,h,Ca)})});const c=xl(o.map(d=>{const u=a.get(d.element);return this._buildPlayer(d,{},u)}));return this._playersById[t]=c,c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,i,s){const r=ZS(e,"","","");return KS(this._getPlayer(t),i,r,s),()=>{}}command(t,e,i,s){if("register"==i)return void this.register(t,s[0]);if("create"==i)return void this.create(t,e,s[0]||{});const r=this._getPlayer(t);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(t)}}}const w3="ng-animate-queued",_D="ng-animate-disabled",rue=[],M3={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},oue={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},yr="__ng_removed";class yD{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function due(n){return null!=n?n:null}(i?t.value:t),i){const r=sh(t);delete r.value,this.options=r}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(s=>{null==i[s]&&(i[s]=e[s])})}}}const Up="void",vD=new yD(Up);class aue{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,vr(e,this._hostClassName)}listen(t,e,i,s){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${e}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function uue(n){return"start"==n||"done"==n}(i))throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${e}" is not supported!`);const r=Qs(this._elementListeners,t,[]),o={name:e,phase:i,callback:s};r.push(o);const a=Qs(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(vr(t,Rv),vr(t,Rv+"-"+e),a[e]=vD),()=>{this._engine.afterFlush(()=>{const l=r.indexOf(o);l>=0&&r.splice(l,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,i,s=!0){const r=this._getTrigger(e),o=new bD(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(vr(t,Rv),vr(t,Rv+"-"+e),this._engine.statesByElement.set(t,a={}));let l=a[e];const c=new yD(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[e]=c,l||(l=vD),c.value!==Up&&l.value===c.value){if(!function pue(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let s=0;s<e.length;s++){const r=e[s];if(!t.hasOwnProperty(r)||n[r]!==t[r])return!1}return!0}(l.params,c.params)){const m=[],g=r.matchStyles(l.value,l.params,m),_=r.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{Vc(t,g),Po(t,_)})}return}const h=Qs(this._engine.playersByElement,t,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==e&&m.queued&&m.destroy()});let f=r.matchTransition(l.value,c.value,t,c.params),p=!1;if(!f){if(!s)return;f=r.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(vr(t,w3),o.onStart(()=>{rh(t,w3)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);const g=this._engine.playersByElement.get(t);if(g){let _=g.indexOf(o);_>=0&&g.splice(_,1)}}),this.players.push(o),h.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,i)=>{delete e[t]}),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(s=>s.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,Iv,!0);i.forEach(s=>{if(s[yr])return;const r=this._engine.fetchNamespacesByElement(s);r.size?r.forEach(o=>o.triggerLeaveAnimation(s,e,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(t,e,i,s){const r=this._engine.statesByElement.get(t),o=new Map;if(r){const a=[];if(Object.keys(r).forEach(l=>{if(o.set(l,r[l].value),this._triggers[l]){const c=this.trigger(t,l,Up,s);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),i&&xl(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const s=new Set;e.forEach(r=>{const o=r.name;if(s.has(o))return;s.add(o);const l=this._triggers[o].fallbackTransition,c=i[o]||vD,d=new yD(Up),u=new bD(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let s=!1;if(i.totalAnimations){const r=i.players.length?i.playersByQueriedElement.get(t):[];if(r&&r.length)s=!0;else{let o=t;for(;o=o.parentNode;)if(i.statesByElement.get(o)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(t),s)i.markElementAsRemoved(this.id,t,!1,e);else{const r=t[yr];(!r||r===M3)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){vr(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const s=i.player;if(s.destroyed)return;const r=i.element,o=this._elementListeners.get(r);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=ZS(r,i.triggerName,i.fromState.value,i.toState.value);l._data=t,KS(i.player,a.phase,l,a.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):e.push(i)}),this._queue=[],e.sort((i,s)=>{const r=i.transition.ast.depCount,o=s.transition.ast.depCount;return 0==r||0==o?r-o:this._engine.driver.containsElement(i.element,s.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class lue{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,r)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new aue(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList.length-1;if(i>=0){let s=!1;for(let r=i;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),s=!0;break}s||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let s=this._namespaceLookup[t];s&&s.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const s=this._namespaceList.indexOf(i);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i){const s=Object.keys(i);for(let r=0;r<s.length;r++){const o=i[s[r]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&e.add(a)}}}return e}trigger(t,e,i,s){if(Gv(e)){const r=this._fetchNamespace(t);if(r)return r.trigger(e,i,s),!0}return!1}insertNode(t,e,i,s){if(!Gv(e))return;const r=e[yr];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,i)}s&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),vr(t,_D)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),rh(t,_D))}removeNode(t,e,i,s){if(Gv(e)){const r=t?this._fetchNamespace(t):null;if(r?r.removeNode(e,s):this.markElementAsRemoved(t,e,!1,s),i){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,s)}}else this._onRemovalComplete(e,s)}markElementAsRemoved(t,e,i,s,r){this.collectedLeaveElements.push(e),e[yr]={namespaceId:t,setForRemoval:s,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:r}}listen(t,e,i,s,r){return Gv(e)?this._fetchNamespace(t).listen(e,i,s,r):()=>{}}_buildInstruction(t,e,i,s,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,s,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,Iv,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,rD,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return xl(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const i=t[yr];if(i&&i.setForRemoval){if(t[yr]=M3,i.namespaceId){this.destroyInnerAnimations(t);const s=this._fetchNamespace(i.namespaceId);s&&s.clearElementCache(t)}this._onRemovalComplete(t,i.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(_D))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,s)=>this._balanceNamespaceList(i,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)vr(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let s=0;s<i.length;s++)i[s]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?xl(e).onDone(()=>{i.forEach(s=>s())}):i.forEach(s=>s())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const i=new Hv,s=[],r=new Map,o=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(O=>{d.add(O);const H=this.driver.query(O,".ng-animate-queued",!0);for(let L=0;L<H.length;L++)d.add(H[L])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=D3(h,this.collectedEnterElements),p=new Map;let m=0;f.forEach((O,H)=>{const L=sD+m++;p.set(H,L),O.forEach($=>vr($,L))});const g=[],_=new Set,y=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const H=this.collectedLeaveElements[O],L=H[yr];L&&L.setForRemoval&&(g.push(H),_.add(H),L.hasAnimation?this.driver.query(H,".ng-star-inserted",!0).forEach($=>_.add($)):y.add(H))}const b=new Map,x=D3(h,Array.from(_));x.forEach((O,H)=>{const L=kv+m++;b.set(H,L),O.forEach($=>vr($,L))}),t.push(()=>{f.forEach((O,H)=>{const L=p.get(H);O.forEach($=>rh($,L))}),x.forEach((O,H)=>{const L=b.get(H);O.forEach($=>rh($,L))}),g.forEach(O=>{this.processLeaveNode(O)})});const w=[],C=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(e).forEach(L=>{const $=L.player,Z=L.element;if(w.push($),this.collectedEnterElements.length){const gt=Z[yr];if(gt&&gt.setForMove){if(gt.previousTriggersValues&&gt.previousTriggersValues.has(L.triggerName)){const ut=gt.previousTriggersValues.get(L.triggerName),ot=this.statesByElement.get(L.element);ot&&ot[L.triggerName]&&(ot[L.triggerName].value=ut)}return void $.destroy()}}const de=!u||!this.driver.containsElement(u,Z),ie=b.get(Z),Be=p.get(Z),Ve=this._buildInstruction(L,i,Be,ie,de);if(Ve.errors&&Ve.errors.length)return void C.push(Ve);if(de)return $.onStart(()=>Vc(Z,Ve.fromStyles)),$.onDestroy(()=>Po(Z,Ve.toStyles)),void s.push($);if(L.isFallbackTransition)return $.onStart(()=>Vc(Z,Ve.fromStyles)),$.onDestroy(()=>Po(Z,Ve.toStyles)),void s.push($);const nt=[];Ve.timelines.forEach(gt=>{gt.stretchStartingKeyframe=!0,this.disabledNodes.has(gt.element)||nt.push(gt)}),Ve.timelines=nt,i.append(Z,Ve.timelines),o.push({instruction:Ve,player:$,element:Z}),Ve.queriedElements.forEach(gt=>Qs(a,gt,[]).push($)),Ve.preStyleProps.forEach((gt,ut)=>{const ot=Object.keys(gt);if(ot.length){let ye=l.get(ut);ye||l.set(ut,ye=new Set),ot.forEach(St=>ye.add(St))}}),Ve.postStyleProps.forEach((gt,ut)=>{const ot=Object.keys(gt);let ye=c.get(ut);ye||c.set(ut,ye=new Set),ot.forEach(St=>ye.add(St))})});if(C.length){const O=[];C.forEach(H=>{O.push(`@${H.triggerName} has failed due to:\n`),H.errors.forEach(L=>O.push(`- ${L}\n`))}),w.forEach(H=>H.destroy()),this.reportError(O)}const S=new Map,E=new Map;o.forEach(O=>{const H=O.element;i.has(H)&&(E.set(H,H),this._beforeAnimationBuild(O.player.namespaceId,O.instruction,S))}),s.forEach(O=>{const H=O.element;this._getPreviousPlayers(H,!1,O.namespaceId,O.triggerName,null).forEach($=>{Qs(S,H,[]).push($),$.destroy()})});const I=g.filter(O=>A3(O,l,c)),F=new Map;S3(F,this.driver,y,c,Ca).forEach(O=>{A3(O,l,c)&&I.push(O)});const T=new Map;f.forEach((O,H)=>{S3(T,this.driver,new Set(O),l,"!")}),I.forEach(O=>{const H=F.get(O),L=T.get(O);F.set(O,Object.assign(Object.assign({},H),L))});const W=[],z=[],U={};o.forEach(O=>{const{element:H,player:L,instruction:$}=O;if(i.has(H)){if(d.has(H))return L.onDestroy(()=>Po(H,$.toStyles)),L.disabled=!0,L.overrideTotalTime($.totalTime),void s.push(L);let Z=U;if(E.size>1){let ie=H;const Be=[];for(;ie=ie.parentNode;){const Ve=E.get(ie);if(Ve){Z=Ve;break}Be.push(ie)}Be.forEach(Ve=>E.set(Ve,Z))}const de=this._buildAnimation(L.namespaceId,$,S,r,T,F);if(L.setRealPlayer(de),Z===U)W.push(L);else{const ie=this.playersByElement.get(Z);ie&&ie.length&&(L.parentPlayer=xl(ie)),s.push(L)}}else Vc(H,$.fromStyles),L.onDestroy(()=>Po(H,$.toStyles)),z.push(L),d.has(H)&&s.push(L)}),z.forEach(O=>{const H=r.get(O.element);if(H&&H.length){const L=xl(H);O.setRealPlayer(L)}}),s.forEach(O=>{O.parentPlayer?O.syncPlayerEvents(O.parentPlayer):O.destroy()});for(let O=0;O<g.length;O++){const H=g[O],L=H[yr];if(rh(H,kv),L&&L.hasAnimation)continue;let $=[];if(a.size){let de=a.get(H);de&&de.length&&$.push(...de);let ie=this.driver.query(H,rD,!0);for(let Be=0;Be<ie.length;Be++){let Ve=a.get(ie[Be]);Ve&&Ve.length&&$.push(...Ve)}}const Z=$.filter(de=>!de.destroyed);Z.length?hue(this,H,Z):this.processLeaveNode(H)}return g.length=0,W.forEach(O=>{this.players.push(O),O.onDone(()=>{O.destroy();const H=this.players.indexOf(O);this.players.splice(H,1)}),O.play()}),W}elementContainsData(t,e){let i=!1;const s=e[yr];return s&&s.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,s,r){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!r||r==Up;a.forEach(c=>{c.queued||!l&&c.triggerName!=s||o.push(c)})}}return(i||s)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||s&&s!=a.triggerName))),o}_beforeAnimationBuild(t,e,i){const r=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,d=c!==r,u=Qs(i,c,[]);this._getPreviousPlayers(c,d,o,a,e.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),u.push(f)})}Vc(r,e.fromStyles)}_buildAnimation(t,e,i,s,r,o){const a=e.triggerName,l=e.element,c=[],d=new Set,u=new Set,h=e.timelines.map(p=>{const m=p.element;d.add(m);const g=m[yr];if(g&&g.removedBeforeQueried)return new ih(p.duration,p.delay);const _=m!==l,y=function fue(n){const t=[];return E3(n,t),t}((i.get(m)||rue).map(S=>S.getRealPlayer())).filter(S=>!!S.element&&S.element===m),b=r.get(m),x=o.get(m),w=e3(0,this._normalizer,0,p.keyframes,b,x),C=this._buildPlayer(p,w,y);if(p.subTimeline&&s&&u.add(m),_){const S=new bD(t,a,m);S.setRealPlayer(C),c.push(S)}return C});c.forEach(p=>{Qs(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function cue(n,t,e){let i;if(n instanceof Map){if(i=n.get(t),i){if(i.length){const s=i.indexOf(e);i.splice(s,1)}0==i.length&&n.delete(t)}}else if(i=n[t],i){if(i.length){const s=i.indexOf(e);i.splice(s,1)}0==i.length&&delete n[t]}return i}(this.playersByQueriedElement,p.element,p))}),d.forEach(p=>vr(p,l3));const f=xl(h);return f.onDestroy(()=>{d.forEach(p=>rh(p,l3)),Po(l,e.toStyles)}),u.forEach(p=>{Qs(s,p,[]).push(f)}),f}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new ih(t.duration,t.delay)}}class bD{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new ih,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(i=>KS(t,e,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Qs(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Gv(n){return n&&1===n.nodeType}function C3(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function S3(n,t,e,i,s){const r=[];e.forEach(l=>r.push(C3(l)));const o=[];i.forEach((l,c)=>{const d={};l.forEach(u=>{const h=d[u]=t.computeStyle(c,u,s);(!h||0==h.length)&&(c[yr]=oue,o.push(c))}),n.set(c,d)});let a=0;return e.forEach(l=>C3(l,r[a++])),o}function D3(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const s=new Set(t),r=new Map;function o(a){if(!a)return 1;let l=r.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:s.has(c)?1:o(c),r.set(a,l),l}return t.forEach(a=>{const l=o(a);1!==l&&e.get(l).push(a)}),e}function vr(n,t){var e;null===(e=n.classList)||void 0===e||e.add(t)}function rh(n,t){var e;null===(e=n.classList)||void 0===e||e.remove(t)}function hue(n,t,e){xl(e).onDone(()=>n.processLeaveNode(t))}function E3(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof ZV?E3(i.players,t):t.push(i)}}function A3(n,t,e){const i=e.get(n);if(!i)return!1;let s=t.get(n);return s?i.forEach(r=>s.add(r)):t.set(n,i),e.delete(n),!0}class jv{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(s,r)=>{},this._transitionEngine=new lue(t,e,i),this._timelineEngine=new eue(t,e,i),this._transitionEngine.onRemovalComplete=(s,r)=>this.onRemovalComplete(s,r)}registerTrigger(t,e,i,s,r){const o=t+"-"+s;let a=this._triggerCache[o];if(!a){const l=[],c=dD(this._driver,r,l);if(l.length)throw new Error(`The animation trigger "${s}" has failed to build due to the following errors:\n - ${l.join("\n - ")}`);a=function Kde(n,t,e){return new Qde(n,t,e)}(s,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,s,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,s){this._transitionEngine.insertNode(t,e,i,s)}onRemove(t,e,i,s){this._transitionEngine.removeNode(t,e,s||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,s){if("@"==i.charAt(0)){const[r,o]=t3(i);this._timelineEngine.command(r,e,o,s)}else this._transitionEngine.trigger(t,e,i,s)}listen(t,e,i,s,r){if("@"==i.charAt(0)){const[o,a]=t3(i);return this._timelineEngine.listen(o,e,a,r)}return this._transitionEngine.listen(t,e,i,s,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function T3(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=xD(t[0]),t.length>1&&(i=xD(t[t.length-1]))):t&&(e=xD(t)),e||i?new mue(n,e,i):null}let mue=(()=>{class n{constructor(e,i,s){this._element=e,this._startStyles=i,this._endStyles=s,this._state=0;let r=n.initialStylesByElement.get(e);r||n.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Po(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Po(this._element,this._initialStyles),this._endStyles&&(Po(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Vc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Vc(this._element,this._endStyles),this._endStyles=null),Po(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function xD(n){let t=null;const e=Object.keys(n);for(let i=0;i<e.length;i++){const s=e[i];gue(s)&&(t=t||{},t[s]=n[s])}return t}function gue(n){return"display"===n||"position"===n}const k3="animation",R3="animationend";class vue{constructor(t,e,i,s,r,o,a){this._element=t,this._name=e,this._duration=i,this._delay=s,this._easing=r,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=l=>this._handleCallback(l)}apply(){(function bue(n,t){const e=MD(n,"").trim();let i=0;e.length&&(i=function wue(n,t){let e=0;for(let i=0;i<n.length;i++)n.charAt(i)===t&&e++;return e}(e,",")+1,t=`${e}, ${t}`),Wv(n,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),O3(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){I3(this._element,this._name,"paused")}resume(){I3(this._element,this._name,"running")}setPosition(t){const e=P3(this._element,this._name);this._position=t*this._duration,Wv(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),O3(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function xue(n,t){const i=MD(n,"").split(","),s=wD(i,t);s>=0&&(i.splice(s,1),Wv(n,"",i.join(",")))}(this._element,this._name))}}function I3(n,t,e){Wv(n,"PlayState",e,P3(n,t))}function P3(n,t){const e=MD(n,"");return e.indexOf(",")>0?wD(e.split(","),t):wD([e],t)}function wD(n,t){for(let e=0;e<n.length;e++)if(n[e].indexOf(t)>=0)return e;return-1}function O3(n,t,e){e?n.removeEventListener(R3,t):n.addEventListener(R3,t)}function Wv(n,t,e,i){const s=k3+t;if(null!=i){const r=n.style[s];if(r.length){const o=r.split(",");o[i]=e,e=o.join(",")}}n.style[s]=e}function MD(n,t){return n.style[k3+t]||""}class L3{constructor(t,e,i,s,r,o,a,l){this.element=t,this.keyframes=e,this.animationName=i,this._duration=s,this._delay=r,this._finalStyles=a,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=s+r,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new vue(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(t[i]=e?this._finalStyles[i]:cD(this.element,i))})}this.currentSnapshot=t}}class Sue extends ih{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=r3(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class N3{constructor(){this._count=0}validateStyleProperty(t){return eD(t)}matchesElement(t,e){return!1}containsElement(t,e){return tD(t,e)}query(t,e,i){return nD(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,i){i=i.map(a=>r3(a));let s=`@keyframes ${e} {\n`,r="";i.forEach(a=>{r=" ";const l=parseFloat(a.offset);s+=`${r}${100*l}% {\n`,r+=" ",Object.keys(a).forEach(c=>{const d=a[c];switch(c){case"offset":return;case"easing":return void(d&&(s+=`${r}animation-timing-function: ${d};\n`));default:return void(s+=`${r}${c}: ${d};\n`)}}),s+=`${r}}\n`}),s+="}\n";const o=document.createElement("style");return o.textContent=s,o}animate(t,e,i,s,r,o=[],a){const l=o.filter(g=>g instanceof L3),c={};f3(i,s)&&l.forEach(g=>{let _=g.currentSnapshot;Object.keys(_).forEach(y=>c[y]=_[y])});const d=function Aue(n){let t={};return n&&(Array.isArray(n)?n:[n]).forEach(i=>{Object.keys(i).forEach(s=>{"offset"==s||"easing"==s||(t[s]=i[s])})}),t}(e=p3(t,e,c));if(0==i)return new Sue(t,d);const u="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,u,e);(function Eue(n){var t;const e=null===(t=n.getRootNode)||void 0===t?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(t).appendChild(h);const p=T3(t,e),m=new L3(t,e,u,i,s,r,d,p);return m.onDestroy(()=>function Tue(n){n.parentNode.removeChild(n)}(h)),m}}class V3{constructor(t,e,i,s){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,i){return t.animate(e,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(i=>{"offset"!=i&&(t[i]=this._finished?e[i]:cD(this.element,i))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class kue{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(H3().toString()),this._cssKeyframesDriver=new N3}validateStyleProperty(t){return eD(t)}matchesElement(t,e){return!1}containsElement(t,e){return tD(t,e)}query(t,e,i){return nD(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,i,s,r,o=[],a){if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,i,s,r,o);const d={duration:i,delay:s,fill:0==s?"both":"forwards"};r&&(d.easing=r);const u={},h=o.filter(p=>p instanceof V3);f3(i,s)&&h.forEach(p=>{let m=p.currentSnapshot;Object.keys(m).forEach(g=>u[g]=m[g])});const f=T3(t,e=p3(t,e=e.map(p=>wl(p,!1)),u));return new V3(t,e,d,f)}}function H3(){return JV()&&Element.prototype.animate||{}}let Iue=(()=>{class n extends YV{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:kr.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(e)?KV(e):e;return z3(this._renderer,null,i,"register",[s]),new Pue(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(j(pf),j(it))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();class Pue extends class yde{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Oue(this._id,t,e||{},this._renderer)}}class Oue{constructor(t,e,i,s){this.id=t,this.element=e,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return z3(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function z3(n,t,e,i,s){return n.setProperty(t,`@@${e}:${i}`,s)}const U3="@.disabled";let Lue=(()=>{class n{constructor(e,i,s){this.delegate=e,this.engine=i,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(r,o)=>{const a=null==o?void 0:o.parentNode(r);a&&o.removeChild(a,r)}}createRenderer(e,i){const r=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let d=this._rendererCache.get(r);return d||(d=new G3("",r,this.engine),this._rendererCache.set(r,d)),d}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(o,a,e,d.name,d)};return i.data.animation.forEach(l),new Fue(this,a,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,s){e>=0&&e<this._microtaskId?this._zone.run(()=>i(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(r=>{const[o,a]=r;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(j(pf),j(jv),j(Xe))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();class G3{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,s=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,s)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,s){this.delegate.setAttribute(t,e,i,s)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,s){this.delegate.setStyle(t,e,i,s)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==U3?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Fue extends G3{constructor(t,e,i,s){super(e,i,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==U3?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.substr(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const s=function Nue(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let r=e.substr(1),o="";return"@"!=r.charAt(0)&&([r,o]=function Bue(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(r)),this.engine.listen(this.namespaceId,s,r,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,e,i)}}let Vue=(()=>{class n extends jv{constructor(e,i,s){super(e.body,i,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(j(it),j(iD),j(mD))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const ei=new K("AnimationModuleType"),j3=[{provide:YV,useClass:Iue},{provide:mD,useFactory:function zue(){return new Wde}},{provide:jv,useClass:Vue},{provide:pf,useFactory:function Uue(n,t,e){return new Lue(n,t,e)},deps:[u_,jv,Xe]}],W3=[{provide:iD,useFactory:function Hue(){return function Rue(){return"function"==typeof H3()}()?new kue:new N3}},{provide:ei,useValue:"BrowserAnimations"},...j3],Gue=[{provide:iD,useClass:o3},{provide:ei,useValue:"NoopAnimations"},...j3];let jue=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?Gue:W3}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:W3,imports:[kO]}),n})();function Wue(n,t){if(1&n&&Ne(0,"mat-pseudo-checkbox",4),2&n){const e=Je();te("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function $ue(n,t){if(1&n&&(N(0,"span",5),tt(1),B()),2&n){const e=Je();Q(1),ar("(",e.group.label,")")}}const que=["*"],Xue=new K("mat-sanity-checks",{providedIn:"root",factory:function Yue(){return!0}});let Ue=(()=>{class n{constructor(e,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!zS()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(j(qV),j(Xue,8),j(it))},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Pc],Pc]}),n})();function Sa(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=ve(t)}}}function Oo(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function br(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=ve(t)}}}function Ml(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?$i(e):this.defaultTabIndex}}}function DD(n){return class extends n{constructor(...t){super(...t),this.stateChanges=new ge,this.errorState=!1}updateErrorState(){const t=this.errorState,r=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);r!==t&&(this.errorState=r,this.stateChanges.next())}}}const Kue=new K("MAT_DATE_LOCALE",{providedIn:"root",factory:function Que(){return xd(ta)}});class ci{constructor(){this._localeChanges=new ge,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),s=this.isValid(e);return i&&s?!this.compareDate(t,e):i==s}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}}const Lo=new K("mat-date-formats"),Zue=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function ED(n,t){const e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}let Jue=(()=>{class n extends ci{constructor(e,i){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return ED(12,s=>this._format(i,new Date(2017,s,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return ED(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return ED(7,s=>this._format(i,new Date(2017,0,s+1)))}getYearName(e){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,s){let r=this._createDateWithOverflow(e,i,s);return r.getMonth(),r}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const s=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},i),{timeZone:"utc"}));return this._format(s,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let s=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(s)!=((this.getMonth(e)+i)%12+12)%12&&(s=this._createDateWithOverflow(this.getYear(s),this.getMonth(s),0)),s}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(Zue.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,s){const r=new Date;return r.setFullYear(e,i,s),r.setHours(0,0,0,0),r}_2digit(e){return("00"+e).slice(-2)}_format(e,i){const s=new Date;return s.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),s.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(s)}}return n.\u0275fac=function(e){return new(e||n)(j(Kue,8),j(Ni))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const ehe={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let the=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[{provide:ci,useClass:Jue}]}),n})(),q3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[{provide:Lo,useValue:ehe}],imports:[[the]]}),n})(),Cl=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function Gp(n,t,e){n.nativeElement.classList.toggle(t,e)}let qv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Ue],Ue]}),n})();class nhe{constructor(t,e,i){this._renderer=t,this.element=e,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const X3={enterDuration:225,exitDuration:150},TD=to({passive:!0}),K3=["mousedown","touchstart"],Q3=["mouseup","mouseleave","touchend","touchcancel"];class Z3{constructor(t,e,i,s){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=Fi(i))}fadeInRipple(t,e,i={}){const s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=Object.assign(Object.assign({},X3),i.animation);i.centered&&(t=s.left+s.width/2,e=s.top+s.height/2);const o=i.radius||function rhe(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),s=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+s*s)}(t,e,s),a=t-s.left,l=e-s.top,c=r.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=l-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d),function she(n){window.getComputedStyle(n).getPropertyValue("opacity")}(d),d.style.transform="scale(1)";const u=new nhe(this,d,i);return u.state=0,this._activeRipples.add(u),i.persistent||(this._mostRecentTransientRipple=u),this._runTimeoutOutsideZone(()=>{const h=u===this._mostRecentTransientRipple;u.state=1,!i.persistent&&(!h||!this._isPointerDown)&&u.fadeOut()},c),u}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const i=t.element,s=Object.assign(Object.assign({},X3),t.config.animation);i.style.transitionDuration=`${s.exitDuration}ms`,i.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,i.remove()},s.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Fi(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(K3))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Q3),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=jS(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!WS(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,TD)})})}_removeTriggerEvents(){this._triggerElement&&(K3.forEach(t=>{this._triggerElement.removeEventListener(t,this,TD)}),this._pointerUpEventsRegistered&&Q3.forEach(t=>{this._triggerElement.removeEventListener(t,this,TD)}))}}const J3=new K("mat-ripple-global-options");let xr=(()=>{class n{constructor(e,i,s,r,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new Z3(this,i,e,s)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,s){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,Object.assign(Object.assign({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(Xe),v(Ni),v(J3,8),v(ei,8))},n.\u0275dir=G({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&Ke("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),wr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Ue],Ue]}),n})(),eH=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(v(ei,8))},n.\u0275cmp=We({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,i){2&e&&Ke("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,i){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),kD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Ue]]}),n})();const tH=new K("MAT_OPTION_PARENT_COMPONENT"),nH=new K("MatOptgroup");let ohe=0;class iH{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let ahe=(()=>{class n{constructor(e,i,s,r){this._element=e,this._changeDetectorRef=i,this._parent=s,this.group=r,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+ohe++,this.onSelectionChange=new he,this._stateChanges=new ge}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=ve(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,i){const s=this._getHostElement();"function"==typeof s.focus&&s.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Bi(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new iH(this,e))}}return n.\u0275fac=function(e){Ud()},n.\u0275dir=G({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),sH=(()=>{class n extends ahe{constructor(e,i,s,r){super(e,i,s,r)}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(At),v(tH,8),v(nH,8))},n.\u0275cmp=We({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,i){1&e&&Ae("click",function(){return i._selectViaInteraction()})("keydown",function(r){return i._handleKeydown(r)}),2&e&&(Vr("id",i.id),Ge("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),Ke("mat-selected",i.selected)("mat-option-multiple",i.multiple)("mat-active",i.active)("mat-option-disabled",i.disabled))},exportAs:["matOption"],features:[Y],ngContentSelectors:que,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,i){1&e&&(dn(),Ye(0,Wue,1,2,"mat-pseudo-checkbox",0),N(1,"span",1),rt(2),B(),Ye(3,$ue,2,1,"span",2),Ne(4,"div",3)),2&e&&(te("ngIf",i.multiple),Q(3),te("ngIf",i.group&&i.group._inert),Q(1),te("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},directives:[eH,dr,xr],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function RD(n,t,e){if(e.length){let i=t.toArray(),s=e.toArray(),r=0;for(let o=0;o<n+1;o++)i[o].group&&i[o].group===s[r]&&r++;return r}return 0}let Yv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[wr,gi,Ue,kD]]}),n})();const lhe=["addListener","removeListener"],che=["addEventListener","removeEventListener"],dhe=["on","off"];function Mr(n,t,e,i){if(bt(e)&&(i=e,e=void 0),i)return Mr(n,t,e).pipe(cM(i));const[s,r]=function fhe(n){return bt(n.addEventListener)&&bt(n.removeEventListener)}(n)?che.map(o=>a=>n[o](t,a,e)):function uhe(n){return bt(n.addListener)&&bt(n.removeListener)}(n)?lhe.map(oH(n,t)):function hhe(n){return bt(n.on)&&bt(n.off)}(n)?dhe.map(oH(n,t)):[];if(!s&&yx(n))return ui(o=>Mr(o,t,e))(Rs(n));if(!s)throw new TypeError("Invalid event target");return new Jt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return s(a),()=>r(a)})}function oH(n,t){return e=>i=>n[e](t,i)}const phe=["connectionContainer"],mhe=["inputContainer"],ghe=["label"];function _he(n,t){1&n&&(Gd(0),N(1,"div",14),Ne(2,"div",15),Ne(3,"div",16),Ne(4,"div",17),B(),N(5,"div",18),Ne(6,"div",15),Ne(7,"div",16),Ne(8,"div",17),B(),jd())}function yhe(n,t){if(1&n){const e=Us();N(0,"div",19),Ae("cdkObserveContent",function(){return si(e),Je().updateOutlineGap()}),rt(1,1),B()}2&n&&te("cdkObserveContentDisabled","outline"!=Je().appearance)}function vhe(n,t){if(1&n&&(Gd(0),rt(1,2),N(2,"span"),tt(3),B(),jd()),2&n){const e=Je(2);Q(3),Ui(e._control.placeholder)}}function bhe(n,t){1&n&&rt(0,3,["*ngSwitchCase","true"])}function xhe(n,t){1&n&&(N(0,"span",23),tt(1," *"),B())}function whe(n,t){if(1&n){const e=Us();N(0,"label",20,21),Ae("cdkObserveContent",function(){return si(e),Je().updateOutlineGap()}),Ye(2,vhe,4,1,"ng-container",12),Ye(3,bhe,1,0,"ng-content",12),Ye(4,xhe,2,0,"span",22),B()}if(2&n){const e=Je();Ke("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),te("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),Ge("for",e._control.id)("aria-owns",e._control.id),Q(2),te("ngSwitchCase",!1),Q(1),te("ngSwitchCase",!0),Q(1),te("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function Mhe(n,t){1&n&&(N(0,"div",24),rt(1,4),B())}function Che(n,t){if(1&n&&(N(0,"div",25),Ne(1,"span",26),B()),2&n){const e=Je();Q(1),Ke("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function She(n,t){1&n&&(N(0,"div"),rt(1,5),B()),2&n&&te("@transitionMessages",Je()._subscriptAnimationState)}function Dhe(n,t){if(1&n&&(N(0,"div",30),tt(1),B()),2&n){const e=Je(2);te("id",e._hintLabelId),Q(1),Ui(e.hintLabel)}}function Ehe(n,t){if(1&n&&(N(0,"div",27),Ye(1,Dhe,2,2,"div",28),rt(2,6),Ne(3,"div",29),rt(4,7),B()),2&n){const e=Je();te("@transitionMessages",e._subscriptAnimationState),Q(1),te("ngIf",e.hintLabel)}}const Ahe=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],The=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let khe=0;const aH=new K("MatError");let Rhe=(()=>{class n{constructor(e,i){this.id="mat-error-"+khe++,e||i.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(e){return new(e||n)(fi("aria-live"),v(ue))},n.\u0275dir=G({type:n,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(e,i){2&e&&Ge("id",i.id)},inputs:{id:"id"},features:[Me([{provide:aH,useExisting:n}])]}),n})();const Ihe={transitionMessages:Jn("transitionMessages",[Ot("enter",He({opacity:1,transform:"translateY(0%)"})),Wt("void => enter",[He({opacity:0,transform:"translateY(-5px)"}),Qt("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let jp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n}),n})(),Phe=0;const lH=new K("MatHint");let Ohe=(()=>{class n{constructor(){this.align="start",this.id="mat-hint-"+Phe++}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(e,i){2&e&&(Ge("id",i.id)("align",null),Ke("mat-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"},features:[Me([{provide:lH,useExisting:n}])]}),n})(),Xv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["mat-label"]]}),n})(),Lhe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["mat-placeholder"]]}),n})();const Fhe=new K("MatPrefix"),cH=new K("MatSuffix");let Nhe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["","matSuffix",""]],features:[Me([{provide:cH,useExisting:n}])]}),n})(),dH=0;const Vhe=Oo(class{constructor(n){this._elementRef=n}},"primary"),Hhe=new K("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Wp=new K("MatFormField");let hH=(()=>{class n extends Vhe{constructor(e,i,s,r,o,a,l){super(e),this._changeDetectorRef=i,this._dir=s,this._defaults=r,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ge,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+dH++,this._labelId="mat-form-field-label-"+dH++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=r&&r.appearance?r.appearance:"legacy",this._hideRequiredMarker=!(!r||null==r.hideRequiredMarker)&&r.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=ve(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(ki(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(st(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(st(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),wn(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ki(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ki(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(st(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Mr(this._label.nativeElement,"transitionend").pipe(yn(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(r=>"start"===r.align):null,s=this._hintChildren?this._hintChildren.find(r=>"end"===r.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),s&&e.push(s.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,s=".mat-form-field-outline-start",r=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const d=i.querySelectorAll(`${s}, ${r}`);for(let u=0;u<d.length;u++)d[u].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const l=i.querySelectorAll(s),c=i.querySelectorAll(r);if(this._label&&this._label.nativeElement.children.length){const d=i.getBoundingClientRect();if(0===d.width&&0===d.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const u=this._getStartEnd(d),h=e.children,f=this._getStartEnd(h[0].getBoundingClientRect());let p=0;for(let m=0;m<h.length;m++)p+=h[m].offsetWidth;o=Math.abs(f-u)-5,a=p>0?.75*p+10:0}for(let d=0;d<l.length;d++)l[d].style.width=`${o}px`;for(let d=0;d<c.length;d++)c[d].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(At),v(Qn,8),v(Hhe,8),v(Ni),v(Xe),v(ei,8))},n.\u0275cmp=We({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,i,s){if(1&e&&(ht(s,jp,5),ht(s,jp,7),ht(s,Xv,5),ht(s,Xv,7),ht(s,Lhe,5),ht(s,aH,5),ht(s,lH,5),ht(s,Fhe,5),ht(s,cH,5)),2&e){let r;fe(r=pe())&&(i._controlNonStatic=r.first),fe(r=pe())&&(i._controlStatic=r.first),fe(r=pe())&&(i._labelChildNonStatic=r.first),fe(r=pe())&&(i._labelChildStatic=r.first),fe(r=pe())&&(i._placeholderChild=r.first),fe(r=pe())&&(i._errorChildren=r),fe(r=pe())&&(i._hintChildren=r),fe(r=pe())&&(i._prefixChildren=r),fe(r=pe())&&(i._suffixChildren=r)}},viewQuery:function(e,i){if(1&e&&(dt(phe,7),dt(mhe,5),dt(ghe,5)),2&e){let s;fe(s=pe())&&(i._connectionContainerRef=s.first),fe(s=pe())&&(i._inputContainerRef=s.first),fe(s=pe())&&(i._label=s.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,i){2&e&&Ke("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[Me([{provide:Wp,useExisting:n}]),Y],ngContentSelectors:The,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,i){1&e&&(dn(Ahe),N(0,"div",0),N(1,"div",1,2),Ae("click",function(r){return i._control.onContainerClick&&i._control.onContainerClick(r)}),Ye(3,_he,9,0,"ng-container",3),Ye(4,yhe,2,1,"div",4),N(5,"div",5,6),rt(7),N(8,"span",7),Ye(9,whe,5,16,"label",8),B(),B(),Ye(10,Mhe,2,0,"div",9),B(),Ye(11,Che,2,4,"div",10),N(12,"div",11),Ye(13,She,2,1,"div",12),Ye(14,Ehe,5,2,"div",13),B(),B()),2&e&&(Q(3),te("ngIf","outline"==i.appearance),Q(1),te("ngIf",i._prefixChildren.length),Q(5),te("ngIf",i._hasFloatingLabel()),Q(1),te("ngIf",i._suffixChildren.length),Q(1),te("ngIf","outline"!=i.appearance),Q(1),te("ngSwitch",i._getDisplayedMessages()),Q(1),te("ngSwitchCase","error"),Q(1),te("ngSwitchCase","hint"))},directives:[dr,vv,Kl,Mf],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Ihe.transitionMessages]},changeDetection:0}),n})(),$p=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[gi,Ue,Fp],Ue]}),n})();const qp={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=qp;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const s=t(r=>{e=void 0,n(r)});return new yt(()=>null==e?void 0:e(s))},requestAnimationFrame(...n){const{delegate:t}=qp;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=qp;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0},fH=new class Uhe extends NS{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let i,s=-1;t=t||e.shift();const r=e.length;do{if(i=t.execute(t.state,t.delay))break}while(++s<r&&(t=e.shift()));if(this._active=!1,i){for(;++s<r&&(t=e.shift());)t.unsubscribe();throw i}}}(class zhe extends FS{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=qp.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);0===t.actions.length&&(qp.cancelAnimationFrame(e),t._scheduled=void 0)}});let ID,Ghe=1;const Kv={};function pH(n){return n in Kv&&(delete Kv[n],!0)}const jhe={setImmediate(n){const t=Ghe++;return Kv[t]=!0,ID||(ID=Promise.resolve()),ID.then(()=>pH(t)&&n()),t},clearImmediate(n){pH(n)}},{setImmediate:Whe,clearImmediate:$he}=jhe,Qv={setImmediate(...n){const{delegate:t}=Qv;return((null==t?void 0:t.setImmediate)||Whe)(...n)},clearImmediate(n){const{delegate:t}=Qv;return((null==t?void 0:t.clearImmediate)||$he)(n)},delegate:void 0};new class Yhe extends NS{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let i,s=-1;t=t||e.shift();const r=e.length;do{if(i=t.execute(t.state,t.delay))break}while(++s<r&&(t=e.shift()));if(this._active=!1,i){for(;++s<r&&(t=e.shift());)t.unsubscribe();throw i}}}(class qhe extends FS{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Qv.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);0===t.actions.length&&(Qv.clearImmediate(e),t._scheduled=void 0)}});function Zv(n=0,t,e=RV){let i=-1;return null!=t&&(cT(t)?e=t:i=t),new Jt(s=>{let r=function Qhe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;r<0&&(r=0);let o=0;return e.schedule(function(){s.closed||(s.next(o++),0<=i?this.schedule(void 0,i):s.complete())},r)})}function mH(n,t=RV){return function Khe(n){return Hn((t,e)=>{let i=!1,s=null,r=null,o=!1;const a=()=>{if(null==r||r.unsubscribe(),r=null,i){i=!1;const c=s;s=null,e.next(c)}o&&e.complete()},l=()=>{r=null,o&&e.complete()};t.subscribe(new kn(e,c=>{i=!0,s=c,r||Rs(n(c)).subscribe(r=new kn(e,a,l))},()=>{o=!0,(!i||!r||r.closed)&&e.complete()}))})}(()=>Zv(n,t))}let PD=(()=>{class n{constructor(e,i,s){this._ngZone=e,this._platform=i,this._scrolled=new ge,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Jt(i=>{this._globalSubscription||this._addGlobalListener();const s=e>0?this._scrolled.pipe(mH(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Qe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const s=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(un(r=>!r||s.indexOf(r)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((s,r)=>{this._scrollableContainsElement(r,e)&&i.push(r)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let s=Fi(i),r=e.getElementRef().nativeElement;do{if(s==r)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Mr(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(j(Xe),j(Ni),j(it,8))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OD=(()=>{class n{constructor(e,i,s,r){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=s,this.dir=r,this._destroyed=new ge,this._elementScrolled=new Jt(o=>this.ngZone.runOutsideAngular(()=>Mr(this.elementRef.nativeElement,"scroll").pipe(st(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const i=this.elementRef.nativeElement,s=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=s?e.end:e.start),null==e.right&&(e.right=s?e.start:e.end),null!=e.bottom&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),s&&0!=Bp()?(null!=e.left&&(e.right=i.scrollWidth-i.clientWidth-e.left),2==Bp()?e.left=e.right:1==Bp()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const i=this.elementRef.nativeElement;LV()?i.scrollTo(e):(null!=e.top&&(i.scrollTop=e.top),null!=e.left&&(i.scrollLeft=e.left))}measureScrollOffset(e){const i="left",s="right",r=this.elementRef.nativeElement;if("top"==e)return r.scrollTop;if("bottom"==e)return r.scrollHeight-r.clientHeight-r.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==e?e=o?s:i:"end"==e&&(e=o?i:s),o&&2==Bp()?e==i?r.scrollWidth-r.clientWidth-r.scrollLeft:r.scrollLeft:o&&1==Bp()?e==i?r.scrollLeft+r.scrollWidth-r.clientWidth:-r.scrollLeft:e==i?r.scrollLeft:r.scrollWidth-r.clientWidth-r.scrollLeft}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(PD),v(Xe),v(Qn,8))},n.\u0275dir=G({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),io=(()=>{class n{constructor(e,i,s){this._platform=e,this._change=new ge,this._changeListener=r=>{this._change.next(r)},this._document=s,i.runOutsideAngular(()=>{if(e.isBrowser){const r=this._getWindow();r.addEventListener("resize",this._changeListener),r.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+s,right:e.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),s=e.documentElement,r=s.getBoundingClientRect();return{top:-r.top||e.body.scrollTop||i.scrollY||s.scrollTop||0,left:-r.left||e.body.scrollLeft||i.scrollX||s.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(mH(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(j(Ni),j(Xe),j(it,8))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({}),n})(),LD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Pc,Fo],Pc,Fo]}),n})();class FD{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class ND extends FD{constructor(t,e,i,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=s}}class Yp extends FD{constructor(t,e,i){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class efe extends FD{constructor(t){super(),this.element=t instanceof ue?t.nativeElement:t}}class gH{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof ND?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Yp?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof efe?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class tfe extends gH{constructor(t,e,i,s,r){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=s,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=r}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let s;return t.viewContainerRef?(s=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>s.destroy())):(s=i.create(t.injector||this._defaultInjector||zn.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=t,s}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context);return i.rootNodes.forEach(s=>this.outletElement.appendChild(s)),i.detectChanges(),this.setDisposeFn(()=>{let s=e.indexOf(i);-1!==s&&e.remove(s)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let oh=(()=>{class n extends gH{constructor(e,i,s){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new he,this.attachDomPortal=r=>{const o=r.element,a=this._document.createComment("dom-portal");r.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=r,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=s}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=i.createComponent(r,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(v(Jo),v(In),v(it))},n.\u0275dir=G({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Y]}),n})(),zc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({}),n})();const _H=LV();class ife{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=xi(-this._previousScrollPosition.left),t.style.top=xi(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,s=this._document.body.style,r=i.scrollBehavior||"",o=s.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),_H&&(i.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),_H&&(i.scrollBehavior=r,s.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class sfe{constructor(t,e,i,s){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class yH{enable(){}disable(){}attach(){}}function BD(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function vH(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class rfe{constructor(t,e,i,s){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=s,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:s}=this._viewportRuler.getViewportSize();BD(e,[{width:i,height:s,bottom:s,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ofe=(()=>{class n{constructor(e,i,s,r){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=s,this.noop=()=>new yH,this.close=o=>new sfe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new ife(this._viewportRuler,this._document),this.reposition=o=>new rfe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=r}}return n.\u0275fac=function(e){return new(e||n)(j(PD),j(io),j(Xe),j(it))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Jv{constructor(t){if(this.scrollStrategy=new yH,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class afe{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class lfe{constructor(t,e,i,s,r,o,a,l,c){this._portalOutlet=t,this._host=e,this._pane=i,this._config=s,this._ngZone=r,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new ge,this._attachments=new ge,this._detachments=new ge,this._locationChanges=yt.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new ge,this._outsidePointerEvents=new ge,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(yn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=xi(this._config.width),t.height=xi(this._config.height),t.minWidth=xi(this._config.minWidth),t.minHeight=xi(this._config.minHeight),t.maxWidth=xi(this._config.maxWidth),t.maxHeight=xi(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,i){const s=TV(e||[]).filter(r=>!!r);s.length&&(i?t.classList.add(...s):t.classList.remove(...s))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(st(wn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let bH=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||zS()){const s=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let r=0;r<s.length;r++)s[r].remove()}const i=this._document.createElement("div");i.classList.add(e),zS()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(j(it),j(Ni))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xH="cdk-overlay-connected-position-bounding-box",cfe=/([A-Za-z%]+)$/;class wH{constructor(t,e,i,s,r){this._viewportRuler=e,this._document=i,this._platform=s,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ge,this._resizeSubscription=yt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(xH),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,s=this._containerRect,r=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,s,a),c=this._getOverlayPoint(l,e,a),d=this._getOverlayFit(c,e,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(d,c,i)?r.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(r.length){let a=null,l=-1;for(const c of r){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Uc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(xH),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let s,r;if("center"==i.originX)s=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;s="start"==i.originX?o:a}return e.left<0&&(s-=e.left),r="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(r-=e.top),{x:s,y:r}}_getOverlayPoint(t,e,i){let s,r;return s="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,r="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+s,y:t.y+r}}_getOverlayFit(t,e,i,s){const r=CH(e);let{x:o,y:a}=t,l=this._getOffset(s,"x"),c=this._getOffset(s,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+r.height-i.height,p=this._subtractOverflows(r.width,0-o,o+r.width-i.width),m=this._subtractOverflows(r.height,h,f),g=p*m;return{visibleArea:g,isCompletelyWithinViewport:r.width*r.height===g,fitsInViewportVertically:m===r.height,fitsInViewportHorizontally:p==r.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const s=i.bottom-e.y,r=i.right-e.x,o=MH(this._overlayRef.getConfig().minHeight),a=MH(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportHorizontally||null!=a&&a<=r;return(t.fitsInViewportVertically||null!=o&&o<=s)&&c}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const s=CH(e),r=this._viewportRect,o=Math.max(t.x+s.width-r.width,0),a=Math.max(t.y+s.height-r.height,0),l=Math.max(r.top-i.top-t.y,0),c=Math.max(r.left-i.left-t.x,0);let d=0,u=0;return d=s.width<=r.width?c||-o:t.x<this._viewportMargin?r.left-i.left-t.x:0,u=s.height<=r.height?l||-a:t.y<this._viewportMargin?r.top-i.top-t.y:0,this._previousPushAmount={x:d,y:u},{x:t.x+d,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),s=new afe(t,i);this._positionChanges.next(s)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,s=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let r=0;r<e.length;r++)e[r].style.transformOrigin=`${i} ${s}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,s=this._isRtl();let r,o,a,d,u,h;if("top"===e.overlayY)o=t.y,r=i.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=i.height-t.y+2*this._viewportMargin,r=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-t.y+i.top,t.y),p=this._lastBoundingBoxSize.height;r=2*f,o=t.y-f,r>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-p/2)}if("end"===e.overlayX&&!s||"start"===e.overlayX&&s)h=i.width-t.x+this._viewportMargin,d=t.x-this._viewportMargin;else if("start"===e.overlayX&&!s||"end"===e.overlayX&&s)u=t.x,d=i.right-t.x;else{const f=Math.min(i.right-t.x+i.left,t.x),p=this._lastBoundingBoxSize.width;d=2*f,u=t.x-f,d>p&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-p/2)}return{top:o,left:u,bottom:a,right:h,width:d,height:r}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const r=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;s.height=xi(i.height),s.top=xi(i.top),s.bottom=xi(i.bottom),s.width=xi(i.width),s.left=xi(i.left),s.right=xi(i.right),s.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",s.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",r&&(s.maxHeight=xi(r)),o&&(s.maxWidth=xi(o))}this._lastBoundingBoxSize=i,Uc(this._boundingBox.style,s)}_resetBoundingBoxStyles(){Uc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Uc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},s=this._hasExactPosition(),r=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(s){const d=this._viewportRuler.getViewportScrollPosition();Uc(i,this._getExactOverlayY(e,t,d)),Uc(i,this._getExactOverlayX(e,t,d))}else i.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(s?i.maxHeight=xi(o.maxHeight):r&&(i.maxHeight="")),o.maxWidth&&(s?i.maxWidth=xi(o.maxWidth):r&&(i.maxWidth="")),Uc(this._pane.style,i)}_getExactOverlayY(t,e,i){let s={top:"",bottom:""},r=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),"bottom"===t.overlayY?s.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":s.top=xi(r.y),s}_getExactOverlayX(t,e,i){let o,s={left:"",right:""},r=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?s.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":s.left=xi(r.x),s}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:vH(t,i),isOriginOutsideView:BD(t,i),isOverlayClipped:vH(e,i),isOverlayOutsideView:BD(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,s)=>i-Math.max(s,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&TV(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof ue)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function Uc(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function MH(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(cfe);return e&&"px"!==e?null:parseFloat(t)}return n||null}function CH(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const SH="cdk-global-overlay-wrapper";class dfe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(SH),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:s,height:r,maxWidth:o,maxHeight:a}=i,l=!("100%"!==s&&"100vw"!==s||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==r&&"100vh"!==r||a&&"100%"!==a&&"100vh"!==a);t.position=this._cssPosition,t.marginLeft=l?"0":this._leftOffset,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,l?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(SH),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let ufe=(()=>{class n{constructor(e,i,s,r){this._viewportRuler=e,this._document=i,this._platform=s,this._overlayContainer=r}global(){return new dfe}flexibleConnectedTo(e){return new wH(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(j(io),j(it),j(Ni),j(bH))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DH=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(j(it))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hfe=(()=>{class n extends DH{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=s=>{const r=this._attachedOverlays;for(let o=r.length-1;o>-1;o--)if(r[o]._keydownEvents.observers.length>0){const a=r[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(s)):a.next(s);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(j(it),j(Xe,8))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ffe=(()=>{class n extends DH{constructor(e,i,s){super(e),this._platform=i,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=_r(r)},this._clickListener=r=>{const o=_r(r),a="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const d=l[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(o)||d.overlayElement.contains(a))break;const u=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>u.next(r)):u.next(r)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(j(it),j(Ni),j(Xe,8))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pfe=0,No=(()=>{class n{constructor(e,i,s,r,o,a,l,c,d,u,h){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=s,this._positionBuilder=r,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=u,this._outsideClickDispatcher=h}create(e){const i=this._createHostElement(),s=this._createPaneElement(i),r=this._createPortalOutlet(s),o=new Jv(e);return o.direction=o.direction||this._directionality.value,new lfe(r,i,s,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+pfe++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Zd)),new tfe(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(j(ofe),j(bH),j(Jo),j(ufe),j(hfe),j(zn),j(Xe),j(it),j(Qn),j(Xg),j(ffe))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const mfe=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],EH=new K("cdk-connected-overlay-scroll-strategy");let AH=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(v(ue))},n.\u0275dir=G({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),TH=(()=>{class n{constructor(e,i,s,r,o){this._overlay=e,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=yt.EMPTY,this._attachSubscription=yt.EMPTY,this._detachSubscription=yt.EMPTY,this._positionSubscription=yt.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new he,this.positionChange=new he,this.attach=new he,this.detach=new he,this.overlayKeydown=new he,this.overlayOutsideClick=new he,this._templatePortal=new Yp(i,s),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=ve(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=ve(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=ve(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=ve(e)}get push(){return this._push}set push(e){this._push=ve(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=mfe);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!Bi(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new Jv({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){const i=this.positions.map(s=>({originX:s.originX,originY:s.originY,overlayX:s.overlayX,overlayY:s.overlayY,offsetX:s.offsetX||this.offsetX,offsetY:s.offsetY||this.offsetY,panelClass:s.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof AH?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function nfe(n,t=!1){return Hn((e,i)=>{let s=0;e.subscribe(new kn(i,r=>{const o=n(r,s++);(o||t)&&i.next(r),!o&&i.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(v(No),v(Xn),v(In),v(EH),v(Qn,8))},n.\u0275dir=G({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Gt]}),n})();const _fe={provide:EH,deps:[No],useFactory:function gfe(n){return()=>n.scrollStrategies.reposition()}};let Gc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[No,_fe],imports:[[Pc,zc,LD],LD]}),n})();class Xp{constructor(t=!1,e,i=!0){this._multiple=t,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ge,e&&e.length&&(t?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}let VD=(()=>{class n{constructor(){this._listeners=[]}notify(e,i){for(let s of this._listeners)s(e,i)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(i=>e!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yfe=["trigger"],vfe=["panel"];function bfe(n,t){if(1&n&&(N(0,"span",8),tt(1),B()),2&n){const e=Je();Q(1),Ui(e.placeholder)}}function xfe(n,t){if(1&n&&(N(0,"span",12),tt(1),B()),2&n){const e=Je(2);Q(1),Ui(e.triggerValue)}}function wfe(n,t){1&n&&rt(0,0,["*ngSwitchCase","true"])}function Mfe(n,t){1&n&&(N(0,"span",9),Ye(1,xfe,2,1,"span",10),Ye(2,wfe,1,0,"ng-content",11),B()),2&n&&(te("ngSwitch",!!Je().customTrigger),Q(2),te("ngSwitchCase",!0))}function Cfe(n,t){if(1&n){const e=Us();N(0,"div",13),N(1,"div",14,15),Ae("@transformPanel.done",function(s){return si(e),Je()._panelDoneAnimatingStream.next(s.toState)})("keydown",function(s){return si(e),Je()._handleKeydown(s)}),rt(3,1),B(),B()}if(2&n){const e=Je();te("@transformPanelWrap",void 0),Q(1),tI("mat-select-panel ",e._getPanelTheme(),""),ts("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),te("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),Ge("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const Sfe=[[["mat-select-trigger"]],"*"],Dfe=["mat-select-trigger","*"],IH={transformPanelWrap:Jn("transformPanelWrap",[Wt("* => void",Tv("@transformPanel",[Av()],{optional:!0}))]),transformPanel:Jn("transformPanel",[Ot("void",He({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Ot("showing",He({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Ot("showing-multiple",He({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Wt("void => *",Qt("120ms cubic-bezier(0, 0, 0.2, 1)")),Wt("* => void",Qt("100ms 25ms linear",He({opacity:0})))])};let PH=0;const LH=new K("mat-select-scroll-strategy"),kfe=new K("MAT_SELECT_CONFIG"),Rfe={provide:LH,deps:[No],useFactory:function Tfe(n){return()=>n.scrollStrategies.reposition()}};class Ife{constructor(t,e){this.source=t,this.value=e}}const Pfe=br(Ml(Sa(DD(class{constructor(n,t,e,i,s){this._elementRef=n,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=s}})))),Ofe=new K("MatSelectTrigger");let Lfe=(()=>{class n extends Pfe{constructor(e,i,s,r,o,a,l,c,d,u,h,f,p,m){var g,_,y;super(o,r,l,c,u),this._viewportRuler=e,this._changeDetectorRef=i,this._ngZone=s,this._dir=a,this._parentFormField=d,this._liveAnnouncer=p,this._defaultOptions=m,this._panelOpen=!1,this._compareWith=(b,x)=>b===x,this._uid="mat-select-"+PH++,this._triggerAriaLabelledBy=null,this._destroy=new ge,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+PH++,this._panelDoneAnimatingStream=new ge,this._overlayPanelClass=(null===(g=this._defaultOptions)||void 0===g?void 0:g.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(y=null===(_=this._defaultOptions)||void 0===_?void 0:_.disableOptionCentering)&&void 0!==y&&y,this.ariaLabel="",this.optionSelectionChanges=m_(()=>{const b=this.options;return b?b.changes.pipe(ki(b),ur(()=>wn(...b.map(x=>x.onSelectionChange)))):this._ngZone.onStable.pipe(yn(1),ur(()=>this.optionSelectionChanges))}),this.openedChange=new he,this._openedStream=this.openedChange.pipe(un(b=>b),Et(()=>{})),this._closedStream=this.openedChange.pipe(un(b=>!b),Et(()=>{})),this.selectionChange=new he,this.valueChange=new he,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==m?void 0:m.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=m.typeaheadDebounceInterval),this._scrollStrategyFactory=f,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(h)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){var e,i,s,r;return null!==(r=null!==(e=this._required)&&void 0!==e?e:null===(s=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===s?void 0:s.hasValidator(aa.required))&&void 0!==r&&r}set required(e){this._required=ve(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=ve(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=ve(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=$i(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new Xp(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(th(),st(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(st(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(ki(null),st(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){const s=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?s.setAttribute("aria-labelledby",e):s.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var e,i;return this.multiple?(null===(e=this._selectionModel)||void 0===e?void 0:e.selected)||[]:null===(i=this._selectionModel)||void 0===i?void 0:i.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const i=e.keyCode,s=40===i||38===i||37===i||39===i,r=13===i||32===i,o=this._keyManager;if(!o.isTyping()&&r&&!Bi(e)||(this.multiple||e.altKey)&&s)e.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(e);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const i=this._keyManager,s=e.keyCode,r=40===s||38===s,o=i.isTyping();if(r&&e.altKey)e.preventDefault(),this.close();else if(o||13!==s&&32!==s||!i.activeItem||Bi(e))if(!o&&this._multiple&&65===s&&e.ctrlKey){e.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=i.activeItemIndex;i.onKeydown(e),this._multiple&&r&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}else e.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(yn(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const i=this.options.find(s=>{if(this._selectionModel.isSelected(s))return!1;try{return null!=s.value&&this._compareWith(s.value,e)}catch(r){return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new Qce(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(st(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(st(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=wn(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(st(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),wn(...this.options.map(i=>i._stateChanges)).pipe(st(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,i){const s=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(s!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),s!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((i,s)=>this.sortComparator?this.sortComparator(i,s,e):e.indexOf(i)-e.indexOf(s)),this.stateChanges.next()}}_propagateChanges(e){let i=null;i=this.multiple?this.selected.map(s=>s.value):this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null===(e=this.options)||void 0===e?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){var e;if(this.ariaLabel)return null;const i=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();return this.ariaLabelledby?(i?i+" ":"")+this.ariaLabelledby:i}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var e;if(this.ariaLabel)return null;const i=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();let s=(i?i+" ":"")+this._valueId;return this.ariaLabelledby&&(s+=" "+this.ariaLabelledby),s}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(e){return new(e||n)(v(io),v(At),v(Xe),v(Cl),v(ue),v(Qn,8),v(wo,8),v(Mo,8),v(Wp,8),v(jr,10),fi("tabindex"),v(LH),v(gde),v(kfe,8))},n.\u0275dir=G({type:n,viewQuery:function(e,i){if(1&e&&(dt(yfe,5),dt(vfe,5),dt(TH,5)),2&e){let s;fe(s=pe())&&(i.trigger=s.first),fe(s=pe())&&(i.panel=s.first),fe(s=pe())&&(i._overlayDir=s.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Y,Gt]}),n})(),Ffe=(()=>{class n extends Lfe{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,i,s){const r=this._getItemHeight();return Math.min(Math.max(0,r*e-i+r/2),s)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(st(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(yn(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const i=RD(e,this.options,this.optionGroups),s=this._getItemHeight();this.panel.nativeElement.scrollTop=0===e&&1===i?0:function rH(n,t,e,i){return n<e?n:n+t>e+i?Math.max(0,n-i+t):e}((e+i)*s,s,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new Ife(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),s=this._isRtl(),r=this.multiple?56:32;let o;if(this.multiple)o=40;else if(this.disableOptionCentering)o=16;else{let c=this._selectionModel.selected[0]||this.options.first;o=c&&c.group?32:16}s||(o*=-1);const a=0-(e.left+o-(s?r:0)),l=e.right+o-i.width+(s?0:r);a>0?o+=a+8:l>0&&(o-=l+8),this._overlayDir.offsetX=Math.round(o),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,i,s){const r=this._getItemHeight(),o=(r-this._triggerRect.height)/2,a=Math.floor(256/r);let l;return this.disableOptionCentering?0:(l=0===this._scrollTop?e*r:this._scrollTop===s?(e-(this._getItemCount()-a))*r+(r-(this._getItemCount()*r-256)%r):i-r/2,Math.round(-1*l-o))}_checkOverlayWithinViewport(e){const i=this._getItemHeight(),s=this._viewportRuler.getViewportSize(),r=this._triggerRect.top-8,o=s.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),c=Math.min(this._getItemCount()*i,256)-a-this._triggerRect.height;c>o?this._adjustPanelUp(c,o):a>r?this._adjustPanelDown(a,r,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,i){const s=Math.round(e-i);this._scrollTop-=s,this._offsetY-=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,i,s){const r=Math.round(e-i);if(this._scrollTop+=r,this._offsetY+=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=s)return this._scrollTop=s,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),i=this._getItemCount(),s=Math.min(i*e,256),o=i*e-s;let a;a=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),a+=RD(a,this.options,this.optionGroups);const l=s/2;this._scrollTop=this._calculateOverlayScroll(a,l,o),this._offsetY=this._calculateOverlayOffsetY(a,l,o),this._checkOverlayWithinViewport(o)}_getOriginBasedOnOption(){const e=this._getItemHeight(),i=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-i+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=xe(n)))(i||n)}}(),n.\u0275cmp=We({type:n,selectors:[["mat-select"]],contentQueries:function(e,i,s){if(1&e&&(ht(s,Ofe,5),ht(s,sH,5),ht(s,nH,5)),2&e){let r;fe(r=pe())&&(i.customTrigger=r.first),fe(r=pe())&&(i.options=r),fe(r=pe())&&(i.optionGroups=r)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,i){1&e&&Ae("keydown",function(r){return i._handleKeydown(r)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&e&&(Ge("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-describedby",i._ariaDescribedby||null)("aria-activedescendant",i._getAriaActiveDescendant()),Ke("mat-select-disabled",i.disabled)("mat-select-invalid",i.errorState)("mat-select-required",i.required)("mat-select-empty",i.empty)("mat-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Me([{provide:jp,useExisting:n},{provide:tH,useExisting:n}]),Y],ngContentSelectors:Dfe,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,i){if(1&e&&(dn(Sfe),N(0,"div",0,1),Ae("click",function(){return i.toggle()}),N(3,"div",2),Ye(4,bfe,2,1,"span",3),Ye(5,Mfe,3,2,"span",4),B(),N(6,"div",5),Ne(7,"div",6),B(),B(),Ye(8,Cfe,4,14,"ng-template",7),Ae("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&e){const s=zs(1);Ge("aria-owns",i.panelOpen?i.id+"-panel":null),Q(3),te("ngSwitch",i.empty),Ge("id",i._valueId),Q(1),te("ngSwitchCase",!0),Q(1),te("ngSwitchCase",!1),Q(3),te("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",s)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayMinWidth",null==i._triggerRect?null:i._triggerRect.width)("cdkConnectedOverlayOffsetY",i._offsetY)}},directives:[AH,Kl,Mf,fO,TH,Yl],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}\n'],encapsulation:2,data:{animation:[IH.transformPanelWrap,IH.transformPanel]},changeDetection:0}),n})(),HD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[Rfe],imports:[[gi,Gc,Yv,Ue],Fo,$p,Yv,Ue]}),n})();const Nfe=["mat-button",""],Bfe=["*"],Hfe=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],zfe=Oo(Sa(br(class{constructor(n){this._elementRef=n}})));let lh=(()=>{class n extends zfe{constructor(e,i,s){super(e),this._focusMonitor=i,this._animationMode=s,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of Hfe)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(Io),v(ei,8))},n.\u0275cmp=We({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&dt(xr,5),2&e){let s;fe(s=pe())&&(i.ripple=s.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(Ge("disabled",i.disabled||null),Ke("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Y],attrs:Nfe,ngContentSelectors:Bfe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(dn(),N(0,"span",0),rt(1),B(),Ne(2,"span",1),Ne(3,"span",2)),2&e&&(Q(2),Ke("mat-button-ripple-round",i.isRoundButton||i.isIconButton),te("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[xr],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),jc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[wr,Ue],Ue]}),n})();const Ufe=["container"];function Gfe(n,t){1&n&&(N(0,"mat-option",15),tt(1,"No Data"),B())}function jfe(n,t){if(1&n&&(N(0,"mat-option",16),tt(1),B()),2&n){const e=t.$implicit;te("value",e),Q(1),Ui(e)}}function Wfe(n,t){1&n&&(N(0,"mat-option",15),tt(1,"No Data"),B())}function $fe(n,t){if(1&n&&(N(0,"mat-option",16),tt(1),B()),2&n){const e=t.$implicit;te("value",e.id),Q(1),Ui(e.name)}}let qfe=(()=>{class n{constructor(e,i){this.scene=e,this.route=i,this.machineId="",this.connectionUrls=["url1","url2"],this.machines=[],this.machineForm=new Uf({connectionUrl:new au("",[aa.required]),machineID:new au("",[aa.required])}),this.route.params.subscribe(s=>{this.machineId=s.id})}ngOnInit(){}set container(e){const i=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem(this.machineId))));this.scene.initialize(e.nativeElement,i)}createDigitalTwin(){console.log(this.machineForm.value)}connectionUrlChanged(){this.machines=[{name:"test",id:1},{name:"test",id:2},{name:"test",id:2},{name:"test",id:4}]}}return n.\u0275fac=function(e){return new(e||n)(v(ES),v(Qa))},n.\u0275cmp=We({type:n,selectors:[["app-create-digital-twin"]],viewQuery:function(e,i){if(1&e&&dt(Ufe,5),2&e){let s;fe(s=pe())&&(i.container=s.first)}},decls:23,vars:6,consts:[["fxLayout","row","fxLayoutAlign","space-between start",1,"main-content"],["fxFlex","75",1,"viewer"],[1,"container"],["container",""],[1,"loading-screen"],["id","loader"],["id","loading-text"],["fxFlex","24","fxLayout","column","fxLayoutAlign","space-between center",1,"right-content"],["fxLayout","column","fxLayoutAlign","start center",1,"form",3,"formGroup"],["appearance","outline"],["required","","formControlName","connectionUrl",3,"selectionChange"],["disabled","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","machineID"],["mat-flat-button","",1,"button",3,"disabled","click"],["disabled",""],[3,"value"]],template:function(e,i){1&e&&(N(0,"div",0),N(1,"div",1),Ne(2,"div",2,3),N(4,"div",4),Ne(5,"div",5),Ne(6,"div",6),B(),B(),N(7,"div",7),N(8,"form",8),N(9,"mat-form-field",9),N(10,"mat-label"),tt(11,"Connection url"),B(),N(12,"mat-select",10),Ae("selectionChange",function(){return i.connectionUrlChanged()}),Ye(13,Gfe,2,0,"mat-option",11),Ye(14,jfe,2,2,"mat-option",12),B(),B(),N(15,"mat-form-field",9),N(16,"mat-label"),tt(17,"Select Machine"),B(),N(18,"mat-select",13),Ye(19,Wfe,2,0,"mat-option",11),Ye(20,$fe,2,2,"mat-option",12),B(),B(),B(),N(21,"button",14),Ae("click",function(){return i.createDigitalTwin()}),tt(22,"Create Digital Twin"),B(),B(),B()),2&e&&(Q(8),te("formGroup",i.machineForm),Q(5),te("ngIf",i.connectionUrls.length<1),Q(1),te("ngForOf",i.connectionUrls),Q(5),te("ngIf",i.machines.length<1),Q(1),te("ngForOf",i.machines),Q(1),te("disabled",i.machineForm.invalid))},directives:[Pp,LS,Op,U_,Bf,Mo,hH,Xv,Ffe,j_,PM,G_,dr,sH,Xl,lh],styles:[".example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.example-tree[_ngcontent-%COMP%]   .mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{padding-left:40px}.example-tree[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%] > .mat-tree-node[_ngcontent-%COMP%]{padding-left:40px}.viewer[_ngcontent-%COMP%], .main-content[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{height:100%}.right-content[_ngcontent-%COMP%]{background:#fff;height:100vh;padding:20px 0}.form[_ngcontent-%COMP%]{width:80%}.mat-form-field[_ngcontent-%COMP%]{width:100%}.button[_ngcontent-%COMP%]{width:50%;height:60px;font-size:20px;color:#fff;background:#16c3d5}"]}),n})();function Yfe(n,t){1&n&&rt(0)}const FH=["*"];function Xfe(n,t){}const Kfe=function(n){return{animationDuration:n}},Qfe=function(n,t){return{value:n,params:t}},Zfe=["tabListContainer"],Jfe=["tabList"],epe=["tabListInner"],tpe=["nextPaginator"],npe=["previousPaginator"],ipe=["tabBodyWrapper"],spe=["tabHeader"];function rpe(n,t){}function ope(n,t){1&n&&Ye(0,rpe,0,0,"ng-template",10),2&n&&te("cdkPortalOutlet",Je().$implicit.templateLabel)}function ape(n,t){1&n&&tt(0),2&n&&Ui(Je().$implicit.textLabel)}function lpe(n,t){if(1&n){const e=Us();N(0,"div",6),Ae("click",function(){const s=si(e),r=s.$implicit,o=s.index,a=Je(),l=zs(1);return a._handleClick(r,l,o)})("cdkFocusChange",function(s){const o=si(e).index;return Je()._tabFocusChanged(s,o)}),N(1,"div",7),Ye(2,ope,1,1,"ng-template",8),Ye(3,ape,1,1,"ng-template",null,9,lP),B(),B()}if(2&n){const e=t.$implicit,i=t.index,s=zs(4),r=Je();Ke("mat-tab-label-active",r.selectedIndex===i),te("id",r._getTabLabelId(i))("ngClass",e.labelClass)("disabled",e.disabled)("matRippleDisabled",e.disabled||r.disableRipple),Ge("tabIndex",r._getTabIndex(e,i))("aria-posinset",i+1)("aria-setsize",r._tabs.length)("aria-controls",r._getTabContentId(i))("aria-selected",r.selectedIndex===i)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),Q(2),te("ngIf",e.templateLabel)("ngIfElse",s)}}function cpe(n,t){if(1&n){const e=Us();N(0,"mat-tab-body",11),Ae("_onCentered",function(){return si(e),Je()._removeTabBodyWrapperHeight()})("_onCentering",function(s){return si(e),Je()._setTabBodyWrapperHeight(s)}),B()}if(2&n){const e=t.$implicit,i=t.index,s=Je();Ke("mat-tab-body-active",s.selectedIndex===i),te("id",s._getTabContentId(i))("ngClass",e.bodyClass)("content",e.content)("position",e.position)("origin",e.origin)("animationDuration",s.animationDuration),Ge("tabindex",null!=s.contentTabIndex&&s.selectedIndex===i?s.contentTabIndex:null)("aria-labelledby",s._getTabLabelId(i))}}const dpe=new K("MatInkBarPositioner",{providedIn:"root",factory:function upe(){return t=>({left:t?(t.offsetLeft||0)+"px":"0",width:t?(t.offsetWidth||0)+"px":"0"})}});let NH=(()=>{class n{constructor(e,i,s,r){this._elementRef=e,this._ngZone=i,this._inkBarPositioner=s,this._animationMode=r}alignToElement(e){this.show(),this._ngZone.onStable.pipe(yn(1)).subscribe(()=>{const i=this._inkBarPositioner(e),s=this._elementRef.nativeElement;s.style.left=i.left,s.style.width=i.width})}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(Xe),v(dpe),v(ei,8))},n.\u0275dir=G({type:n,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(e,i){2&e&&Ke("_mat-animation-noopable","NoopAnimations"===i._animationMode)}}),n})();const hpe=new K("MatTabContent"),fpe=new K("MatTabLabel"),ppe=new K("MAT_TAB"),mpe=Sa(class{}),BH=new K("MAT_TAB_GROUP");let VH=(()=>{class n extends mpe{constructor(e,i){super(),this._viewContainerRef=e,this._closestTabGroup=i,this.textLabel="",this._contentPortal=null,this._stateChanges=new ge,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}get content(){return this._contentPortal}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new Yp(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}}return n.\u0275fac=function(e){return new(e||n)(v(In),v(BH,8))},n.\u0275cmp=We({type:n,selectors:[["mat-tab"]],contentQueries:function(e,i,s){if(1&e&&(ht(s,fpe,5),ht(s,hpe,7,Xn)),2&e){let r;fe(r=pe())&&(i.templateLabel=r.first),fe(r=pe())&&(i._explicitContent=r.first)}},viewQuery:function(e,i){if(1&e&&dt(Xn,7),2&e){let s;fe(s=pe())&&(i._implicitContent=s.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[Me([{provide:ppe,useExisting:n}]),Y,Gt],ngContentSelectors:FH,decls:1,vars:0,template:function(e,i){1&e&&(dn(),Ye(0,Yfe,1,0,"ng-template"))},encapsulation:2}),n})();const gpe={translateTab:Jn("translateTab",[Ot("center, void, left-origin-center, right-origin-center",He({transform:"none"})),Ot("left",He({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),Ot("right",He({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),Wt("* => left, * => right, left => center, right => center",Qt("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),Wt("void => left-origin-center",[He({transform:"translate3d(-100%, 0, 0)"}),Qt("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),Wt("void => right-origin-center",[He({transform:"translate3d(100%, 0, 0)"}),Qt("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let _pe=(()=>{class n extends oh{constructor(e,i,s,r){super(e,i,r),this._host=s,this._centeringSub=yt.EMPTY,this._leavingSub=yt.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(ki(this._host._isCenterPosition(this._host._position))).subscribe(e=>{e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(v(Jo),v(In),v(kt(()=>HH)),v(it))},n.\u0275dir=G({type:n,selectors:[["","matTabBodyHost",""]],features:[Y]}),n})(),ype=(()=>{class n{constructor(e,i,s){this._elementRef=e,this._dir=i,this._dirChangeSubscription=yt.EMPTY,this._translateTabComplete=new ge,this._onCentering=new he,this._beforeCentering=new he,this._afterLeavingCenter=new he,this._onCentered=new he(!0),this.animationDuration="500ms",i&&(this._dirChangeSubscription=i.change.subscribe(r=>{this._computePositionAnimationState(r),s.markForCheck()})),this._translateTabComplete.pipe(th((r,o)=>r.fromState===o.fromState&&r.toState===o.toState)).subscribe(r=>{this._isCenterPosition(r.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(r.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(e){this._positionIndex=e,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(e){const i=this._isCenterPosition(e.toState);this._beforeCentering.emit(i),i&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(e){return"center"==e||"left-origin-center"==e||"right-origin-center"==e}_computePositionAnimationState(e=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==e?"left":"right":this._positionIndex>0?"ltr"==e?"right":"left":"center"}_computePositionFromOrigin(e){const i=this._getLayoutDirection();return"ltr"==i&&e<=0||"rtl"==i&&e>0?"left-origin-center":"right-origin-center"}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(Qn,8),v(At))},n.\u0275dir=G({type:n,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),n})(),HH=(()=>{class n extends ype{constructor(e,i,s){super(e,i,s)}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(Qn,8),v(At))},n.\u0275cmp=We({type:n,selectors:[["mat-tab-body"]],viewQuery:function(e,i){if(1&e&&dt(oh,5),2&e){let s;fe(s=pe())&&(i._portalHost=s.first)}},hostAttrs:[1,"mat-tab-body"],features:[Y],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(e,i){1&e&&(N(0,"div",0,1),Ae("@translateTab.start",function(r){return i._onTranslateTabStarted(r)})("@translateTab.done",function(r){return i._translateTabComplete.next(r)}),Ye(2,Xfe,0,0,"ng-template",2),B()),2&e&&te("@translateTab",$I(3,Qfe,i._position,function gf(n,t,e,i){return qI(ce(),ps(),n,t,e,i)}(1,Kfe,i.animationDuration)))},directives:[_pe],styles:['.mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}.mat-tab-body-content[style*="visibility: hidden"]{display:none}\n'],encapsulation:2,data:{animation:[gpe.translateTab]}}),n})();const zH=new K("MAT_TABS_CONFIG"),vpe=Sa(class{});let UH=(()=>{class n extends vpe{constructor(e){super(),this.elementRef=e}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return n.\u0275fac=function(e){return new(e||n)(v(ue))},n.\u0275dir=G({type:n,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(e,i){2&e&&(Ge("aria-disabled",!!i.disabled),Ke("mat-tab-disabled",i.disabled))},inputs:{disabled:"disabled"},features:[Y]}),n})();const GH=to({passive:!0});let wpe=(()=>{class n{constructor(e,i,s,r,o,a,l){this._elementRef=e,this._changeDetectorRef=i,this._viewportRuler=s,this._dir=r,this._ngZone=o,this._platform=a,this._animationMode=l,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new ge,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new ge,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new he,this.indexFocused=new he,o.runOutsideAngular(()=>{Mr(e.nativeElement,"mouseleave").pipe(st(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){e=$i(e),this._selectedIndex!=e&&(this._selectedIndexChanged=!0,this._selectedIndex=e,this._keyManager&&this._keyManager.updateActiveItem(e))}ngAfterViewInit(){Mr(this._previousPaginator.nativeElement,"touchstart",GH).pipe(st(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Mr(this._nextPaginator.nativeElement,"touchstart",GH).pipe(st(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const e=this._dir?this._dir.change:Qe("ltr"),i=this._viewportRuler.change(150),s=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new Sv(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(yn(1)).subscribe(s),wn(e,i,this._items.changes).pipe(st(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),s()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(st(this._destroyed)).subscribe(r=>{this.indexFocused.emit(r),this._setTabFocus(r)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!Bi(e))switch(e.keyCode){case 13:case 32:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e));break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){const e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){if(!this._items)return!0;const i=this._items?this._items.toArray()[e]:null;return!!i&&!i.disabled}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();const i=this._tabListContainer.nativeElement;i.scrollLeft="ltr"==this._getLayoutDirection()?0:i.scrollWidth-i.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const e=this.scrollDistance,i="ltr"===this._getLayoutDirection()?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(i)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){return this._scrollTo(this._scrollDistance+("before"==e?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;const i=this._items?this._items.toArray()[e]:null;if(!i)return;const s=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:r,offsetWidth:o}=i.elementRef.nativeElement;let a,l;"ltr"==this._getLayoutDirection()?(a=r,l=a+o):(l=this._tabListInner.nativeElement.offsetWidth-r,a=l-o);const c=this.scrollDistance,d=this.scrollDistance+s;a<c?this.scrollDistance-=c-a+60:l>d&&(this.scrollDistance+=l-d+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const e=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;e||(this.scrollDistance=0),e!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=e}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,i=e?e.elementRef.nativeElement:null;i?this._inkBar.alignToElement(i):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,i){i&&null!=i.button&&0!==i.button||(this._stopInterval(),Zv(650,100).pipe(st(wn(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:s,distance:r}=this._scrollHeader(e);(0===r||r>=s)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const i=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(i,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:i,distance:this._scrollDistance}}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(At),v(io),v(Qn,8),v(Xe),v(Ni),v(ei,8))},n.\u0275dir=G({type:n,inputs:{disablePagination:"disablePagination"}}),n})(),Mpe=(()=>{class n extends wpe{constructor(e,i,s,r,o,a,l){super(e,i,s,r,o,a,l),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=ve(e)}_itemSelected(e){e.preventDefault()}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(At),v(io),v(Qn,8),v(Xe),v(Ni),v(ei,8))},n.\u0275dir=G({type:n,inputs:{disableRipple:"disableRipple"},features:[Y]}),n})(),Cpe=(()=>{class n extends Mpe{constructor(e,i,s,r,o,a,l){super(e,i,s,r,o,a,l)}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(At),v(io),v(Qn,8),v(Xe),v(Ni),v(ei,8))},n.\u0275cmp=We({type:n,selectors:[["mat-tab-header"]],contentQueries:function(e,i,s){if(1&e&&ht(s,UH,4),2&e){let r;fe(r=pe())&&(i._items=r)}},viewQuery:function(e,i){if(1&e&&(dt(NH,7),dt(Zfe,7),dt(Jfe,7),dt(epe,7),dt(tpe,5),dt(npe,5)),2&e){let s;fe(s=pe())&&(i._inkBar=s.first),fe(s=pe())&&(i._tabListContainer=s.first),fe(s=pe())&&(i._tabList=s.first),fe(s=pe())&&(i._tabListInner=s.first),fe(s=pe())&&(i._nextPaginator=s.first),fe(s=pe())&&(i._previousPaginator=s.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(e,i){2&e&&Ke("mat-tab-header-pagination-controls-enabled",i._showPaginationControls)("mat-tab-header-rtl","rtl"==i._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[Y],ngContentSelectors:FH,decls:14,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(e,i){1&e&&(dn(),N(0,"button",0,1),Ae("click",function(){return i._handlePaginatorClick("before")})("mousedown",function(r){return i._handlePaginatorPress("before",r)})("touchend",function(){return i._stopInterval()}),Ne(2,"div",2),B(),N(3,"div",3,4),Ae("keydown",function(r){return i._handleKeydown(r)}),N(5,"div",5,6),Ae("cdkObserveContent",function(){return i._onContentChanges()}),N(7,"div",7,8),rt(9),B(),Ne(10,"mat-ink-bar"),B(),B(),N(11,"button",9,10),Ae("mousedown",function(r){return i._handlePaginatorPress("after",r)})("click",function(){return i._handlePaginatorClick("after")})("touchend",function(){return i._stopInterval()}),Ne(13,"div",2),B()),2&e&&(Ke("mat-tab-header-pagination-disabled",i._disableScrollBefore),te("matRippleDisabled",i._disableScrollBefore||i.disableRipple)("disabled",i._disableScrollBefore||null),Q(5),Ke("_mat-animation-noopable","NoopAnimations"===i._animationMode),Q(6),Ke("mat-tab-header-pagination-disabled",i._disableScrollAfter),te("matRippleDisabled",i._disableScrollAfter||i.disableRipple)("disabled",i._disableScrollAfter||null))},directives:[xr,vv,NH],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-tab-header-pagination::-moz-focus-inner{border:0}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n"],encapsulation:2}),n})(),Spe=0;class Dpe{}const Epe=Oo(br(class{constructor(n){this._elementRef=n}}),"primary");let Ape=(()=>{class n extends Epe{constructor(e,i,s,r){var o;super(e),this._changeDetectorRef=i,this._animationMode=r,this._tabs=new Ya,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=yt.EMPTY,this._tabLabelSubscription=yt.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new he,this.focusChange=new he,this.animationDone=new he,this.selectedTabChange=new he(!0),this._groupId=Spe++,this.animationDuration=s&&s.animationDuration?s.animationDuration:"500ms",this.disablePagination=!(!s||null==s.disablePagination)&&s.disablePagination,this.dynamicHeight=!(!s||null==s.dynamicHeight)&&s.dynamicHeight,this.contentTabIndex=null!==(o=null==s?void 0:s.contentTabIndex)&&void 0!==o?o:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(e){this._dynamicHeight=ve(e)}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=$i(e,null)}get animationDuration(){return this._animationDuration}set animationDuration(e){this._animationDuration=/^\d+$/.test(e+"")?e+"ms":e}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=$i(e,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){const i=this._elementRef.nativeElement;i.classList.remove(`mat-background-${this.backgroundColor}`),e&&i.classList.add(`mat-background-${e}`),this._backgroundColor=e}ngAfterContentChecked(){const e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){const i=null==this._selectedIndex;if(!i){this.selectedTabChange.emit(this._createChangeEvent(e));const s=this._tabBodyWrapper.nativeElement;s.style.minHeight=s.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((s,r)=>s.isActive=r===e),i||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((i,s)=>{i.position=s-e,null!=this._selectedIndex&&0==i.position&&!i.origin&&(i.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){const i=this._tabs.toArray();let s;for(let r=0;r<i.length;r++)if(i[r].isActive){this._indexToSelect=this._selectedIndex=r,this._lastFocusedTabIndex=null,s=i[r];break}!s&&i[e]&&Promise.resolve().then(()=>{i[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(ki(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(i=>i._closestTabGroup===this||!i._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){const i=this._tabHeader;i&&(i.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){const i=new Dpe;return i.index=e,this._tabs&&this._tabs.length&&(i.tab=this._tabs.toArray()[e]),i}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=wn(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e){return`mat-tab-label-${this._groupId}-${e}`}_getTabContentId(e){return`mat-tab-content-${this._groupId}-${e}`}_setTabBodyWrapperHeight(e){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const i=this._tabBodyWrapper.nativeElement;i.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(i.style.height=e+"px")}_removeTabBodyWrapperHeight(){const e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this.animationDone.emit()}_handleClick(e,i,s){e.disabled||(this.selectedIndex=i.focusIndex=s)}_getTabIndex(e,i){var s;return e.disabled?null:i===(null!==(s=this._lastFocusedTabIndex)&&void 0!==s?s:this.selectedIndex)?0:-1}_tabFocusChanged(e,i){e&&"mouse"!==e&&"touch"!==e&&(this._tabHeader.focusIndex=i)}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(At),v(zH,8),v(ei,8))},n.\u0275dir=G({type:n,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[Y]}),n})(),Tpe=(()=>{class n extends Ape{constructor(e,i,s,r){super(e,i,s,r)}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(At),v(zH,8),v(ei,8))},n.\u0275cmp=We({type:n,selectors:[["mat-tab-group"]],contentQueries:function(e,i,s){if(1&e&&ht(s,VH,5),2&e){let r;fe(r=pe())&&(i._allTabs=r)}},viewQuery:function(e,i){if(1&e&&(dt(ipe,5),dt(spe,5)),2&e){let s;fe(s=pe())&&(i._tabBodyWrapper=s.first),fe(s=pe())&&(i._tabHeader=s.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(e,i){2&e&&Ke("mat-tab-group-dynamic-height",i.dynamicHeight)("mat-tab-group-inverted-header","below"===i.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[Me([{provide:BH,useExisting:n}]),Y],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","ngClass","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","ngClass","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","ngClass","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf","ngIfElse"],["tabTextLabel",""],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(e,i){1&e&&(N(0,"mat-tab-header",0,1),Ae("indexFocused",function(r){return i._focusChanged(r)})("selectFocusedIndex",function(r){return i.selectedIndex=r}),Ye(2,lpe,5,15,"div",2),B(),N(3,"div",3,4),Ye(5,cpe,1,10,"mat-tab-body",5),B()),2&e&&(te("selectedIndex",i.selectedIndex||0)("disableRipple",i.disableRipple)("disablePagination",i.disablePagination),Q(2),te("ngForOf",i._tabs),Q(1),Ke("_mat-animation-noopable","NoopAnimations"===i._animationMode),Q(2),te("ngForOf",i._tabs))},directives:[Cpe,HH,Xl,UH,xr,$S,Yl,dr,oh],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),n})(),WH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[gi,Ue,zc,wr,Fp,Ev],Ue]}),n})();const $H="undefined"==typeof window?function(n){return n()}:window.requestAnimationFrame;function qH(n,t,e){const i=e||(o=>Array.prototype.slice.call(o));let s=!1,r=[];return function(...o){r=i(o),s||(s=!0,$H.call(window,()=>{s=!1,n.apply(t,r)}))}}const zD=n=>"start"===n?"left":"end"===n?"right":"center",as=(n,t,e)=>"start"===n?t:"end"===n?e:(t+e)/2;function Da(){}const Ipe=function(){let n=0;return function(){return n++}}();function sn(n){return null==n}function En(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)}function Yt(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}const di=n=>("number"==typeof n||n instanceof Number)&&isFinite(+n);function Cr(n,t){return di(n)?n:t}function Lt(n,t){return void 0===n?t:n}const YH=(n,t)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*t:+n;function An(n,t,e){if(n&&"function"==typeof n.call)return n.apply(e,t)}function pn(n,t,e,i){let s,r,o;if(En(n))if(r=n.length,i)for(s=r-1;s>=0;s--)t.call(e,n[s],s);else for(s=0;s<r;s++)t.call(e,n[s],s);else if(Yt(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)t.call(e,n[o[s]],o[s])}function nb(n,t){let e,i,s,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],r=t[e],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function ib(n){if(En(n))return n.map(ib);if(Yt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=ib(n[e[s]]);return t}return n}function XH(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function Ope(n,t,e,i){if(!XH(n))return;const s=t[n],r=e[n];Yt(s)&&Yt(r)?Zp(s,r,i):t[n]=ib(r)}function Zp(n,t,e){const i=En(t)?t:[t],s=i.length;if(!Yt(n))return n;const r=(e=e||{}).merger||Ope;for(let o=0;o<s;++o){if(!Yt(t=i[o]))continue;const a=Object.keys(t);for(let l=0,c=a.length;l<c;++l)r(a[l],n,t,e)}return n}function Jp(n,t){return Zp(n,t,{merger:Lpe})}function Lpe(n,t,e){if(!XH(n))return;const i=t[n],s=e[n];Yt(i)&&Yt(s)?Jp(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=ib(s))}function KH(n,t){const e=n.indexOf(".",t);return-1===e?n.length:e}function Wc(n,t){if(""===t)return n;let e=0,i=KH(t,e);for(;n&&i>e;)n=n[t.substr(e,i-e)],e=i+1,i=KH(t,e);return n}function UD(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Sr=n=>void 0!==n,Sl=n=>"function"==typeof n,QH=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0},Vn=Math.PI,xn=2*Vn,Vpe=xn+Vn,sb=Number.POSITIVE_INFINITY,Hpe=Vn/180,ti=Vn/2,em=Vn/4,ZH=2*Vn/3,Dr=Math.log10,Bo=Math.sign;function JH(n){const t=Math.round(n);n=nm(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Dr(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function tm(n){return!isNaN(parseFloat(n))&&isFinite(n)}function nm(n,t,e){return Math.abs(n-t)<e}function ez(n,t,e){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function so(n){return n*(Vn/180)}function GD(n){return n*(180/Vn)}function tz(n){if(!di(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function nz(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let r=Math.atan2(i,e);return r<-.5*Vn&&(r+=xn),{angle:r,distance:s}}function jD(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Gpe(n,t){return(n-t+Vpe)%xn-Vn}function Js(n){return(n%xn+xn)%xn}function im(n,t,e,i){const s=Js(n),r=Js(t),o=Js(e),a=Js(r-s),l=Js(o-s),c=Js(s-r),d=Js(s-o);return s===r||s===o||i&&r===o||a>l&&c<d}function qi(n,t,e){return Math.max(t,Math.min(e,n))}function Ea(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}const rb=n=>0===n||1===n,iz=(n,t,e)=>-Math.pow(2,10*(n-=1))*Math.sin((n-t)*xn/e),sz=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*xn/e)+1,sm={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*ti),easeOutSine:n=>Math.sin(n*ti),easeInOutSine:n=>-.5*(Math.cos(Vn*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>rb(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>rb(n)?n:iz(n,.075,.3),easeOutElastic:n=>rb(n)?n:sz(n,.075,.3),easeInOutElastic(n){const t=.1125;return rb(n)?n:n<.5?.5*iz(2*n,t,.45):.5+.5*sz(2*n-1,t,.45)},easeInBack(n){const t=1.70158;return n*n*((t+1)*n-t)},easeOutBack(n){const t=1.70158;return(n-=1)*n*((t+1)*n+t)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?n*n*((1+(t*=1.525))*n-t)*.5:.5*((n-=2)*n*((1+(t*=1.525))*n+t)+2)},easeInBounce:n=>1-sm.easeOutBounce(1-n),easeOutBounce(n){const t=7.5625,e=2.75;return n<1/e?t*n*n:n<2/e?t*(n-=1.5/e)*n+.75:n<2.5/e?t*(n-=2.25/e)*n+.9375:t*(n-=2.625/e)*n+.984375},easeInOutBounce:n=>n<.5?.5*sm.easeInBounce(2*n):.5*sm.easeOutBounce(2*n-1)+.5},Er={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},WD="0123456789ABCDEF",Wpe=n=>WD[15&n],$pe=n=>WD[(240&n)>>4]+WD[15&n],ob=n=>(240&n)>>4==(15&n);function rm(n){return n+.5|0}const ab=(n,t,e)=>Math.max(Math.min(n,e),t);function om(n){return ab(rm(2.55*n),0,255)}function am(n){return ab(rm(255*n),0,255)}function $D(n){return ab(rm(n/2.55)/100,0,1)}function rz(n){return ab(rm(100*n),0,100)}const Kpe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Jpe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function oz(n,t,e){const i=t*Math.min(e,1-e),s=(r,o=(r+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function eme(n,t,e){const i=(s,r=(s+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function tme(n,t,e){const i=oz(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function qD(n){const e=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(e,i,s),o=Math.min(e,i,s),a=(r+o)/2;let l,c,d;return r!==o&&(d=r-o,c=a>.5?d/(2-r-o):d/(r+o),l=r===e?(i-s)/d+(i<s?6:0):r===i?(s-e)/d+2:(e-i)/d+4,l=60*l+.5),[0|l,c||0,a]}function YD(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(am)}function XD(n,t,e){return YD(oz,n,t,e)}function az(n){return(n%360+360)%360}const lz={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},cz={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let lb;function cb(n,t,e){if(n){let i=qD(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,0===t?360:1)),i=XD(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function dz(n,t){return n&&Object.assign(t||{},n)}function uz(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=am(n[3]))):(t=dz(n,{r:0,g:0,b:0,a:1})).a=am(t.a),t}function cme(n){return"r"===n.charAt(0)?function Qpe(n){const t=Kpe.exec(n);let i,s,r,e=255;if(t){if(t[7]!==i){const o=+t[7];e=255&(t[8]?om(o):255*o)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?om(i):i),s=255&(t[4]?om(s):s),r=255&(t[6]?om(r):r),{r:i,g:s,b:r,a:e}}}(n):function sme(n){const t=Jpe.exec(n);let i,e=255;if(!t)return;t[5]!==i&&(e=t[6]?om(+t[5]):am(+t[5]));const s=az(+t[2]),r=+t[3]/100,o=+t[4]/100;return i="hwb"===t[1]?function nme(n,t,e){return YD(tme,n,t,e)}(s,r,o):"hsv"===t[1]?function ime(n,t,e){return YD(eme,n,t,e)}(s,r,o):XD(s,r,o),{r:i[0],g:i[1],b:i[2],a:e}}(n)}class db{constructor(t){if(t instanceof db)return t;const e=typeof t;let i;"object"===e?i=uz(t):"string"===e&&(i=function Ype(n){var e,t=n.length;return"#"===n[0]&&(4===t||5===t?e={r:255&17*Er[n[1]],g:255&17*Er[n[2]],b:255&17*Er[n[3]],a:5===t?17*Er[n[4]]:255}:(7===t||9===t)&&(e={r:Er[n[1]]<<4|Er[n[2]],g:Er[n[3]]<<4|Er[n[4]],b:Er[n[5]]<<4|Er[n[6]],a:9===t?Er[n[7]]<<4|Er[n[8]]:255})),e}(t)||function lme(n){lb||(lb=function ame(){const n={},t=Object.keys(cz),e=Object.keys(lz);let i,s,r,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],s=0;s<e.length;s++)r=e[s],a=a.replace(r,lz[r]);r=parseInt(cz[o],16),n[a]=[r>>16&255,r>>8&255,255&r]}return n}(),lb.transparent=[0,0,0,0]);const t=lb[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(t)||cme(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=dz(this._rgb);return t&&(t.a=$D(t.a)),t}set rgb(t){this._rgb=uz(t)}rgbString(){return this._valid?function Zpe(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${$D(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):this._rgb}hexString(){return this._valid?function Xpe(n){var t=function qpe(n){return ob(n.r)&&ob(n.g)&&ob(n.b)&&ob(n.a)}(n)?Wpe:$pe;return n&&"#"+t(n.r)+t(n.g)+t(n.b)+(n.a<255?t(n.a):"")}(this._rgb):this._rgb}hslString(){return this._valid?function ome(n){if(!n)return;const t=qD(n),e=t[0],i=rz(t[1]),s=rz(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${$D(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}(this._rgb):this._rgb}mix(t,e){const i=this;if(t){const s=i.rgb,r=t.rgb;let o;const a=e===o?.5:e,l=2*a-1,c=s.a-r.a,d=((l*c==-1?l:(l+c)/(1+l*c))+1)/2;o=1-d,s.r=255&d*s.r+o*r.r+.5,s.g=255&d*s.g+o*r.g+.5,s.b=255&d*s.b+o*r.b+.5,s.a=a*s.a+(1-a)*r.a,i.rgb=s}return i}clone(){return new db(this.rgb)}alpha(t){return this._rgb.a=am(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=rm(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return cb(this._rgb,2,t),this}darken(t){return cb(this._rgb,2,-t),this}saturate(t){return cb(this._rgb,1,t),this}desaturate(t){return cb(this._rgb,1,-t),this}rotate(t){return function rme(n,t){var e=qD(n);e[0]=az(e[0]+t),e=XD(e),n.r=e[0],n.g=e[1],n.b=e[2]}(this._rgb,t),this}}function hz(n){return new db(n)}const fz=n=>n instanceof CanvasGradient||n instanceof CanvasPattern;function pz(n){return fz(n)?n:hz(n)}function KD(n){return fz(n)?n:hz(n).saturate(.5).darken(.1).hexString()}const $c=Object.create(null),QD=Object.create(null);function lm(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const r=e[i];n=n[r]||(n[r]=Object.create(null))}return n}function ZD(n,t,e){return"string"==typeof t?Zp(lm(n,t),e):Zp(lm(n,""),t)}var $t=new class dme{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,i)=>KD(i.backgroundColor),this.hoverBorderColor=(e,i)=>KD(i.borderColor),this.hoverColor=(e,i)=>KD(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return ZD(this,t,e)}get(t){return lm(this,t)}describe(t,e){return ZD(QD,t,e)}override(t,e){return ZD($c,t,e)}route(t,e,i,s){const r=lm(this,t),o=lm(this,i),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=o[s];return Yt(l)?Object.assign({},c,l):Lt(l,c)},set(l){this[a]=l}}})}}({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function ub(n,t,e,i,s){let r=t[s];return r||(r=t[s]=n.measureText(s).width,e.push(s)),r>i&&(i=r),i}function hme(n,t,e,i){let s=(i=i||{}).data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(s=i.data={},r=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0;const a=e.length;let l,c,d,u,h;for(l=0;l<a;l++)if(u=e[l],null!=u&&!0!==En(u))o=ub(n,s,r,o,u);else if(En(u))for(c=0,d=u.length;c<d;c++)h=u[c],null!=h&&!En(h)&&(o=ub(n,s,r,o,h));n.restore();const f=r.length/2;if(f>e.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return o}function qc(n,t,e){const i=n.currentDevicePixelRatio,s=0!==e?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function mz(n,t){(t=t||n.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore()}function hb(n,t,e,i){let s,r,o,a,l;const c=t.pointStyle,d=t.rotation,u=t.radius;let h=(d||0)*Hpe;if(c&&"object"==typeof c&&(s=c.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return n.save(),n.translate(e,i),n.rotate(h),n.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),void n.restore();if(!(isNaN(u)||u<=0)){switch(n.beginPath(),c){default:n.arc(e,i,u,0,xn),n.closePath();break;case"triangle":n.moveTo(e+Math.sin(h)*u,i-Math.cos(h)*u),h+=ZH,n.lineTo(e+Math.sin(h)*u,i-Math.cos(h)*u),h+=ZH,n.lineTo(e+Math.sin(h)*u,i-Math.cos(h)*u),n.closePath();break;case"rectRounded":l=.516*u,a=u-l,r=Math.cos(h+em)*a,o=Math.sin(h+em)*a,n.arc(e-r,i-o,l,h-Vn,h-ti),n.arc(e+o,i-r,l,h-ti,h),n.arc(e+r,i+o,l,h,h+ti),n.arc(e-o,i+r,l,h+ti,h+Vn),n.closePath();break;case"rect":if(!d){a=Math.SQRT1_2*u,n.rect(e-a,i-a,2*a,2*a);break}h+=em;case"rectRot":r=Math.cos(h)*u,o=Math.sin(h)*u,n.moveTo(e-r,i-o),n.lineTo(e+o,i-r),n.lineTo(e+r,i+o),n.lineTo(e-o,i+r),n.closePath();break;case"crossRot":h+=em;case"cross":r=Math.cos(h)*u,o=Math.sin(h)*u,n.moveTo(e-r,i-o),n.lineTo(e+r,i+o),n.moveTo(e+o,i-r),n.lineTo(e-o,i+r);break;case"star":r=Math.cos(h)*u,o=Math.sin(h)*u,n.moveTo(e-r,i-o),n.lineTo(e+r,i+o),n.moveTo(e+o,i-r),n.lineTo(e-o,i+r),h+=em,r=Math.cos(h)*u,o=Math.sin(h)*u,n.moveTo(e-r,i-o),n.lineTo(e+r,i+o),n.moveTo(e+o,i-r),n.lineTo(e-o,i+r);break;case"line":r=Math.cos(h)*u,o=Math.sin(h)*u,n.moveTo(e-r,i-o),n.lineTo(e+r,i+o);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(h)*u,i+Math.sin(h)*u)}n.fill(),t.borderWidth>0&&n.stroke()}}function Yc(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function fb(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function pb(n){n.restore()}function fme(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if("middle"===s){const r=(t.x+e.x)/2;n.lineTo(r,t.y),n.lineTo(r,e.y)}else"after"===s!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function pme(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function Xc(n,t,e,i,s,r={}){const o=En(t)?t:[t],a=r.strokeWidth>0&&""!==r.strokeColor;let l,c;for(n.save(),n.font=s.string,function mme(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),sn(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}(n,r),l=0;l<o.length;++l)c=o[l],a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),sn(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,e,i,r.maxWidth)),n.fillText(c,e,i,r.maxWidth),gme(n,e,i,c,r),i+=s.lineHeight;n.restore()}function gme(n,t,e,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,c=e+r.actualBoundingBoxDescent,d=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,d),n.lineTo(a,d),n.stroke()}}function mb(n,t){const{x:e,y:i,w:s,h:r,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,-ti,Vn,!0),n.lineTo(e,i+r-o.bottomLeft),n.arc(e+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,Vn,ti,!0),n.lineTo(e+s-o.bottomRight,i+r),n.arc(e+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,ti,0,!0),n.lineTo(e+s,i+o.topRight),n.arc(e+s-o.topRight,i+o.topRight,o.topRight,0,-ti,!0),n.lineTo(e+o.topLeft,i)}const _me=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),yme=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function vme(n,t){const e=(""+n).match(_me);if(!e||"normal"===e[1])return 1.2*t;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100}return t*n}const bme=n=>+n||0;function JD(n,t){const e={},i=Yt(t),s=i?Object.keys(t):t,r=Yt(n)?i?o=>Lt(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of s)e[o]=bme(r(o));return e}function gz(n){return JD(n,{top:"y",right:"x",bottom:"y",left:"x"})}function ch(n){return JD(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ls(n){const t=gz(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Vi(n,t){let e=Lt((n=n||{}).size,(t=t||$t.font).size);"string"==typeof e&&(e=parseInt(e,10));let i=Lt(n.style,t.style);i&&!(""+i).match(yme)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const s={family:Lt(n.family,t.family),lineHeight:vme(Lt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Lt(n.weight,t.weight),string:""};return s.string=function ume(n){return!n||sn(n.size)||sn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(s),s}function cm(n,t,e,i){let r,o,a,s=!0;for(r=0,o=n.length;r<o;++r)if(a=n[r],void 0!==a&&(void 0!==t&&"function"==typeof a&&(a=a(t),s=!1),void 0!==e&&En(a)&&(a=a[e%a.length],s=!1),void 0!==a))return i&&!s&&(i.cacheable=!1),a}function Dl(n,t){return Object.assign(Object.create(n),t)}function eE(n,t,e){e=e||(o=>n[o]<t);let r,i=n.length-1,s=0;for(;i-s>1;)r=s+i>>1,e(r)?s=r:i=r;return{lo:s,hi:i}}const Aa=(n,t,e)=>eE(n,e,i=>n[i][t]<e),wme=(n,t,e)=>eE(n,e,i=>n[i][t]>=e),_z=["push","pop","shift","splice","unshift"];function yz(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);-1!==s&&i.splice(s,1),!(i.length>0)&&(_z.forEach(r=>{delete n[r]}),delete n._chartjs)}function vz(n){const t=new Set;let e,i;for(e=0,i=n.length;e<i;++e)t.add(n[e]);return t.size===i?n:Array.from(t)}function tE(n,t=[""],e=n,i,s=(()=>n[0])){Sr(i)||(i=Cz("_fallback",n));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:e,_fallback:i,_getTarget:s,override:o=>tE([o,...n],t,e,i)};return new Proxy(r,{deleteProperty:(o,a)=>(delete o[a],delete o._keys,delete n[0][a],!0),get:(o,a)=>xz(o,a,()=>function Ime(n,t,e,i){let s;for(const r of t)if(s=Cz(Sme(r,n),e),Sr(s))return nE(n,s)?iE(e,i,n,s):s}(a,t,n,o)),getOwnPropertyDescriptor:(o,a)=>Reflect.getOwnPropertyDescriptor(o._scopes[0],a),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(o,a)=>Sz(o).includes(a),ownKeys:o=>Sz(o),set(o,a,l){const c=o._storage||(o._storage=s());return o[a]=c[a]=l,delete o._keys,!0}})}function dh(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:bz(n,i),setContext:r=>dh(n,r,e,i),override:r=>dh(n.override(r),t,e,i)};return new Proxy(s,{deleteProperty:(r,o)=>(delete r[o],delete n[o],!0),get:(r,o,a)=>xz(r,o,()=>function Dme(n,t,e){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[t];return Sl(a)&&o.isScriptable(t)&&(a=function Eme(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);return a.add(n),t=t(r,o||i),a.delete(n),nE(n,t)&&(t=iE(s._scopes,s,n,t)),t}(t,a,n,e)),En(a)&&a.length&&(a=function Ame(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=e;if(Sr(r.index)&&i(n))t=t[r.index%t.length];else if(Yt(t[0])){const l=t,c=s._scopes.filter(d=>d!==l);t=[];for(const d of l){const u=iE(c,s,n,d);t.push(dh(u,r,o&&o[n],a))}}return t}(t,a,n,o.isIndexable)),nE(t,a)&&(a=dh(a,s,r&&r[t],o)),a}(r,o,a)),getOwnPropertyDescriptor:(r,o)=>r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(r,o)=>Reflect.has(n,o),ownKeys:()=>Reflect.ownKeys(n),set:(r,o,a)=>(n[o]=a,delete r[o],!0)})}function bz(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:Sl(e)?e:()=>e,isIndexable:Sl(i)?i:()=>i}}const Sme=(n,t)=>n?n+UD(t):t,nE=(n,t)=>Yt(t)&&"adapters"!==n&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function xz(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t))return n[t];const i=e();return n[t]=i,i}function wz(n,t,e){return Sl(n)?n(t,e):n}const Tme=(n,t)=>!0===n?t:"string"==typeof n?Wc(t,n):void 0;function kme(n,t,e,i,s){for(const r of t){const o=Tme(e,r);if(o){n.add(o);const a=wz(o._fallback,e,s);if(Sr(a)&&a!==e&&a!==i)return a}else if(!1===o&&Sr(i)&&e!==i)return null}return!1}function iE(n,t,e,i){const s=t._rootScopes,r=wz(t._fallback,e,i),o=[...n,...s],a=new Set;a.add(i);let l=Mz(a,o,e,r||e,i);return!(null===l||Sr(r)&&r!==e&&(l=Mz(a,o,r,l,i),null===l))&&tE(Array.from(a),[""],s,r,()=>function Rme(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return En(s)&&Yt(e)?e:s}(t,e,i))}function Mz(n,t,e,i,s){for(;e;)e=kme(n,t,e,i,s);return e}function Cz(n,t){for(const e of t){if(!e)continue;const i=e[n];if(Sr(i))return i}}function Sz(n){let t=n._keys;return t||(t=n._keys=function Pme(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}(n._scopes)),t}const Ome=Number.EPSILON||1e-14,uh=(n,t)=>t<n.length&&!n[t].skip&&n[t],Dz=n=>"x"===n?"y":"x";function Lme(n,t,e,i){const s=n.skip?t:n,r=t,o=e.skip?t:e,a=jD(r,s),l=jD(o,r);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=i*c,h=i*d;return{previous:{x:r.x-u*(o.x-s.x),y:r.y-u*(o.y-s.y)},next:{x:r.x+h*(o.x-s.x),y:r.y+h*(o.y-s.y)}}}function gb(n,t,e){return Math.max(Math.min(n,e),t)}function Hme(n,t,e,i,s){let r,o,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),"monotone"===t.cubicInterpolationMode)!function Bme(n,t="x"){const e=Dz(t),i=n.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=uh(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=uh(n,o+1),l){if(c){const d=c[t]-l[t];s[o]=0!==d?(c[e]-l[e])/d:0}r[o]=a?c?Bo(s[o-1])!==Bo(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}(function Fme(n,t,e){const i=n.length;let s,r,o,a,l,c=uh(n,0);for(let d=0;d<i-1;++d)if(l=c,c=uh(n,d+1),l&&c){if(nm(t[d],0,Ome)){e[d]=e[d+1]=0;continue}s=e[d]/t[d],r=e[d+1]/t[d],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[d]=s*o*t[d],e[d+1]=r*o*t[d])}})(n,s,r),function Nme(n,t,e="x"){const i=Dz(e),s=n.length;let r,o,a,l=uh(n,0);for(let c=0;c<s;++c){if(o=a,a=l,l=uh(n,c+1),!a)continue;const d=a[e],u=a[i];o&&(r=(d-o[e])/3,a[`cp1${e}`]=d-r,a[`cp1${i}`]=u-r*t[c]),l&&(r=(l[e]-d)/3,a[`cp2${e}`]=d+r,a[`cp2${i}`]=u+r*t[c])}}(n,r,t)}(n,s);else{let c=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=Lme(c,a,n[Math.min(r+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&function Vme(n,t){let e,i,s,r,o,a=Yc(n[0],t);for(e=0,i=n.length;e<i;++e)o=r,r=a,a=e<i-1&&Yc(n[e+1],t),r&&(s=n[e],o&&(s.cp1x=gb(s.cp1x,t.left,t.right),s.cp1y=gb(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=gb(s.cp2x,t.left,t.right),s.cp2y=gb(s.cp2y,t.top,t.bottom)))}(n,e)}function Ez(){return"undefined"!=typeof window&&"undefined"!=typeof document}function sE(n){let t=n.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function _b(n,t,e){let i;return"string"==typeof n?(i=parseInt(n,10),-1!==n.indexOf("%")&&(i=i/100*t.parentNode[e])):i=n,i}const yb=n=>window.getComputedStyle(n,null),Ume=["top","right","bottom","left"];function Kc(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const r=Ume[s];i[r]=parseFloat(n[t+"-"+r+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Az(n,t){const{canvas:e,currentDevicePixelRatio:i}=t,s=yb(e),r="border-box"===s.boxSizing,o=Kc(s,"padding"),a=Kc(s,"border","width"),{x:l,y:c,box:d}=function jme(n,t){const e=n.native||n,i=e.touches,s=i&&i.length?i[0]:e,{offsetX:r,offsetY:o}=s;let l,c,a=!1;if(((n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot))(r,o,e.target))l=r,c=o;else{const d=t.getBoundingClientRect();l=s.clientX-d.left,c=s.clientY-d.top,a=!0}return{x:l,y:c,box:a}}(n,e),u=o.left+(d&&a.left),h=o.top+(d&&a.top);let{width:f,height:p}=t;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-u)/f*e.width/i),y:Math.round((c-h)/p*e.height/i)}}const rE=n=>Math.round(10*n)/10;function Tz(n,t,e){const i=t||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=s/i,n.width=r/i;const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r)&&(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0)}const qme=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){}return n}();function kz(n,t){const e=function zme(n,t){return yb(n).getPropertyValue(t)}(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Qc(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function Yme(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:"middle"===i?e<.5?n.y:t.y:"after"===i?e<1?n.y:t.y:e>0?t.y:n.y}}function Xme(n,t,e,i){const s={x:n.cp2x,y:n.cp2y},r={x:t.cp1x,y:t.cp1y},o=Qc(n,s,e),a=Qc(s,r,e),l=Qc(r,t,e),c=Qc(o,a,e),d=Qc(a,l,e);return Qc(c,d,e)}const Rz=new Map;function dm(n,t,e){return function Kme(n,t){t=t||{};const e=n+JSON.stringify(t);let i=Rz.get(e);return i||(i=new Intl.NumberFormat(n,t),Rz.set(e,i)),i}(t,e).format(n)}function hh(n,t,e){return n?function(n,t){return{x:e=>n+n+t-e,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,i)=>e-i,leftForLtr:(e,i)=>e-i}}(t,e):{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,t)=>n+t,leftForLtr:(n,t)=>n}}function Iz(n,t){let e,i;("ltr"===t||"rtl"===t)&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function Pz(n,t){void 0!==t&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Oz(n){return"angle"===n?{between:im,compare:Gpe,normalize:Js}:{between:Ea,compare:(t,e)=>t-e,normalize:t=>t}}function Lz({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e==0,style:s}}function Fz(n,t,e){if(!e)return[n];const{property:i,start:s,end:r}=e,o=t.length,{compare:a,between:l,normalize:c}=Oz(i),{start:d,end:u,loop:h,style:f}=function Jme(n,t,e){const{property:i,start:s,end:r}=e,{between:o,normalize:a}=Oz(i),l=t.length;let h,f,{start:c,end:d,loop:u}=n;if(u){for(c+=l,d+=l,h=0,f=l;h<f&&o(a(t[c%l][i]),s,r);++h)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:u,style:n.style}}(n,t,e),p=[];let _,y,b,m=!1,g=null;for(let E=d,I=d;E<=u;++E)y=t[E%o],!y.skip&&(_=c(y[i]),_!==b&&(m=l(_,s,r),null===g&&(m||l(s,b,_)&&0!==a(s,b))&&(g=0===a(_,s)?E:I),null!==g&&(!m||0===a(r,_)||l(r,b,_))&&(p.push(Lz({start:g,end:E,loop:h,count:o,style:f})),g=null),I=E,b=_));return null!==g&&p.push(Lz({start:g,end:u,loop:h,count:o,style:f})),p}function Nz(n,t){const e=[],i=n.segments;for(let s=0;s<i.length;s++){const r=Fz(i[s],n.points,t);r.length&&e.push(...r)}return e}function Vz(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function sge(n,t){return t&&JSON.stringify(n)!==JSON.stringify(t)}var Ta=new class rge{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const o=e.duration;e.listeners[s].forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=$H.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let l,o=r.length-1,a=!1;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=r.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);!e||(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const Hz="transparent",oge={boolean:(n,t,e)=>e>.5?t:n,color(n,t,e){const i=pz(n||Hz),s=i.valid&&pz(t||Hz);return s&&s.valid?s.mix(i,e).hexString():t},number:(n,t,e)=>n+(t-n)*e};class age{constructor(t,e,i,s){const r=e[i];s=cm([t.to,s,r,t.from]);const o=cm([t.from,r,s]);this._active=!0,this._fn=t.fn||oge[t.type||typeof o],this._easing=sm[t.easing]||sm.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=cm([t.to,e,s,t.from]),this._from=cm([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||e<i),!this._active)return this._target[s]=a,void this._notify(!0);e<0?this._target[s]=r:(l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}$t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const dge=Object.keys($t.animation);$t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>"onProgress"!==n&&"onComplete"!==n&&"fn"!==n}),$t.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),$t.describe("animations",{_fallback:"animation"}),$t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>0|n}}}});class zz{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Yt(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const s=t[i];if(!Yt(s))return;const r={};for(const o of dge)r[o]=s[o];(En(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!e.has(o))&&e.set(o,r)})})}_animateOptions(t,e){const i=e.options,s=function hge(n,t){if(!t)return;let e=n.options;if(e)return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;n.options=t}(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&function uge(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if("$"===c.charAt(0))continue;if("options"===c){s.push(...this._animateOptions(t,e));continue}const d=e[c];let u=r[c];const h=i.get(c);if(u){if(h&&u.active()){u.update(h,d,a);continue}u.cancel()}h&&h.duration?(r[c]=u=new age(h,t,c,d),s.push(u)):t[c]=d}return s}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(Ta.add(this._chart,i),!0):void 0}}function Uz(n,t){const e=n&&n.options||{},i=e.reverse,s=void 0===e.min?t:0,r=void 0===e.max?t:0;return{start:i?r:s,end:i?s:r}}function Gz(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)e.push(i[s].index);return e}function jz(n,t,e,i={}){const s=n.keys,r="single"===i.mode;let o,a,l,c;if(null!==t){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===e){if(i.all)continue;break}c=n.values[l],di(c)&&(r||0===t||Bo(t)===Bo(c))&&(t+=c)}return t}}function Wz(n,t){const e=n&&n.options.stacked;return e||void 0===e&&void 0!==t.stack}function yge(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function $z(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(e&&r>0||!e&&r<0)return s.index}return null}function qz(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,d=function gge(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}(r,o,i),u=t.length;let h;for(let f=0;f<u;++f){const p=t[f],{[l]:m,[c]:g}=p;h=(p._stacks||(p._stacks={}))[c]=yge(s,d,m),h[a]=g,h._top=$z(h,o,!0,i.type),h._bottom=$z(h,o,!1,i.type)}}function oE(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function um(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const r=s._stacks;if(!r||void 0===r[i]||void 0===r[i][e])return;delete r[i][e]}}}const aE=n=>"reset"===n||"none"===n,Yz=(n,t)=>t?n:Object.assign({},n);let ka=(()=>{class n{constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Wz(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&um(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,s=this.getDataset(),r=(h,f,p,m)=>"x"===h?f:"r"===h?m:p,o=i.xAxisID=Lt(s.xAxisID,oE(e,"x")),a=i.yAxisID=Lt(s.yAxisID,oE(e,"y")),l=i.rAxisID=Lt(s.rAxisID,oE(e,"r")),c=i.indexAxis,d=i.iAxisID=r(c,o,a,l),u=i.vAxisID=r(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(d),i.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&yz(this._data,this),e._stacked&&um(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),s=this._data;if(Yt(i))this._data=function mge(n){const t=Object.keys(n),e=new Array(t.length);let i,s,r;for(i=0,s=t.length;i<s;++i)r=t[i],e[i]={x:r,y:n[r]};return e}(i);else if(s!==i){if(s){yz(s,this);const r=this._cachedMeta;um(r),r._parsed=[]}i&&Object.isExtensible(i)&&function Cme(n,t){n._chartjs?n._chartjs.listeners.push(t):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),_z.forEach(e=>{const i="_onData"+UD(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{"function"==typeof a[i]&&a[i](...r)}),o}})}))}(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const o=i._stacked;i._stacked=Wz(i.vScale,i),i.stack!==s.stack&&(r=!0,um(i),i.stack=s.stack),this._resyncElements(e),(r||o!==i._stacked)&&qz(this,i._parsed)}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:s,_data:r}=this,{iScale:o,_stacked:a}=s,l=o.axis;let u,h,f,c=0===e&&i===r.length||s._sorted,d=e>0&&s._parsed[e-1];if(!1===this._parsing)s._parsed=r,s._sorted=!0,f=r;else{f=En(r[e])?this.parseArrayData(s,r,e,i):Yt(r[e])?this.parseObjectData(s,r,e,i):this.parsePrimitiveData(s,r,e,i);const p=()=>null===h[l]||d&&h[l]<d[l];for(u=0;u<i;++u)s._parsed[u+e]=h=f[u],c&&(p()&&(c=!1),d=h);s._sorted=c}a&&qz(this,f)}parsePrimitiveData(e,i,s,r){const{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,d=o.getLabels(),u=o===a,h=new Array(r);let f,p,m;for(f=0,p=r;f<p;++f)m=f+s,h[f]={[l]:u||o.parse(d[m],m),[c]:a.parse(i[m],m)};return h}parseArrayData(e,i,s,r){const{xScale:o,yScale:a}=e,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+s,h=i[u],l[c]={x:o.parse(h[0],u),y:a.parse(h[1],u)};return l}parseObjectData(e,i,s,r){const{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,h,f,p;for(u=0,h=r;u<h;++u)f=u+s,p=i[f],d[u]={x:o.parse(Wc(p,l),f),y:a.parse(Wc(p,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,s){const o=this._cachedMeta,a=i[e.axis];return jz({keys:Gz(this.chart,!0),values:i._stacks[e.axis]},a,o.index,{mode:s})}updateRangeFromParsed(e,i,s,r){const o=s[i.axis];let a=null===o?NaN:o;const l=r&&s._stacks[i.axis];r&&l&&(r.values=l,a=jz(r,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,i){const s=this._cachedMeta,r=s._parsed,o=s._sorted&&e===s.iScale,a=r.length,l=this._getOtherScale(e),c=((n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Gz(this.chart,!0),values:null})(i,s),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=function _ge(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}(l);let f,p;function m(){p=r[f];const g=p[l.axis];return!di(p[e.axis])||u>g||h<g}for(f=0;f<a&&(m()||(this.updateRangeFromParsed(d,e,p,c),!o));++f);if(o)for(f=a-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(d,e,p,c);break}return d}getAllParsedValues(e){const i=this._cachedMeta._parsed,s=[];let r,o,a;for(r=0,o=i.length;r<o;++r)a=i[r][e.axis],di(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,s=i.iScale,r=i.vScale,o=this.getParsed(e);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=function pge(n){let t,e,i,s;return Yt(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:!1===n}}(Lt(this.options.clip,function fge(n,t,e){if(!1===e)return!1;const i=Uz(n,e),s=Uz(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this._cachedMeta,r=s.data||[],o=this.chart.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,o,l,c),u=l;u<l+c;++u){const h=r[u];h.hidden||(h.active&&d?a.push(h):h.draw(e,o))}for(u=0;u<a.length;++u)a[u].draw(e,o)}getStyle(e,i){const s=i?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,i,s){const r=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];o=a.$context||(a.$context=function bge(n,t,e){return Dl(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=r.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function vge(n,t){return Dl(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=s,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",s){const r="active"===i,o=this._cachedDataOpts,a=e+"-"+i,l=o[a],c=this.enableOptionSharing&&Sr(s);if(l)return Yz(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),p=Object.keys($t.elements[e]),g=d.resolveNamedOptions(f,p,()=>this.getContext(s,r),h);return g.$shared&&(g.$shared=c,o[a]=Object.freeze(Yz(g,c))),g}_resolveAnimations(e,i,s){const r=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(!1!==r.options.animation){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,i),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(e,s,i))}const d=new zz(r,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||aE(e)||this.chart._animationsDisabled}updateElement(e,i,s,r){aE(r)?Object.assign(e,s):this._resolveAnimations(i,r).update(e,s)}updateSharedOptions(e,i,s){e&&!aE(i)&&this._resolveAnimations(void 0,i).update(e,s)}_setStyle(e,i,s,r){e.active=r;const o=this.getStyle(i,r);this._resolveAnimations(i,s,r).update(e,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(e,i,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,i,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,s=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=s.length,o=i.length,a=Math.min(o,r);a&&this.parse(0,a),o>r?this._insertElements(r,o-r,e):o<r&&this._removeElements(o,r-o)}_insertElements(e,i,s=!0){const r=this._cachedMeta,o=r.data,a=e+i;let l;const c=d=>{for(d.length+=i,l=d.length-1;l>=a;l--)d[l]=d[l-i]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,i),s&&this.updateElements(o,e,i,"reset")}updateElements(e,i,s,r){}_removeElements(e,i){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,i);s._stacked&&um(s,r)}s.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,s,r]=e;this[i](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n.defaults={},n})();function Mge(n){const t=n.iScale,e=function wge(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let s=0,r=e.length;s<r;s++)i=i.concat(e[s].controller.getAllParsedValues(n));n._cache.$bar=vz(i.sort((s,r)=>s-r))}return n._cache.$bar}(t,n.type);let s,r,o,a,i=t._length;const l=()=>{32767===o||-32768===o||(Sr(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=e.length;s<r;++s)o=t.getPixelForValue(e[s]),l();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),l();return i}function Xz(n,t,e,i){return En(n)?function Dge(n,t,e,i){const s=e.parse(n[0],i),r=e.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}(n,t,e,i):t[e.axis]=e.parse(n,i),t}function Kz(n,t,e,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,l=[];let c,d,u,h;for(c=e,d=e+i;c<d;++c)h=t[c],u={},u[s.axis]=a||s.parse(o[c],c),l.push(Xz(h,u,r,c));return l}function lE(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function Tge(n,t,e,i){let s=t.borderSkipped;const r={};if(!s)return void(n.borderSkipped=r);const{start:o,end:a,reverse:l,top:c,bottom:d}=function Age(n){let t,e,i,s,r;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:e,end:i,reverse:t,top:s,bottom:r}}(n);"middle"===s&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?s=c:(e._bottom||0)===i?s=d:(r[Qz(d,o,a,l)]=!0,s=c)),r[Qz(s,o,a,l)]=!0,n.borderSkipped=r}function Qz(n,t,e,i){return i?(n=function kge(n,t,e){return n===t?e:n===e?t:n}(n,t,e),n=Zz(n,e,t)):n=Zz(n,t,e),n}function Zz(n,t,e){return"start"===n?t:"end"===n?e:n}function Rge(n,{inflateAmount:t},e){n.inflateAmount="auto"===t?1===e?.33:0:t}ka.prototype.datasetElementType=null,ka.prototype.dataElementType=null;let Jz=(()=>{class n extends ka{parsePrimitiveData(e,i,s,r){return Kz(e,i,s,r)}parseArrayData(e,i,s,r){return Kz(e,i,s,r)}parseObjectData(e,i,s,r){const{iScale:o,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d="x"===o.axis?l:c,u="x"===a.axis?l:c,h=[];let f,p,m,g;for(f=s,p=s+r;f<p;++f)g=i[f],m={},m[o.axis]=o.parse(Wc(g,d),f),h.push(Xz(Wc(g,u),m,a,f));return h}updateRangeFromParsed(e,i,s,r){super.updateRangeFromParsed(e,i,s,r);const o=s._custom;o&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const i=this._cachedMeta,{iScale:s,vScale:r}=i,o=this.getParsed(e),a=o._custom,l=lE(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,s,r){const o="reset"===r,{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),h=this.resolveDataElementOptions(i,r),f=this.getSharedOptions(h),p=this.includeOptions(r,f);this.updateSharedOptions(f,r,h);for(let m=i;m<i+s;m++){const g=this.getParsed(m),_=o||sn(g[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),y=this._calculateBarIndexPixels(m,u),b=(g._stacks||{})[l.axis],x={horizontal:d,base:_.base,enableBorderRadius:!b||lE(g._custom)||a===b._top||a===b._bottom,x:d?_.head:y.center,y:d?y.center:_.head,height:d?y.size:Math.abs(_.size),width:d?Math.abs(_.size):y.size};p&&(x.options=f||this.resolveDataElementOptions(m,e[m].active?"active":r));const w=x.options||e[m].options;Tge(x,w,b,a),Rge(x,w,u.ratio),this.updateElement(e[m],m,x,r)}}_getStacks(e,i){const r=this._cachedMeta.iScale,o=r.getMatchingVisibleMetas(this._type),a=r.options.stacked,l=o.length,c=[];let d,u;for(d=0;d<l;++d)if(u=o[d],u.controller.options.grouped){if(void 0!==i){const h=u.controller.getParsed(i)[u.controller._cachedMeta.vScale.axis];if(sn(h)||isNaN(h))continue}if((!1===a||-1===c.indexOf(u.stack)||void 0===a&&void 0===u.stack)&&c.push(u.stack),u.index===e)break}return c.length||c.push(void 0),c}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,i,s){const r=this._getStacks(e,s),o=void 0!==i?r.indexOf(i):-1;return-1===o?r.length-1:o}_getRuler(){const e=this.options,i=this._cachedMeta,s=i.iScale,r=[];let o,a;for(o=0,a=i.data.length;o<a;++o)r.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const l=e.barThickness;return{min:l||Mge(i),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:i,_stacked:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,d=lE(c);let p,m,u=l[i.axis],h=0,f=s?this.applyStack(i,l,s):u;f!==u&&(h=f-u,f=u),d&&(u=c.barStart,f=c.barEnd-c.barStart,0!==u&&Bo(u)!==Bo(c.barEnd)&&(h=0),h+=u);const g=sn(r)||d?h:r;let _=i.getPixelForValue(g);if(p=this.chart.getDataVisibility(e)?i.getPixelForValue(h+f):_,m=p-_,Math.abs(m)<o&&(m=function Ege(n,t,e){return 0!==n?Bo(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}(m,i,a)*o,u===a&&(_-=m/2),p=_+m),_===i.getPixelForValue(a)){const y=Bo(m)*i.getLineWidthForValue(a)/2;_+=y,m-=y}return{size:m,base:_,head:p,center:p+m/2}}_calculateBarIndexPixels(e,i){const s=i.scale,r=this.options,o=r.skipNull,a=Lt(r.maxBarThickness,1/0);let l,c;if(i.grouped){const d=o?this._getStackCount(e):i.stackCount,u="flex"===r.barThickness?function Sge(n,t,e,i){const s=t.pixels,r=s[n];let o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const l=e.categoryPercentage;null===o&&(o=r-(null===a?t.end-t.start:a-r)),null===a&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:c}}(e,i,r,d):function Cge(n,t,e,i){const s=e.barThickness;let r,o;return sn(s)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:t.pixels[n]-r/2}}(e,i,r,d),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);l=u.start+u.chunk*h+u.chunk/2,c=Math.min(a,u.chunk*u.ratio)}else l=s.getPixelForValue(this.getParsed(e)[s.axis],e),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,i=e.vScale,s=e.data,r=s.length;let o=0;for(;o<r;++o)null!==this.getParsed(o)[i.axis]&&s[o].draw(this._ctx)}}return n.id="bar",n.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},n.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},n})(),eU=(()=>{class n extends ka{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,s,r){const o=super.parsePrimitiveData(e,i,s,r);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+s).radius;return o}parseArrayData(e,i,s,r){const o=super.parseArrayData(e,i,s,r);for(let a=0;a<o.length;a++)o[a]._custom=Lt(i[s+a][2],this.resolveDataElementOptions(a+s).radius);return o}parseObjectData(e,i,s,r){const o=super.parseObjectData(e,i,s,r);for(let a=0;a<o.length;a++){const l=i[s+a];o[a]._custom=Lt(l&&l.r&&+l.r,this.resolveDataElementOptions(a+s).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let i=0;for(let s=e.length-1;s>=0;--s)i=Math.max(i,e[s].size(this.resolveDataElementOptions(s))/2);return i>0&&i}getLabelAndValue(e){const i=this._cachedMeta,{xScale:s,yScale:r}=i,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i.label,value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,s,r){const o="reset"===r,{iScale:a,vScale:l}=this._cachedMeta,c=this.resolveDataElementOptions(i,r),d=this.getSharedOptions(c),u=this.includeOptions(r,d),h=a.axis,f=l.axis;for(let p=i;p<i+s;p++){const m=e[p],g=!o&&this.getParsed(p),_={},y=_[h]=o?a.getPixelForDecimal(.5):a.getPixelForValue(g[h]),b=_[f]=o?l.getBasePixel():l.getPixelForValue(g[f]);_.skip=isNaN(y)||isNaN(b),u&&(_.options=this.resolveDataElementOptions(p,m.active?"active":r),o&&(_.options.radius=0)),this.updateElement(m,p,_,r)}this.updateSharedOptions(d,r,c)}resolveDataElementOptions(e,i){const s=this.getParsed(e);let r=super.resolveDataElementOptions(e,i);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const o=r.radius;return"active"!==i&&(r.radius=0),r.radius+=Lt(s&&s._custom,o),r}}return n.id="bubble",n.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},n.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},n})(),cE=(()=>{class n extends ka{constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){const s=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=s;else{let a,l,o=c=>+s[c];if(Yt(s[e])){const{key:c="value"}=this._parsing;o=d=>+Wc(s[d],c)}for(a=e,l=e+i;a<l;++a)r._parsed[a]=o(a)}}_getRotation(){return so(this.options.rotation-90)}_getCircumference(){return so(this.options.circumference)}_getRotationExtents(){let e=xn,i=-xn;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)){const r=this.chart.getDatasetMeta(s).controller,o=r._getRotation(),a=r._getCircumference();e=Math.min(e,o),i=Math.max(i,o+a)}return{rotation:e,circumference:i-e}}update(e){const i=this.chart,{chartArea:s}=i,r=this._cachedMeta,o=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(((n,t)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:n/t)(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=function Ige(n,t,e){let i=1,s=1,r=0,o=0;if(t<xn){const a=n,l=a+t,c=Math.cos(a),d=Math.sin(a),u=Math.cos(l),h=Math.sin(l),f=(b,x,w)=>im(b,a,l,!0)?1:Math.max(x,x*e,w,w*e),p=(b,x,w)=>im(b,a,l,!0)?-1:Math.min(x,x*e,w,w*e),m=f(0,c,u),g=f(ti,d,h),_=p(Vn,c,u),y=p(Vn+ti,d,h);i=(m-_)/2,s=(g-y)/2,r=-(m+_)/2,o=-(g+y)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}(h,u,c),b=Math.max(Math.min((s.width-a)/f,(s.height-a)/p)/2,0),x=YH(this.options.radius,b),C=(x-Math.max(x*c,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*x,this.offsetY=g*x,r.total=this.calculateTotal(),this.outerRadius=x-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*d,0),this.updateElements(o,0,o.length,e)}_circumference(e,i){const s=this.options,r=this._cachedMeta,o=this._getCircumference();return i&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*o/xn)}updateElements(e,i,s,r){const o="reset"===r,a=this.chart,l=a.chartArea,u=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=o&&a.options.animation.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,g=this.resolveDataElementOptions(i,r),_=this.getSharedOptions(g),y=this.includeOptions(r,_);let x,b=this._getRotation();for(x=0;x<i;++x)b+=this._circumference(x,o);for(x=i;x<i+s;++x){const w=this._circumference(x,o),C=e[x],S={x:u+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+w,circumference:w,outerRadius:m,innerRadius:p};y&&(S.options=_||this.resolveDataElementOptions(x,C.active?"active":r)),b+=w,this.updateElement(C,x,S,r)}this.updateSharedOptions(_,r,g)}calculateTotal(){const e=this._cachedMeta,i=e.data;let r,s=0;for(r=0;r<i.length;r++){const o=e._parsed[r];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!i[r].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(e){const i=this._cachedMeta.total;return i>0&&!isNaN(e)?xn*(Math.abs(e)/i):0}getLabelAndValue(e){const s=this.chart,r=s.data.labels||[],o=dm(this._cachedMeta._parsed[e],s.options.locale);return{label:r[e]||"",value:o}}getMaxBorderWidth(e){let i=0;const s=this.chart;let r,o,a,l,c;if(!e)for(r=0,o=s.data.datasets.length;r<o;++r)if(s.isDatasetVisible(r)){a=s.getDatasetMeta(r),e=a.data,l=a.controller;break}if(!e)return 0;for(r=0,o=e.length;r<o;++r)c=l.resolveDataElementOptions(r),"inner"!==c.borderAlign&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let s=0,r=e.length;s<r;++s){const o=this.resolveDataElementOptions(s);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(i+=this._getRingWeight(s));return i}_getRingWeight(e){return Math.max(Lt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n.id="doughnut",n.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},n.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map((s,r)=>{const a=t.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const i=": "+t.formattedValue;return En(e)?(e=e.slice(),e[0]+=i):e+=i,e}}}}},n})(),dE=(()=>{class n extends ka{initialize(){this.enableOptionSharing=!0,super.initialize()}update(e){const i=this._cachedMeta,{dataset:s,data:r=[],_dataset:o}=i,a=this.chart._animationsDisabled;let{start:l,count:c}=function Pge(n,t,e){const i=t.length;let s=0,r=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:d,minDefined:u,maxDefined:h}=o.getUserBounds();u&&(s=qi(Math.min(Aa(a,o.axis,c).lo,e?i:Aa(t,l,o.getPixelForValue(c)).lo),0,i-1)),r=h?qi(Math.max(Aa(a,o.axis,d).hi+1,e?0:Aa(t,l,o.getPixelForValue(d)).hi+1),s,i)-s:i-s}return{start:s,count:r}}(i,r,a);this._drawStart=l,this._drawCount=c,function Oge(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),r}(i)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=r;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:d},e),this.updateElements(r,l,c,e)}updateElements(e,i,s,r){const o="reset"===r,{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(i,r),h=this.getSharedOptions(u),f=this.includeOptions(r,h),p=a.axis,m=l.axis,{spanGaps:g,segment:_}=this.options,y=tm(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||"none"===r;let x=i>0&&this.getParsed(i-1);for(let w=i;w<i+s;++w){const C=e[w],S=this.getParsed(w),E=b?C:{},I=sn(S[m]),F=E[p]=a.getPixelForValue(S[p],w),M=E[m]=o||I?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,S,c):S[m],w);E.skip=isNaN(F)||isNaN(M)||I,E.stop=w>0&&S[p]-x[p]>y,_&&(E.parsed=S,E.raw=d.data[w]),f&&(E.options=h||this.resolveDataElementOptions(w,C.active?"active":r)),b||this.updateElement(C,w,E,r),x=S}this.updateSharedOptions(h,r,u)}getMaxOverflow(){const e=this._cachedMeta,i=e.dataset,s=i.options&&i.options.borderWidth||0,r=e.data||[];if(!r.length)return s;const o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return n.id="line",n.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},n.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},n})(),tU=(()=>{class n extends ka{constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const s=this.chart,r=s.data.labels||[],o=dm(this._cachedMeta._parsed[e].r,s.options.locale);return{label:r[e]||"",value:o}}update(e){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}_updateRadius(){const e=this.chart,i=e.chartArea,s=e.options,r=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(r/2,0),l=(o-Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,i,s,r){const o="reset"===r,a=this.chart,l=this.getDataset(),d=a.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,f=u.yCenter,p=u.getIndexAngle(0)-.5*Vn;let g,m=p;const _=360/this.countVisibleElements();for(g=0;g<i;++g)m+=this._computeAngle(g,r,_);for(g=i;g<i+s;g++){const y=e[g];let b=m,x=m+this._computeAngle(g,r,_),w=a.getDataVisibility(g)?u.getDistanceFromCenterForValue(l.data[g]):0;m=x,o&&(d.animateScale&&(w=0),d.animateRotate&&(b=x=p));const C={x:h,y:f,innerRadius:0,outerRadius:w,startAngle:b,endAngle:x,options:this.resolveDataElementOptions(g,y.active?"active":r)};this.updateElement(y,g,C,r)}}countVisibleElements(){const e=this.getDataset();let s=0;return this._cachedMeta.data.forEach((r,o)=>{!isNaN(e.data[o])&&this.chart.getDataVisibility(o)&&s++}),s}_computeAngle(e,i,s){return this.chart.getDataVisibility(e)?so(this.resolveDataElementOptions(e,i).angle||s):0}}return n.id="polarArea",n.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map((s,r)=>{const a=t.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},n})(),nU=(()=>{class n extends cE{}return n.id="pie",n.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},n})(),iU=(()=>{class n extends ka{getLabelAndValue(e){const i=this._cachedMeta.vScale,s=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(s[i.axis])}}update(e){const i=this._cachedMeta,s=i.dataset,r=i.data||[],o=i.iScale.getLabels();if(s.points=r,"resize"!==e){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0),this.updateElement(s,void 0,{_loop:!0,_fullLoop:o.length===r.length,options:a},e)}this.updateElements(r,0,r.length,e)}updateElements(e,i,s,r){const o=this.getDataset(),a=this._cachedMeta.rScale,l="reset"===r;for(let c=i;c<i+s;c++){const d=e[c],u=this.resolveDataElementOptions(c,d.active?"active":r),h=a.getPointPositionForValue(c,o.data[c]),f=l?a.xCenter:h.x,p=l?a.yCenter:h.y,m={x:f,y:p,angle:h.angle,skip:isNaN(f)||isNaN(p),options:u};this.updateElement(d,c,m,r)}}}return n.id="radar",n.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},n.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},n})(),sU=(()=>{class n extends dE{}return n.id="scatter",n.defaults={showLine:!1,fill:!1},n.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},n})();function Zc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Fge={_date:(()=>{class n{constructor(e){this.options=e||{}}formats(){return Zc()}parse(e,i){return Zc()}format(e,i){return Zc()}add(e,i,s){return Zc()}diff(e,i,s){return Zc()}startOf(e,i,s){return Zc()}endOf(e,i){return Zc()}}return n.override=function(t){Object.assign(n.prototype,t)},n})()};function hm(n,t){return"native"in n?{x:n.x,y:n.y}:Az(n,t)}function Bge(n,t,e,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&o&&r.length){const l=a._reversePixels?wme:Aa;if(!i)return l(r,t,e);if(s._sharedOptions){const c=r[0],d="function"==typeof c.getRange&&c.getRange(t);if(d){const u=l(r,t,e-d),h=l(r,t,e+d);return{lo:u.lo,hi:h.hi}}}}return{lo:0,hi:r.length-1}}function uE(n,t,e,i,s){const r=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:d}=r[a],{lo:u,hi:h}=Bge(r[a],t,o,s);for(let f=u;f<=h;++f){const p=d[f];p.skip||i(p,c,f)}}}function hE(n,t,e,i){const s=[];return Yc(t,n.chartArea,n._minPadding)&&uE(n,e,t,function(o,a,l){o.inRange(t.x,t.y,i)&&s.push({element:o,datasetIndex:a,index:l})},!0),s}function fE(n,t,e,i,s){return Yc(t,n.chartArea,n._minPadding)?"r"!==e||i?function zge(n,t,e,i,s){let r=[];const o=function Vge(n){const t=-1!==n.indexOf("x"),e=-1!==n.indexOf("y");return function(i,s){const r=t?Math.abs(i.x-s.x):0,o=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}(e);let a=Number.POSITIVE_INFINITY;return uE(n,e,t,function l(c,d,u){const h=c.inRange(t.x,t.y,s);if(i&&!h)return;const f=c.getCenterPoint(s);if(!Yc(f,n.chartArea,n._minPadding)&&!h)return;const m=o(t,f);m<a?(r=[{element:c,datasetIndex:d,index:u}],a=m):m===a&&r.push({element:c,datasetIndex:d,index:u})}),r}(n,t,e,i,s):function Hge(n,t,e,i){let s=[];return uE(n,e,t,function r(o,a,l){const{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:u}=nz(o,{x:t.x,y:t.y});im(u,c,d)&&s.push({element:o,datasetIndex:a,index:l})}),s}(n,t,e,s):[]}function rU(n,t,e,i){const s=hm(t,n),r=[],o=e.axis,a="x"===o?"inXRange":"inYRange";let l=!1;return function Nge(n,t){const e=n.getSortedVisibleDatasetMetas();let i,s,r;for(let o=0,a=e.length;o<a;++o){({index:i,data:s}=e[o]);for(let l=0,c=s.length;l<c;++l)r=s[l],r.skip||t(r,i,l)}}(n,(c,d,u)=>{c[a](s[o],i)&&r.push({element:c,datasetIndex:d,index:u}),c.inRange(s.x,s.y,i)&&(l=!0)}),e.intersect&&!l?[]:r}var Uge={modes:{index(n,t,e,i){const s=hm(t,n),r=e.axis||"x",o=e.intersect?hE(n,s,r,i):fE(n,s,r,!1,i),a=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{const c=o[0].index,d=l.data[c];d&&!d.skip&&a.push({element:d,datasetIndex:l.index,index:c})}),a):[]},dataset(n,t,e,i){const s=hm(t,n),r=e.axis||"xy";let o=e.intersect?hE(n,s,r,i):fE(n,s,r,!1,i);if(o.length>0){const a=o[0].datasetIndex,l=n.getDatasetMeta(a).data;o=[];for(let c=0;c<l.length;++c)o.push({element:l[c],datasetIndex:a,index:c})}return o},point:(n,t,e,i)=>hE(n,hm(t,n),e.axis||"xy",i),nearest:(n,t,e,i)=>fE(n,hm(t,n),e.axis||"xy",e.intersect,i),x:(n,t,e,i)=>rU(n,t,{axis:"x",intersect:e.intersect},i),y:(n,t,e,i)=>rU(n,t,{axis:"y",intersect:e.intersect},i)}};const oU=["left","top","right","bottom"];function fm(n,t){return n.filter(e=>e.pos===t)}function aU(n,t){return n.filter(e=>-1===oU.indexOf(e.pos)&&e.box.axis===t)}function pm(n,t){return n.sort((e,i)=>{const s=t?i:e,r=t?e:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function lU(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function cU(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function qge(n,t,e,i){const{pos:s,box:r}=e,o=n.maxPadding;if(!Yt(s)){e.size&&(n[s]-=e.size);const u=i[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?r.height:r.width),e.size=u.size/u.count,n[s]+=e.size}r.getPadding&&cU(o,r.getPadding());const a=Math.max(0,t.outerWidth-lU(o,n,"left","right")),l=Math.max(0,t.outerHeight-lU(o,n,"top","bottom")),c=a!==n.w,d=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:d}:{same:d,other:c}}function Xge(n,t){const e=t.maxPadding;return function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}(n?["left","right"]:["top","bottom"])}function mm(n,t,e,i){const s=[];let r,o,a,l,c,d;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||t.w,a.height||t.h,Xge(a.horizontal,t));const{same:u,other:h}=qge(t,e,a,i);c|=u&&s.length,d=d||h,l.fullSize||s.push(a)}return c&&mm(s,t,e,i)||d}function vb(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function dU(n,t,e,i){const s=e.padding;let{x:r,y:o}=t;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const u=t.w*d,h=c.size||l.height;Sr(c.start)&&(o=c.start),l.fullSize?vb(l,s.left,o,e.outerWidth-s.right-s.left,h):vb(l,t.left+c.placed,o,u,h),c.start=o,c.placed+=u,o=l.bottom}else{const u=t.h*d,h=c.size||l.width;Sr(c.start)&&(r=c.start),l.fullSize?vb(l,r,s.top,h,e.outerHeight-s.bottom-s.top):vb(l,r,t.top+c.placed,h,u),c.start=r,c.placed+=u,r=l.right}}t.x=r,t.y=o}$t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var cs={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;-1!==e&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=ls(n.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(e-s.height,0),a=function $ge(n){const t=function Gge(n){const t=[];let e,i,s,r,o,a;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],({position:r,options:{stack:o,stackWeight:a=1}}=s),t.push({index:e,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}(n),e=pm(t.filter(c=>c.box.fullSize),!0),i=pm(fm(t,"left"),!0),s=pm(fm(t,"right")),r=pm(fm(t,"top"),!0),o=pm(fm(t,"bottom")),a=aU(t,"x"),l=aU(t,"y");return{fullSize:e,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:fm(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}(n.boxes),l=a.vertical,c=a.horizontal;pn(n.boxes,m=>{"function"==typeof m.beforeLayout&&m.beforeLayout()});const d=l.reduce((m,g)=>g.box.options&&!1===g.box.options.display?m:m+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/d,hBoxMaxHeight:o/2}),h=Object.assign({},s);cU(h,ls(i));const f=Object.assign({maxPadding:h,w:r,h:o,x:s.left,y:s.top},s),p=function Wge(n,t){const e=function jge(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:r}=e;if(!i||!oU.includes(s))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,c=e[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*i:l&&t.availableWidth,a.height=s):(a.width=i,a.height=d?d*s:l&&t.availableHeight)}return e}(l.concat(c),u);mm(a.fullSize,f,u,p),mm(l,f,u,p),mm(c,f,u,p)&&mm(l,f,u,p),function Yge(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}(f),dU(a.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,dU(a.rightAndBottom,f,u,p),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},pn(a.chartArea,m=>{const g=m.box;Object.assign(g,n.chartArea),g.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class uU{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class Kge extends uU{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const bb="$chartjs",Qge={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hU=n=>null===n||""===n,fU=!!qme&&{passive:!0};function e_e(n,t,e){n.canvas.removeEventListener(t,e,fU)}function xb(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function n_e(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||xb(a.addedNodes,i),o=o&&!xb(a.removedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function i_e(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||xb(a.removedNodes,i),o=o&&!xb(a.addedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const gm=new Map;let pU=0;function mU(){const n=window.devicePixelRatio;n!==pU&&(pU=n,gm.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function o_e(n,t,e){const i=n.canvas,s=i&&sE(i);if(!s)return;const r=qH((a,l)=>{const c=s.clientWidth;e(a,l),c<s.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,d=l.contentRect.height;0===c&&0===d||r(c,d)});return o.observe(s),function s_e(n,t){gm.size||window.addEventListener("resize",mU),gm.set(n,t)}(n,r),o}function pE(n,t,e){e&&e.disconnect(),"resize"===t&&function r_e(n){gm.delete(n),gm.size||window.removeEventListener("resize",mU)}(n)}function a_e(n,t,e){const i=n.canvas,s=qH(r=>{null!==n.ctx&&e(function t_e(n,t){const e=Qge[n.type]||n.type,{x:i,y:s}=Az(n,t);return{type:e,chart:t,native:n,x:void 0!==i?i:null,y:void 0!==s?s:null}}(r,n))},n,r=>{const o=r[0];return[o,o.offsetX,o.offsetY]});return function Jge(n,t,e){n.addEventListener(t,e,fU)}(i,t,s),s}class l_e extends uU{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function Zge(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[bb]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",hU(s)){const r=kz(n,"width");void 0!==r&&(n.width=r)}if(hU(i))if(""===n.style.height)n.height=n.width/(t||2);else{const r=kz(n,"height");void 0!==r&&(n.height=r)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[bb])return!1;const i=e[bb].initial;["height","width"].forEach(r=>{const o=i[r];sn(o)?e.removeAttribute(r):e.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{e.style[r]=s[r]}),e.width=e.width,delete e[bb],!0}addEventListener(t,e,i){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:n_e,detach:i_e,resize:o_e}[e]||a_e)(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];s&&(({attach:pE,detach:pE,resize:pE}[e]||e_e)(t,e,s),i[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return function $me(n,t,e,i){const s=yb(n),r=Kc(s,"margin"),o=_b(s.maxWidth,n,"clientWidth")||sb,a=_b(s.maxHeight,n,"clientHeight")||sb,l=function Wme(n,t,e){let i,s;if(void 0===t||void 0===e){const r=sE(n);if(r){const o=r.getBoundingClientRect(),a=yb(r),l=Kc(a,"border","width"),c=Kc(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=_b(a.maxWidth,r,"clientWidth"),s=_b(a.maxHeight,r,"clientHeight")}else t=n.clientWidth,e=n.clientHeight}return{width:t,height:e,maxWidth:i||sb,maxHeight:s||sb}}(n,t,e);let{width:c,height:d}=l;if("content-box"===s.boxSizing){const u=Kc(s,"border","width"),h=Kc(s,"padding");c-=h.width+u.width,d-=h.height+u.height}return c=Math.max(0,c-r.width),d=Math.max(0,i?Math.floor(c/i):d-r.height),c=rE(Math.min(c,o,l.maxWidth)),d=rE(Math.min(d,a,l.maxHeight)),c&&!d&&(d=rE(c/2)),{width:c,height:d}}(t,e,i,s)}isAttached(t){const e=sE(t);return!(!e||!e.isConnected)}}class ro{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return tm(this.x)&&tm(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}ro.defaults={},ro.defaultRoutes=void 0;const gU={values:n=>En(n)?n:""+n,numeric(n,t,e){if(0===n)return"0";const i=this.chart.options.locale;let s,r=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=function d_e(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}(n,e)}const o=Dr(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),dm(n,i,l)},logarithmic(n,t,e){if(0===n)return"0";const i=n/Math.pow(10,Math.floor(Dr(n)));return 1===i||2===i||5===i?gU.numeric.call(this,n,t,e):""}};var wb={formatters:gU};function Mb(n,t,e,i,s){const r=Lt(i,0),o=Math.min(Lt(s,n.length),n.length);let l,c,d,a=0;for(e=Math.ceil(e),s&&(l=s-i,e=l/Math.floor(l/e)),d=r;d<0;)a++,d=Math.round(r+a*e);for(c=Math.max(r,0);c<o;c++)c===d&&(t.push(n[c]),a++,d=Math.round(r+a*e))}$t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,t)=>t.lineWidth,tickColor:(n,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:wb.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),$t.route("scale.ticks","color","","color"),$t.route("scale.grid","color","","borderColor"),$t.route("scale.grid","borderColor","","borderColor"),$t.route("scale.title","color","","color"),$t.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&"callback"!==n&&"parser"!==n,_indexable:n=>"borderDash"!==n&&"tickBorderDash"!==n}),$t.describe("scales",{_fallback:"scale"}),$t.describe("scale.ticks",{_scriptable:n=>"backdropPadding"!==n&&"callback"!==n,_indexable:n=>"backdropPadding"!==n});const _U=(n,t,e)=>"top"===t||"left"===t?n[t]+e:n[t]-e;function yU(n,t){const e=[],i=n.length/t,s=n.length;let r=0;for(;r<s;r+=i)e.push(n[Math.floor(r)]);return e}function y_e(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let c,l=n.getPixelForTick(s);if(!(e&&(c=1===i?Math.max(l-r,o-l):0===t?(n.getPixelForTick(1)-l)/2:(l-n.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<r-a||l>o+a)))return l}function _m(n){return n.drawTicks?n.tickLength:0}function vU(n,t){if(!n.display)return 0;const e=Vi(n.font,t),i=ls(n.padding);return(En(n.text)?n.text.length:1)*e.lineHeight+i.height}function w_e(n,t,e){let i=zD(n);return(e&&"right"!==t||!e&&"right"===t)&&(i=(n=>"left"===n?"right":"right"===n?"left":n)(i)),i}class Jc extends ro{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=Cr(t,Number.POSITIVE_INFINITY),e=Cr(e,Number.NEGATIVE_INFINITY),i=Cr(i,Number.POSITIVE_INFINITY),s=Cr(s,Number.NEGATIVE_INFINITY),{min:Cr(t,i),max:Cr(e,s),minDefined:di(t),maxDefined:di(e)}}getMinMax(t){let o,{min:e,max:i,minDefined:s,maxDefined:r}=this.getUserBounds();if(s&&r)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),s||(e=Math.min(e,o.min)),r||(i=Math.max(i,o.max));return e=r&&e>i?i:e,i=s&&e>i?e:i,{min:Cr(e,Cr(i,e)),max:Cr(i,Cr(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){An(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function xme(n,t,e){const{min:i,max:s}=n,r=YH(t,(s-i)/2),o=(a,l)=>e&&0===a?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?yU(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function u_e(n,t){const e=n.options.ticks,i=e.maxTicksLimit||function h_e(n){const t=n.options.offset,e=n._tickSize();return Math.floor(Math.min(n._length/e+(t?0:1),n._maxLength/e))}(n),s=e.major.enabled?function p_e(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}(t):[],r=s.length,o=s[0],a=s[r-1],l=[];if(r>i)return function m_e(n,t,e,i){let o,s=0,r=e[0];for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(t.push(n[o]),s++,r=e[s*i])}(t,l,s,r/i),l;const c=function f_e(n,t,e){const i=function g_e(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}(n),s=t.length/e;if(!i)return Math.max(s,1);const r=function zpe(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i==0&&(t.push(i),t.push(n/i));return e===(0|e)&&t.push(e),t.sort((s,r)=>s-r).pop(),t}(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}(s,t,i);if(r>0){let d,u;const h=r>1?Math.round((a-o)/(r-1)):null;for(Mb(t,l,c,sn(h)?0:o-h,o),d=0,u=r-1;d<u;d++)Mb(t,l,c,s[d],s[d+1]);return Mb(t,l,c,a,sn(h)?t.length:a+h),l}return Mb(t,l,c),l}(this,this.ticks),this._labelSizes=null),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,i,t=this.options.reverse;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){An(this.options.afterUpdate,[this])}beforeSetDimensions(){An(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){An(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),An(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){An(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=An(e.callback,[r.value,i,t],this)}afterTickToLabelConversion(){An(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){An(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=this.ticks.length,s=e.minRotation||0,r=e.maxRotation;let a,l,c,o=s;if(!this._isVisible()||!e.display||s>=r||i<=1||!this.isHorizontal())return void(this.labelRotation=s);const d=this._getLabelSizes(),u=d.widest.width,h=d.highest.height,f=qi(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/i:f/(i-1),u+6>a&&(a=f/(i-(t.offset?.5:1)),l=this.maxHeight-_m(t.grid)-e.padding-vU(t.title,this.chart.options.font),c=Math.sqrt(u*u+h*h),o=GD(Math.min(Math.asin(qi((d.highest.height+6)/a,-1,1)),Math.asin(qi(l/c,-1,1))-Math.asin(qi(h/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){An(this.options.afterCalculateLabelRotation,[this])}beforeFit(){An(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=vU(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=_m(r)+l):(t.height=this.maxHeight,t.width=_m(r)+l),i.display&&this.ticks.length){const{first:c,last:d,widest:u,highest:h}=this._getLabelSizes(),f=2*i.padding,p=so(this.labelRotation),m=Math.cos(p),g=Math.sin(p);a?t.height=Math.min(this.maxHeight,t.height+(i.mirror?0:g*u.width+m*h.height)+f):t.width=Math.min(this.maxWidth,t.width+(i.mirror?0:m*u.width+g*h.height)+f),this._calculatePadding(c,d,g,m)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=0!==this.labelRotation,c="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=s*t.width,f=i*e.height):(h=i*t.height,f=s*e.width):"start"===r?f=e.width:"end"===r?h=t.width:(h=t.width/2,f=e.width/2),this.paddingLeft=Math.max((h-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let d=e.height/2,u=t.height/2;"start"===r?(d=0,u=t.height):"end"===r&&(d=e.height,u=0),this.paddingTop=d+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){An(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)sn(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=yU(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length)}return t}_computeLabelSizes(t,e){const{ctx:i,_longestTextCache:s}=this,r=[],o=[];let c,d,u,h,f,p,m,g,_,y,b,a=0,l=0;for(c=0;c<e;++c){if(h=t[c].label,f=this._resolveTickFontOptions(c),i.font=p=f.string,m=s[p]=s[p]||{data:{},gc:[]},g=f.lineHeight,_=y=0,sn(h)||En(h)){if(En(h))for(d=0,u=h.length;d<u;++d)b=h[d],!sn(b)&&!En(b)&&(_=ub(i,m.data,m.gc,_,b),y+=g)}else _=ub(i,m.data,m.gc,_,h),y=g;r.push(_),o.push(y),a=Math.max(_,a),l=Math.max(y,l)}!function v_e(n,t){pn(n,e=>{const i=e.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete e.data[i[r]];i.splice(0,s)}})}(s,e);const x=r.indexOf(a),w=o.indexOf(l),C=S=>({width:r[S]||0,height:o[S]||0});return{first:C(0),last:C(e-1),widest:C(x),highest:C(w),widths:r,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function jpe(n){return qi(n,-32768,32767)}(this._alignToPixels?qc(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function x_e(n,t,e){return Dl(n,{tick:e,index:t,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=function b_e(n,t){return Dl(n,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=so(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:r,position:o}=s,a=r.offset,l=this.isHorizontal(),d=this.ticks.length+(a?1:0),u=_m(r),h=[],f=r.setContext(this.getContext()),p=f.drawBorder?f.borderWidth:0,m=p/2,g=function(U){return qc(i,U,p)};let _,y,b,x,w,C,S,E,I,F,M,T;if("top"===o)_=g(this.bottom),C=this.bottom-u,E=_-m,F=g(t.top)+m,T=t.bottom;else if("bottom"===o)_=g(this.top),F=t.top,T=g(t.bottom)-m,C=_+m,E=this.top+u;else if("left"===o)_=g(this.right),w=this.right-u,S=_-m,I=g(t.left)+m,M=t.right;else if("right"===o)_=g(this.left),I=t.left,M=g(t.right)-m,w=_+m,S=this.left+u;else if("x"===e){if("center"===o)_=g((t.top+t.bottom)/2+.5);else if(Yt(o)){const U=Object.keys(o)[0];_=g(this.chart.scales[U].getPixelForValue(o[U]))}F=t.top,T=t.bottom,C=_+m,E=C+u}else if("y"===e){if("center"===o)_=g((t.left+t.right)/2);else if(Yt(o)){const U=Object.keys(o)[0];_=g(this.chart.scales[U].getPixelForValue(o[U]))}w=_-m,S=w-u,I=t.left,M=t.right}const W=Lt(s.ticks.maxTicksLimit,d),z=Math.max(1,Math.ceil(d/W));for(y=0;y<d;y+=z){const U=r.setContext(this.getContext(y)),O=U.lineWidth,H=U.color,L=r.borderDash||[],$=U.borderDashOffset,Z=U.tickWidth,de=U.tickColor,ie=U.tickBorderDash||[],Be=U.tickBorderDashOffset;b=y_e(this,y,a),void 0!==b&&(x=qc(i,b,O),l?w=S=I=M=x:C=E=F=T=x,h.push({tx1:w,ty1:C,tx2:S,ty2:E,x1:I,y1:F,x2:M,y2:T,width:O,color:H,borderDash:L,borderDashOffset:$,tickWidth:Z,tickColor:de,tickBorderDash:ie,tickBorderDashOffset:Be}))}return this._ticksLength=d,this._borderValue=_,h}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:u}=r,h=_m(i.grid),f=h+d,p=u?-d:f,m=-so(this.labelRotation),g=[];let _,y,b,x,w,C,S,E,I,F,M,T,W="middle";if("top"===s)C=this.bottom-p,S=this._getXAxisLabelAlignment();else if("bottom"===s)C=this.top+p,S=this._getXAxisLabelAlignment();else if("left"===s){const U=this._getYAxisLabelAlignment(h);S=U.textAlign,w=U.x}else if("right"===s){const U=this._getYAxisLabelAlignment(h);S=U.textAlign,w=U.x}else if("x"===e){if("center"===s)C=(t.top+t.bottom)/2+f;else if(Yt(s)){const U=Object.keys(s)[0];C=this.chart.scales[U].getPixelForValue(s[U])+f}S=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===s)w=(t.left+t.right)/2-f;else if(Yt(s)){const U=Object.keys(s)[0];w=this.chart.scales[U].getPixelForValue(s[U])}S=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===l?W="top":"end"===l&&(W="bottom"));const z=this._getLabelSizes();for(_=0,y=a.length;_<y;++_){b=a[_],x=b.label;const U=r.setContext(this.getContext(_));E=this.getPixelForTick(_)+r.labelOffset,I=this._resolveTickFontOptions(_),F=I.lineHeight,M=En(x)?x.length:1;const O=M/2,H=U.color,L=U.textStrokeColor,$=U.textStrokeWidth;let Z;if(o?(w=E,T="top"===s?"near"===c||0!==m?-M*F+F/2:"center"===c?-z.highest.height/2-O*F+F:F/2-z.highest.height:"near"===c||0!==m?F/2:"center"===c?z.highest.height/2-O*F:z.highest.height-M*F,u&&(T*=-1)):(C=E,T=(1-M)*F/2),U.showLabelBackdrop){const de=ls(U.backdropPadding),ie=z.heights[_],Be=z.widths[_];let Ve=C+T-de.top,nt=w-de.left;switch(W){case"middle":Ve-=ie/2;break;case"bottom":Ve-=ie}switch(S){case"center":nt-=Be/2;break;case"right":nt-=Be}Z={left:nt,top:Ve,width:Be+de.width,height:ie+de.height,color:U.backdropColor}}g.push({rotation:m,label:x,font:I,color:H,strokeColor:L,strokeWidth:$,textOffset:T,textAlign:S,textBaseline:W,translation:[w,C],backdrop:Z})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-so(this.labelRotation))return"top"===t?"left":"right";let s="center";return"start"===e.align?s="left":"end"===e.align&&(s="right"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,a=t+r,l=this._getLabelSizes().widest.width;let c,d;return"left"===e?s?(d=this.right+r,"near"===i?c="left":"center"===i?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,"near"===i?c="right":"center"===i?(c="center",d-=l/2):(c="left",d=this.left)):"right"===e?s?(d=this.left+r,"near"===i?c="right":"center"===i?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,"near"===i?c="left":"center"===i?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(r=0,o=s.length;r<o;++r){const l=s[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:i}}=this,s=i.setContext(this.getContext()),r=i.drawBorder?s.borderWidth:0;if(!r)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=qc(t,this.left,r)-r/2,c=qc(t,this.right,o)+o/2,d=u=a):(d=qc(t,this.top,r)-r/2,u=qc(t,this.bottom,o)+o/2,l=c=a),e.save(),e.lineWidth=s.borderWidth,e.strokeStyle=s.borderColor,e.beginPath(),e.moveTo(l,d),e.lineTo(c,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&fb(i,s);const r=this._labelItems||(this._labelItems=this._computeLabelItems(t));let o,a;for(o=0,a=r.length;o<a;++o){const l=r[o],c=l.font,d=l.label;l.backdrop&&(i.fillStyle=l.backdrop.color,i.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height)),Xc(i,d,0,l.textOffset,c,l)}s&&pb(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const r=Vi(i.font),o=ls(i.padding),a=i.align;let l=r.lineHeight/2;"bottom"===e||"center"===e||Yt(e)?(l+=o.bottom,En(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:d,maxWidth:u,rotation:h}=function M_e(n,t,e,i){const{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:d}=l;let h,f,p,u=0;const m=o-s,g=a-r;if(n.isHorizontal()){if(f=as(i,r,a),Yt(e)){const _=Object.keys(e)[0];p=d[_].getPixelForValue(e[_])+m-t}else p="center"===e?(c.bottom+c.top)/2+m-t:_U(n,e,t);h=a-r}else{if(Yt(e)){const _=Object.keys(e)[0];f=d[_].getPixelForValue(e[_])-g+t}else f="center"===e?(c.left+c.right)/2-g+t:_U(n,e,t);p=as(i,o,s),u="left"===e?-ti:ti}return{titleX:f,titleY:p,maxWidth:h,rotation:u}}(this,l,e,a);Xc(t,i.text,0,0,r,{color:i.color,maxWidth:u,rotation:h,textAlign:w_e(a,e,s),textBaseline:"middle",translation:[c,d]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Lt(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===Jc.prototype.draw?[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]:[{z:e,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=e.length;r<o;++r){const a=e[r];a[i]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){return Vi(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Cb{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function D_e(n){return"id"in n&&"defaults"in n})(e)&&(i=this.register(e));const s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,function C_e(n,t,e){const i=Zp(Object.create(null),[e?$t.get(e):{},$t.get(t),n.defaults]);$t.set(t,i),n.defaultRoutes&&function S_e(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),r=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");$t.route(r,s,l,a)})}(t,n.defaultRoutes),n.descriptors&&$t.describe(t,n.descriptors)}(t,o,i),this.override&&$t.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in $t[s]&&(delete $t[s][i],this.override&&delete $c[i])}}var Ra=new class E_e{constructor(){this.controllers=new Cb(ka,"datasets",!0),this.elements=new Cb(ro,"elements"),this.plugins=new Cb(Object,"plugins"),this.scales=new Cb(Jc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):pn(s,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const s=UD(t);An(i["before"+s],[],i),e[t](i),An(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(void 0===s)throw new Error('"'+t+'" is not a registered '+i+".");return s}};class A_e{constructor(){this._init=[]}notify(t,e,i,s){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,e,i);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(const r of t){const o=r.plugin;if(!1===An(o[i],[e,s,r.options],o)&&s.cancelable)return!1}return!0}invalidate(){sn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=Lt(i.options&&i.options.plugins,{}),r=function T_e(n){const t=[],e=Object.keys(Ra.plugins.items);for(let s=0;s<e.length;s++)t.push(Ra.getPlugin(e[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const r=i[s];-1===t.indexOf(r)&&t.push(r)}return t}(i);return!1!==s||e?function R_e(n,t,e,i){const s=[],r=n.getContext();for(let o=0;o<t.length;o++){const a=t[o],c=k_e(e[a.id],i);null!==c&&s.push({plugin:a,options:I_e(n.config,a,c,r)})}return s}(t,r,s,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function k_e(n,t){return t||!1!==n?!0===n?{}:n:null}function I_e(n,t,e,i){const s=n.pluginScopeKeys(t),r=n.getOptionScopes(e,s);return n.createResolver(r,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function mE(n,t){return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||($t.datasets[n]||{}).indexAxis||"x"}function gE(n,t){return"x"===n||"y"===n?n:t.axis||function L_e(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}(t.position)||n.charAt(0).toLowerCase()}function bU(n){const t=n.options||(n.options={});t.plugins=Lt(t.plugins,{}),t.scales=function F_e(n,t){const e=$c[n.type]||{scales:{}},i=t.scales||{},s=mE(n.type,t),r=Object.create(null),o=Object.create(null);return Object.keys(i).forEach(a=>{const l=i[a];if(!Yt(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=gE(a,l),d=function O_e(n,t){return n===t?"_index_":"_value_"}(c,s),u=e.scales||{};r[c]=r[c]||a,o[a]=Jp(Object.create(null),[{axis:c},l,u[c],u[d]])}),n.data.datasets.forEach(a=>{const l=a.type||n.type,c=a.indexAxis||mE(l,t),u=($c[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=function P_e(n,t){let e=n;return"_index_"===n?e=t:"_value_"===n&&(e="x"===t?"y":"x"),e}(h,c),p=a[f+"AxisID"]||r[f]||f;o[p]=o[p]||Object.create(null),Jp(o[p],[{axis:f},i[p],u[h]])})}),Object.keys(o).forEach(a=>{const l=o[a];Jp(l,[$t.scales[l.type],$t.scale])}),o}(n,t)}function xU(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const wU=new Map,MU=new Set;function Sb(n,t){let e=wU.get(n);return e||(e=t(),wU.set(n,e),MU.add(e)),e}const ym=(n,t,e)=>{const i=Wc(t,e);void 0!==i&&n.add(i)};class B_e{constructor(t){this._config=function N_e(n){return(n=n||{}).data=xU(n.data),bU(n),n}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=xU(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),bU(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Sb(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Sb(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Sb(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return Sb(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:r}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const l=new Set;e.forEach(d=>{t&&(l.add(t),d.forEach(u=>ym(l,t,u))),d.forEach(u=>ym(l,s,u)),d.forEach(u=>ym(l,$c[r]||{},u)),d.forEach(u=>ym(l,$t,u)),d.forEach(u=>ym(l,QD,u))});const c=Array.from(l);return 0===c.length&&c.push(Object.create(null)),MU.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,$c[e]||{},$t.datasets[e]||{},{type:e},$t,QD]}resolveNamedOptions(t,e,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=CU(this._resolverCache,t,s);let l=o;(function H_e(n,t){const{isScriptable:e,isIndexable:i}=bz(n);for(const s of t){const r=e(s),o=i(s),a=(o||r)&&n[s];if(r&&(Sl(a)||V_e(a))||o&&En(a))return!0}return!1})(o,e)&&(r.$shared=!1,l=dh(o,i=Sl(i)?i():i,this.createResolver(t,i,a)));for(const c of e)r[c]=l[c];return r}createResolver(t,e,i=[""],s){const{resolver:r}=CU(this._resolverCache,t,i);return Yt(e)?dh(r,e,void 0,s):r}}function CU(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let r=i.get(s);return r||(r={resolver:tE(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const V_e=n=>Yt(n)&&Object.getOwnPropertyNames(n).reduce((t,e)=>t||Sl(n[e]),!1),U_e=["top","bottom","left","right","chartArea"];function SU(n,t){return"top"===n||"bottom"===n||-1===U_e.indexOf(n)&&"x"===t}function DU(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function EU(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),An(e&&e.onComplete,[n],t)}function G_e(n){const t=n.chart,e=t.options.animation;An(e&&e.onProgress,[n],t)}function AU(n){return Ez()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Db={},TU=n=>{const t=AU(n);return Object.values(Db).filter(e=>e.canvas===t).pop()};function j_e(n,t,e){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=t){const o=n[s];delete n[s],(e>0||r>t)&&(n[r+e]=o)}}}class vm{constructor(t,e){const i=this.config=new B_e(e),s=AU(t),r=TU(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function c_e(n){return!Ez()||"undefined"!=typeof OffscreenCanvas&&n instanceof OffscreenCanvas?Kge:l_e}(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;this.id=Ipe(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new A_e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function kpe(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],Db[this.id]=this,a&&l?(Ta.listen(this,"complete",EU),Ta.listen(this,"progress",G_e),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:r}=this;return sn(t)?e&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Tz(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return mz(this.canvas,this.ctx),this}stop(){return Ta.stop(this),this}resize(t,e){Ta.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,o=this.platform.getMaximumSize(this.canvas,t,e,i.maintainAspectRatio&&this.aspectRatio),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Tz(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),An(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){pn(this.options.scales||{},(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const a=e[o],l=gE(o,a),c="r"===l,d="x"===l;return{options:a,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),pn(r,o=>{const a=o.options,l=a.id,c=gE(l,a),d=Lt(a.type,o.dtype);(void 0===a.position||SU(a.position,c)!==SU(o.dposition))&&(a.position=o.dposition),s[l]=!0;let u=null;l in i&&i[l].type===d?u=i[l]:(u=new(Ra.getScale(d))({id:l,type:d,ctx:this.ctx,chart:this}),i[u.id]=u),u.init(a,t)}),pn(s,(o,a)=>{o||delete i[a]}),pn(i,o=>{cs.configure(this,o,o.options),cs.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(DU("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{0===e.filter(r=>r===i._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const r=e[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||mE(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Ra.getController(a),{datasetElementType:c,dataElementType:d}=$t.datasets[a];Object.assign(l.prototype,{dataElementType:Ra.getElement(d),datasetElementType:c&&Ra.getElement(c)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){pn(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:u}=this.getDatasetMeta(c),h=!s&&-1===r.indexOf(u);u.buildOrUpdateElements(h),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||pn(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(DU("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){pn(this.scales,t=>{cs.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!QH(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of e)j_e(t,s,"_removeElements"===i?-r:r)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<e;r++)if(!QH(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;cs.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],pn(this.boxes,s=>{i&&"chartArea"===s.position||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Sl(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Ta.has(this)?this.attached&&!Ta.running(this)&&Ta.start(this):(this.draw(),EU({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,r;for(s=0,r=e.length;s<r;++s){const o=e[s];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,s=!i.disabled,r=this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(s&&fb(e,{left:!1===i.left?0:r.left-i.left,right:!1===i.right?this.width:r.right+i.right,top:!1===i.top?0:r.top-i.top,bottom:!1===i.bottom?this.height:r.bottom+i.bottom}),t.controller.draw(),s&&pb(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}getElementsAtEventForMode(t,e,i,s){const r=Uge.modes[e];return"function"==typeof r?r(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Dl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);Sr(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ta.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),mz(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Db[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};pn(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){pn(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},pn(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let r,o,a,l;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!nb(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}_updateHoverStyles(t,e,i){const s=this.options.hover,r=(l,c)=>l.filter(d=>!c.some(u=>d.datasetIndex===u.datasetIndex&&d.index===u.index)),o=r(e,t),a=i?t:r(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:Yc(t,this.chartArea,this._minPadding)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;const r=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:r}=this,a=this._getActiveElements(t,s,i,e),l=function Bpe(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(t),c=function W_e(n,t,e,i){return e&&"mouseout"!==n.type?i?t:n:null}(t,this._lastEvent,i,l);i&&(this._lastEvent=null,An(r.onHover,[t,a,this],this),l&&An(r.onClick,[t,a,this],this));const d=!nb(a,s);return(d||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=c,d}_getActiveElements(t,e,i,s){if("mouseout"===t.type)return[];if(!i)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}}const kU=()=>pn(vm.instances,n=>n._plugins.invalidate()),El=!0;function RU(n,t,e){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=s/a;n.beginPath(),n.arc(r,o,a,i-c,e+c),l>s?(c=s/l,n.arc(r,o,l,e+c,i-c,!0)):n.arc(r,o,s,e+ti,i-ti),n.closePath(),n.clip()}function fh(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function _E(n,t,e,i,s){const{x:r,y:o,startAngle:a,pixelMargin:l,innerRadius:c}=t,d=Math.max(t.outerRadius+i+e-l,0),u=c>0?c+i+e+l:0;let h=0;const f=s-a;if(i){const L=((c>0?c-i:0)+(d>0?d-i:0))/2;h=(f-(0!==L?f*L/(L+i):f))/2}const m=(f-Math.max(.001,f*d-e/Vn)/d)/2,g=a+m+h,_=s-m-h,{outerStart:y,outerEnd:b,innerStart:x,innerEnd:w}=function q_e(n,t,e,i){const s=function $_e(n){return JD(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),r=(e-t)/2,o=Math.min(r,i*t/2),a=l=>{const c=(e-Math.min(r,l))*i/2;return qi(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:qi(s.innerStart,0,o),innerEnd:qi(s.innerEnd,0,o)}}(t,u,d,_-g),C=d-y,S=d-b,E=g+y/C,I=_-b/S,F=u+x,M=u+w,T=g+x/F,W=_-w/M;if(n.beginPath(),n.arc(r,o,d,E,I),b>0){const O=fh(S,I,r,o);n.arc(O.x,O.y,b,I,_+ti)}const z=fh(M,_,r,o);if(n.lineTo(z.x,z.y),w>0){const O=fh(M,W,r,o);n.arc(O.x,O.y,w,_+ti,W+Math.PI)}if(n.arc(r,o,u,_-w/u,g+x/u,!0),x>0){const O=fh(F,T,r,o);n.arc(O.x,O.y,x,T+Math.PI,g-ti)}const U=fh(C,g,r,o);if(n.lineTo(U.x,U.y),y>0){const O=fh(C,E,r,o);n.arc(O.x,O.y,y,g-ti,E)}n.closePath()}Object.defineProperties(vm,{defaults:{enumerable:El,value:$t},instances:{enumerable:El,value:Db},overrides:{enumerable:El,value:$c},registry:{enumerable:El,value:Ra},version:{enumerable:El,value:"3.7.1"},getChart:{enumerable:El,value:TU},register:{enumerable:El,value:(...n)=>{Ra.add(...n),kU()}},unregister:{enumerable:El,value:(...n)=>{Ra.remove(...n),kU()}}});class bm extends ro{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.getProps(["x","y"],i),{angle:r,distance:o}=nz(s,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:d,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=this.options.spacing/2,p=Lt(u,l-a)>=xn||im(r,a,l),m=Ea(o,c+h,d+h);return p&&m}getCenterPoint(t){const{x:e,y:i,startAngle:s,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:l,spacing:c}=this.options,d=(s+r)/2,u=(o+a+c+l)/2;return{x:e+Math.cos(d)*u,y:i+Math.sin(d)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,s=(e.offset||0)/2,r=(e.spacing||0)/2;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>xn?Math.floor(i/xn):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();let o=0;if(s){o=s/2;const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*o,Math.sin(l)*o),this.circumference>=Vn&&(o=s)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const a=function Y_e(n,t,e,i){const{fullCircles:s,startAngle:r,circumference:o}=t;let a=t.endAngle;if(s){_E(n,t,e,i,r+xn);for(let l=0;l<s;++l)n.fill();isNaN(o)||(a=r+o%xn,o%xn==0&&(a+=xn))}return _E(n,t,e,i,a),n.fill(),a}(t,this,o,r);(function K_e(n,t,e,i,s){const{options:r}=t,{borderWidth:o,borderJoinStyle:a}=r,l="inner"===r.borderAlign;!o||(l?(n.lineWidth=2*o,n.lineJoin=a||"round"):(n.lineWidth=o,n.lineJoin=a||"bevel"),t.fullCircles&&function X_e(n,t,e){const{x:i,y:s,startAngle:r,pixelMargin:o,fullCircles:a}=t,l=Math.max(t.outerRadius-o,0),c=t.innerRadius+o;let d;for(e&&RU(n,t,r+xn),n.beginPath(),n.arc(i,s,c,r+xn,r,!0),d=0;d<a;++d)n.stroke();for(n.beginPath(),n.arc(i,s,l,r,r+xn),d=0;d<a;++d)n.stroke()}(n,t,l),l&&RU(n,t,s),_E(n,t,e,i,s),n.stroke())})(t,this,o,r,a),t.restore()}}function IU(n,t,e=t){n.lineCap=Lt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Lt(e.borderDash,t.borderDash)),n.lineDashOffset=Lt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Lt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Lt(e.borderWidth,t.borderWidth),n.strokeStyle=Lt(e.borderColor,t.borderColor)}function Q_e(n,t,e){n.lineTo(e.x,e.y)}function PU(n,t,e={}){const i=n.length,{start:s=0,end:r=i-1}=e,{start:o,end:a}=t,l=Math.max(s,o),c=Math.min(r,a);return{count:i,start:l,loop:t.loop,ilen:c<l&&!(s<o&&r<o||s>a&&r>a)?i+c-l:c-l}}function J_e(n,t,e,i){const{points:s,options:r}=t,{count:o,start:a,loop:l,ilen:c}=PU(s,e,i),d=function Z_e(n){return n.stepped?fme:n.tension||"monotone"===n.cubicInterpolationMode?pme:Q_e}(r);let f,p,m,{move:u=!0,reverse:h}=i||{};for(f=0;f<=c;++f)p=s[(a+(h?c-f:f))%o],!p.skip&&(u?(n.moveTo(p.x,p.y),u=!1):d(n,m,p,h,r.stepped),m=p);return l&&(p=s[(a+(h?c:0))%o],d(n,m,p,h,r.stepped)),!!l}function eye(n,t,e,i){const s=t.points,{count:r,start:o,ilen:a}=PU(s,e,i),{move:l=!0,reverse:c}=i||{};let h,f,p,m,g,_,d=0,u=0;const y=x=>(o+(c?a-x:x))%r,b=()=>{m!==g&&(n.lineTo(d,g),n.lineTo(d,m),n.lineTo(d,_))};for(l&&(f=s[y(0)],n.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=s[y(h)],f.skip)continue;const x=f.x,w=f.y,C=0|x;C===p?(w<m?m=w:w>g&&(g=w),d=(u*d+x)/++u):(b(),n.lineTo(x,w),p=C,u=0,m=g=w),_=w}b()}function yE(n){const t=n.options;return n._decimated||n._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||t.borderDash&&t.borderDash.length?J_e:eye}bm.id="arc",bm.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},bm.defaultRoutes={backgroundColor:"backgroundColor"};const sye="function"==typeof Path2D;let xm=(()=>{class n extends ro{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){const s=this.options;!s.tension&&"monotone"!==s.cubicInterpolationMode||s.stepped||this._pointsUpdated||(Hme(this._points,s,e,s.spanGaps?this._loop:this._fullLoop,i),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function nge(n,t){const e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];const r=!!n._loop,{start:o,end:a}=function ege(n,t,e,i){let s=0,r=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(r+=s);r>s&&n[r%t].skip;)r--;return r%=t,{start:s,end:r}}(e,s,r,i);return function Bz(n,t,e,i){return i&&i.setContext&&e?function ige(n,t,e,i){const s=n._chart.getContext(),r=Vz(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,c=[];let d=r,u=t[0].start,h=u;function f(p,m,g,_){const y=a?-1:1;if(p!==m){for(p+=l;e[p%l].skip;)p-=y;for(;e[m%l].skip;)m+=y;p%l!=m%l&&(c.push({start:p%l,end:m%l,loop:g,style:_}),d=_,u=m%l)}}for(const p of t){u=a?u:p.start;let g,m=e[u%l];for(h=u+1;h<=p.end;h++){const _=e[h%l];g=Vz(i.setContext(Dl(s,{type:"segment",p0:m,p1:_,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),sge(g,d)&&f(u,h-1,p.loop,d),m=_,d=g}u<h-1&&f(u,h-1,p.loop,d)}return c}(n,t,e,i):t}(n,!0===i?[{start:o,end:a,loop:r}]:function tge(n,t,e,i){const s=n.length,r=[];let l,o=t,a=n[t];for(l=t+1;l<=e;++l){const c=n[l%s];c.skip||c.stop?a.skip||(r.push({start:t%s,end:(l-1)%s,loop:i=!1}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return null!==o&&r.push({start:t%s,end:o%s,loop:i}),r}(e,o,a<o?a+s:a,!!n._fullLoop&&0===o&&a===s-1),e,t)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,s=e.length;return s&&this.points[e[s-1].end]}interpolate(e,i){const s=this.options,r=e[i],o=this.points,a=Nz(this,{property:i,start:r,end:r});if(!a.length)return;const l=[],c=function tye(n){return n.stepped?Yme:n.tension||"monotone"===n.cubicInterpolationMode?Xme:Qc}(s);let d,u;for(d=0,u=a.length;d<u;++d){const{start:h,end:f}=a[d],p=o[h],m=o[f];if(p===m){l.push(p);continue}const _=c(p,m,Math.abs((r-p[i])/(m[i]-p[i])),s.stepped);_[i]=e[i],l.push(_)}return 1===l.length?l[0]:l}pathSegment(e,i,s){return yE(this)(e,this,i,s)}path(e,i,s){const r=this.segments,o=yE(this);let a=this._loop;i=i||0,s=s||this.points.length-i;for(const l of r)a&=o(e,this,l,{start:i,end:i+s-1});return!!a}draw(e,i,s,r){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function rye(n,t,e,i){sye&&!t.options.segment?function nye(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),IU(n,t.options),n.stroke(s)}(n,t,e,i):function iye(n,t,e,i){const{segments:s,options:r}=t,o=yE(t);for(const a of s)IU(n,r,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}(n,t,e,i)}(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n.id="line",n.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t},n})();function OU(n,t,e,i){const s=n.options,{[e]:r}=n.getProps([e],i);return Math.abs(t-r)<s.radius+s.hitRadius}let LU=(()=>{class n extends ro{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(e-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,i){return OU(this,e,"x",i)}inYRange(e,i){return OU(this,e,"y",i)}getCenterPoint(e){const{x:i,y:s}=this.getProps(["x","y"],e);return{x:i,y:s}}size(e){let i=(e=e||this.options||{}).radius||0;return i=Math.max(i,i&&e.hoverRadius||0),2*(i+(i&&e.borderWidth||0))}draw(e,i){const s=this.options;this.skip||s.radius<.1||!Yc(this,i,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,hb(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}return n.id="point",n.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n})();function FU(n,t){const{x:e,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],t);let a,l,c,d,u;return n.horizontal?(u=o/2,a=Math.min(e,s),l=Math.max(e,s),c=i-u,d=i+u):(u=r/2,a=e-u,l=e+u,c=Math.min(i,s),d=Math.max(i,s)),{left:a,top:c,right:l,bottom:d}}function Al(n,t,e,i){return n?0:qi(t,e,i)}function vE(n,t,e,i){const s=null===t,r=null===e,a=n&&!(s&&r)&&FU(n,i);return a&&(s||Ea(t,a.left,a.right))&&(r||Ea(e,a.top,a.bottom))}function dye(n,t){n.rect(t.x,t.y,t.w,t.h)}function bE(n,t,e={}){const i=n.x!==e.x?-t:0,s=n.y!==e.y?-t:0;return{x:n.x+i,y:n.y+s,w:n.w+((n.x+n.w!==e.x+e.w?t:0)-i),h:n.h+((n.y+n.h!==e.y+e.h?t:0)-s),radius:n.radius}}class wm extends ro{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=function lye(n){const t=FU(n),e=t.right-t.left,i=t.bottom-t.top,s=function oye(n,t,e){const s=n.borderSkipped,r=gz(n.options.borderWidth);return{t:Al(s.top,r.top,0,e),r:Al(s.right,r.right,0,t),b:Al(s.bottom,r.bottom,0,e),l:Al(s.left,r.left,0,t)}}(n,e/2,i/2),r=function aye(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=ch(s),o=Math.min(t,e),a=n.borderSkipped,l=i||Yt(s);return{topLeft:Al(!l||a.top||a.left,r.topLeft,0,o),topRight:Al(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Al(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Al(!l||a.bottom||a.right,r.bottomRight,0,o)}}(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}(this),a=function cye(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(o.radius)?mb:dye;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,bE(o,e,r)),t.clip(),a(t,bE(r,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,bE(r,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return vE(this,t,e,i)}inXRange(t,e){return vE(this,t,null,e)}inYRange(t,e){return vE(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+s)/2:e,y:r?i:(i+s)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}function yye(n,t,e){const i=function _ye(n){const t=n.options,e=t.fill;let i=Lt(e&&e.target,e);return void 0===i&&(i=!!t.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(n);if(Yt(i))return!isNaN(i.value)&&i;let s=parseFloat(i);return di(s)&&Math.floor(s)===s?(("-"===i[0]||"+"===i[0])&&(s=t+s),!(s===t||s<0||s>=e)&&s):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}wm.id="bar",wm.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},wm.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class VU{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:s,y:r,radius:o}=this;return t.arc(s,r,o,(e=e||{start:0,end:xn}).end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:s}=this,r=t.angle;return{x:e+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function xE(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Sye(n,t,e){const i=[];for(let s=0;s<e.length;s++){const r=e[s],{first:o,last:a,point:l}=Dye(r,t,"x");if(!(!l||o&&a))if(o)i.unshift(l);else if(n.push(l),!a)break}n.push(...i)}function Dye(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const s=i[e],r=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const d=r[c],u=o[d.start][e],h=o[d.end][e];if(Ea(s,u,h)){a=s===u,l=s===h;break}}return{first:a,last:l,point:i}}function Eye(n){const{chart:t,fill:e,line:i}=n;if(di(e))return function gye(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}(t,e);if("stack"===e)return function Mye(n){const{scale:t,index:e,line:i}=n,s=[],r=i.segments,o=i.points,a=function Cye(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}(t,e);a.push(HU({x:null,y:t.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let d=c.start;d<=c.end;d++)Sye(s,o[d],a)}return new xm({points:s,options:{}})}(n);if("shape"===e)return!0;const s=function xye(n){return(n.scale||{}).getPointPositionForValue?function bye(n){const{scale:t,fill:e}=n,i=t.options,s=t.getLabels().length,r=[],o=i.reverse?t.max:t.min;let l,c,d;if(d="start"===e?o:"end"===e?i.reverse?t.min:t.max:Yt(e)?e.value:t.getBaseValue(),i.grid.circular)return c=t.getPointPositionForValue(0,o),new VU({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(d)});for(l=0;l<s;++l)r.push(t.getPointPositionForValue(l,d));return r}(n):function vye(n){const{scale:t={},fill:e}=n;let s,i=null;return"start"===e?i=t.bottom:"end"===e?i=t.top:Yt(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),di(i)?(s=t.isHorizontal(),{x:s?i:null,y:s?null:i}):null}(n)}(n);return s instanceof VU?s:HU(s,i)}function HU(n,t){let e=[],i=!1;return En(n)?(i=!0,e=n):e=function wye(n,t){const{x:e=null,y:i=null}=n||{},s=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=xE(o,a,s);const l=s[o],c=s[a];null!==i?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):null!==e&&(r.push({x:e,y:l.y}),r.push({x:e,y:c.y}))}),r}(n,t),e.length?new xm({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function Aye(n,t,e){let s=n[t].fill;const r=[t];let o;if(!e)return s;for(;!1!==s&&-1===r.indexOf(s);){if(!di(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function zU(n,t,e){const{segments:i,points:s}=t;let r=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,d=s[l],u=s[xE(l,c,s)];r?(n.moveTo(d.x,d.y),r=!1):(n.lineTo(d.x,e),n.lineTo(d.x,d.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(u.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function wE(n,t,e,i){if(i)return;let s=t[n],r=e[n];return"angle"===n&&(s=Js(s),r=Js(r)),{property:n,start:s,end:r}}function UU(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function kye(n,t,e){const{top:i,bottom:s}=t.chart.chartArea,{property:r,start:o,end:a}=e||{};"x"===r&&(n.beginPath(),n.rect(o,i,a-o,s-i),n.clip())}function GU(n,t,e,i){const s=t.interpolate(e,i);s&&n.lineTo(s.x,s.y)}function jU(n,t){const{line:e,target:i,property:s,color:r,scale:o}=t,a=function Tye(n,t,e){const i=n.segments,s=n.points,r=t.points,o=[];for(const a of i){let{start:l,end:c}=a;c=xE(l,c,s);const d=wE(e,s[l],s[c],a.loop);if(!t.segments){o.push({source:a,target:d,start:s[l],end:s[c]});continue}const u=Nz(t,d);for(const h of u){const f=wE(e,r[h.start],r[h.end],h.loop),p=Fz(a,s,f);for(const m of p)o.push({source:m,target:h,start:{[e]:UU(d,f,"start",Math.max)},end:{[e]:UU(d,f,"end",Math.min)}})}}return o}(e,i,s);for(const{source:l,target:c,start:d,end:u}of a){const{style:{backgroundColor:h=r}={}}=l,f=!0!==i;n.save(),n.fillStyle=h,kye(n,o,f&&wE(s,d,u)),n.beginPath();const p=!!e.pathSegment(n,l);let m;if(f){p?n.closePath():GU(n,i,u,s);const g=!!i.pathSegment(n,c,{move:p,reverse:!0});m=p&&g,m||GU(n,i,d,s)}n.closePath(),n.fill(m?"evenodd":"nonzero"),n.restore()}}function ME(n,t,e){const i=Eye(t),{line:s,scale:r,axis:o}=t,a=s.options,l=a.fill,c=a.backgroundColor,{above:d=c,below:u=c}=l||{};i&&s.points.length&&(fb(n,e),function Rye(n,t){const{line:e,target:i,above:s,below:r,area:o,scale:a}=t,l=e._loop?"angle":t.axis;n.save(),"x"===l&&r!==s&&(zU(n,i,o.top),jU(n,{line:e,target:i,color:s,scale:a,property:l}),n.restore(),n.save(),zU(n,i,o.bottom)),jU(n,{line:e,target:i,color:r,scale:a,property:l}),n.restore()}(n,{line:s,target:i,above:d,below:u,area:e,scale:r,axis:o}),pb(n))}var WU={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof xm&&(l={visible:n.isDatasetVisible(o),index:o,fill:yye(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],l&&!1!==l.fill&&(l.fill=Aye(s,o,e.propagate))},beforeDraw(n,t,e){const i="beforeDraw"===e.drawTime,s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;!a||(a.line.updateControlPoints(r,a.axis),i&&ME(n.ctx,a,r))}},beforeDatasetsDraw(n,t,e){if("beforeDatasetsDraw"!==e.drawTime)return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;r&&ME(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!i||!1===i.fill||"beforeDatasetDraw"!==e.drawTime||ME(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const $U=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}};class qU extends ro{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=An(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,s=Vi(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=$U(i,r);let c,d;e.font=s.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,r,a,l)+10):(d=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=s+a;let u=t;r.textAlign="left",r.textBaseline="middle";let h=-1,f=-d;return this.legendItems.forEach((p,m)=>{const g=i+e/2+r.measureText(p.text).width;(0===m||c[c.length-1]+g+2*a>o)&&(u+=d,c[c.length-(m>0?0:1)]=0,f+=d,h++),l[m]={left:0,top:f,row:h,width:g,height:s},c[c.length-1]+=g+a}),u}_fitCols(t,e,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-t;let u=a,h=0,f=0,p=0,m=0;return this.legendItems.forEach((g,_)=>{const y=i+e/2+r.measureText(g.text).width;_>0&&f+s+2*a>d&&(u+=h+a,c.push({width:h,height:f}),p+=h+a,m++,h=f=0),l[_]={left:p,top:f,col:m,width:y,height:s},h=Math.max(h,y),f+=s+a}),u+=h,c.push({width:h,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:r}}=this,o=hh(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=as(i,this.left+s,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=as(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=as(i,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=as(i,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;fb(t,this),this._draw(),pb(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:r,labels:o}=t,a=$t.color,l=hh(t.rtl,this.left,this.width),c=Vi(o.font),{color:d,padding:u}=o,h=c.size,f=h/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:m,boxHeight:g,itemHeight:_}=$U(o,h),x=this.isHorizontal(),w=this._computeTitleHeight();p=x?{x:as(r,this.left+u,this.right-i[0]),y:this.top+u+w,line:0}:{x:this.left+u,y:as(r,this.top+w+u,this.bottom-e[0].height),line:0},Iz(this.ctx,t.textDirection);const C=_+u;this.legendItems.forEach((S,E)=>{s.strokeStyle=S.fontColor||d,s.fillStyle=S.fontColor||d;const I=s.measureText(S.text).width,F=l.textAlign(S.textAlign||(S.textAlign=o.textAlign)),M=m+f+I;let T=p.x,W=p.y;l.setWidth(this.width),x?E>0&&T+M+u>this.right&&(W=p.y+=C,p.line++,T=p.x=as(r,this.left+u,this.right-i[p.line])):E>0&&W+C>this.bottom&&(T=p.x=T+e[p.line].width+u,p.line++,W=p.y=as(r,this.top+w+u,this.bottom-e[p.line].height)),function(S,E,I){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;s.save();const F=Lt(I.lineWidth,1);if(s.fillStyle=Lt(I.fillStyle,a),s.lineCap=Lt(I.lineCap,"butt"),s.lineDashOffset=Lt(I.lineDashOffset,0),s.lineJoin=Lt(I.lineJoin,"miter"),s.lineWidth=F,s.strokeStyle=Lt(I.strokeStyle,a),s.setLineDash(Lt(I.lineDash,[])),o.usePointStyle){const M={radius:m*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:F},T=l.xPlus(S,m/2);hb(s,M,T,E+f)}else{const M=E+Math.max((h-g)/2,0),T=l.leftForLtr(S,m),W=ch(I.borderRadius);s.beginPath(),Object.values(W).some(z=>0!==z)?mb(s,{x:T,y:M,w:m,h:g,radius:W}):s.rect(T,M,m,g),s.fill(),0!==F&&s.stroke()}s.restore()}(l.x(T),W,S),T=((n,t,e,i)=>n===(i?"left":"right")?e:"center"===n?(t+e)/2:t)(F,T+m+f,x?T+M:this.right,t.rtl),function(S,E,I){Xc(s,I.text,S,E+_/2,c,{strikethrough:I.hidden,textAlign:l.textAlign(I.textAlign)})}(l.x(T),W,S),x?p.x+=M+u:p.y+=C}),Pz(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Vi(e.font),s=ls(e.padding);if(!e.display)return;const r=hh(t.rtl,this.left,this.width),o=this.ctx,a=e.position,c=s.top+i.size/2;let d,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),d=this.top+c,u=as(t.align,u,this.right-h);else{const p=this.columnSizes.reduce((m,g)=>Math.max(m,g.height),0);d=c+as(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const f=as(a,u,u+h);o.textAlign=r.textAlign(zD(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,Xc(o,e.text,f,d,i)}_computeTitleHeight(){const t=this.options.title,e=Vi(t.font),i=ls(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,r;if(Ea(t,this.left,this.right)&&Ea(e,this.top,this.bottom))for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Ea(t,s.left,s.left+s.width)&&Ea(e,s.top,s.top+s.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function Pye(n,t){return!!("mousemove"===n&&(t.onHover||t.onLeave)||t.onClick&&("click"===n||"mouseup"===n))}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type){const s=this._hoveredItem,r=((n,t)=>null!==n&&null!==t&&n.datasetIndex===t.datasetIndex&&n.index===t.index)(s,i);s&&!r&&An(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&An(e.onHover,[t,i,this],this)}else i&&An(e.onClick,[t,i,this],this)}}var YU={id:"legend",_element:qU,start(n,t,e){const i=n.legend=new qU({ctx:n.ctx,options:e,chart:n});cs.configure(n,i,e),cs.addBox(n,i)},stop(n){cs.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;cs.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:r}}=n.legend.options;return n._getSortedDatasetMetas().map(o=>{const a=o.controller.getStyle(e?0:void 0),l=ls(a.borderWidth);return{text:t[o.index].label,fillStyle:a.backgroundColor,fontColor:r,hidden:!o.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:a.borderColor,pointStyle:i||a.pointStyle,rotation:a.rotation,textAlign:s||a.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class CE extends ro{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const s=En(i.text)?i.text.length:1;this._padding=ls(i.padding);const r=s*Vi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:s,right:r,options:o}=this,a=o.align;let c,d,u,l=0;return this.isHorizontal()?(d=as(a,i,r),u=e+t,c=r-i):("left"===o.position?(d=i+t,u=as(a,s,e),l=-.5*Vn):(d=r-t,u=as(a,e,s),l=.5*Vn),c=s-e),{titleX:d,titleY:u,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Vi(e.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Xc(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:zD(e.align),textBaseline:"middle",translation:[o,a]})}}var XU={id:"title",_element:CE,start(n,t,e){!function Oye(n,t){const e=new CE({ctx:n.ctx,options:t,chart:n});cs.configure(n,e,t),cs.addBox(n,e),n.titleBlock=e}(n,e)},stop(n){cs.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;cs.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Mm={average(n){if(!n.length)return!1;let t,e,i=0,s=0,r=0;for(t=0,e=n.length;t<e;++t){const o=n[t].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,s+=a.y,++r}}return{x:i/r,y:s/r}},nearest(n,t){if(!n.length)return!1;let r,o,a,e=t.x,i=t.y,s=Number.POSITIVE_INFINITY;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const d=jD(t,l.getCenterPoint());d<s&&(s=d,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function Vo(n,t){return t&&(En(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Ia(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function Fye(n,t){const{element:e,datasetIndex:i,index:s}=t,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function KU(n,t){const e=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=t,l=Vi(t.bodyFont),c=Vi(t.titleFont),d=Vi(t.footerFont),u=r.length,h=s.length,f=i.length,p=ls(t.padding);let m=p.height,g=0,_=i.reduce((x,w)=>x+w.before.length+w.lines.length+w.after.length,0);_+=n.beforeBody.length+n.afterBody.length,u&&(m+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),_&&(m+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(_-f)*l.lineHeight+(_-1)*t.bodySpacing),h&&(m+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let y=0;const b=function(x){g=Math.max(g,e.measureText(x).width+y)};return e.save(),e.font=c.string,pn(n.title,b),e.font=l.string,pn(n.beforeBody.concat(n.afterBody),b),y=t.displayColors?o+2+t.boxPadding:0,pn(i,x=>{pn(x.before,b),pn(x.lines,b),pn(x.after,b)}),y=0,e.font=d.string,pn(n.footer,b),e.restore(),g+=p.width,{width:g,height:m}}function Vye(n,t,e,i){const{x:s,width:r}=e,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return"center"===i?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),function Bye(n,t,e,i){const{x:s,width:r}=i,o=e.caretSize+e.caretPadding;if("left"===n&&s+r+o>t.width||"right"===n&&s-r-o<0)return!0}(c,n,t,e)&&(c="center"),c}function QU(n,t,e){const i=e.yAlign||t.yAlign||function Nye(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}(n,e);return{xAlign:e.xAlign||t.xAlign||Vye(n,t,e,i),yAlign:i}}function ZU(n,t,e,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,c=s+r,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:f}=ch(o);let p=function Hye(n,t){let{x:e,width:i}=n;return"right"===t?e-=i:"center"===t&&(e-=i/2),e}(t,a);const m=function zye(n,t,e){let{y:i,height:s}=n;return"top"===t?i+=e:i-="bottom"===t?s+e:s/2,i}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(d,h)+s:"right"===a&&(p+=Math.max(u,f)+s),{x:qi(p,0,i.width-t.width),y:qi(m,0,i.height-t.height)}}function Ab(n,t,e){const i=ls(e.padding);return"center"===t?n.x+n.width/2:"right"===t?n.x+n.width-i.right:n.x+i.left}function JU(n){return Vo([],Ia(n))}function eG(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}let tG=(()=>{class n extends ro{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&i.options.animation&&s.animations,o=new zz(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function Uye(n,t,e){return Dl(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:s}=i,r=s.beforeTitle.apply(this,[e]),o=s.title.apply(this,[e]),a=s.afterTitle.apply(this,[e]);let l=[];return l=Vo(l,Ia(r)),l=Vo(l,Ia(o)),l=Vo(l,Ia(a)),l}getBeforeBody(e,i){return JU(i.callbacks.beforeBody.apply(this,[e]))}getBody(e,i){const{callbacks:s}=i,r=[];return pn(e,o=>{const a={before:[],lines:[],after:[]},l=eG(s,o);Vo(a.before,Ia(l.beforeLabel.call(this,o))),Vo(a.lines,l.label.call(this,o)),Vo(a.after,Ia(l.afterLabel.call(this,o))),r.push(a)}),r}getAfterBody(e,i){return JU(i.callbacks.afterBody.apply(this,[e]))}getFooter(e,i){const{callbacks:s}=i,r=s.beforeFooter.apply(this,[e]),o=s.footer.apply(this,[e]),a=s.afterFooter.apply(this,[e]);let l=[];return l=Vo(l,Ia(r)),l=Vo(l,Ia(o)),l=Vo(l,Ia(a)),l}_createItems(e){const i=this._active,s=this.chart.data,r=[],o=[],a=[];let c,d,l=[];for(c=0,d=i.length;c<d;++c)l.push(Fye(this.chart,i[c]));return e.filter&&(l=l.filter((u,h,f)=>e.filter(u,h,f,s))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,s))),pn(l,u=>{const h=eG(e.callbacks,u);r.push(h.labelColor.call(this,u)),o.push(h.labelPointStyle.call(this,u)),a.push(h.labelTextColor.call(this,u))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,i){const s=this.options.setContext(this.getContext()),r=this._active;let o,a=[];if(r.length){const l=Mm[s.position].call(this,r,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);const c=this._size=KU(this,s),d=Object.assign({},l,c),u=QU(this.chart,s,d),h=ZU(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,s,r){const o=this.getCaretPosition(e,s,r);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(e,i,s){const{xAlign:r,yAlign:o}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=ch(l),{x:f,y:p}=e,{width:m,height:g}=i;let _,y,b,x,w,C;return"center"===o?(w=p+g/2,"left"===r?(_=f,y=_-a,x=w+a,C=w-a):(_=f+m,y=_+a,x=w-a,C=w+a),b=_):(y="left"===r?f+Math.max(c,u)+a:"right"===r?f+m-Math.max(d,h)-a:this.caretX,"top"===o?(x=p,w=x-a,_=y-a,b=y+a):(x=p+g,w=x+a,_=y+a,b=y-a),C=x),{x1:_,x2:y,x3:b,y1:x,y2:w,y3:C}}drawTitle(e,i,s){const r=this.title,o=r.length;let a,l,c;if(o){const d=hh(s.rtl,this.x,this.width);for(e.x=Ab(this,s.titleAlign,s),i.textAlign=d.textAlign(s.titleAlign),i.textBaseline="middle",a=Vi(s.titleFont),l=s.titleSpacing,i.fillStyle=s.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(r[c],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=s.titleMarginBottom-l)}}_drawColorBox(e,i,s,r,o){const a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:d,boxPadding:u}=o,h=Vi(o.bodyFont),f=Ab(this,"left",o),p=r.x(f),g=i.y+(c<h.lineHeight?(h.lineHeight-c)/2:0);if(o.usePointStyle){const _={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=r.leftForLtr(p,d)+d/2,b=g+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,hb(e,_,y,b),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,hb(e,_,y,b)}else{e.lineWidth=a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const _=r.leftForLtr(p,d-u),y=r.leftForLtr(r.xPlus(p,1),d-u-2),b=ch(a.borderRadius);Object.values(b).some(x=>0!==x)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,mb(e,{x:_,y:g,w:d,h:c,radius:b}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),mb(e,{x:y,y:g+1,w:d-2,h:c-2,radius:b}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(_,g,d,c),e.strokeRect(_,g,d,c),e.fillStyle=a.backgroundColor,e.fillRect(y,g+1,d-2,c-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,i,s){const{body:r}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=s,h=Vi(s.bodyFont);let f=h.lineHeight,p=0;const m=hh(s.rtl,this.x,this.width),g=function(I){i.fillText(I,m.x(e.x+p),e.y+f/2),e.y+=f+o},_=m.textAlign(a);let y,b,x,w,C,S,E;for(i.textAlign=a,i.textBaseline="middle",i.font=h.string,e.x=Ab(this,_,s),i.fillStyle=s.bodyColor,pn(this.beforeBody,g),p=l&&"right"!==_?"center"===a?d/2+u:d+2+u:0,w=0,S=r.length;w<S;++w){for(y=r[w],b=this.labelTextColors[w],i.fillStyle=b,pn(y.before,g),x=y.lines,l&&x.length&&(this._drawColorBox(i,e,w,m,s),f=Math.max(h.lineHeight,c)),C=0,E=x.length;C<E;++C)g(x[C]),f=h.lineHeight;pn(y.after,g)}p=0,f=h.lineHeight,pn(this.afterBody,g),e.y-=o}drawFooter(e,i,s){const r=this.footer,o=r.length;let a,l;if(o){const c=hh(s.rtl,this.x,this.width);for(e.x=Ab(this,s.footerAlign,s),e.y+=s.footerMarginTop,i.textAlign=c.textAlign(s.footerAlign),i.textBaseline="middle",a=Vi(s.footerFont),i.fillStyle=s.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(r[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+s.footerSpacing}}drawBackground(e,i,s,r){const{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:d,height:u}=s,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:m}=ch(r.cornerRadius);i.fillStyle=r.backgroundColor,i.strokeStyle=r.borderColor,i.lineWidth=r.borderWidth,i.beginPath(),i.moveTo(l+h,c),"top"===a&&this.drawCaret(e,i,s,r),i.lineTo(l+d-f,c),i.quadraticCurveTo(l+d,c,l+d,c+f),"center"===a&&"right"===o&&this.drawCaret(e,i,s,r),i.lineTo(l+d,c+u-m),i.quadraticCurveTo(l+d,c+u,l+d-m,c+u),"bottom"===a&&this.drawCaret(e,i,s,r),i.lineTo(l+p,c+u),i.quadraticCurveTo(l,c+u,l,c+u-p),"center"===a&&"left"===o&&this.drawCaret(e,i,s,r),i.lineTo(l,c+h),i.quadraticCurveTo(l,c,l+h,c),i.closePath(),i.fill(),r.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,s=this.$animations,r=s&&s.x,o=s&&s.y;if(r||o){const a=Mm[e.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=KU(this,e),c=Object.assign({},a,this._size),d=QU(i,e,c),u=ZU(e,c,d,i);(r._to!==u.x||o._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}draw(e){const i=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(i);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const a=ls(i.padding);i.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=s,this.drawBackground(o,e,r,i),Iz(e,i.textDirection),o.y+=a.top,this.drawTitle(o,e,i),this.drawBody(o,e,i),this.drawFooter(o,e,i),Pz(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const s=this._active,r=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),o=!nb(s,r),a=this._positionChanged(r,i);(o||a)&&(this._active=r,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,s=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],a=this._getActiveElements(e,o,i,s),l=this._positionChanged(a,e),c=i||!nb(a,o)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),c}_getActiveElements(e,i,s,r){const o=this.options;if("mouseout"===e.type)return[];if(!r)return i;const a=this.chart.getElementsAtEventForMode(e,o.mode,o,s);return o.reverse&&a.reverse(),a}_positionChanged(e,i){const{caretX:s,caretY:r,options:o}=this,a=Mm[o.position].call(this,e,i);return!1!==a&&(s!==a.x||r!==a.y)}}return n.positioners=Mm,n})();var nG={id:"tooltip",_element:tG,positioners:Mm,afterInit(n,t,e){e&&(n.tooltip=new tG({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip,e={tooltip:t};!1!==n.notifyPlugins("beforeTooltipDraw",e)&&(t&&t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e))},afterEvent(n,t){n.tooltip&&n.tooltip.handleEvent(t.event,t.replay,t.inChartArea)&&(t.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Da,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Da,beforeBody:Da,beforeLabel:Da,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return sn(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Da,afterBody:Da,beforeFooter:Da,footer:Da,afterFooter:Da}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};class Cm extends Jc{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:r}of e)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(sn(t))return null;const i=this.getLabels();return((n,t)=>null===n?null:qi(Math.round(n),0,t))(e=isFinite(e)&&i[e]===t?e:function Wye(n,t,e,i){const s=n.indexOf(t);return-1===s?((n,t,e,i)=>("string"==typeof t?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e))(n,t,e,i):s!==n.lastIndexOf(t)?e:s}(i,t,Lt(e,t),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)s.push({value:o});return s}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function iG(n,t,{horizontal:e,minRotation:i}){const s=so(i),r=(e?Math.sin(s):Math.cos(s))||.001;return Math.min(t/r,.75*t*(""+n).length)}Cm.id="category",Cm.defaults={ticks:{callback:Cm.prototype.getLabelForValue}};class Tb extends Jc{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return sn(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=e?s:l,a=l=>r=i?r:l;if(t){const l=Bo(s),c=Bo(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=1;(r>=Number.MAX_SAFE_INTEGER||s<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(.05*r)),a(r+l),t||o(s-l)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let s,{maxTicksLimit:e,stepSize:i}=t;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o=function qye(n,t){const e=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:d,maxDigits:u,includeBounds:h}=n,f=r||1,p=d-1,{min:m,max:g}=t,_=!sn(o),y=!sn(a),b=!sn(c),x=(g-m)/(u+1);let C,S,E,I,w=JH((g-m)/p/f)*f;if(w<1e-14&&!_&&!y)return[{value:m},{value:g}];I=Math.ceil(g/w)-Math.floor(m/w),I>p&&(w=JH(I*w/p/f)*f),sn(l)||(C=Math.pow(10,l),w=Math.ceil(w*C)/C),"ticks"===s?(S=Math.floor(m/w)*w,E=Math.ceil(g/w)*w):(S=m,E=g),_&&y&&r&&function Upe(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}((a-o)/r,w/1e3)?(I=Math.round(Math.min((a-o)/w,d)),w=(a-o)/I,S=o,E=a):b?(S=_?o:S,E=y?a:E,I=c-1,w=(E-S)/I):(I=(E-S)/w,I=nm(I,Math.round(I),w/1e3)?Math.round(I):Math.ceil(I));const F=Math.max(tz(w),tz(S));C=Math.pow(10,sn(l)?F:l),S=Math.round(S*C)/C,E=Math.round(E*C)/C;let M=0;for(_&&(h&&S!==o?(e.push({value:o}),S<o&&M++,nm(Math.round((S+M*w)*C)/C,o,iG(o,x,n))&&M++):S<o&&M++);M<I;++M)e.push({value:Math.round((S+M*w)*C)/C});return y&&h&&E!==a?e.length&&nm(e[e.length-1].value,a,iG(a,x,n))?e[e.length-1].value=a:e.push({value:a}):(!y||E===a)&&e.push({value:E}),e}({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&ez(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return dm(t,this.chart.options.locale,this.options.ticks.format)}}class kb extends Tb{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=di(t)?t:0,this.max=di(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=so(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function sG(n){return n/Math.pow(10,Math.floor(Dr(n)))==1}kb.id="linear",kb.defaults={ticks:{callback:wb.formatters.numeric}};class SE extends Jc{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Tb.prototype.parse.apply(this,[t,e]);if(0!==i)return di(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=di(t)?Math.max(0,t):null,this.max=di(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,s=this.max;const r=l=>i=t?i:l,o=l=>s=e?s:l,a=(l,c)=>Math.pow(10,Math.floor(Dr(l))+c);i===s&&(i<=0?(r(1),o(10)):(r(a(i,-1)),o(a(s,1)))),i<=0&&r(a(s,-1)),s<=0&&o(a(i,1)),this._zero&&this.min!==this._suggestedMin&&i===a(this.min,0)&&r(a(i,-1)),this.min=i,this.max=s}buildTicks(){const t=this.options,i=function Yye(n,t){const e=Math.floor(Dr(t.max)),i=Math.ceil(t.max/Math.pow(10,e)),s=[];let r=Cr(n.min,Math.pow(10,Math.floor(Dr(t.min)))),o=Math.floor(Dr(r)),a=Math.floor(r/Math.pow(10,o)),l=o<0?Math.pow(10,Math.abs(o)):1;do{s.push({value:r,major:sG(r)}),++a,10===a&&(a=1,++o,l=o>=0?1:l),r=Math.round(a*Math.pow(10,o)*l)/l}while(o<e||o===e&&a<i);const c=Cr(n.max,r);return s.push({value:c,major:sG(r)}),s}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&ez(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return void 0===t?"0":dm(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Dr(t),this._valueRange=Dr(this.max)-Dr(t)}getPixelForValue(t){return(void 0===t||0===t)&&(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Dr(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function DE(n){const t=n.ticks;if(t.display&&n.display){const e=ls(t.backdropPadding);return Lt(t.font&&t.font.size,$t.font.size)+e.height}return 0}function Xye(n,t,e){return e=En(e)?e:[e],{w:hme(n,t.string,e),h:e.length*t.lineHeight}}function rG(n,t,e,i,s){return n===i||n===s?{start:t-e/2,end:t+e/2}:n<i||n>s?{start:t-e,end:t}:{start:t,end:t+e}}function Qye(n,t,e,i,s){const r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/r,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/r,n.r=Math.max(n.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/o,n.t=Math.min(n.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function Jye(n){return 0===n||180===n?"center":n<180?"left":"right"}function eve(n,t,e){return"right"===e?n-=t:"center"===e&&(n-=t/2),n}function tve(n,t,e){return 90===e||270===e?n-=t/2:(e>270||e<90)&&(n-=t),n}function oG(n,t,e,i){const{ctx:s}=n;if(e)s.arc(n.xCenter,n.yCenter,t,0,xn);else{let r=n.getPointPosition(0,t);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,t),s.lineTo(r.x,r.y)}}SE.id="logarithmic",SE.defaults={ticks:{callback:wb.formatters.logarithmic,major:{enabled:!0}}};class ph extends Tb{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ls(DE(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=di(t)&&!isNaN(t)?t:0,this.max=di(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/DE(this.options))}generateTickLabels(t){Tb.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const s=An(this.options.pointLabels.callback,[e,i],this);return s||0===s?s:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?function Kye(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Vn/r:0;for(let l=0;l<r;l++){const c=o.setContext(n.getPointLabelContext(l));s[l]=c.padding;const d=n.getPointPosition(l,n.drawingArea+s[l],a),u=Vi(c.font),h=Xye(n.ctx,u,n._pointLabels[l]);i[l]=h;const f=Js(n.getIndexAngle(l)+a),p=Math.round(GD(f));Qye(e,t,f,rG(p,d.x,h.w,0,180),rG(p,d.y,h.h,90,270))}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=function Zye(n,t,e){const i=[],s=n._pointLabels.length,r=n.options,o=DE(r)/2,a=n.drawingArea,l=r.pointLabels.centerPointLabels?Vn/s:0;for(let c=0;c<s;c++){const d=n.getPointPosition(c,a+o+e[c],l),u=Math.round(GD(Js(d.angle+ti))),h=t[c],f=tve(d.y,h.h,u),p=Jye(u),m=eve(d.x,h.w,p);i.push({x:d.x,y:f,textAlign:p,left:m,top:f,right:m+h.w,bottom:f+h.h})}return i}(n,i,s)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){return Js(t*(xn/(this._pointLabels.length||1))+so(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(sn(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(sn(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function sve(n,t,e){return Dl(n,{label:e,index:t,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const s=this.getIndexAngle(t)-ti+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:s,bottom:r}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),oG(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:s}=e,r=this._pointLabels.length;let o,a,l;if(e.pointLabels.display&&function nve(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let s=t-1;s>=0;s--){const r=i.setContext(n.getPointLabelContext(s)),o=Vi(r.font),{x:a,y:l,textAlign:c,left:d,top:u,right:h,bottom:f}=n._pointLabelItems[s],{backdropColor:p}=r;if(!sn(p)){const m=ls(r.backdropPadding);e.fillStyle=p,e.fillRect(d-m.left,u-m.top,h-d+m.width,f-u+m.height)}Xc(e,n._pointLabels[s],a,l+o.lineHeight/2,o,{color:r.color,textAlign:c,textBaseline:"middle"})}}(this,r),s.display&&this.ticks.forEach((c,d)=>{0!==d&&(a=this.getDistanceFromCenterForValue(c.value),function ive(n,t,e,i){const s=n.ctx,r=t.circular,{color:o,lineWidth:a}=t;!r&&!i||!o||!a||e<0||(s.save(),s.strokeStyle=o,s.lineWidth=a,s.setLineDash(t.borderDash),s.lineDashOffset=t.borderDashOffset,s.beginPath(),oG(n,e,r,i),s.closePath(),s.stroke(),s.restore())}(this,s.setContext(this.getContext(d-1)),a,r))}),i.display){for(t.save(),o=r-1;o>=0;o--){const c=i.setContext(this.getPointLabelContext(o)),{color:d,lineWidth:u}=c;!u||!d||(t.lineWidth=u,t.strokeStyle=d,t.setLineDash(c.borderDash),t.lineDashOffset=c.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),l=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(0===l&&!e.reverse)return;const c=i.setContext(this.getContext(l)),d=Vi(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=d.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const u=ls(c.backdropPadding);t.fillRect(-o/2-u.left,-r-d.size/2-u.top,o+u.width,d.size+u.height)}Xc(t,a.label,0,-r,d,{color:c.color})}),t.restore()}drawTitle(){}}ph.id="radialLinear",ph.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:wb.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:n=>n,padding:5,centerPointLabels:!1}},ph.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},ph.descriptors={angleLines:{_fallback:"grid"}};const Rb={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ks=Object.keys(Rb);function rve(n,t){return n-t}function aG(n,t){if(sn(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=t;return"function"==typeof i&&(o=i(o)),di(o)||(o="string"==typeof i?e.parse(o,i):e.parse(o)),null===o?null:(s&&(o="week"!==s||!tm(r)&&!0!==r?e.startOf(o,s):e.startOf(o,"isoWeek",r)),+o)}function lG(n,t,e,i){const s=ks.length;for(let r=ks.indexOf(n);r<s-1;++r){const o=Rb[ks[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return ks[r]}return ks[s-1]}function cG(n,t,e){if(e){if(e.length){const{lo:i,hi:s}=eE(e,t);n[e[i]>=t?e[i]:e[s]]=!0}}else n[t]=!0}function dG(n,t,e){const i=[],s={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,i.push({value:a,major:!1});return 0!==r&&e?function lve(n,t,e,i){const s=n._adapter,r=+s.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}(n,i,s,e):i}let EE=(()=>{class n extends Jc{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i){const s=e.time||(e.time={}),r=this._adapter=new Fge._date(e.adapters.date);Jp(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return void 0===e?null:aG(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,s=e.time.unit||"day";let{min:r,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!a||!l)&&(c(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&c(this.getMinMax(!1))),r=di(r)&&!isNaN(r)?r:+i.startOf(Date.now(),s),o=di(o)&&!isNaN(o)?o:+i.endOf(Date.now(),s)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],s=e[e.length-1]),{min:i,max:s}}buildTicks(){const e=this.options,i=e.time,s=e.ticks,r="labels"===s.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,l=function Mme(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}(r,o,this.max);return this._unit=i.unit||(s.autoSkip?lG(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):function ove(n,t,e,i,s){for(let r=ks.length-1;r>=ks.indexOf(e);r--){const o=ks[r];if(Rb[o].common&&n._adapter.diff(s,i,o)>=t-1)return o}return ks[e?ks.indexOf(e):0]}(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&"year"!==this._unit?function ave(n){for(let t=ks.indexOf(n)+1,e=ks.length;t<e;++t)if(Rb[ks[t]].common)return ks[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&l.reverse(),dG(this,l,this._majorUnit)}initOffsets(e){let r,o,i=0,s=0;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),i=1===e.length?1-r:(this.getDecimalForValue(e[1])-r)/2,o=this.getDecimalForValue(e[e.length-1]),s=1===e.length?o:(o-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;i=qi(i,0,a),s=qi(s,0,a),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const e=this._adapter,i=this.min,s=this.max,r=this.options,o=r.time,a=o.unit||lG(o.minUnit,i,s,this._getLabelCapacity(i)),l=Lt(o.stepSize,1),c="week"===a&&o.isoWeekday,d=tm(c)||!0===c,u={};let f,p,h=i;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":a),e.diff(s,i,a)>1e5*l)throw new Error(i+" and "+s+" are too far apart with stepSize of "+l+" "+a);const m="data"===r.ticks.source&&this.getDataTimestamps();for(f=h,p=0;f<s;f=+e.add(f,l,a),p++)cG(u,f,m);return(f===s||"ticks"===r.bounds||1===p)&&cG(u,f,m),Object.keys(u).sort((g,_)=>g-_).map(g=>+g)}getLabelForValue(e){const s=this.options.time;return this._adapter.format(e,s.tooltipFormat?s.tooltipFormat:s.displayFormats.datetime)}_tickFormatFunction(e,i,s,r){const o=this.options,a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=c&&a[c],h=s[i],p=this._adapter.format(e,r||(c&&u&&h&&h.major?u:l&&a[l])),m=o.ticks.callback;return m?An(m,[p,i,s],this):p}generateTickLabels(e){let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i],r.label=this._tickFormatFunction(r.value,i,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+s)*i.factor)}getValueForPixel(e){const i=this._offsets,s=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,s=this.ctx.measureText(e).width,r=so(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*o+l*a,h:s*a+l*o}}_getLabelCapacity(e){const i=this.options.time,s=i.displayFormats,r=s[i.unit]||s.millisecond,o=this._tickFormatFunction(e,0,dG(this,[e],this._majorUnit),r),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let i,s,e=this._cache.data||[];if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(i=0,s=r.length;i<s;++i)e=e.concat(r[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,s;if(e.length)return e;const r=this.getLabels();for(i=0,s=r.length;i<s;++i)e.push(aG(this,r[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return vz(e.sort(rve))}}return n.id="time",n.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},n})();function Ib(n,t,e){let r,o,a,l,i=0,s=n.length-1;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=Aa(n,"pos",t)),({pos:r,time:a}=n[i]),({pos:o,time:l}=n[s])):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=Aa(n,"time",t)),({time:r,pos:a}=n[i]),({time:o,pos:l}=n[s]));const c=o-r;return c?a+(l-a)*(t-r)/c:a}class Pb extends EE{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ib(e,this.min),this._tableRange=Ib(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],r=[];let o,a,l,c,d;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=i&&s.push(c);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)d=s[o+1],l=s[o-1],c=s[o],Math.round((d+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Ib(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Ib(this._table,i*this._tableRange+this._minPos,!0)}}Pb.id="timeseries",Pb.defaults=EE.defaults;const Ob=function hve(n,t){return n===t||n!=n&&t!=t},Lb=function fve(n,t){for(var e=n.length;e--;)if(Ob(n[e][0],t))return e;return-1};var mve=Array.prototype.splice;function mh(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}mh.prototype.clear=function dve(){this.__data__=[],this.size=0},mh.prototype.delete=function gve(n){var t=this.__data__,e=Lb(t,n);return!(e<0||(e==t.length-1?t.pop():mve.call(t,e,1),--this.size,0))},mh.prototype.get=function yve(n){var t=this.__data__,e=Lb(t,n);return e<0?void 0:t[e][1]},mh.prototype.has=function bve(n){return Lb(this.__data__,n)>-1},mh.prototype.set=function wve(n,t){var e=this.__data__,i=Lb(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this};const Fb=mh,uG="object"==typeof global&&global&&global.Object===Object&&global;var Pve="object"==typeof self&&self&&self.Object===Object&&self;const gh=uG||Pve||Function("return this")();var Lve=gh.Symbol,hG=Object.prototype,Fve=hG.hasOwnProperty,Nve=hG.toString,Sm=Lve?Lve.toStringTag:void 0;var zve=Object.prototype.toString;var fG=Lve?Lve.toStringTag:void 0;const Bb=function $ve(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":fG&&fG in Object(n)?function Bve(n){var t=Fve.call(n,Sm),e=n[Sm];try{n[Sm]=void 0;var i=!0}catch(r){}var s=Nve.call(n);return i&&(t?n[Sm]=e:delete n[Sm]),s}(n):function Uve(n){return zve.call(n)}(n)},ed=function qve(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)},AE=function Zve(n){if(!ed(n))return!1;var t=Bb(n);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var n,Jve=gh["__core-js_shared__"],pG=(n=/[^.]+$/.exec(Jve&&Jve.keys&&Jve.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";var ibe=Function.prototype.toString;var abe=/^\[object .+?Constructor\]$/,hbe=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const pbe=function fbe(n){return!(!ed(n)||function ebe(n){return!!pG&&pG in n}(n))&&(AE(n)?hbe:abe).test(function sbe(n){if(null!=n){try{return ibe.call(n)}catch(t){}try{return n+""}catch(t){}}return""}(n))},kE=function _be(n,t){var e=function mbe(n,t){return null==n?void 0:n[t]}(n,t);return pbe(e)?e:void 0},mG=kE(gh,"Map"),Dm=kE(Object,"create");var Dbe=Object.prototype.hasOwnProperty;var kbe=Object.prototype.hasOwnProperty;function _h(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}_h.prototype.clear=function bbe(){this.__data__=Dm?Dm(null):{},this.size=0},_h.prototype.delete=function wbe(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t},_h.prototype.get=function Ebe(n){var t=this.__data__;if(Dm){var e=t[n];return"__lodash_hash_undefined__"===e?void 0:e}return Dbe.call(t,n)?t[n]:void 0},_h.prototype.has=function Rbe(n){var t=this.__data__;return Dm?void 0!==t[n]:kbe.call(t,n)},_h.prototype.set=function Obe(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Dm&&void 0===t?"__lodash_hash_undefined__":t,this};const gG=_h,Vb=function Hbe(n,t){var e=n.__data__;return function Bbe(n){var t=typeof n;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==n:null===n}(t)?e["string"==typeof t?"string":"hash"]:e.map};function yh(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}yh.prototype.clear=function Fbe(){this.size=0,this.__data__={hash:new gG,map:new(mG||Fb),string:new gG}},yh.prototype.delete=function zbe(n){var t=Vb(this,n).delete(n);return this.size-=t?1:0,t},yh.prototype.get=function Gbe(n){return Vb(this,n).get(n)},yh.prototype.has=function Wbe(n){return Vb(this,n).has(n)},yh.prototype.set=function qbe(n,t){var e=Vb(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this};const Xbe=yh;function vh(n){var t=this.__data__=new Fb(n);this.size=t.size}vh.prototype.clear=function Cve(){this.__data__=new Fb,this.size=0},vh.prototype.delete=function Dve(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e},vh.prototype.get=function Ave(n){return this.__data__.get(n)},vh.prototype.has=function kve(n){return this.__data__.has(n)},vh.prototype.set=function Qbe(n,t){var e=this.__data__;if(e instanceof Fb){var i=e.__data__;if(!mG||i.length<199)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new Xbe(i)}return e.set(n,t),this.size=e.size,this};const Jbe=vh;var exe=function(){try{var n=kE(Object,"defineProperty");return n({},"",{}),n}catch(t){}}();const Hb=exe,RE=function txe(n,t,e){"__proto__"==t&&Hb?Hb(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e},IE=function nxe(n,t,e){(void 0!==e&&!Ob(n[t],e)||void 0===e&&!(t in n))&&RE(n,t,e)};var sxe=function ixe(n){return function(t,e,i){for(var s=-1,r=Object(t),o=i(t),a=o.length;a--;){var l=o[n?a:++s];if(!1===e(r[l],l,r))break}return t}}();const rxe=sxe;var _G="object"==typeof exports&&exports&&!exports.nodeType&&exports,yG=_G&&"object"==typeof module&&module&&!module.nodeType&&module,vG=yG&&yG.exports===_G?gh.Buffer:void 0,bG=vG?vG.allocUnsafe:void 0;const xG=gh.Uint8Array,fxe=function hxe(n,t){var e=t?function dxe(n){var t=new n.constructor(n.byteLength);return new xG(t).set(new xG(n)),t}(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)};var wG=Object.create,gxe=function(){function n(){}return function(t){if(!ed(t))return{};if(wG)return wG(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}();const _xe=gxe;var vxe=function yxe(n,t){return function(e){return n(t(e))}}(Object.getPrototypeOf,Object);const MG=vxe;var bxe=Object.prototype;const CG=function xxe(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||bxe)},Em=function Cxe(n){return null!=n&&"object"==typeof n},SG=function Dxe(n){return Em(n)&&"[object Arguments]"==Bb(n)};var DG=Object.prototype,Exe=DG.hasOwnProperty,Axe=DG.propertyIsEnumerable,Txe=SG(function(){return arguments}())?SG:function(n){return Em(n)&&Exe.call(n,"callee")&&!Axe.call(n,"callee")};const PE=Txe,OE=Array.isArray,EG=function Ixe(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991},LE=function Pxe(n){return null!=n&&EG(n.length)&&!AE(n)};var AG="object"==typeof exports&&exports&&!exports.nodeType&&exports,TG=AG&&"object"==typeof module&&module&&!module.nodeType&&module,kG=TG&&TG.exports===AG?gh.Buffer:void 0;const RG=(kG?kG.isBuffer:void 0)||function Fxe(){return!1};var IG=Function.prototype.toString,jxe=Object.prototype.hasOwnProperty,Wxe=IG.call(Object);var On={};On["[object Float32Array]"]=On["[object Float64Array]"]=On["[object Int8Array]"]=On["[object Int16Array]"]=On["[object Int32Array]"]=On["[object Uint8Array]"]=On["[object Uint8ClampedArray]"]=On["[object Uint16Array]"]=On["[object Uint32Array]"]=!0,On["[object Arguments]"]=On["[object Array]"]=On["[object ArrayBuffer]"]=On["[object Boolean]"]=On["[object DataView]"]=On["[object Date]"]=On["[object Error]"]=On["[object Function]"]=On["[object Map]"]=On["[object Number]"]=On["[object Object]"]=On["[object RegExp]"]=On["[object Set]"]=On["[object String]"]=On["[object WeakMap]"]=!1;var PG="object"==typeof exports&&exports&&!exports.nodeType&&exports,Am=PG&&"object"==typeof module&&module&&!module.nodeType&&module,FE=Am&&Am.exports===PG&&uG.process,M0e=function(){try{return Am&&Am.require&&Am.require("util").types||FE&&FE.binding&&FE.binding("util")}catch(t){}}(),LG=M0e&&M0e.isTypedArray;const FG=LG?function b0e(n){return function(t){return n(t)}}(LG):function y0e(n){return Em(n)&&EG(n.length)&&!!On[Bb(n)]},NE=function S0e(n,t){if(("constructor"!==t||"function"!=typeof n[t])&&"__proto__"!=t)return n[t]};var E0e=Object.prototype.hasOwnProperty;const T0e=function A0e(n,t,e){var i=n[t];(!E0e.call(n,t)||!Ob(i,e)||void 0===e&&!(t in n))&&RE(n,t,e)};var L0e=/^(?:0|[1-9]\d*)$/;const NG=function F0e(n,t){var e=typeof n;return!!(t=null==t?9007199254740991:t)&&("number"==e||"symbol"!=e&&L0e.test(n))&&n>-1&&n%1==0&&n<t};var B0e=Object.prototype.hasOwnProperty;const H0e=function V0e(n,t){var e=OE(n),i=!e&&PE(n),s=!e&&!i&&RG(n),r=!e&&!i&&!s&&FG(n),o=e||i||s||r,a=o?function I0e(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}(n.length,String):[],l=a.length;for(var c in n)(t||B0e.call(n,c))&&(!o||!("length"==c||s&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||NG(c,l)))&&a.push(c);return a};var j0e=Object.prototype.hasOwnProperty;const $0e=function W0e(n){if(!ed(n))return function z0e(n){var t=[];if(null!=n)for(var e in Object(n))t.push(e);return t}(n);var t=CG(n),e=[];for(var i in n)"constructor"==i&&(t||!j0e.call(n,i))||e.push(i);return e},BG=function q0e(n){return LE(n)?H0e(n,!0):$0e(n)},X0e=function Y0e(n){return function k0e(n,t,e,i){var s=!e;e||(e={});for(var r=-1,o=t.length;++r<o;){var a=t[r],l=i?i(e[a],n[a],a,e,n):void 0;void 0===l&&(l=n[a]),s?RE(e,a,l):T0e(e,a,l)}return e}(n,BG(n))},Q0e=function K0e(n,t,e,i,s,r,o){var a=NE(n,e),l=NE(t,e),c=o.get(l);if(c)IE(n,e,c);else{var d=r?r(a,l,e+"",n,t,o):void 0,u=void 0===d;if(u){var h=OE(l),f=!h&&RG(l),p=!h&&!f&&FG(l);d=l,h||f||p?OE(a)?d=a:function Oxe(n){return Em(n)&&LE(n)}(a)?d=function pxe(n,t){var e=-1,i=n.length;for(t||(t=Array(i));++e<i;)t[e]=n[e];return t}(a):f?(u=!1,d=function axe(n,t){if(t)return n.slice();var e=n.length,i=bG?bG(e):new n.constructor(e);return n.copy(i),i}(l,!0)):p?(u=!1,d=fxe(l,!0)):d=[]:function $xe(n){if(!Em(n)||"[object Object]"!=Bb(n))return!1;var t=MG(n);if(null===t)return!0;var e=jxe.call(t,"constructor")&&t.constructor;return"function"==typeof e&&e instanceof e&&IG.call(e)==Wxe}(l)||PE(l)?(d=a,PE(a)?d=X0e(a):(!ed(a)||AE(a))&&(d=function wxe(n){return"function"!=typeof n.constructor||CG(n)?{}:_xe(MG(n))}(l))):u=!1}u&&(o.set(l,d),s(d,l,i,r,o),o.delete(l)),IE(n,e,d)}},Z0e=function VG(n,t,e,i,s){n!==t&&rxe(t,function(r,o){if(s||(s=new Jbe),ed(r))Q0e(n,t,o,e,VG,i,s);else{var a=i?i(NE(n,o),r,o+"",n,t,s):void 0;void 0===a&&(a=r),IE(n,o,a)}},BG)},HG=function J0e(n){return n},twe=function ewe(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)};var zG=Math.max;const rwe=function swe(n){return function(){return n}};var owe=Hb?function(n,t){return Hb(n,"toString",{configurable:!0,enumerable:!1,value:rwe(t),writable:!0})}:HG,dwe=Date.now,hwe=function uwe(n){var t=0,e=0;return function(){var i=dwe(),s=16-(i-e);if(e=i,s>0){if(++t>=800)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}(owe);const fwe=hwe,mwe=function pwe(n,t){return fwe(function nwe(n,t,e){return t=zG(void 0===t?n.length-1:t,0),function(){for(var i=arguments,s=-1,r=zG(i.length-t,0),o=Array(r);++s<r;)o[s]=i[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=i[s];return a[t]=e(o),twe(n,this,a)}}(n,t,HG),n+"")};var vwe=function ywe(n){return mwe(function(t,e){var i=-1,s=e.length,r=s>1?e[s-1]:void 0,o=s>2?e[2]:void 0;for(r=n.length>3&&"function"==typeof r?(s--,r):void 0,o&&function gwe(n,t,e){if(!ed(e))return!1;var i=typeof t;return!!("number"==i?LE(e)&&NG(t,e.length):"string"==i&&t in e)&&Ob(e[t],n)}(e[0],e[1],o)&&(r=s<3?void 0:r,s=1),t=Object(t);++i<s;){var a=e[i];a&&n(t,a,i,r)}return t})}(function(n,t,e){Z0e(n,t,e)});const UG=vwe;let bwe=(()=>{class n{constructor(){this.colorschemesOptions=new ns(void 0)}setColorschemesOptions(e){this.pColorschemesOptions=e,this.colorschemesOptions.next(e)}getColorschemesOptions(){return this.pColorschemesOptions}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GG=(()=>{class n{constructor(e,i,s){this.element=e,this.zone=i,this.themeService=s,this.type="bar",this.plugins=[],this.chartClick=new he,this.chartHover=new he,this.subs=[],this.ctx=e.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(th()).subscribe(r=>this.themeChanged(r)))}ngOnChanges(e){const i=["type"],s=Object.getOwnPropertyNames(e);if(s.some(r=>i.includes(r))||s.every(r=>e[r].isFirstChange()))this.render();else{const r=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,r.data),Object.assign(this.chart.config.plugins,r.plugins),Object.assign(this.chart.config.options,r.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(e=>e.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new vm(this.ctx,this.getChartConfiguration()))}update(e){this.chart&&this.zone.runOutsideAngular(()=>{var i;return null===(i=this.chart)||void 0===i?void 0:i.update(e)})}hideDataset(e,i){this.chart&&(this.chart.getDatasetMeta(e).hidden=i,this.update())}isDatasetHidden(e){var i,s;return null===(s=null===(i=this.chart)||void 0===i?void 0:i.getDatasetMeta(e))||void 0===s?void 0:s.hidden}toBase64Image(){var e;return null===(e=this.chart)||void 0===e?void 0:e.toBase64Image()}themeChanged(e){this.themeOverrides=e,this.chart&&(Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return UG({onHover:(e,i)=>{!this.chartHover.observed||this.zone.run(()=>this.chartHover.emit({event:e,active:i}))},onClick:(e,i)=>{!this.chartClick.observed||this.zone.run(()=>this.chartClick.emit({event:e,active:i}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),plugins:this.plugins,options:this.getChartOptions()}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(Xe),v(bwe))},n.\u0275dir=G({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[Gt]}),n})();const xwe=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],wwe={datasets:{line:{backgroundColor:n=>Ms(Cs(n.datasetIndex),.4),borderColor:n=>Ms(Cs(n.datasetIndex),1),pointBackgroundColor:n=>Ms(Cs(n.datasetIndex),1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:n=>Ms(Cs(n.datasetIndex),.8)},bar:{backgroundColor:n=>Ms(Cs(n.datasetIndex),.6),borderColor:n=>Ms(Cs(n.datasetIndex),1),hoverBackgroundColor:n=>Ms(Cs(n.datasetIndex),.8),hoverBorderColor:n=>Ms(Cs(n.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:n=>Ms(Cs(n.dataIndex),.6),borderColor:"#fff",hoverBackgroundColor:n=>Ms(Cs(n.dataIndex),1),hoverBorderColor:n=>Ms(Cs(n.dataIndex),1)},get pie(){return this.doughnut},polarArea:{backgroundColor:n=>Ms(Cs(n.dataIndex),.6),borderColor:n=>Ms(Cs(n.dataIndex),1),hoverBackgroundColor:n=>Ms(Cs(n.dataIndex),.8),hoverBorderColor:n=>Ms(Cs(n.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function Ms(n,t){return"rgba("+n.concat(t).join(",")+")"}function BE(n,t){return Math.floor(Math.random()*(t-n+1))+n}function Cs(n=0){return xwe[n]||function Mwe(){return[BE(0,255),BE(0,255),BE(0,255)]}()}vm.register(XU,nG,WU,YU,dE,xm,LU,kb,Cm,Jz,wm,cE,bm,iU,ph,nU,tU,eU,sU,Pb);let jG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cwe=(()=>{class n{constructor(e){(null==e?void 0:e.plugins)&&vm.register(...null==e?void 0:e.plugins);const i=UG(wwe,(null==e?void 0:e.defaults)||{});$t.set(i)}static forRoot(e){return{ngModule:n,providers:[{provide:jG,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(j(jG,8))},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[]]}),n})(),Swe=(()=>{class n{constructor(){this.barChartOptions={responsive:!0,scales:{x:{},y:{min:10}},plugins:{legend:{display:!0}}},this.barChartType="bar",this.barChartData={labels:[],datasets:[{data:[],label:""}]}}ngOnInit(){}chartClicked({event:e,active:i}){console.log(e,i)}chartHovered({event:e,active:i}){console.log(e,i)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=We({type:n,selectors:[["app-model-bar-chart"]],viewQuery:function(e,i){if(1&e&&dt(GG,5),2&e){let s;fe(s=pe())&&(i.chart=s.first)}},inputs:{barChartData:["data","barChartData"]},decls:4,vars:3,consts:[[2,"display","block"],["baseChart","",3,"data","options","type","chartHover","chartClick"]],template:function(e,i){1&e&&(N(0,"div"),N(1,"div"),N(2,"div",0),N(3,"canvas",1),Ae("chartHover",function(r){return i.chartHovered(r)})("chartClick",function(r){return i.chartClicked(r)}),B(),B(),B(),B()),2&e&&(Q(3),te("data",i.barChartData)("options",i.barChartOptions)("type",i.barChartType))},directives:[GG],styles:[""]}),n})(),Dwe=(()=>{class n{constructor(){this.barChartData={labels:["2006","2007","2008","2009","2010","2011","2012"],datasets:[{data:[65,59,80,81,56,55,40],label:"Series "}]}}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=We({type:n,selectors:[["app-overview"]],inputs:{digitalTwin:"digitalTwin"},decls:1,vars:1,consts:[[3,"data"]],template:function(e,i){1&e&&Ne(0,"app-model-bar-chart",0),2&e&&te("data",i.barChartData)},directives:[Swe],styles:[""]}),n})(),Ewe=0;const VE=new K("CdkAccordion");let Awe=(()=>{class n{constructor(){this._stateChanges=new ge,this._openCloseAllActions=new ge,this.id="cdk-accordion-"+Ewe++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=ve(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[Me([{provide:VE,useExisting:n}]),Gt]}),n})(),Twe=0,kwe=(()=>{class n{constructor(e,i,s){this.accordion=e,this._changeDetectorRef=i,this._expansionDispatcher=s,this._openCloseAllSubscription=yt.EMPTY,this.closed=new he,this.opened=new he,this.destroyed=new he,this.expandedChange=new he,this.id="cdk-accordion-child-"+Twe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=s.listen((r,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==r&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=ve(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=ve(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return n.\u0275fac=function(e){return new(e||n)(v(VE,12),v(At),v(VD))},n.\u0275dir=G({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Me([{provide:VE,useValue:void 0}])]}),n})(),HE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({}),n})();const Rwe=["body"];function Iwe(n,t){}const Pwe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Owe=["mat-expansion-panel-header","*","mat-action-row"];function Lwe(n,t){1&n&&Ne(0,"span",2),2&n&&te("@indicatorRotate",Je()._getExpandedState())}const Fwe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Nwe=["mat-panel-title","mat-panel-description","*"],zE=new K("MAT_ACCORDION"),WG="225ms cubic-bezier(0.4,0.0,0.2,1)",$G={indicatorRotate:Jn("indicatorRotate",[Ot("collapsed, void",He({transform:"rotate(0deg)"})),Ot("expanded",He({transform:"rotate(180deg)"})),Wt("expanded <=> collapsed, void => collapsed",Qt(WG))]),bodyExpansion:Jn("bodyExpansion",[Ot("collapsed, void",He({height:"0px",visibility:"hidden"})),Ot("expanded",He({height:"*",visibility:"visible"})),Wt("expanded <=> collapsed, void => collapsed",Qt(WG))])};let Bwe=(()=>{class n{constructor(e){this._template=e}}return n.\u0275fac=function(e){return new(e||n)(v(Xn))},n.\u0275dir=G({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),Vwe=0;const qG=new K("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let YG=(()=>{class n extends kwe{constructor(e,i,s,r,o,a,l){super(e,i,s),this._viewContainerRef=r,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new he,this.afterCollapse=new he,this._inputChanges=new ge,this._headerId="mat-expansion-panel-header-"+Vwe++,this._bodyAnimationDone=new ge,this.accordion=e,this._document=o,this._bodyAnimationDone.pipe(th((c,d)=>c.fromState===d.fromState&&c.toState===d.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=ve(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(ki(null),un(()=>this.expanded&&!this._portal),yn(1)).subscribe(()=>{this._portal=new Yp(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,i=this._body.nativeElement;return e===i||i.contains(e)}return!1}}return n.\u0275fac=function(e){return new(e||n)(v(zE,12),v(At),v(VD),v(In),v(it),v(ei,8),v(qG,8))},n.\u0275cmp=We({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(e,i,s){if(1&e&&ht(s,Bwe,5),2&e){let r;fe(r=pe())&&(i._lazyContent=r.first)}},viewQuery:function(e,i){if(1&e&&dt(Rwe,5),2&e){let s;fe(s=pe())&&(i._body=s.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,i){2&e&&Ke("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Me([{provide:zE,useValue:void 0}]),Y,Gt],ngContentSelectors:Owe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,i){1&e&&(dn(Pwe),rt(0),N(1,"div",0,1),Ae("@bodyExpansion.done",function(r){return i._bodyAnimationDone.next(r)}),N(3,"div",2),rt(4,1),Ye(5,Iwe,0,0,"ng-template",3),B(),rt(6,2),B()),2&e&&(Q(1),te("@bodyExpansion",i._getExpandedState())("id",i.id),Ge("aria-labelledby",i._headerId),Q(4),te("cdkPortalOutlet",i._portal))},directives:[oh],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n'],encapsulation:2,data:{animation:[$G.bodyExpansion]},changeDetection:0}),n})(),Hwe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["mat-action-row"]],hostAttrs:[1,"mat-action-row"]}),n})();class zwe{}const Uwe=Ml(zwe);let XG=(()=>{class n extends Uwe{constructor(e,i,s,r,o,a,l){super(),this.panel=e,this._element=i,this._focusMonitor=s,this._changeDetectorRef=r,this._animationMode=a,this._parentChangeSubscription=yt.EMPTY;const c=e.accordion?e.accordion._stateChanges.pipe(un(d=>!(!d.hideToggle&&!d.togglePosition))):ao;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=wn(e.opened,e.closed,c,e._inputChanges.pipe(un(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(un(()=>e._containsFocus())).subscribe(()=>s.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:Bi(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,i){e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(e){return new(e||n)(v(YG,1),v(ue),v(Io),v(At),v(qG,8),v(ei,8),fi("tabindex"))},n.\u0275cmp=We({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,i){1&e&&Ae("click",function(){return i._toggle()})("keydown",function(r){return i._keydown(r)}),2&e&&(Ge("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),ts("height",i._getHeaderHeight()),Ke("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[Y],ngContentSelectors:Nwe,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,i){1&e&&(dn(Fwe),N(0,"span",0),rt(1),rt(2,1),rt(3,2),B(),Ye(4,Lwe,1,1,"span",1)),2&e&&(Q(4),te("ngIf",i._showToggle()))},directives:[dr],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[$G.indicatorRotate]},changeDetection:0}),n})(),Gwe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),jwe=(()=>{class n extends Awe{constructor(){super(...arguments),this._ownHeaders=new Ya,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=ve(e)}ngAfterContentInit(){this._headers.changes.pipe(ki(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(i=>i.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new Sv(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=xe(n)))(i||n)}}(),n.\u0275dir=G({type:n,selectors:[["mat-accordion"]],contentQueries:function(e,i,s){if(1&e&&ht(s,XG,5),2&e){let r;fe(r=pe())&&(i._headers=r)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,i){2&e&&Ke("mat-accordion-multi",i.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[Me([{provide:zE,useExisting:n}]),Y]}),n})(),KG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[gi,Ue,HE,zc]]}),n})(),QG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({}),n})(),ZG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[Cl],imports:[[QG,$p,Ue],QG,$p]}),n})();const $we=["mat-calendar-body",""];function qwe(n,t){if(1&n&&(N(0,"tr",2),N(1,"td",3),tt(2),B(),B()),2&n){const e=Je();Q(1),ts("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Ge("colspan",e.numCols),Q(1),ar(" ",e.label," ")}}function Ywe(n,t){if(1&n&&(N(0,"td",3),tt(1),B()),2&n){const e=Je(2);ts("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Ge("colspan",e._firstRowOffset),Q(1),ar(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function Xwe(n,t){if(1&n){const e=Us();N(0,"td",7),N(1,"button",8),Ae("click",function(s){const o=si(e).$implicit;return Je(2)._cellClicked(o,s)}),N(2,"div",9),tt(3),B(),Ne(4,"div",10),B(),B()}if(2&n){const e=t.$implicit,i=t.index,s=Je().index,r=Je();ts("width",r._cellWidth)("padding-top",r._cellPadding)("padding-bottom",r._cellPadding),Ge("data-mat-row",s)("data-mat-col",i),Q(1),Ke("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",r._isActiveCell(s,i))("mat-calendar-body-range-start",r._isRangeStart(e.compareValue))("mat-calendar-body-range-end",r._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",r._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",r._isComparisonBridgeStart(e.compareValue,s,i))("mat-calendar-body-comparison-bridge-end",r._isComparisonBridgeEnd(e.compareValue,s,i))("mat-calendar-body-comparison-start",r._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",r._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",r._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",r._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",r._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",r._isInPreview(e.compareValue)),te("ngClass",e.cssClasses)("tabindex",r._isActiveCell(s,i)?0:-1),Ge("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",r._isSelected(e.compareValue))("aria-current",r.todayValue===e.compareValue?"date":null),Q(1),Ke("mat-calendar-body-selected",r._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",r._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",r.todayValue===e.compareValue),Q(1),ar(" ",e.displayValue," ")}}function Kwe(n,t){if(1&n&&(N(0,"tr",4),Ye(1,Ywe,2,6,"td",5),Ye(2,Xwe,5,47,"td",6),B()),2&n){const e=t.$implicit,i=t.index,s=Je();Q(1),te("ngIf",0===i&&s._firstRowOffset),Q(1),te("ngForOf",e)}}function Qwe(n,t){if(1&n&&(N(0,"th",5),N(1,"span",6),tt(2),B(),N(3,"span",7),tt(4),B(),B()),2&n){const e=t.$implicit;Q(2),Ui(e.long),Q(2),Ui(e.narrow)}}const Zwe=["*"];function Jwe(n,t){}function eMe(n,t){if(1&n){const e=Us();N(0,"mat-month-view",5),Ae("activeDateChange",function(s){return si(e),Je().activeDate=s})("_userSelection",function(s){return si(e),Je()._dateSelected(s)}),B()}if(2&n){const e=Je();te("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)}}function tMe(n,t){if(1&n){const e=Us();N(0,"mat-year-view",6),Ae("activeDateChange",function(s){return si(e),Je().activeDate=s})("monthSelected",function(s){return si(e),Je()._monthSelectedInYearView(s)})("selectedChange",function(s){return si(e),Je()._goToDateInView(s,"month")}),B()}if(2&n){const e=Je();te("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function nMe(n,t){if(1&n){const e=Us();N(0,"mat-multi-year-view",7),Ae("activeDateChange",function(s){return si(e),Je().activeDate=s})("yearSelected",function(s){return si(e),Je()._yearSelectedInMultiYearView(s)})("selectedChange",function(s){return si(e),Je()._goToDateInView(s,"year")}),B()}if(2&n){const e=Je();te("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function iMe(n,t){}const sMe=["button"];function rMe(n,t){1&n&&(Ga(),N(0,"svg",3),Ne(1,"path",4),B())}const oMe=[[["","matDatepickerToggleIcon",""]]],aMe=["[matDatepickerToggleIcon]"],lMe=[[["input","matStartDate",""]],[["input","matEndDate",""]]],cMe=["input[matStartDate]","input[matEndDate]"];class UE{constructor(t,e,i,s,r={},o=t,a){this.value=t,this.displayValue=e,this.ariaLabel=i,this.enabled=s,this.cssClasses=r,this.compareValue=o,this.rawValue=a}}let bh=(()=>{class n{constructor(e,i){this._elementRef=e,this._ngZone=i,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new he,this.previewChange=new he,this._enterHandler=s=>{if(this._skipNextFocus&&"focus"===s.type)this._skipNextFocus=!1;else if(s.target&&this.isRange){const r=this._getCellFromElement(s.target);r&&this._ngZone.run(()=>this.previewChange.emit({value:r.enabled?r:null,event:s}))}},this._leaveHandler=s=>{null!==this.previewEnd&&this.isRange&&s.target&&this._getCellFromElement(s.target)&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:s}))},i.runOutsideAngular(()=>{const s=e.nativeElement;s.addEventListener("mouseenter",this._enterHandler,!0),s.addEventListener("focus",this._enterHandler,!0),s.addEventListener("mouseleave",this._leaveHandler,!0),s.addEventListener("blur",this._leaveHandler,!0)})}_cellClicked(e,i){e.enabled&&this.selectedValueChange.emit({value:e.value,event:i})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){const i=e.numCols,{rows:s,numCols:r}=this;(e.rows||i)&&(this._firstRowOffset=s&&s.length&&s[0].length?r-s[0].length:0),(e.cellAspectRatio||i||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/r+"%"),(i||!this._cellWidth)&&(this._cellWidth=100/r+"%")}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mouseenter",this._enterHandler,!0),e.removeEventListener("focus",this._enterHandler,!0),e.removeEventListener("mouseleave",this._leaveHandler,!0),e.removeEventListener("blur",this._leaveHandler,!0)}_isActiveCell(e,i){let s=e*this.numCols+i;return e&&(s-=this._firstRowOffset),s==this.activeCell}_focusActiveCell(e=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(yn(1)).subscribe(()=>{setTimeout(()=>{const i=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");i&&(e||(this._skipNextFocus=!0),i.focus())})})})}_isRangeStart(e){return GE(e,this.startValue,this.endValue)}_isRangeEnd(e){return jE(e,this.startValue,this.endValue)}_isInRange(e){return WE(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return GE(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,i,s){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let r=this.rows[i][s-1];if(!r){const o=this.rows[i-1];r=o&&o[o.length-1]}return r&&!this._isRangeEnd(r.compareValue)}_isComparisonBridgeEnd(e,i,s){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let r=this.rows[i][s+1];if(!r){const o=this.rows[i+1];r=o&&o[0]}return r&&!this._isRangeStart(r.compareValue)}_isComparisonEnd(e){return jE(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return WE(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return GE(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return jE(e,this.previewStart,this.previewEnd)}_isInPreview(e){return WE(e,this.previewStart,this.previewEnd,this.isRange)}_getCellFromElement(e){let i;if(JG(e)?i=e:JG(e.parentNode)&&(i=e.parentNode),i){const s=i.getAttribute("data-mat-row"),r=i.getAttribute("data-mat-col");if(s&&r)return this.rows[parseInt(s)][parseInt(r)]}return null}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(Xe))},n.\u0275cmp=We({type:n,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange"},exportAs:["matCalendarBody"],features:[Gt],attrs:$we,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(e,i){1&e&&(Ye(0,qwe,3,6,"tr",0),Ye(1,Kwe,3,2,"tr",1)),2&e&&(te("ngIf",i._firstRowOffset<i.labelMinRequiredCells),Q(1),te("ngForOf",i.rows))},directives:[dr,Xl,Yl],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content,.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content{outline:dotted 2px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content.mat-calendar-body-selected,.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content.mat-calendar-body-selected{outline:solid 3px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}\n'],encapsulation:2,changeDetection:0}),n})();function JG(n){return"TD"===n.nodeName}function GE(n,t,e){return null!==e&&t!==e&&n<e&&n===t}function jE(n,t,e){return null!==t&&t!==e&&n>=t&&n===e}function WE(n,t,e,i){return i&&null!==t&&null!==e&&t!==e&&n>=t&&n<=e}class ds{constructor(t,e){this.start=t,this.end=e}}let Tl=(()=>{class n{constructor(e,i){this.selection=e,this._adapter=i,this._selectionChanged=new ge,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,i){const s=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:i,oldValue:s})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}}return n.\u0275fac=function(e){Ud()},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})(),dMe=(()=>{class n extends Tl{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const e=new n(this._adapter);return e.updateSelection(this.selection,this),e}}return n.\u0275fac=function(e){return new(e||n)(j(ci))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})(),uMe=(()=>{class n extends Tl{constructor(e){super(new ds(null,null),e)}add(e){let{start:i,end:s}=this.selection;null==i?i=e:null==s?s=e:(i=e,s=null),super.updateSelection(new ds(i,s),this)}isValid(){const{start:e,end:i}=this.selection;return null==e&&null==i||(null!=e&&null!=i?this._isValidDateInstance(e)&&this._isValidDateInstance(i)&&this._adapter.compareDate(e,i)<=0:(null==e||this._isValidDateInstance(e))&&(null==i||this._isValidDateInstance(i)))}isComplete(){return null!=this.selection.start&&null!=this.selection.end}clone(){const e=new n(this._adapter);return e.updateSelection(this.selection,this),e}}return n.\u0275fac=function(e){return new(e||n)(j(ci))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const fMe={provide:Tl,deps:[[new Ei,new Ns,Tl],ci],useFactory:function hMe(n,t){return n||new dMe(t)}},mMe={provide:Tl,deps:[[new Ei,new Ns,Tl],ci],useFactory:function pMe(n,t){return n||new uMe(t)}},zb=new K("MAT_DATE_RANGE_SELECTION_STRATEGY");let gMe=(()=>{class n{constructor(e){this._dateAdapter=e}selectionFinished(e,i){let{start:s,end:r}=i;return null==s?s=e:null==r&&e&&this._dateAdapter.compareDate(e,s)>=0?r=e:(s=e,r=null),new ds(s,r)}createPreview(e,i){let s=null,r=null;return i.start&&!i.end&&e&&(s=i.start,r=e),new ds(s,r)}}return n.\u0275fac=function(e){return new(e||n)(j(ci))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const yMe={provide:zb,deps:[[new Ei,new Ns,zb],ci],useFactory:function _Me(n,t){return n||new gMe(t)}};let e5=(()=>{class n{constructor(e,i,s,r,o){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=s,this._dir=r,this._rangeStrategy=o,this._rerenderSubscription=yt.EMPTY,this.selectedChange=new he,this._userSelection=new he,this.activeDateChange=new he,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){const i=this._activeDate,s=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(s,this.minDate,this.maxDate),this._hasSameMonthAndYear(i,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof ds?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ki(null)).subscribe(()=>this._init())}ngOnChanges(e){const i=e.comparisonStart||e.comparisonEnd;i&&!i.firstChange&&this._setRanges(this.selected)}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){const i=e.value,s=this._dateAdapter.getYear(this.activeDate),r=this._dateAdapter.getMonth(this.activeDate),o=this._dateAdapter.createDate(s,r,i);let a,l;this._selected instanceof ds?(a=this._getDateInCurrentMonth(this._selected.start),l=this._getDateInCurrentMonth(this._selected.end)):a=l=this._getDateInCurrentMonth(this._selected),(a!==i||l!==i)&&this.selectedChange.emit(o),this._userSelection.emit({value:o,event:e.event}),this._previewStart=this._previewEnd=null,this._changeDetectorRef.markForCheck()}_handleCalendarBodyKeydown(e){const i=this._activeDate,s=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,s?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,s?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&e.preventDefault());case 27:return void(null!=this._previewEnd&&!Bi(e)&&(this._previewStart=this._previewEnd=null,this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e}),e.preventDefault(),e.stopPropagation()));default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_previewChanged({event:e,value:i}){if(this._rangeStrategy){const r=this._rangeStrategy.createPreview(i?i.rawValue:null,this.selected,e);this._previewStart=this._getCellCompareValue(r.start),this._previewEnd=this._getCellCompareValue(r.end),this._changeDetectorRef.detectChanges()}}_initWeekdays(){const e=this._dateAdapter.getFirstDayOfWeek(),i=this._dateAdapter.getDayOfWeekNames("narrow");let r=this._dateAdapter.getDayOfWeekNames("long").map((o,a)=>({long:o,narrow:i[a]}));this._weekdays=r.slice(e).concat(r.slice(0,e))}_createWeekCells(){const e=this._dateAdapter.getNumDaysInMonth(this.activeDate),i=this._dateAdapter.getDateNames();this._weeks=[[]];for(let s=0,r=this._firstWeekOffset;s<e;s++,r++){7==r&&(this._weeks.push([]),r=0);const o=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),s+1),a=this._shouldEnableDate(o),l=this._dateAdapter.format(o,this._dateFormats.display.dateA11yLabel),c=this.dateClass?this.dateClass(o,"month"):void 0;this._weeks[this._weeks.length-1].push(new UE(s+1,i[s],l,a,c,this._getCellCompareValue(o),o))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,i){return!(!e||!i||this._dateAdapter.getMonth(e)!=this._dateAdapter.getMonth(i)||this._dateAdapter.getYear(e)!=this._dateAdapter.getYear(i))}_getCellCompareValue(e){if(e){const i=this._dateAdapter.getYear(e),s=this._dateAdapter.getMonth(e),r=this._dateAdapter.getDate(e);return new Date(i,s,r).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(e){e instanceof ds?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}}return n.\u0275fac=function(e){return new(e||n)(v(At),v(Lo,8),v(ci,8),v(Qn,8),v(zb,8))},n.\u0275cmp=We({type:n,selectors:[["mat-month-view"]],viewQuery:function(e,i){if(1&e&&dt(bh,5),2&e){let s;fe(s=pe())&&(i._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[Gt],decls:7,vars:13,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","selectedValueChange","previewChange","keyup","keydown"],["scope","col"],[1,"cdk-visually-hidden"],["aria-hidden","true"]],template:function(e,i){1&e&&(N(0,"table",0),N(1,"thead",1),N(2,"tr"),Ye(3,Qwe,5,2,"th",2),B(),N(4,"tr"),Ne(5,"th",3),B(),B(),N(6,"tbody",4),Ae("selectedValueChange",function(r){return i._dateSelected(r)})("previewChange",function(r){return i._previewChanged(r)})("keyup",function(r){return i._handleCalendarBodyKeyup(r)})("keydown",function(r){return i._handleCalendarBodyKeydown(r)}),B(),B()),2&e&&(Q(3),te("ngForOf",i._weekdays),Q(3),te("label",i._monthLabel)("rows",i._weeks)("todayValue",i._todayDate)("startValue",i._rangeStart)("endValue",i._rangeEnd)("comparisonStart",i._comparisonRangeStart)("comparisonEnd",i._comparisonRangeEnd)("previewStart",i._previewStart)("previewEnd",i._previewEnd)("isRange",i._isRange)("labelMinRequiredCells",3)("activeCell",i._dateAdapter.getDate(i.activeDate)-1))},directives:[bh,Xl],encapsulation:2,changeDetection:0}),n})(),t5=(()=>{class n{constructor(e,i,s){this._changeDetectorRef=e,this._dateAdapter=i,this._dir=s,this._rerenderSubscription=yt.EMPTY,this.selectedChange=new he,this.yearSelected=new he,this.activeDateChange=new he,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const s=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(s,this.minDate,this.maxDate),n5(this._dateAdapter,i,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof ds?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ki(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const i=this._dateAdapter.getYear(this._activeDate)-Tm(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let s=0,r=[];s<24;s++)r.push(i+s),4==r.length&&(this._years.push(r.map(o=>this._createCellForYear(o))),r=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){const i=e.value;this.yearSelected.emit(this._dateAdapter.createDate(i,0,1));let s=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(i,s,1));this.selectedChange.emit(this._dateAdapter.createDate(i,s,Math.min(this._dateAdapter.getDate(this.activeDate),r)))}_handleCalendarBodyKeydown(e){const i=this._activeDate,s=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,s?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,s?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-Tm(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-Tm(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-240:-24);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?240:24);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return Tm(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_createCellForYear(e){const i=this._dateAdapter.createDate(e,0,1),s=this._dateAdapter.getYearName(i),r=this.dateClass?this.dateClass(i,"multi-year"):void 0;return new UE(e,s,s,this._shouldEnableYear(e),r)}_shouldEnableYear(e){if(null==e||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let s=this._dateAdapter.createDate(e,0,1);this._dateAdapter.getYear(s)==e;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(e){if(this._selectedYear=null,e instanceof ds){const i=e.start||e.end;i&&(this._selectedYear=this._dateAdapter.getYear(i))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}}return n.\u0275fac=function(e){return new(e||n)(v(At),v(ci,8),v(Qn,8))},n.\u0275cmp=We({type:n,selectors:[["mat-multi-year-view"]],viewQuery:function(e,i){if(1&e&&dt(bh,5),2&e){let s;fe(s=pe())&&(i._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(e,i){1&e&&(N(0,"table",0),N(1,"thead",1),N(2,"tr"),Ne(3,"th",2),B(),B(),N(4,"tbody",3),Ae("selectedValueChange",function(r){return i._yearSelected(r)})("keyup",function(r){return i._handleCalendarBodyKeyup(r)})("keydown",function(r){return i._handleCalendarBodyKeydown(r)}),B(),B()),2&e&&(Q(4),te("rows",i._years)("todayValue",i._todayYear)("startValue",i._selectedYear)("endValue",i._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._getActiveCell()))},directives:[bh],encapsulation:2,changeDetection:0}),n})();function n5(n,t,e,i,s){const r=n.getYear(t),o=n.getYear(e),a=s5(n,i,s);return Math.floor((r-a)/24)===Math.floor((o-a)/24)}function Tm(n,t,e,i){return function vMe(n,t){return(n%t+t)%t}(n.getYear(t)-s5(n,e,i),24)}function s5(n,t,e){let i=0;return e?i=n.getYear(e)-24+1:t&&(i=n.getYear(t)),i}let r5=(()=>{class n{constructor(e,i,s,r){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=s,this._dir=r,this._rerenderSubscription=yt.EMPTY,this.selectedChange=new he,this.monthSelected=new he,this.activeDateChange=new he,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const s=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(s,this.minDate,this.maxDate),this._dateAdapter.getYear(i)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof ds?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ki(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){const i=e.value,s=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,1);this.monthSelected.emit(s);const r=this._dateAdapter.getNumDaysInMonth(s);this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,Math.min(this._dateAdapter.getDate(this.activeDate),r)))}_handleCalendarBodyKeydown(e){const i=this._activeDate,s=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,s?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,s?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(i=>i.map(s=>this._createCellForMonth(s,e[s]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_createCellForMonth(e,i){const s=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),r=this._dateAdapter.format(s,this._dateFormats.display.monthYearA11yLabel),o=this.dateClass?this.dateClass(s,"year"):void 0;return new UE(e,i.toLocaleUpperCase(),r,this._shouldEnableMonth(e),o)}_shouldEnableMonth(e){const i=this._dateAdapter.getYear(this.activeDate);if(null==e||this._isYearAndMonthAfterMaxDate(i,e)||this._isYearAndMonthBeforeMinDate(i,e))return!1;if(!this.dateFilter)return!0;for(let r=this._dateAdapter.createDate(i,e,1);this._dateAdapter.getMonth(r)==e;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isYearAndMonthAfterMaxDate(e,i){if(this.maxDate){const s=this._dateAdapter.getYear(this.maxDate),r=this._dateAdapter.getMonth(this.maxDate);return e>s||e===s&&i>r}return!1}_isYearAndMonthBeforeMinDate(e,i){if(this.minDate){const s=this._dateAdapter.getYear(this.minDate),r=this._dateAdapter.getMonth(this.minDate);return e<s||e===s&&i<r}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(e){this._selectedMonth=e instanceof ds?this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._getMonthInCurrentYear(e)}}return n.\u0275fac=function(e){return new(e||n)(v(At),v(Lo,8),v(ci,8),v(Qn,8))},n.\u0275cmp=We({type:n,selectors:[["mat-year-view"]],viewQuery:function(e,i){if(1&e&&dt(bh,5),2&e){let s;fe(s=pe())&&(i._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(e,i){1&e&&(N(0,"table",0),N(1,"thead",1),N(2,"tr"),Ne(3,"th",2),B(),B(),N(4,"tbody",3),Ae("selectedValueChange",function(r){return i._monthSelected(r)})("keyup",function(r){return i._handleCalendarBodyKeyup(r)})("keydown",function(r){return i._handleCalendarBodyKeydown(r)}),B(),B()),2&e&&(Q(4),te("label",i._yearLabel)("rows",i._months)("todayValue",i._todayMonth)("startValue",i._selectedMonth)("endValue",i._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._dateAdapter.getMonth(i.activeDate)))},directives:[bh],encapsulation:2,changeDetection:0}),n})(),km=(()=>{class n{constructor(){this.changes=new ge,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,i){return`${e} \u2013 ${i}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bMe=0,xMe=(()=>{class n{constructor(e,i,s,r,o){this._intl=e,this.calendar=i,this._dateAdapter=s,this._dateFormats=r,this._buttonDescriptionId="mat-calendar-button-"+bMe++,this.calendar.stateChanges.subscribe(()=>o.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const i=this._dateAdapter.getYear(this.calendar.activeDate)-Tm(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),s=i+24-1,r=this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1)),o=this._dateAdapter.getYearName(this._dateAdapter.createDate(s,0,1));return this._intl.formatYearRange(r,o)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,i){return"month"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(i):"year"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i):n5(this._dateAdapter,e,i,this.calendar.minDate,this.calendar.maxDate)}}return n.\u0275fac=function(e){return new(e||n)(v(km),v(kt(()=>YE)),v(ci,8),v(Lo,8),v(At))},n.\u0275cmp=We({type:n,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:Zwe,decls:11,vars:10,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["viewBox","0 0 10 5","focusable","false",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(e,i){1&e&&(dn(),N(0,"div",0),N(1,"div",1),N(2,"button",2),Ae("click",function(){return i.currentPeriodClicked()}),N(3,"span"),tt(4),B(),Ga(),N(5,"svg",3),Ne(6,"polygon",4),B(),B(),ig(),Ne(7,"div",5),rt(8),N(9,"button",6),Ae("click",function(){return i.previousClicked()}),B(),N(10,"button",7),Ae("click",function(){return i.nextClicked()}),B(),B(),B()),2&e&&(Q(2),Ge("aria-label",i.periodButtonLabel)("aria-describedby",i._buttonDescriptionId),Q(1),Ge("id",i._buttonDescriptionId),Q(1),Ui(i.periodButtonText),Q(1),Ke("mat-calendar-invert","month"!==i.calendar.currentView),Q(4),te("disabled",!i.previousEnabled()),Ge("aria-label",i.prevButtonLabel),Q(1),te("disabled",!i.nextEnabled()),Ge("aria-label",i.nextButtonLabel))},directives:[lh],encapsulation:2,changeDetection:0}),n})(),YE=(()=>{class n{constructor(e,i,s,r){this._dateAdapter=i,this._dateFormats=s,this._changeDetectorRef=r,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new he,this.yearSelected=new he,this.monthSelected=new he,this.viewChanged=new he(!0),this._userSelection=new he,this.stateChanges=new ge,this._intlChanges=e.changes.subscribe(()=>{r.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){this._selected=e instanceof ds?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){const i=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),i&&this.viewChanged.emit(i)}ngAfterContentInit(){this._calendarHeaderPortal=new ND(this.headerComponent||xMe),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){const i=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,s=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,r=i||s||e.dateFilter;if(r&&!r.firstChange){const o=this._getCurrentViewComponent();o&&(this._changeDetectorRef.detectChanges(),o._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){const i=e.value;(this.selected instanceof ds||i&&!this._dateAdapter.sameDate(i,this.selected))&&this.selectedChange.emit(i),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,i){this.activeDate=e,this.currentView=i}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return n.\u0275fac=function(e){return new(e||n)(v(km),v(ci,8),v(Lo,8),v(At))},n.\u0275cmp=We({type:n,selectors:[["mat-calendar"]],viewQuery:function(e,i){if(1&e&&(dt(e5,5),dt(r5,5),dt(t5,5)),2&e){let s;fe(s=pe())&&(i.monthView=s.first),fe(s=pe())&&(i.yearView=s.first),fe(s=pe())&&(i.multiYearView=s.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[Me([fMe]),Gt],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(e,i){1&e&&(Ye(0,Jwe,0,0,"ng-template",0),N(1,"div",1),Ye(2,eMe,1,8,"mat-month-view",2),Ye(3,tMe,1,6,"mat-year-view",3),Ye(4,nMe,1,6,"mat-multi-year-view",4),B()),2&e&&(te("cdkPortalOutlet",i._calendarHeaderPortal),Q(1),te("ngSwitch",i.currentView),Q(1),te("ngSwitchCase","month"),Q(1),te("ngSwitchCase","year"),Q(1),te("ngSwitchCase","multi-year"))},directives:[e5,r5,t5,oh,$S,Kl,Mf],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}\n'],encapsulation:2,changeDetection:0}),n})();const o5={transformPanel:Jn("transformPanel",[Wt("void => enter-dropdown",Qt("120ms cubic-bezier(0, 0, 0.2, 1)",Fc([He({opacity:0,transform:"scale(1, 0.8)"}),He({opacity:1,transform:"scale(1, 1)"})]))),Wt("void => enter-dialog",Qt("150ms cubic-bezier(0, 0, 0.2, 1)",Fc([He({opacity:0,transform:"scale(0.7)"}),He({transform:"none",opacity:1})]))),Wt("* => void",Qt("100ms linear",He({opacity:0})))]),fadeInCalendar:Jn("fadeInCalendar",[Ot("void",He({opacity:0})),Ot("enter",He({opacity:1})),Wt("void => *",Qt("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let wMe=0;const a5=new K("mat-datepicker-scroll-strategy"),CMe={provide:a5,deps:[No],useFactory:function MMe(n){return()=>n.scrollStrategies.reposition()}},SMe=Oo(class{constructor(n){this._elementRef=n}});let DMe=(()=>{class n extends SMe{constructor(e,i,s,r,o,a){super(e),this._changeDetectorRef=i,this._globalModel=s,this._dateAdapter=r,this._rangeSelectionStrategy=o,this._subscriptions=new yt,this._animationDone=new ge,this._actionsPortal=null,this._closeButtonText=a.closeCalendarLabel}ngOnInit(){this._model=this._actionsPortal?this._globalModel.clone():this._globalModel,this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){const i=this._model.selection,s=e.value,r=i instanceof ds;if(r&&this._rangeSelectionStrategy){const o=this._rangeSelectionStrategy.selectionFinished(s,i,e.event);this._model.updateSelection(o,this)}else s&&(r||!this._dateAdapter.sameDate(s,i))&&this._model.add(s);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(At),v(Tl),v(ci),v(zb,8),v(km))},n.\u0275cmp=We({type:n,selectors:[["mat-datepicker-content"]],viewQuery:function(e,i){if(1&e&&dt(YE,5),2&e){let s;fe(s=pe())&&(i._calendar=s.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(e,i){1&e&&Ig("@transformPanel.done",function(){return i._animationDone.next()}),2&e&&(Og("@transformPanel",i._animationState),Ke("mat-datepicker-content-touch",i.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[Y],decls:5,vars:24,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","yearSelected","monthSelected","viewChanged","_userSelection"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(e,i){if(1&e&&(N(0,"div",0),N(1,"mat-calendar",1),Ae("yearSelected",function(r){return i.datepicker._selectYear(r)})("monthSelected",function(r){return i.datepicker._selectMonth(r)})("viewChanged",function(r){return i.datepicker._viewChanged(r)})("_userSelection",function(r){return i._handleUserSelection(r)}),B(),Ye(2,iMe,0,0,"ng-template",2),N(3,"button",3),Ae("focus",function(){return i._closeButtonFocused=!0})("blur",function(){return i._closeButtonFocused=!1})("click",function(){return i.datepicker.close()}),tt(4),B(),B()),2&e){let s;Ke("mat-datepicker-content-container-with-custom-header",i.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",i._actionsPortal),Ge("aria-modal",!0)("aria-labelledby",null!==(s=i._dialogLabelId)&&void 0!==s?s:void 0),Q(1),te("id",i.datepicker.id)("ngClass",i.datepicker.panelClass)("startAt",i.datepicker.startAt)("startView",i.datepicker.startView)("minDate",i.datepicker._getMinDate())("maxDate",i.datepicker._getMaxDate())("dateFilter",i.datepicker._getDateFilter())("headerComponent",i.datepicker.calendarHeaderComponent)("selected",i._getSelected())("dateClass",i.datepicker.dateClass)("comparisonStart",i.comparisonStart)("comparisonEnd",i.comparisonEnd)("@fadeInCalendar","enter"),Q(1),te("cdkPortalOutlet",i._actionsPortal),Q(1),Ke("cdk-visually-hidden",!i._closeButtonFocused),te("color",i.color||"primary"),Q(1),Ui(i._closeButtonText)}},directives:[YE,lh,cde,Yl,oh],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}\n"],encapsulation:2,data:{animation:[o5.transformPanel,o5.fadeInCalendar]},changeDetection:0}),n})(),l5=(()=>{class n{constructor(e,i,s,r,o,a,l){this._overlay=e,this._ngZone=i,this._viewContainerRef=s,this._dateAdapter=o,this._dir=a,this._model=l,this._inputStateChanges=yt.EMPTY,this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new he,this.monthSelected=new he,this.viewChanged=new he(!0),this.openedStream=new he,this.closedStream=new he,this._opened=!1,this.id="mat-datepicker-"+wMe++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new ge,this._scrollStrategy=r}get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}get touchUi(){return this._touchUi}set touchUi(e){this._touchUi=ve(e)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){const i=ve(e);i!==this._disabled&&(this._disabled=i,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(e){this._restoreFocus=ve(e)}get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=function Pce(n,t=/\s+/){const e=[];if(null!=n){const i=Array.isArray(n)?n:`${n}`.split(t);for(const s of i){const r=`${s}`.trim();r&&e.push(r)}}return e}(e)}get opened(){return this._opened}set opened(e){ve(e)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}ngOnChanges(e){const i=e.xPosition||e.yPosition;if(i&&!i.firstChange&&this._overlayRef){const s=this._overlayRef.getConfig().positionStrategy;s instanceof wH&&(this._setConnectedPositions(s),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal=e}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null)}open(){this._opened||this.disabled||(this._focusedElementBeforeOpen=FV(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened)return;if(this._componentRef){const i=this._componentRef.instance;i._startExitAnimation(),i._animationDone.pipe(yn(1)).subscribe(()=>this._destroyOverlay())}const e=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(e)):e()}_applyPendingSelection(){var e,i;null===(i=null===(e=this._componentRef)||void 0===e?void 0:e.instance)||void 0===i||i._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._actionsPortal=this._actionsPortal,e._dialogLabelId=this.datepickerInput.getOverlayLabelId()}_openOverlay(){this._destroyOverlay();const e=this.touchUi,i=new ND(DMe,this._viewContainerRef),s=this._overlayRef=this._overlay.create(new Jv({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(e?"dialog":"popup")}));this._getCloseStream(s).subscribe(r=>{r&&r.preventDefault(),this.close()}),this._componentRef=s.attach(i),this._forwardContentValues(this._componentRef.instance),e||this._ngZone.onStable.pipe(yn(1)).subscribe(()=>s.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){const i="end"===this.xPosition?"end":"start",s="start"===i?"end":"start",r="above"===this.yPosition?"bottom":"top",o="top"===r?"bottom":"top";return e.withPositions([{originX:i,originY:o,overlayX:i,overlayY:r},{originX:i,originY:r,overlayX:i,overlayY:o},{originX:s,originY:o,overlayX:s,overlayY:r},{originX:s,originY:r,overlayX:s,overlayY:o}])}_getCloseStream(e){return wn(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(un(i=>27===i.keyCode&&!Bi(i)||this.datepickerInput&&Bi(i,"altKey")&&38===i.keyCode)))}}return n.\u0275fac=function(e){return new(e||n)(v(No),v(Xe),v(In),v(a5),v(ci,8),v(Qn,8),v(Tl))},n.\u0275dir=G({type:n,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:"touchUi",disabled:"disabled",xPosition:"xPosition",yPosition:"yPosition",restoreFocus:"restoreFocus",dateClass:"dateClass",panelClass:"panelClass",opened:"opened"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[Gt]}),n})();class Ub{constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}}let c5=(()=>{class n{constructor(e,i,s){this._elementRef=e,this._dateAdapter=i,this._dateFormats=s,this.dateChange=new he,this.dateInput=new he,this.stateChanges=new ge,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=yt.EMPTY,this._localeSubscription=yt.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=r=>{const o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(r.value));return!o||this._matchesFilter(o)?null:{matDatepickerFilter:!0}},this._minValidator=r=>{const o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(r.value)),a=this._getMinDate();return!a||!o||this._dateAdapter.compareDate(a,o)<=0?null:{matDatepickerMin:{min:a,actual:o}}},this._maxValidator=r=>{const o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(r.value)),a=this._getMaxDate();return!a||!o||this._dateAdapter.compareDate(a,o)>=0?null:{matDatepickerMax:{max:a,actual:o}}},this._lastValueValid=!1,this._localeSubscription=i.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){const i=ve(e),s=this._elementRef.nativeElement;this._disabled!==i&&(this._disabled=i,this.stateChanges.next(void 0)),i&&this._isInitialized&&s.blur&&s.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(i=>{if(this._shouldHandleChangeEvent(i)){const s=this._getValueFromModel(i.selection);this._lastValueValid=this._isValidValue(s),this._cvaOnChange(s),this._onTouched(),this._formatValue(s),this.dateInput.emit(new Ub(this,this._elementRef.nativeElement)),this.dateChange.emit(new Ub(this,this._elementRef.nativeElement))}})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){d5(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){e.altKey&&40===e.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){const i=this._lastValueValid;let s=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(s),s=this._dateAdapter.getValidDateOrNull(s);const r=!this._dateAdapter.sameDate(s,this.value);!s||r?this._cvaOnChange(s):(e&&!this.value&&this._cvaOnChange(s),i!==this._lastValueValid&&this._validatorOnChange()),r&&(this._assignValue(s),this.dateInput.emit(new Ub(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new Ub(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){const i=this._getDateFilter();return!i||i(e)}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(ci,8),v(Lo,8))},n.\u0275dir=G({type:n,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[Gt]}),n})();function d5(n,t){const e=Object.keys(n);for(let i of e){const{previousValue:s,currentValue:r}=n[i];if(!t.isDateInstance(s)||!t.isDateInstance(r))return!0;if(!t.sameDate(s,r))return!0}return!1}let TMe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["","matDatepickerToggleIcon",""]]}),n})(),kMe=(()=>{class n{constructor(e,i,s){this._intl=e,this._changeDetectorRef=i,this._stateChanges=yt.EMPTY;const r=Number(s);this.tabIndex=r||0===r?r:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=ve(e)}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.datepicker?this.datepicker.stateChanges:Qe(),i=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:Qe(),s=this.datepicker?wn(this.datepicker.openedStream,this.datepicker.closedStream):Qe();this._stateChanges.unsubscribe(),this._stateChanges=wn(this._intl.changes,e,i,s).subscribe(()=>this._changeDetectorRef.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(v(km),v(At),fi("tabindex"))},n.\u0275cmp=We({type:n,selectors:[["mat-datepicker-toggle"]],contentQueries:function(e,i,s){if(1&e&&ht(s,TMe,5),2&e){let r;fe(r=pe())&&(i._customIcon=r.first)}},viewQuery:function(e,i){if(1&e&&dt(sMe,5),2&e){let s;fe(s=pe())&&(i._button=s.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(e,i){1&e&&Ae("click",function(r){return i._open(r)}),2&e&&(Ge("tabindex",null)("data-mat-calendar",i.datepicker?i.datepicker.id:null),Ke("mat-datepicker-toggle-active",i.datepicker&&i.datepicker.opened)("mat-accent",i.datepicker&&"accent"===i.datepicker.color)("mat-warn",i.datepicker&&"warn"===i.datepicker.color))},inputs:{datepicker:["for","datepicker"],tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],disabled:"disabled",disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[Gt],ngContentSelectors:aMe,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(e,i){1&e&&(dn(oMe),N(0,"button",0,1),Ye(2,rMe,2,0,"svg",2),rt(3),B()),2&e&&(te("disabled",i.disabled)("disableRipple",i.disableRipple),Ge("aria-haspopup",i.datepicker?"dialog":null)("aria-label",i.ariaLabel||i._intl.openCalendarLabel)("tabindex",i.disabled?-1:i.tabIndex),Q(2),te("ngIf",!i._customIcon))},directives:[lh,dr],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}\n"],encapsulation:2,changeDetection:0}),n})();const Gb=new K("MAT_DATE_RANGE_INPUT_PARENT"),h5=DD((()=>{class n extends c5{constructor(e,i,s,r,o,a,l,c){super(i,l,c),this._rangeInput=e,this._defaultErrorStateMatcher=s,this._injector=r,this._parentForm=o,this._parentFormGroup=a}ngOnInit(){const e=this._injector.get(jr,null,xt.Self|xt.Optional);e&&(this.ngControl=e)}ngDoCheck(){this.ngControl&&this.updateErrorState()}isEmpty(){return 0===this._elementRef.nativeElement.value.length}_getPlaceholder(){return this._elementRef.nativeElement.placeholder}focus(){this._elementRef.nativeElement.focus()}_onInput(e){super._onInput(e),this._rangeInput._handleChildValueChange()}_openPopup(){this._rangeInput._openDatepicker()}_getMinDate(){return this._rangeInput.min}_getMaxDate(){return this._rangeInput.max}_getDateFilter(){return this._rangeInput.dateFilter}_parentDisabled(){return this._rangeInput._groupDisabled}_shouldHandleChangeEvent({source:e}){return e!==this._rangeInput._startInput&&e!==this._rangeInput._endInput}_assignValueProgrammatically(e){super._assignValueProgrammatically(e);const i=this===this._rangeInput._startInput?this._rangeInput._endInput:this._rangeInput._startInput;null==i||i._validatorOnChange()}}return n.\u0275fac=function(e){return new(e||n)(v(Gb),v(ue),v(Cl),v(zn),v(wo,8),v(Mo,8),v(ci,8),v(Lo,8))},n.\u0275dir=G({type:n,features:[Y]}),n})());let f5=(()=>{class n extends h5{constructor(e,i,s,r,o,a,l,c){super(e,i,s,r,o,a,l,c),this._startValidator=d=>{const u=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(d.value)),h=this._model?this._model.selection.end:null;return!u||!h||this._dateAdapter.compareDate(u,h)<=0?null:{matStartDateInvalid:{end:h,actual:u}}},this._validator=aa.compose([...super._getValidators(),this._startValidator])}_getValueFromModel(e){return e.start}_shouldHandleChangeEvent(e){var i;return!(!super._shouldHandleChangeEvent(e)||((null===(i=e.oldValue)||void 0===i?void 0:i.start)?e.selection.start&&!this._dateAdapter.compareDate(e.oldValue.start,e.selection.start):!e.selection.start))}_assignValueToModel(e){if(this._model){const i=new ds(e,this._model.selection.end);this._model.updateSelection(i,this)}}_formatValue(e){super._formatValue(e),this._rangeInput._handleChildValueChange()}getMirrorValue(){const e=this._elementRef.nativeElement,i=e.value;return i.length>0?i:e.placeholder}}return n.\u0275fac=function(e){return new(e||n)(v(Gb),v(ue),v(Cl),v(zn),v(wo,8),v(Mo,8),v(ci,8),v(Lo,8))},n.\u0275dir=G({type:n,selectors:[["input","matStartDate",""]],hostAttrs:["type","text",1,"mat-start-date","mat-date-range-input-inner"],hostVars:6,hostBindings:function(e,i){1&e&&Ae("input",function(r){return i._onInput(r.target.value)})("change",function(){return i._onChange()})("keydown",function(r){return i._onKeydown(r)})("blur",function(){return i._onBlur()}),2&e&&(Vr("disabled",i.disabled),Ge("id",i._rangeInput.id)("aria-haspopup",i._rangeInput.rangePicker?"dialog":null)("aria-owns",(null==i._rangeInput.rangePicker?null:i._rangeInput.rangePicker.opened)&&i._rangeInput.rangePicker.id||null)("min",i._getMinDate()?i._dateAdapter.toIso8601(i._getMinDate()):null)("max",i._getMaxDate()?i._dateAdapter.toIso8601(i._getMaxDate()):null))},inputs:{errorStateMatcher:"errorStateMatcher"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[Me([{provide:_i,useExisting:n,multi:!0},{provide:oi,useExisting:n,multi:!0}]),Y]}),n})(),p5=(()=>{class n extends h5{constructor(e,i,s,r,o,a,l,c){super(e,i,s,r,o,a,l,c),this._endValidator=d=>{const u=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(d.value)),h=this._model?this._model.selection.start:null;return!u||!h||this._dateAdapter.compareDate(u,h)>=0?null:{matEndDateInvalid:{start:h,actual:u}}},this._validator=aa.compose([...super._getValidators(),this._endValidator])}_getValueFromModel(e){return e.end}_shouldHandleChangeEvent(e){var i;return!(!super._shouldHandleChangeEvent(e)||((null===(i=e.oldValue)||void 0===i?void 0:i.end)?e.selection.end&&!this._dateAdapter.compareDate(e.oldValue.end,e.selection.end):!e.selection.end))}_assignValueToModel(e){if(this._model){const i=new ds(this._model.selection.start,e);this._model.updateSelection(i,this)}}_onKeydown(e){8===e.keyCode&&!this._elementRef.nativeElement.value&&this._rangeInput._startInput.focus(),super._onKeydown(e)}}return n.\u0275fac=function(e){return new(e||n)(v(Gb),v(ue),v(Cl),v(zn),v(wo,8),v(Mo,8),v(ci,8),v(Lo,8))},n.\u0275dir=G({type:n,selectors:[["input","matEndDate",""]],hostAttrs:["type","text",1,"mat-end-date","mat-date-range-input-inner"],hostVars:5,hostBindings:function(e,i){1&e&&Ae("input",function(r){return i._onInput(r.target.value)})("change",function(){return i._onChange()})("keydown",function(r){return i._onKeydown(r)})("blur",function(){return i._onBlur()}),2&e&&(Vr("disabled",i.disabled),Ge("aria-haspopup",i._rangeInput.rangePicker?"dialog":null)("aria-owns",(null==i._rangeInput.rangePicker?null:i._rangeInput.rangePicker.opened)&&i._rangeInput.rangePicker.id||null)("min",i._getMinDate()?i._dateAdapter.toIso8601(i._getMinDate()):null)("max",i._getMaxDate()?i._dateAdapter.toIso8601(i._getMaxDate()):null))},inputs:{errorStateMatcher:"errorStateMatcher"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[Me([{provide:_i,useExisting:n,multi:!0},{provide:oi,useExisting:n,multi:!0}]),Y]}),n})(),RMe=0,IMe=(()=>{class n{constructor(e,i,s,r,o){if(this._changeDetectorRef=e,this._elementRef=i,this._dateAdapter=r,this._formField=o,this._closedSubscription=yt.EMPTY,this.id="mat-date-range-input-"+RMe++,this.focused=!1,this.controlType="mat-date-range-input",this._groupDisabled=!1,this._ariaDescribedBy=null,this.separator="\u2013",this.comparisonStart=null,this.comparisonEnd=null,this.stateChanges=new ge,null==o?void 0:o._elementRef.nativeElement.classList.contains("mat-mdc-form-field")){const a=i.nativeElement.classList;a.add("mat-mdc-input-element"),a.add("mat-mdc-form-field-input-control")}this.ngControl=s}get value(){return this._model?this._model.selection:null}get shouldLabelFloat(){return this.focused||!this.empty}get placeholder(){var e,i;const s=(null===(e=this._startInput)||void 0===e?void 0:e._getPlaceholder())||"",r=(null===(i=this._endInput)||void 0===i?void 0:i._getPlaceholder())||"";return s||r?`${s} ${this.separator} ${r}`:""}get rangePicker(){return this._rangePicker}set rangePicker(e){e&&(this._model=e.registerInput(this),this._rangePicker=e,this._closedSubscription.unsubscribe(),this._closedSubscription=e.closedStream.subscribe(()=>{var i,s;null===(i=this._startInput)||void 0===i||i._onTouched(),null===(s=this._endInput)||void 0===s||s._onTouched()}),this._registerModel(this._model))}get required(){return!!this._required}set required(e){this._required=ve(e)}get dateFilter(){return this._dateFilter}set dateFilter(e){const i=this._startInput,s=this._endInput,r=i&&i._matchesFilter(i.value),o=s&&s._matchesFilter(i.value);this._dateFilter=e,i&&i._matchesFilter(i.value)!==r&&i._validatorOnChange(),s&&s._matchesFilter(s.value)!==o&&s._validatorOnChange()}get min(){return this._min}set min(e){const i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(i,this._min)||(this._min=i,this._revalidate())}get max(){return this._max}set max(e){const i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(i,this._max)||(this._max=i,this._revalidate())}get disabled(){return this._startInput&&this._endInput?this._startInput.disabled&&this._endInput.disabled:this._groupDisabled}set disabled(e){const i=ve(e);i!==this._groupDisabled&&(this._groupDisabled=i,this.stateChanges.next(void 0))}get errorState(){return!(!this._startInput||!this._endInput)&&(this._startInput.errorState||this._endInput.errorState)}get empty(){const e=!!this._startInput&&this._startInput.isEmpty(),i=!!this._endInput&&this._endInput.isEmpty();return e&&i}setDescribedByIds(e){this._ariaDescribedBy=e.length?e.join(" "):null}onContainerClick(){!this.focused&&!this.disabled&&(this._model&&this._model.selection.start?this._endInput.focus():this._startInput.focus())}ngAfterContentInit(){this._model&&this._registerModel(this._model),wn(this._startInput.stateChanges,this._endInput.stateChanges).subscribe(()=>{this.stateChanges.next(void 0)})}ngOnChanges(e){d5(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._closedSubscription.unsubscribe(),this.stateChanges.complete()}getStartValue(){return this.value?this.value.start:null}getThemePalette(){return this._formField?this._formField.color:void 0}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():null}_getInputMirrorValue(){return this._startInput?this._startInput.getMirrorValue():""}_shouldHidePlaceholders(){return!!this._startInput&&!this._startInput.isEmpty()}_handleChildValueChange(){this.stateChanges.next(void 0),this._changeDetectorRef.markForCheck()}_openDatepicker(){this._rangePicker&&this._rangePicker.open()}_shouldHideSeparator(){return(!this._formField||this._formField.getLabelId()&&!this._formField._shouldLabelFloat())&&this.empty}_getAriaLabelledby(){const e=this._formField;return e&&e._hasFloatingLabel()?e._labelId:null}_updateFocus(e){this.focused=null!==e,this.stateChanges.next()}_revalidate(){this._startInput&&this._startInput._validatorOnChange(),this._endInput&&this._endInput._validatorOnChange()}_registerModel(e){this._startInput&&this._startInput._registerModel(e),this._endInput&&this._endInput._registerModel(e)}}return n.\u0275fac=function(e){return new(e||n)(v(At),v(ue),v(is,10),v(ci,8),v(Wp,8))},n.\u0275cmp=We({type:n,selectors:[["mat-date-range-input"]],contentQueries:function(e,i,s){if(1&e&&(ht(s,f5,5),ht(s,p5,5)),2&e){let r;fe(r=pe())&&(i._startInput=r.first),fe(r=pe())&&(i._endInput=r.first)}},hostAttrs:["role","group",1,"mat-date-range-input"],hostVars:8,hostBindings:function(e,i){2&e&&(Ge("id",null)("aria-labelledby",i._getAriaLabelledby())("aria-describedby",i._ariaDescribedBy)("data-mat-calendar",i.rangePicker?i.rangePicker.id:null),Ke("mat-date-range-input-hide-placeholders",i._shouldHidePlaceholders())("mat-date-range-input-required",i.required))},inputs:{rangePicker:"rangePicker",required:"required",dateFilter:"dateFilter",min:"min",max:"max",disabled:"disabled",separator:"separator",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},exportAs:["matDateRangeInput"],features:[Me([{provide:jp,useExisting:n},{provide:Gb,useExisting:n}]),Gt],ngContentSelectors:cMe,decls:9,vars:4,consts:[["cdkMonitorSubtreeFocus","",1,"mat-date-range-input-container",3,"cdkFocusChange"],[1,"mat-date-range-input-start-wrapper"],["aria-hidden","true",1,"mat-date-range-input-mirror"],[1,"mat-date-range-input-separator"],[1,"mat-date-range-input-end-wrapper"]],template:function(e,i){1&e&&(dn(lMe),N(0,"div",0),Ae("cdkFocusChange",function(r){return i._updateFocus(r)}),N(1,"div",1),rt(2),N(3,"span",2),tt(4),B(),B(),N(5,"span",3),tt(6),B(),N(7,"div",4),rt(8,1),B(),B()),2&e&&(Q(4),Ui(i._getInputMirrorValue()),Q(1),Ke("mat-date-range-input-separator-hidden",i._shouldHideSeparator()),Q(1),Ui(i.separator))},directives:[$S],styles:[".mat-date-range-input{display:block;width:100%}.mat-date-range-input-container{display:flex;align-items:center}.mat-date-range-input-separator{transition:opacity 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);margin:0 4px}.mat-date-range-input-separator-hidden{-webkit-user-select:none;user-select:none;opacity:0;transition:none}.mat-date-range-input-inner{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;vertical-align:bottom;text-align:inherit;-webkit-appearance:none;width:100%}.mat-date-range-input-inner:-moz-ui-invalid{box-shadow:none}.mat-date-range-input-inner::placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner::-moz-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner::-webkit-input-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner:-ms-input-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-date-range-input-inner::placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::placeholder{-webkit-user-select:none;user-select:none;color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner::placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-date-range-input-inner::-moz-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-moz-placeholder{-webkit-user-select:none;user-select:none;color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner::-moz-placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-date-range-input-inner::-webkit-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner::-webkit-input-placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-date-range-input-inner:-ms-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner:-ms-input-placeholder{-webkit-user-select:none;user-select:none;color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner:-ms-input-placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner:-ms-input-placeholder{opacity:0}.mat-date-range-input-mirror{-webkit-user-select:none;user-select:none;visibility:hidden;white-space:nowrap;display:inline-block;min-width:2px}.mat-date-range-input-start-wrapper{position:relative;overflow:hidden;max-width:calc(50% - 4px)}.mat-date-range-input-start-wrapper .mat-date-range-input-inner{position:absolute;top:0;left:0}.mat-date-range-input-end-wrapper{flex-grow:1;max-width:calc(50% - 4px)}.mat-form-field-type-mat-date-range-input .mat-form-field-infix{width:200px}\n"],encapsulation:2,changeDetection:0}),n})(),PMe=(()=>{class n extends l5{_forwardContentValues(e){super._forwardContentValues(e);const i=this.datepickerInput;i&&(e.comparisonStart=i.comparisonStart,e.comparisonEnd=i.comparisonEnd)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=xe(n)))(i||n)}}(),n.\u0275cmp=We({type:n,selectors:[["mat-date-range-picker"]],exportAs:["matDateRangePicker"],features:[Me([mMe,yMe,{provide:l5,useExisting:n}]),Y],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),n})(),m5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[km,CMe],imports:[[gi,jc,Gc,Ev,zc,Ue],Fo]}),n})();function OMe(n,t){1&n&&(N(0,"mat-error"),tt(1,"Invalid start date "),B())}function LMe(n,t){1&n&&(N(0,"mat-error"),tt(1,"Invalid end date"),B())}let FMe=(()=>{class n{constructor(){this.items=["Train","Predict"],this.trainDateRange=new Uf({start:new au("",[aa.required]),end:new au("",[aa.required])}),this.step=0}setStep(e){this.step=e}nextStep(){this.step++}prevStep(){this.step--}ngOnInit(){console.log(this.digitalTwin)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=We({type:n,selectors:[["app-predict"]],inputs:{digitalTwin:"digitalTwin"},decls:33,vars:11,consts:[[1,"example-headers-align"],["hideToggle","",3,"expanded","opened"],[1,"custom-expansion-header"],["appearance","fill"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["mat-button","",1,"button-basic",3,"disabled"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"]],template:function(e,i){if(1&e&&(N(0,"mat-accordion",0),N(1,"mat-expansion-panel",1),Ae("opened",function(){return i.setStep(0)}),N(2,"mat-expansion-panel-header",2),N(3,"mat-panel-title"),tt(4," Train data "),B(),B(),N(5,"mat-form-field",3),N(6,"mat-label"),tt(7,"Select Training data time range"),B(),N(8,"mat-date-range-input",4),Ne(9,"input",5),Ne(10,"input",6),B(),N(11,"mat-hint"),tt(12,"MM/DD/YYYY \u2013 MM/DD/YYYY"),B(),Ne(13,"mat-datepicker-toggle",7),Ne(14,"mat-date-range-picker",null,8),Ye(16,OMe,2,0,"mat-error",9),Ye(17,LMe,2,0,"mat-error",9),B(),N(18,"p"),tt(19),function ZI(n,t){const e=Kt();let i;const s=n+20;e.firstCreatePass?(i=function X7(n,t){if(t)for(let e=t.length-1;e>=0;e--){const i=t[e];if(n===i.name)return i}}(t,e.pipeRegistry),e.data[s]=i,i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(s,i.onDestroy)):i=e.data[s];const r=i.factory||(i.factory=zl(i.type)),o=Ba(v);try{const a=cg(!1),l=r();return cg(a),function _q(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}(e,ce(),s,l),l}finally{Ba(o)}}(20,"json"),B(),N(21,"button",10),tt(22,"Get Training Data"),B(),N(23,"mat-action-row"),N(24,"button",11),Ae("click",function(){return i.nextStep()}),tt(25,"Next"),B(),B(),B(),N(26,"mat-expansion-panel",1),Ae("opened",function(){return i.setStep(1)}),N(27,"mat-expansion-panel-header",2),N(28,"mat-panel-title"),tt(29," Result "),B(),B(),N(30,"mat-action-row"),N(31,"button",12),Ae("click",function(){return i.prevStep()}),tt(32,"Previous"),B(),B(),B(),B()),2&e){const s=zs(15);Q(1),te("expanded",0===i.step),Q(7),te("formGroup",i.trainDateRange)("rangePicker",s),Q(5),te("for",s),Q(3),te("ngIf",i.trainDateRange.controls.start.hasError("matStartDateInvalid")),Q(1),te("ngIf",i.trainDateRange.controls.end.hasError("matEndDateInvalid")),Q(2),ar("Selected range: ",function JI(n,t,e){const i=n+20,s=ce(),r=ud(s,i);return function yf(n,t){return n[1].data[t].pure}(s,i)?qI(s,ps(),t,r.transform,e,r):r.transform(e)}(20,9,i.trainDateRange.value),""),Q(2),te("disabled",i.trainDateRange.invalid),Q(5),te("expanded",1===i.step)}},directives:[jwe,YG,XG,Gwe,hH,Xv,IMe,Bf,Mo,f5,P_,PM,G_,p5,Ohe,kMe,Nhe,PMe,dr,Rhe,lh,Hwe],pipes:[mO],styles:[""]}),n})();const NMe=["container"];let BMe=(()=>{class n{constructor(e,i){this.scene=e,this.route=i,this.machineId="",this.machine=null,this.route.params.subscribe(s=>{this.machineId=s.id}),this.machine=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem(this.machineId))))}ngOnInit(){}set container(e){const i=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem(this.machineId))));this.scene.initialize(e.nativeElement,i)}}return n.\u0275fac=function(e){return new(e||n)(v(ES),v(Qa))},n.\u0275cmp=We({type:n,selectors:[["app-digital-twin-overview"]],viewQuery:function(e,i){if(1&e&&dt(NMe,5),2&e){let s;fe(s=pe())&&(i.container=s.first)}},decls:13,vars:2,consts:[["fxLayout","row","fxLayoutAlign","space-between start",1,"main-content"],["fxFlex","50",1,"viewer"],[1,"container"],["container",""],[1,"loading-screen"],["id","loader"],["id","loading-text"],["fxFlex","49",1,"right-content"],["animationDuration","1000ms"],["label","Overview"],[3,"digitalTwin"],["label","Predict"]],template:function(e,i){1&e&&(N(0,"div",0),N(1,"div",1),Ne(2,"div",2,3),N(4,"div",4),Ne(5,"div",5),Ne(6,"div",6),B(),B(),N(7,"div",7),N(8,"mat-tab-group",8),N(9,"mat-tab",9),Ne(10,"app-overview",10),B(),N(11,"mat-tab",11),Ne(12,"app-predict",10),B(),B(),B(),B()),2&e&&(Q(10),te("digitalTwin",i.machine),Q(2),te("digitalTwin",i.machine))},directives:[Pp,LS,Op,Tpe,VH,Dwe,FMe],styles:[".example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.example-tree[_ngcontent-%COMP%]   .mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{padding-left:40px}.example-tree[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%] > .mat-tree-node[_ngcontent-%COMP%]{padding-left:40px}.viewer[_ngcontent-%COMP%], .main-content[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{height:100%}.loading-screen[_ngcontent-%COMP%]{width:50%}.right-content[_ngcontent-%COMP%]{background-color:#fff;height:100%}"]}),n})();const VMe=["*",[["mat-card-footer"]]],HMe=["*","mat-card-footer"],zMe=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],UMe=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let g5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),_5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),n})(),y5=(()=>{class n{constructor(e){this._animationMode=e}}return n.\u0275fac=function(e){return new(e||n)(v(ei,8))},n.\u0275cmp=We({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,i){2&e&&Ke("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:HMe,decls:2,vars:0,template:function(e,i){1&e&&(dn(VMe),rt(0),rt(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),v5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=We({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:UMe,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(e,i){1&e&&(dn(zMe),rt(0),N(1,"div",0),rt(2,1),B(),rt(3,2))},encapsulation:2,changeDetection:0}),n})(),b5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Ue],Ue]}),n})();function GMe(n,t){if(1&n){const e=Us();N(0,"div",7),N(1,"mat-card",8),Ae("click",function(){const r=si(e).$implicit;return Je().navigateTo(r)}),N(2,"mat-card-header"),N(3,"mat-card-title"),tt(4),B(),B(),Ne(5,"img",9),B(),B()}if(2&n){const e=t.$implicit;te("fxFlex","25%"),Q(4),Ui(e.name),Q(1),te("src",e.imageUrl,Kh)}}let jMe=(()=>{class n{constructor(e){this.router=e,this.machineList=[{id:"kuka",name:"KukaRobot",imageUrl:"./assets/images/kuka.png",modelUrl:"./assets/3dmodels/kuka.glb",modelPosition:new D(0,-1,0),modelScale:new D(.01,.01,.01)},{id:"turbo",name:"Turbofan Engine",imageUrl:"./assets/images/turbo.png",modelUrl:"./assets/3dmodels/turbo.glb",modelPosition:new D(0,0,0),modelScale:new D(.5,.5,.5)}],this.filteredList=[]}ngOnInit(){}navigateTo(e){localStorage.setItem(e.id,JSON.stringify(e)),this.router.navigateByUrl(`/digital-twin/${e.id}`,{state:e})}search(e){const i=e.target.value;this.filteredList=this.machineList.filter(s=>{if(s.name.toLowerCase().includes(i))return s})}}return n.\u0275fac=function(e){return new(e||n)(v(vs))},n.\u0275cmp=We({type:n,selectors:[["app-digital-twin"]],decls:7,vars:1,consts:[[1,"machine-select"],[1,"search-container"],["type","text","id","search-bar","placeholder","Search..."],["href","#"],["src","http://www.endlessicons.com/wp-content/uploads/2012/12/search-icon.png",1,"search-icon"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex.xs","100%","fxFlex.sm","33%",3,"fxFlex",4,"ngFor","ngForOf"],["fxFlex.xs","100%","fxFlex.sm","33%",3,"fxFlex"],[1,"card",3,"click"],["matCardImage","",1,"card-image",3,"src"]],template:function(e,i){1&e&&(N(0,"section",0),N(1,"form",1),Ne(2,"input",2),N(3,"a",3),Ne(4,"img",4),B(),B(),N(5,"div",5),Ye(6,GMe,6,3,"div",6),B(),B()),2&e&&(Q(6),te("ngForOf",i.machineList))},directives:[U_,Bf,wo,Pp,OS,Xl,Op,y5,v5,g5,_5],styles:[".card[_ngcontent-%COMP%]{cursor:pointer;box-shadow:8px 14px 38px #272c310f,1px 3px 8px #272c3108;transition:all .5s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-1px) scale(1.03)}.container[_ngcontent-%COMP%]{width:100%}.search-container[_ngcontent-%COMP%]{width:490px;display:block;margin:0 auto}input#search-bar[_ngcontent-%COMP%]{margin:20px auto;width:100%;height:45px;padding:0 20px;font-size:1rem;border:1px solid #D0CFCE;outline:none}input#search-bar[_ngcontent-%COMP%]:focus{border:1px solid #008ABF;transition:.35s ease;color:#008abf}input#search-bar[_ngcontent-%COMP%]:focus::-webkit-input-placeholder{-webkit-transition:opacity .45s ease;transition:opacity .45s ease;opacity:0}input#search-bar[_ngcontent-%COMP%]:focus::-moz-placeholder{-moz-transition:opacity .45s ease;transition:opacity .45s ease;opacity:0}input#search-bar[_ngcontent-%COMP%]:focus:-ms-placeholder{-ms-transition:opacity .45s ease;transition:opacity .45s ease;opacity:0}.card-image[_ngcontent-%COMP%]{height:285px}"]}),n})(),WMe=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=We({type:n,selectors:[["app-home"]],decls:16,vars:0,consts:[["width","380px","height","500px","viewBox","0 0 837 1045","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xmlns","sketch","http://www.bohemiancoding.com/sketch/ns"],["id","Page-1","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd",0,"sketch","type","MSPage"],["d","M353,9 L626.664028,170 L626.664028,487 L353,642 L79.3359724,487 L79.3359724,170 L353,9 Z","id","Polygon-1","stroke","#007FB2","stroke-width","6",0,"sketch","type","MSShapeGroup"],["d","M78.5,529 L147,569.186414 L147,648.311216 L78.5,687 L10,648.311216 L10,569.186414 L78.5,529 Z","id","Polygon-2","stroke","#EF4A5B","stroke-width","6",0,"sketch","type","MSShapeGroup"],["d","M773,186 L827,217.538705 L827,279.636651 L773,310 L719,279.636651 L719,217.538705 L773,186 Z","id","Polygon-3","stroke","#795D9C","stroke-width","6",0,"sketch","type","MSShapeGroup"],["d","M639,529 L773,607.846761 L773,763.091627 L639,839 L505,763.091627 L505,607.846761 L639,529 Z","id","Polygon-4","stroke","#F2773F","stroke-width","6",0,"sketch","type","MSShapeGroup"],["d","M281,801 L383,861.025276 L383,979.21169 L281,1037 L179,979.21169 L179,861.025276 L281,801 Z","id","Polygon-5","stroke","#36B455","stroke-width","6",0,"sketch","type","MSShapeGroup"],[1,"message-box"],[1,"buttons-con"],[1,"action-link-wrap"],["routerLink","/create",1,"link-button","link-back-button"],[1,"link-button"]],template:function(e,i){1&e&&(Ga(),N(0,"svg",0),N(1,"g",1),Ne(2,"path",2),Ne(3,"path",3),Ne(4,"path",4),Ne(5,"path",5),Ne(6,"path",6),B(),B(),ig(),N(7,"div",7),N(8,"h1"),tt(9,"Data twin"),B(),N(10,"div",8),N(11,"div",9),N(12,"a",10),tt(13,"Get Started"),B(),N(14,"a",11),tt(15,"Learn more about it"),B(),B(),B(),B())},directives:[I_],styles:["[_nghost-%COMP%]{background-color:#5a5c6c}svg[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;margin-top:-250px;margin-left:-400px}.message-box[_ngcontent-%COMP%]{height:200px;width:380px;position:absolute;top:50%;left:50%;margin-top:-100px;margin-left:50px;color:#fff;font-family:Roboto;font-weight:300}.message-box[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px;line-height:46px;margin-bottom:40px}.buttons-con[_ngcontent-%COMP%]   .action-link-wrap[_ngcontent-%COMP%]{margin-top:40px}.buttons-con[_ngcontent-%COMP%]   .action-link-wrap[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:#68c950;padding:8px 25px;border-radius:4px;color:#fff;font-weight:700;font-size:14px;transition:all .3s linear;cursor:pointer;text-decoration:none;margin-right:10px}.buttons-con[_ngcontent-%COMP%]   .action-link-wrap[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#5A5C6C;color:#fff}#Polygon-1[_ngcontent-%COMP%], #Polygon-2[_ngcontent-%COMP%], #Polygon-3[_ngcontent-%COMP%], #Polygon-4[_ngcontent-%COMP%], #Polygon-4[_ngcontent-%COMP%], #Polygon-5[_ngcontent-%COMP%]{animation:float 1s infinite ease-in-out alternate}#Polygon-2[_ngcontent-%COMP%]{animation-delay:.2s}#Polygon-3[_ngcontent-%COMP%]{animation-delay:.4s}#Polygon-4[_ngcontent-%COMP%]{animation-delay:.6s}#Polygon-5[_ngcontent-%COMP%]{animation-delay:.8s}@keyframes float{to{transform:translateY(20px)}}@media (max-width: 450px){svg[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;margin-top:-250px;margin-left:-190px}.message-box[_ngcontent-%COMP%]{top:50%;left:50%;margin-top:-100px;margin-left:-190px;text-align:center}}"]}),n})();function $Me(n,t){if(1&n){const e=Us();N(0,"div",7),N(1,"mat-card",8),Ae("click",function(){const r=si(e).$implicit;return Je().navigateTo(r)}),N(2,"mat-card-header"),N(3,"mat-card-title"),tt(4),B(),B(),Ne(5,"img",9),B(),B()}if(2&n){const e=t.$implicit;te("fxFlex","25%"),Q(4),Ui(e.name),Q(1),te("src",e.imageUrl,Kh)}}const qMe=[{path:"",component:WMe},{path:"create",component:(()=>{class n{constructor(e){this.router=e,this.machineList=[{id:"kuka",name:"KukaRobot",imageUrl:"./assets/images/kuka.png",modelUrl:"./assets/3dmodels/kuka.glb",modelPosition:new D(0,-1,0),modelScale:new D(.01,.01,.01)},{id:"turbo",name:"Turbofan Engine",imageUrl:"./assets/images/turbo.png",modelUrl:"./assets/3dmodels/turbo.glb",modelPosition:new D(0,0,0),modelScale:new D(.5,.5,.5)}],this.filteredList=[]}ngOnInit(){this.filteredList=this.machineList}navigateTo(e){localStorage.setItem(e.id,JSON.stringify(e)),this.router.navigateByUrl(`/create/${e.id}`)}search(e){const i=e.target.value;this.filteredList=this.machineList.filter(s=>{if(s.name.toLowerCase().includes(i))return s})}}return n.\u0275fac=function(e){return new(e||n)(v(vs))},n.\u0275cmp=We({type:n,selectors:[["app-machine-selection"]],decls:7,vars:1,consts:[[1,"machine-select"],[1,"search-container"],["type","text","id","search-bar","placeholder","Search...",3,"keyup"],["href","#"],["src","http://www.endlessicons.com/wp-content/uploads/2012/12/search-icon.png",1,"search-icon"],["fxLayout","row wrap","fxLayoutGap","16px grid"],["fxFlex.xs","100%","fxFlex.sm","33%",3,"fxFlex",4,"ngFor","ngForOf"],["fxFlex.xs","100%","fxFlex.sm","33%",3,"fxFlex"],[1,"card",3,"click"],["matCardImage","",1,"card-image",3,"src"]],template:function(e,i){1&e&&(N(0,"section",0),N(1,"form",1),N(2,"input",2),Ae("keyup",function(r){return i.search(r)}),B(),N(3,"a",3),Ne(4,"img",4),B(),B(),N(5,"div",5),Ye(6,$Me,6,3,"div",6),B(),B()),2&e&&(Q(6),te("ngForOf",i.filteredList))},directives:[U_,Bf,wo,Pp,OS,Xl,Op,y5,v5,g5,_5],styles:[".card[_ngcontent-%COMP%]{cursor:pointer;box-shadow:8px 14px 38px #272c310f,1px 3px 8px #272c3108;transition:all .5s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-1px) scale(1.03)}.container[_ngcontent-%COMP%]{width:100%}.search-container[_ngcontent-%COMP%]{width:490px;display:block;margin:0 auto}input#search-bar[_ngcontent-%COMP%]{margin:20px auto;width:100%;height:45px;padding:0 20px;font-size:1rem;border:1px solid #D0CFCE;outline:none}input#search-bar[_ngcontent-%COMP%]:focus{border:1px solid #008ABF;transition:.35s ease;color:#008abf}input#search-bar[_ngcontent-%COMP%]:focus::-webkit-input-placeholder{-webkit-transition:opacity .45s ease;transition:opacity .45s ease;opacity:0}input#search-bar[_ngcontent-%COMP%]:focus::-moz-placeholder{-moz-transition:opacity .45s ease;transition:opacity .45s ease;opacity:0}input#search-bar[_ngcontent-%COMP%]:focus:-ms-placeholder{-ms-transition:opacity .45s ease;transition:opacity .45s ease;opacity:0}.search-icon[_ngcontent-%COMP%]{position:relative;float:right;width:75px;height:75px;top:-80px;right:-45px}.card-image[_ngcontent-%COMP%]{height:285px}"]}),n})()},{path:"create/:id",component:qfe},{path:"digital-twin",component:jMe},{path:"digital-twin/:id",component:BMe}];let YMe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[BL.forRoot(qMe)],BL]}),n})();function XE(n){return Et(()=>n)}const x5=["*"],XMe=["content"];function KMe(n,t){if(1&n){const e=Us();N(0,"div",2),Ae("click",function(){return si(e),Je()._onBackdropClicked()}),B()}2&n&&Ke("mat-drawer-shown",Je()._isShowingBackdrop())}function QMe(n,t){1&n&&(N(0,"mat-drawer-content"),rt(1,2),B())}const ZMe=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],JMe=["mat-drawer","mat-drawer-content","*"],eCe={transformDrawer:Jn("transform",[Ot("open, open-instant",He({transform:"none",visibility:"visible"})),Ot("void",He({"box-shadow":"none",visibility:"hidden"})),Wt("void => open-instant",Qt("0ms")),Wt("void <=> open, open-instant => void",Qt("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},tCe=new K("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function nCe(){return!1}}),w5=new K("MAT_DRAWER_CONTAINER");let KE=(()=>{class n extends OD{constructor(e,i,s,r,o){super(s,r,o),this._changeDetectorRef=e,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(e){return new(e||n)(v(At),v(kt(()=>C5)),v(ue),v(PD),v(Xe))},n.\u0275cmp=We({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,i){2&e&&ts("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[Me([{provide:OD,useExisting:n}]),Y],ngContentSelectors:x5,decls:1,vars:0,template:function(e,i){1&e&&(dn(),rt(0))},encapsulation:2,changeDetection:0}),n})(),M5=(()=>{class n{constructor(e,i,s,r,o,a,l,c){this._elementRef=e,this._focusTrapFactory=i,this._focusMonitor=s,this._platform=r,this._ngZone=o,this._interactivityChecker=a,this._doc=l,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ge,this._animationEnd=new ge,this._animationState="void",this.openedChange=new he(!0),this._openedStream=this.openedChange.pipe(un(d=>d),Et(()=>{})),this.openedStart=this._animationStarted.pipe(un(d=>d.fromState!==d.toState&&0===d.toState.indexOf("open")),XE(void 0)),this._closedStream=this.openedChange.pipe(un(d=>!d),Et(()=>{})),this.closedStart=this._animationStarted.pipe(un(d=>d.fromState!==d.toState&&"void"===d.toState),XE(void 0)),this._destroyed=new ge,this.onPositionChanged=new he,this._modeChanged=new ge,this.openedChange.subscribe(d=>{d?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Mr(this._elementRef.nativeElement,"keydown").pipe(un(d=>27===d.keyCode&&!this.disableClose&&!Bi(d)),st(this._destroyed)).subscribe(d=>this._ngZone.run(()=>{this.close(),d.stopPropagation(),d.preventDefault()}))}),this._animationEnd.pipe(th((d,u)=>d.fromState===u.fromState&&d.toState===u.toState)).subscribe(d=>{const{fromState:u,toState:h}=d;(0===h.indexOf("open")&&"void"===u||"void"===h&&0===u.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=ve(e)}get autoFocus(){const e=this._autoFocus;return null==e?"side"===this.mode?"dialog":"first-tabbable":e}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=ve(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(ve(e))}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const s=()=>{e.removeEventListener("blur",s),e.removeEventListener("mousedown",s),e.removeAttribute("tabindex")};e.addEventListener("blur",s),e.addEventListener("mousedown",s)})),e.focus(i)}_focusByCssSelector(e,i){let s=this._elementRef.nativeElement.querySelector(e);s&&this._forceFocus(s,i)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var e;this._focusTrap&&this._focusTrap.destroy(),null===(e=this._anchor)||void 0===e||e.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,i){e&&i&&(this._openedVia=i);const s=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),s}_setOpen(e,i,s){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(s)),this._updateFocusTrapState(),new Promise(r=>{this.openedChange.pipe(yn(1)).subscribe(o=>r(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(e){const i=this._elementRef.nativeElement,s=i.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),s.insertBefore(this._anchor,i)),s.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(GV),v(Io),v(Ni),v(Xe),v(HV),v(it,8),v(w5,8))},n.\u0275cmp=We({type:n,selectors:[["mat-drawer"]],viewQuery:function(e,i){if(1&e&&dt(XMe,5),2&e){let s;fe(s=pe())&&(i._content=s.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,i){1&e&&Ig("@transform.start",function(r){return i._animationStarted.next(r)})("@transform.done",function(r){return i._animationEnd.next(r)}),2&e&&(Ge("align",null),Og("@transform",i._animationState),Ke("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:x5,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,i){1&e&&(dn(),N(0,"div",0,1),rt(2),B())},directives:[OD],encapsulation:2,data:{animation:[eCe.transformDrawer]},changeDetection:0}),n})(),C5=(()=>{class n{constructor(e,i,s,r,o,a=!1,l){this._dir=e,this._element=i,this._ngZone=s,this._changeDetectorRef=r,this._animationMode=l,this._drawers=new Ya,this.backdropClick=new he,this._destroyed=new ge,this._doCheckSubject=new ge,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ge,e&&e.change.pipe(st(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(st(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=ve(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:ve(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(ki(this._allDrawers),st(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(ki(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(BS(10),st(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const s=this._left._getWidth();e+=s,i-=s}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const s=this._right._getWidth();i+=s,e-=s}e=e||null,i=i||null,(e!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:e,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(un(i=>i.fromState!==i.toState),st(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(st(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe(st(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(yn(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(st(wn(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const i=this._element.nativeElement.classList,s="mat-drawer-container-has-open";e?i.add(s):i.remove(s)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return n.\u0275fac=function(e){return new(e||n)(v(Qn,8),v(ue),v(Xe),v(At),v(io),v(tCe),v(ei,8))},n.\u0275cmp=We({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(e,i,s){if(1&e&&(ht(s,KE,5),ht(s,M5,5)),2&e){let r;fe(r=pe())&&(i._content=r.first),fe(r=pe())&&(i._allDrawers=r)}},viewQuery:function(e,i){if(1&e&&dt(KE,5),2&e){let s;fe(s=pe())&&(i._userContent=s.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,i){2&e&&Ke("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Me([{provide:w5,useExisting:n}])],ngContentSelectors:JMe,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,i){1&e&&(dn(ZMe),Ye(0,KMe,1,2,"div",0),rt(1),rt(2,1),Ye(3,QMe,2,0,"mat-drawer-content",1)),2&e&&(te("ngIf",i.hasBackdrop),Q(3),te("ngIf",!i._content))},directives:[KE,dr],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),QE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[gi,Ue,Fo],Fo,Ue]}),n})();class S5{}class D5{}class Pa{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const s=e.slice(0,i),r=s.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(s,r),this.headers.has(r)?this.headers.get(r).push(o):this.headers.set(r,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const s=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(s,i),this.maybeSetNormalizedName(e,s))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Pa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Pa;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Pa?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const s=("a"===t.op?this.headers.get(e):void 0)||[];s.push(...i),this.headers.set(e,s);break;case"d":const r=t.value;if(r){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===r.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class sCe{encodeKey(t){return E5(t)}encodeValue(t){return E5(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const oCe=/%(\d[a-f0-9])/gi,aCe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function E5(n){return encodeURIComponent(n).replace(oCe,(t,e)=>{var i;return null!==(i=aCe[e])&&void 0!==i?i:t})}function A5(n){return`${n}`}class kl{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new sCe,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function rCe(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const r=s.indexOf("="),[o,a]=-1==r?[t.decodeKey(s),""]:[t.decodeKey(s.slice(0,r)),t.decodeValue(s.slice(r+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e];this.map.set(e,Array.isArray(i)?i:[i])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const s=t[i];Array.isArray(s)?s.forEach(r=>{e.push({param:i,value:r,op:"a"})}):e.push({param:i,value:s,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new kl({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(A5(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const s=i.indexOf(A5(t.value));-1!==s&&i.splice(s,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class lCe{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function T5(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function k5(n){return"undefined"!=typeof Blob&&n instanceof Blob}function R5(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Rm{constructor(t,e,i,s){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function cCe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==i?i:null,r=s):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new Pa),this.context||(this.context=new lCe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new kl,this.urlWithParams=e}serializeBody(){return null===this.body?null:T5(this.body)||k5(this.body)||R5(this.body)||function dCe(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof kl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||R5(this.body)?null:k5(this.body)?this.body.type||null:T5(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof kl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const i=t.method||this.method,s=t.url||this.url,r=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let c=t.headers||this.headers,d=t.params||this.params;const u=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(c=Object.keys(t.setHeaders).reduce((h,f)=>h.set(f,t.setHeaders[f]),c)),t.setParams&&(d=Object.keys(t.setParams).reduce((h,f)=>h.set(f,t.setParams[f]),d)),new Rm(i,s,o,{params:d,headers:c,context:u,reportProgress:l,responseType:r,withCredentials:a})}}var wi=(()=>((wi=wi||{})[wi.Sent=0]="Sent",wi[wi.UploadProgress=1]="UploadProgress",wi[wi.ResponseHeader=2]="ResponseHeader",wi[wi.DownloadProgress=3]="DownloadProgress",wi[wi.Response=4]="Response",wi[wi.User=5]="User",wi))();class ZE{constructor(t,e=200,i="OK"){this.headers=t.headers||new Pa,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class JE extends ZE{constructor(t={}){super(t),this.type=wi.ResponseHeader}clone(t={}){return new JE({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class jb extends ZE{constructor(t={}){super(t),this.type=wi.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new jb({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class I5 extends ZE{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function eA(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let tA=(()=>{class n{constructor(e){this.handler=e}request(e,i,s={}){let r;if(e instanceof Rm)r=e;else{let l,c;l=s.headers instanceof Pa?s.headers:new Pa(s.headers),s.params&&(c=s.params instanceof kl?s.params:new kl({fromObject:s.params})),r=new Rm(e,i,void 0!==s.body?s.body:null,{headers:l,context:s.context,params:c,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const o=Qe(r).pipe(tu(l=>this.handler.handle(l)));if(e instanceof Rm||"events"===s.observe)return o;const a=o.pipe(un(l=>l instanceof jb));switch(s.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(Et(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Et(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Et(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Et(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new kl).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,s={}){return this.request("PATCH",e,eA(s,i))}post(e,i,s={}){return this.request("POST",e,eA(s,i))}put(e,i,s={}){return this.request("PUT",e,eA(s,i))}}return n.\u0275fac=function(e){return new(e||n)(j(S5))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();class P5{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const O5=new K("HTTP_INTERCEPTORS");let uCe=(()=>{class n{intercept(e,i){return i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const hCe=/^\)\]\}',?\n/;let L5=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Jt(i=>{const s=this.xhrFactory.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((f,p)=>s.setRequestHeader(f,p.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const f=e.detectContentTypeHeader();null!==f&&s.setRequestHeader("Content-Type",f)}if(e.responseType){const f=e.responseType.toLowerCase();s.responseType="json"!==f?f:"text"}const r=e.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=1223===s.status?204:s.status,p=s.statusText||"OK",m=new Pa(s.getAllResponseHeaders()),g=function fCe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||e.url;return o=new JE({headers:m,status:f,statusText:p,url:g}),o},l=()=>{let{headers:f,status:p,statusText:m,url:g}=a(),_=null;204!==p&&(_=void 0===s.response?s.responseText:s.response),0===p&&(p=_?200:0);let y=p>=200&&p<300;if("json"===e.responseType&&"string"==typeof _){const b=_;_=_.replace(hCe,"");try{_=""!==_?JSON.parse(_):null}catch(x){_=b,y&&(y=!1,_={error:x,text:_})}}y?(i.next(new jb({body:_,headers:f,status:p,statusText:m,url:g||void 0})),i.complete()):i.error(new I5({error:_,headers:f,status:p,statusText:m,url:g||void 0}))},c=f=>{const{url:p}=a(),m=new I5({error:f,status:s.status||0,statusText:s.statusText||"Unknown Error",url:p||void 0});i.error(m)};let d=!1;const u=f=>{d||(i.next(a()),d=!0);let p={type:wi.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===e.responseType&&!!s.responseText&&(p.partialText=s.responseText),i.next(p)},h=f=>{let p={type:wi.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),i.next(p)};return s.addEventListener("load",l),s.addEventListener("error",c),s.addEventListener("timeout",c),s.addEventListener("abort",c),e.reportProgress&&(s.addEventListener("progress",u),null!==r&&s.upload&&s.upload.addEventListener("progress",h)),s.send(r),i.next({type:wi.Sent}),()=>{s.removeEventListener("error",c),s.removeEventListener("abort",c),s.removeEventListener("load",l),s.removeEventListener("timeout",c),e.reportProgress&&(s.removeEventListener("progress",u),null!==r&&s.upload&&s.upload.removeEventListener("progress",h)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(j(vO))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})();const nA=new K("XSRF_COOKIE_NAME"),iA=new K("XSRF_HEADER_NAME");class F5{}let pCe=(()=>{class n{constructor(e,i,s){this.doc=e,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=dO(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(j(it),j(Gs),j(nA))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})(),sA=(()=>{class n{constructor(e,i){this.tokenService=e,this.headerName=i}intercept(e,i){const s=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||s.startsWith("http://")||s.startsWith("https://"))return i.handle(e);const r=this.tokenService.getToken();return null!==r&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,r)})),i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(j(F5),j(iA))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})(),mCe=(()=>{class n{constructor(e,i){this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=this.injector.get(O5,[]);this.chain=i.reduceRight((s,r)=>new P5(s,r),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(j(D5),j(zn))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})(),gCe=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:sA,useClass:uCe}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:nA,useValue:e.cookieName}:[],e.headerName?{provide:iA,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[sA,{provide:O5,useExisting:sA,multi:!0},{provide:F5,useClass:pCe},{provide:nA,useValue:"XSRF-TOKEN"},{provide:iA,useValue:"X-XSRF-TOKEN"}]}),n})(),_Ce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[tA,{provide:S5,useClass:mCe},L5,{provide:D5,useExisting:L5}],imports:[[gCe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const yCe=["*"];let Wb;function Im(n){var t;return(null===(t=function vCe(){if(void 0===Wb&&(Wb=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(Wb=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Wb}())||void 0===t?void 0:t.createHTML(n))||n}function N5(n){return Error(`Unable to find icon with the name "${n}"`)}function B5(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function V5(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class td{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let $b=(()=>{class n{constructor(e,i,s,r){this._httpClient=e,this._sanitizer=i,this._errorHandler=r,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=s}addSvgIcon(e,i,s){return this.addSvgIconInNamespace("",e,i,s)}addSvgIconLiteral(e,i,s){return this.addSvgIconLiteralInNamespace("",e,i,s)}addSvgIconInNamespace(e,i,s,r){return this._addSvgIconConfig(e,i,new td(s,null,r))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,s,r){const o=this._sanitizer.sanitize(tn.HTML,s);if(!o)throw V5(s);const a=Im(o);return this._addSvgIconConfig(e,i,new td("",a,r))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,s){return this._addSvgIconSetConfig(e,new td(i,null,s))}addSvgIconSetLiteralInNamespace(e,i,s){const r=this._sanitizer.sanitize(tn.HTML,i);if(!r)throw V5(i);const o=Im(r);return this._addSvgIconSetConfig(e,new td("",o,s))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(tn.RESOURCE_URL,e);if(!i)throw B5(e);const s=this._cachedIconsByUrl.get(i);return s?Qe(qb(s)):this._loadSvgIconFromConfig(new td(e,null)).pipe(Ri(r=>this._cachedIconsByUrl.set(i,r)),Et(r=>qb(r)))}getNamedSvgIcon(e,i=""){const s=H5(i,e);let r=this._svgIconConfigs.get(s);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(i,e),r)return this._svgIconConfigs.set(s,r),this._getSvgFromConfig(r);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(e,o):function iCe(n,t){const e=bt(n)?n:()=>n,i=s=>s.error(e());return new Jt(t?s=>t.schedule(i,0,s):i)}(N5(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Qe(qb(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Et(i=>qb(i)))}_getSvgFromIconSetConfigs(e,i){const s=this._extractIconWithNameFromAnySet(e,i);return s?Qe(s):zL(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(sa(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(tn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Qe(null)})))).pipe(Et(()=>{const o=this._extractIconWithNameFromAnySet(e,i);if(!o)throw N5(e);return o}))}_extractIconWithNameFromAnySet(e,i){for(let s=i.length-1;s>=0;s--){const r=i[s];if(r.svgText&&r.svgText.toString().indexOf(e)>-1){const o=this._svgElementFromConfig(r),a=this._extractSvgIconFromSet(o,e,r.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ri(i=>e.svgText=i),Et(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Qe(null):this._fetchIcon(e).pipe(Ri(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,s){const r=e.querySelector(`[id="${i}"]`);if(!r)return null;const o=r.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,s);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),s);const a=this._svgElementFromString(Im("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,s)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const s=i.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(e){const i=this._svgElementFromString(Im("<svg></svg>")),s=e.attributes;for(let r=0;r<s.length;r++){const{name:o,value:a}=s[r];"id"!==o&&i.setAttribute(o,a)}for(let r=0;r<e.childNodes.length;r++)e.childNodes[r].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[r].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){var i;const{url:s,options:r}=e,o=null!==(i=null==r?void 0:r.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function bCe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==s)throw Error(`Cannot fetch icon from URL "${s}".`);const a=this._sanitizer.sanitize(tn.RESOURCE_URL,s);if(!a)throw B5(s);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(Et(d=>Im(d)),zO(()=>this._inProgressUrlFetches.delete(a)),pT());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(e,i,s){return this._svgIconConfigs.set(H5(e,i),s),this}_addSvgIconSetConfig(e,i){const s=this._iconSetConfigs.get(e);return s?s.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let s=0;s<this._resolvers.length;s++){const r=this._resolvers[s](i,e);if(r)return wCe(r)?new td(r.url,null,r.options):new td(r,null)}}}return n.\u0275fac=function(e){return new(e||n)(j(tA,8),j(h_),j(it,8),j(Ko))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qb(n){return n.cloneNode(!0)}function H5(n,t){return n+":"+t}function wCe(n){return!(!n.url||!n.options)}const MCe=Oo(class{constructor(n){this._elementRef=n}}),CCe=new K("mat-icon-location",{providedIn:"root",factory:function SCe(){const n=xd(it),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),z5=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],DCe=z5.map(n=>`[${n}]`).join(", "),ECe=/^url\(['"]?#(.*?)['"]?\)$/;let ACe=(()=>{class n extends MCe{constructor(e,i,s,r,o){super(e),this._iconRegistry=i,this._location=r,this._errorHandler=o,this._inline=!1,this._currentIconFetch=yt.EMPTY,s||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=ve(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const s=e.childNodes[i];(1!==s.nodeType||"svg"===s.nodeName.toLowerCase())&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),i&&e.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((s,r)=>{s.forEach(o=>{r.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(DCe),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<i.length;r++)z5.forEach(o=>{const a=i[r],l=a.getAttribute(o),c=l?l.match(ECe):null;if(c){let d=s.get(a);d||(d=[],s.set(a,d)),d.push({name:o,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,s]=this._splitIconName(e);i&&(this._svgNamespace=i),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,i).pipe(yn(1)).subscribe(r=>this._setSvgElement(r),r=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${s}! ${r.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v($b),fi("aria-hidden"),v(CCe),v(Ko))},n.\u0275cmp=We({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,i){2&e&&(Ge("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),Ke("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Y],ngContentSelectors:yCe,decls:1,vars:0,template:function(e,i){1&e&&(dn(),rt(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),Yb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Ue],Ue]}),n})(),rA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Ue],Ue]}),n})();const U5=["*"],kCe=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],RCe=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],FCe=Sa(br(class{})),NCe=br(class{}),BCe=new K("MatList"),G5=new K("MatNavList");let VCe=(()=>{class n extends FCe{constructor(){super(...arguments),this._stateChanges=new ge}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=xe(n)))(i||n)}}(),n.\u0275cmp=We({type:n,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[Me([{provide:G5,useExisting:n}]),Y,Gt],ngContentSelectors:U5,decls:1,vars:0,template:function(e,i){1&e&&(dn(),rt(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),n})(),j5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),oA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=G({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),HCe=(()=>{class n extends NCe{constructor(e,i,s,r){super(),this._element=e,this._isInteractiveList=!1,this._destroyed=new ge,this._disabled=!1,this._isInteractiveList=!!(s||r&&"action-list"===r._getListType()),this._list=s||r;const o=this._getHostElement();"button"===o.nodeName.toLowerCase()&&!o.hasAttribute("type")&&o.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(st(this._destroyed)).subscribe(()=>{i.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(e){this._disabled=ve(e)}ngAfterContentInit(){!function Y3(n,t,e="mat"){n.changes.pipe(ki(n)).subscribe(({length:i})=>{Gp(t,`${e}-2-line`,!1),Gp(t,`${e}-3-line`,!1),Gp(t,`${e}-multi-line`,!1),2===i||3===i?Gp(t,`${e}-${i}-line`,!0):i>3&&Gp(t,`${e}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(v(ue),v(At),v(G5,8),v(BCe,8))},n.\u0275cmp=We({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(e,i,s){if(1&e&&(ht(s,j5,5),ht(s,oA,5),ht(s,AD,5)),2&e){let r;fe(r=pe())&&(i._avatar=r.first),fe(r=pe())&&(i._icon=r.first),fe(r=pe())&&(i._lines=r)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(e,i){2&e&&Ke("mat-list-item-disabled",i.disabled)("mat-list-item-avatar",i._avatar||i._icon)("mat-list-item-with-avatar",i._avatar||i._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[Y],ngContentSelectors:RCe,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(e,i){1&e&&(dn(kCe),N(0,"span",0),Ne(1,"span",1),rt(2),N(3,"span",2),rt(4,1),B(),rt(5,2),B()),2&e&&(Q(1),te("matRippleTrigger",i._getHostElement())("matRippleDisabled",i._isRippleDisabled()))},directives:[xr],encapsulation:2,changeDetection:0}),n})(),aA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[qv,wr,Ue,kD,gi],qv,Ue,kD,rA]}),n})();function $Ce(n,t){1&n&&(N(0,"h4",9),tt(1,"Home"),B())}function qCe(n,t){1&n&&(N(0,"h4",9),tt(1,"Select Machine"),B())}function YCe(n,t){1&n&&(N(0,"h4",9),tt(1,"Your Digital Twin"),B())}let XCe=(()=>{class n{constructor(){this.title="DigitalTwin",this.isExpanded=!0}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=We({type:n,selectors:[["app-root"]],decls:21,vars:6,consts:[["autosize","",1,"container","mat-typography"],["mode","side","disableClose","true","opened","true",1,"drawer"],["drawer",""],["mat-mini-fab","","color","warn",2,"margin","10px",3,"click"],["aria-label","Menu"],[3,"routerLink"],["mat-list-icon","",1,"nav-icon"],["mat-line","","class","nav-text",4,"ngIf"],[1,"sidenav-content"],["mat-line","",1,"nav-text"]],template:function(e,i){1&e&&(N(0,"mat-drawer-container",0),N(1,"mat-drawer",1,2),N(3,"button",3),Ae("click",function(){return i.isExpanded=!i.isExpanded}),N(4,"mat-icon",4),tt(5,"menu"),B(),B(),N(6,"mat-nav-list"),N(7,"mat-list-item",5),N(8,"mat-icon",6),tt(9,"home"),B(),Ye(10,$Ce,2,0,"h4",7),B(),N(11,"mat-list-item",5),N(12,"mat-icon",6),tt(13,"build"),B(),Ye(14,qCe,2,0,"h4",7),B(),N(15,"mat-list-item",5),N(16,"mat-icon",6),tt(17,"build"),B(),Ye(18,YCe,2,0,"h4",7),B(),B(),B(),N(19,"div",8),Ne(20,"router-outlet"),B(),B()),2&e&&(Q(7),te("routerLink",""),Q(3),te("ngIf",i.isExpanded),Q(1),te("routerLink","create"),Q(3),te("ngIf",i.isExpanded),Q(1),te("routerLink","digital-twin"),Q(3),te("ngIf",i.isExpanded))},directives:[C5,M5,lh,ACe,VCe,HCe,R_,oA,dr,AD,MM],styles:[".container[_ngcontent-%COMP%]{height:100vh;background:#5584AC}.container[_ngcontent-%COMP%]   .drawer[_ngcontent-%COMP%]{background:#22577E;color:#fff}.container[_ngcontent-%COMP%]   .sidenav-content[_ngcontent-%COMP%]{padding-left:10px;height:100%}.nav-icon[_ngcontent-%COMP%], .nav-text[_ngcontent-%COMP%]{color:#fff}.mat-mini-fab.mat-warn[_ngcontent-%COMP%]{background-color:#5584ac}"]}),n})(),Q5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[TS]]}),n})(),o4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[TS]]}),n})(),LDe=(()=>{class n{constructor(e,i){eu(i)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,i=[]){return{ngModule:n,providers:e.serverLoaded?[{provide:eo,useValue:Object.assign(Object.assign({},kS),e)},{provide:RS,useValue:i,multi:!0},{provide:Xu,useValue:!0}]:[{provide:eo,useValue:Object.assign(Object.assign({},kS),e)},{provide:RS,useValue:i,multi:!0}]}}}return n.\u0275fac=function(e){return new(e||n)(j(Xu),j(Gs))},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[AV,Q5,o4],AV,Q5,o4]}),n})();const zDe={provide:new K("mat-autocomplete-scroll-strategy"),deps:[No],useFactory:function HDe(n){return()=>n.scrollStrategies.reposition()}};let c4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[zDe],imports:[[Gc,Yv,Ue,gi],Fo,Yv,Ue]}),n})(),h4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({}),n})(),f4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[wr,Ue,Fp,h4],Ue,h4]}),n})(),_4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[wr,Ue],Ue]}),n})(),b4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[gi,Ue],Ue]}),n})(),x4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({}),n})(),w4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[x4,wr,Ue,Fp],x4,Ue]}),n})();const HEe={provide:new K("mat-menu-scroll-strategy"),deps:[No],useFactory:function VEe(n){return()=>n.scrollStrategies.reposition()}};let C4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[HEe],imports:[[gi,Ue,wr,Gc],Fo,Ue]}),n})(),dA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Ue],Ue]}),n})(),D4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[qv,Ue],qv,Ue]}),n})(),GEe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Pc]]}),n})(),uA=(()=>{class n{constructor(){this.changes=new ge,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eAe={provide:uA,deps:[[new Ei,new Ns,uA]],useFactory:function JEe(n){return n||new uA}};let A4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[eAe,Cl],imports:[[Ue,gi,zc,jc,GEe,Yb,wr],Ue]}),n})(),rAe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({}),n})(),T4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[rAe,Ue],Ue]}),n})(),O4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Ue,wr],Ue]}),n})(),L4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Ev,Ue],Ue]}),n})();const V4=new K("mat-chips-default-options");let H4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[Cl,{provide:V4,useValue:{separatorKeyCodes:[13]}}],imports:[[Ue]]}),n})();function RAe(n,t){if(1&n&&(Ga(),Ne(0,"circle",4)),2&n){const e=Je(),i=zs(1);ts("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),Ge("r",e._getCircleRadius())}}function IAe(n,t){if(1&n&&(Ga(),Ne(0,"circle",4)),2&n){const e=Je(),i=zs(1);ts("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),Ge("r",e._getCircleRadius())}}const OAe=Oo(class{constructor(n){this._elementRef=n}},"primary"),LAe=new K("mat-progress-spinner-default-options",{providedIn:"root",factory:function FAe(){return{diameter:100}}});class Rl extends OAe{constructor(t,e,i,s,r,o,a,l){super(t),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=yt.EMPTY,this.mode="determinate";const c=Rl._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),c.has(i.head)||c.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===s&&!!r&&!r._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),r&&(r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth)),e.isBrowser&&e.SAFARI&&a&&o&&l&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&l.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=$i(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=$i(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,$i(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=xv(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){var e;const i=50*(null!==(e=t.currentScale)&&void 0!==e?e:1);return`${i}% ${i}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,i=Rl._diameters;let s=i.get(t);if(!s||!s.has(e)){const r=this._document.createElement("style");r.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),r.textContent=this._getAnimationText(),t.appendChild(r),s||(s=new Set,i.set(t,s)),s.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Rl._diameters=new WeakMap,Rl.\u0275fac=function(t){return new(t||Rl)(v(ue),v(Ni),v(it,8),v(ei,8),v(LAe),v(At),v(io),v(Xe))},Rl.\u0275cmp=We({type:Rl,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(Ge("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),ts("width",e.diameter,"px")("height",e.diameter,"px"),Ke("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[Y],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(Ga(),N(0,"svg",0,1),Ye(2,RAe,1,11,"circle",2),Ye(3,IAe,1,9,"circle",3),B()),2&t&&(ts("width",e.diameter,"px")("height",e.diameter,"px"),te("ngSwitch","indeterminate"===e.mode),Ge("viewBox",e._getViewBox()),Q(2),te("ngSwitchCase",!0),Q(1),te("ngSwitchCase",!1))},directives:[Kl,Mf],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let z4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Ue,gi],Ue]}),n})(),U4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[gi,Ue],Ue]}),n})(),G4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Gc,Ue,zc],Ue]}),n})(),j4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[Gc,zc,gi,jc,Ue],Ue]}),n})();const WAe={provide:new K("mat-tooltip-scroll-strategy"),deps:[No],useFactory:function jAe(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let vA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[WAe],imports:[[Ev,gi,Gc,Ue],Ue,Fo]}),n})(),bA=(()=>{class n{constructor(){this.changes=new ge,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,i,s)=>{if(0==s||0==i)return`0 of ${s}`;const r=e*i;return`${r+1} \u2013 ${r<(s=Math.max(s,0))?Math.min(r+i,s):r+i} of ${s}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QAe={provide:bA,deps:[[new Ei,new Ns,bA]],useFactory:function KAe(n){return n||new bA}};let W4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[QAe],imports:[[gi,jc,HD,vA,Ue]]}),n})(),xA=(()=>{class n{constructor(){this.changes=new ge}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const JAe={provide:xA,deps:[[new Ei,new Ns,xA]],useFactory:function ZAe(n){return n||new xA}};let $4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[JAe],imports:[[gi,Ue]]}),n})(),fTe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[LD]]}),n})(),ij=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[fTe,Ue],Ue]}),n})();function IA(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){const s=t[i];s?n.setProperty(i,s,(null==e?void 0:e.has(i))?"important":""):n.removeProperty(i)}return n}function Ch(n,t){const e=t?"":"none";IA(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function sj(n,t,e){IA(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function ox(n,t){return t&&"none"!=t?n+" "+t:n}function rj(n){const t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function PA(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}function OA(n){const t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function LA(n,t,e){const{top:i,bottom:s,left:r,right:o}=n;return e>=i&&e<=s&&t>=r&&t<=o}function Nm(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function oj(n,t,e,i){const{top:s,right:r,bottom:o,left:a,width:l,height:c}=n,d=l*t,u=c*t;return i>s-u&&i<o+u&&e>a-d&&e<r+d}class aj{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:OA(e)})})}handleScroll(t){const e=_r(t),i=this.positions.get(e);if(!i)return null;const s=i.scrollPosition;let r,o;if(e===this._document){const c=this.getViewportScrollPosition();r=c.top,o=c.left}else r=e.scrollTop,o=e.scrollLeft;const a=s.top-r,l=s.left-o;return this.positions.forEach((c,d)=>{c.clientRect&&e!==d&&e.contains(d)&&Nm(c.clientRect,a,l)}),s.top=r,s.left=o,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function lj(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let s=0;s<e.length;s++)e[s].removeAttribute("id");return"canvas"===i?uj(n,t):("input"===i||"select"===i||"textarea"===i)&&dj(n,t),cj("canvas",n,t,uj),cj("input, textarea, select",n,t,dj),t}function cj(n,t,e,i){const s=t.querySelectorAll(n);if(s.length){const r=e.querySelectorAll(n);for(let o=0;o<s.length;o++)i(s[o],r[o])}}let PTe=0;function dj(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${PTe++}`)}function uj(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch(i){}}const hj=to({passive:!0}),ax=to({passive:!1}),FA=new Set(["position"]);class LTe{constructor(t,e,i,s,r,o){this._config=e,this._document=i,this._ngZone=s,this._viewportRuler=r,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new ge,this._pointerMoveSubscription=yt.EMPTY,this._pointerUpSubscription=yt.EMPTY,this._scrollSubscription=yt.EMPTY,this._resizeSubscription=yt.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new ge,this.started=new ge,this.released=new ge,this.ended=new ge,this.entered=new ge,this.exited=new ge,this.dropped=new ge,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const l=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const f=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),p=this._dropContainer;if(!f)return void this._endDragSequence(a);(!p||!p.isDragging()&&!p.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const c=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(c),this._dropContainer)this._updateActiveDropContainer(c,l);else{const d=this._activeTransform;d.x=c.x-this._pickupPositionOnPage.x+this._passiveTransform.x,d.y=c.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(d.x,d.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:c,event:a,distance:this._getDragDistance(c),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new aj(i),o.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=ve(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(i=>Ch(i,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>Fi(i)),this._handles.forEach(i=>Ch(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=Fi(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,ax),e.addEventListener("touchstart",this._pointerDown,hj),e.addEventListener("dragstart",this._nativeDragStart,ax)}),this._initialTransform=void 0,this._rootElement=e),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?Fi(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){var t,e;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(t=this._rootElement)||void 0===t||t.remove()),null===(e=this._anchor)||void 0===e||e.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),Ch(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),Ch(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var t,e;null===(t=this._preview)||void 0===t||t.remove(),null===(e=this._previewRef)||void 0===e||e.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var t,e;null===(t=this._placeholder)||void 0===t||t.remove(),null===(e=this._placeholderRef)||void 0===e||e.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Bm(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,s=i.parentNode,r=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();s.insertBefore(o,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),sj(i,!1,FA),this._document.body.appendChild(s.replaceChild(r,i)),this._getPreviewInsertionPoint(s,a).appendChild(this._preview),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),s=Bm(e),r=!s&&0!==e.button,o=this._rootElement,a=_r(e),l=!s&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),c=s?WS(e):jS(e);if(a&&a.draggable&&"mousedown"===e.type&&e.preventDefault(),i||r||l||c)return;if(this._handles.length){const h=o.style;this._rootElementTapHighlight=h.webkitTapHighlightColor||"",h.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(h=>this._updateOnScroll(h)),this._boundaryElement&&(this._boundaryRect=OA(this._boundaryElement));const d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);const u=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:u.x,y:u.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){sj(this._rootElement,!0,FA),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),s=this._getPointerPositionOnPage(t),r=this._getDragDistance(s),o=e._isOverContainer(s.x,s.y);this.ended.next({source:this,distance:r,dropPoint:s}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:r,dropPoint:s}),e.drop(this,i,this._initialIndex,this._initialContainer,o,r,s),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:s}){let r=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=r,this._dropContainer.enter(this,t,e,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,s),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let s;if(i&&t){const r=t.matchSize?this._rootElement.getBoundingClientRect():null,o=t.viewContainer.createEmbeddedView(i,t.context);o.detectChanges(),s=pj(o,this._document),this._previewRef=o,t.matchSize?mj(s,r):s.style.transform=lx(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const r=this._rootElement;s=lj(r),mj(s,r.getBoundingClientRect()),this._initialTransform&&(s.style.transform=this._initialTransform)}return IA(s.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},FA),Ch(s,!1),s.classList.add("cdk-drag-preview"),s.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(r=>s.classList.add(r)):s.classList.add(e)),s}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function ITe(n){const t=getComputedStyle(n),e=PA(t,"transition-property"),i=e.find(a=>"transform"===a||"all"===a);if(!i)return 0;const s=e.indexOf(i),r=PA(t,"transition-duration"),o=PA(t,"transition-delay");return rj(r[s])+rj(o[s])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const s=o=>{var a;(!o||_r(o)===this._preview&&"transform"===o.propertyName)&&(null===(a=this._preview)||void 0===a||a.removeEventListener("transitionend",s),i(),clearTimeout(r))},r=setTimeout(s,1.5*e);this._preview.addEventListener("transitionend",s)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=pj(this._placeholderRef,this._document)):i=lj(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e){const i=this._rootElement.getBoundingClientRect(),s=t===this._rootElement?null:t,r=s?s.getBoundingClientRect():i,o=Bm(e)?e.targetTouches[0]:e,a=this._getViewportScrollPosition();return{x:r.left-i.left+(o.pageX-r.left-a.left),y:r.top-i.top+(o.pageY-r.top-a.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),i=Bm(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,s=i.pageX-e.left,r=i.pageY-e.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const a=this._ownerSVGElement.createSVGPoint();return a.x=s,a.y=r,a.matrixTransform(o.inverse())}}return{x:s,y:r}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:s}=this.constrainPosition?this.constrainPosition(t,this):t;if("x"===this.lockAxis||"x"===e?s=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:r,y:o}=this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),d=a.top+o,u=a.bottom-(c-o);i=fj(i,a.left+r,a.right-(l-r)),s=fj(s,d,u)}return{x:i,y:s}}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,s=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-r.x),a=Math.abs(i-r.y);return o>this._config.pointerDirectionChangeThreshold&&(s.x=e>r.x?1:-1,r.x=e),a>this._config.pointerDirectionChangeThreshold&&(s.y=i>r.y?1:-1,r.y=i),s}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,Ch(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,ax),t.removeEventListener("touchstart",this._pointerDown,hj),t.removeEventListener("dragstart",this._nativeDragStart,ax)}_applyRootElementTransform(t,e){const i=lx(t,e),s=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=s.transform&&"none"!=s.transform?s.transform:""),s.transform=ox(i,this._initialTransform)}_applyPreviewTransform(t,e){var i;const s=(null===(i=this._previewTemplate)||void 0===i?void 0:i.template)?void 0:this._initialTransform,r=lx(t,e);this._preview.style.transform=ox(r,s)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._boundaryElement.getBoundingClientRect(),s=this._rootElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===s.width&&0===s.height)return;const r=i.left-s.left,o=s.right-i.right,a=i.top-s.top,l=s.bottom-i.bottom;i.width>s.width?(r>0&&(t+=r),o>0&&(t-=o)):t=0,i.height>s.height?(a>0&&(e+=a),l>0&&(e-=l)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:Bm(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const i=_r(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Nm(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var t;return(null===(t=this._parentPositions.positions.get(this._document))||void 0===t?void 0:t.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=xv(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const i=this._previewContainer||"global";if("parent"===i)return t;if("global"===i){const s=this._document;return e||s.fullscreenElement||s.webkitFullscreenElement||s.mozFullScreenElement||s.msFullscreenElement||s.body}return Fi(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}}function lx(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function fj(n,t,e){return Math.max(t,Math.min(e,n))}function Bm(n){return"t"===n.type[0]}function pj(n,t){const e=n.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const i=t.createElement("div");return e.forEach(s=>i.appendChild(s)),i}function mj(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=lx(t.left,t.top)}function Vm(n,t){return Math.max(0,Math.min(t,n))}class NTe{constructor(t,e,i,s,r){this._dragDropRegistry=e,this._ngZone=s,this._viewportRuler=r,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new ge,this.entered=new ge,this.exited=new ge,this.dropped=new ge,this.sorted=new ge,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=yt.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new ge,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function RTe(n=0,t=yv){return n<0&&(n=0),Zv(n,n,t)}(0,fH).pipe(st(this._stopScrollTimers)).subscribe(()=>{const o=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?o.scrollBy(0,-a):2===this._verticalScrollDirection&&o.scrollBy(0,a),1===this._horizontalScrollDirection?o.scrollBy(-a,0):2===this._horizontalScrollDirection&&o.scrollBy(a,0)})},this.element=Fi(t),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new aj(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,s){let r;this._draggingStarted(),null==s?(r=this.sortingDisabled?this._draggables.indexOf(t):-1,-1===r&&(r=this._getItemIndexFromPointerPosition(t,e,i))):r=s;const o=this._activeDraggables,a=o.indexOf(t),l=t.getPlaceholderElement();let c=o[r];if(c===t&&(c=o[r+1]),!c&&(null==r||-1===r||r<o.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(c=o[0]),a>-1&&o.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){const d=c.getRootElement();d.parentElement.insertBefore(l,d),o.splice(r,0,t)}else Fi(this.element).appendChild(l),o.push(t);l.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,s,r,o,a){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:s,isPointerOverContainer:r,distance:o,dropPoint:a})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(s=>s.isDragging()).every(s=>-1===t.indexOf(s))?this._reset():this._cacheItems()),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}withScrollableParents(t){const e=Fi(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,s){if(this.sortingDisabled||!this._clientRect||!oj(this._clientRect,.05,e,i))return;const r=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,i,s);if(-1===o&&r.length>0)return;const a="horizontal"===this._orientation,l=r.findIndex(g=>g.drag===t),c=r[o],u=c.clientRect,h=l>o?1:-1,f=this._getItemOffsetPx(r[l].clientRect,u,h),p=this._getSiblingOffsetPx(l,r,h),m=r.slice();(function FTe(n,t,e){const i=Vm(t,n.length-1),s=Vm(e,n.length-1);if(i===s)return;const r=n[i],o=s<i?-1:1;for(let a=i;a!==s;a+=o)n[a]=n[a+o];n[s]=r})(r,l,o),this.sorted.next({previousIndex:l,currentIndex:o,container:this,item:t}),r.forEach((g,_)=>{if(m[_]===g)return;const y=g.drag===t,b=y?f:p,x=y?t.getPlaceholderElement():g.drag.getRootElement();g.offset+=b,a?(x.style.transform=ox(`translate3d(${Math.round(g.offset)}px, 0, 0)`,g.initialTransform),Nm(g.clientRect,0,b)):(x.style.transform=ox(`translate3d(0, ${Math.round(g.offset)}px, 0)`,g.initialTransform),Nm(g.clientRect,b,0))}),this._previousSwap.overlaps=LA(u,e,i),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?s.x:s.y}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,s=0,r=0;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||i||oj(o.clientRect,.05,t,e)&&([s,r]=function BTe(n,t,e,i){const s=yj(t,i),r=vj(t,e);let o=0,a=0;if(s){const l=n.scrollTop;1===s?l>0&&(o=1):n.scrollHeight-l>n.clientHeight&&(o=2)}if(r){const l=n.scrollLeft;1===r?l>0&&(a=1):n.scrollWidth-l>n.clientWidth&&(a=2)}return[o,a]}(a,o.clientRect,t,e),(s||r)&&(i=a))}),!s&&!r){const{width:o,height:a}=this._viewportRuler.getViewportSize(),l={width:o,height:a,top:0,right:o,bottom:a,left:0};s=yj(l,e),r=vj(l,t),i=window}i&&(s!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=s,this._horizontalScrollDirection=r,this._scrollNode=i,(s||r)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=Fi(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=Fi(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_cacheItemPositions(){const t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:OA(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_reset(){this._isDragging=!1;const t=Fi(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{var i;const s=e.getRootElement();if(s){const r=null===(i=this._itemPositions.find(o=>o.drag===e))||void 0===i?void 0:i.initialTransform;s.style.transform=r||""}}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(t,e,i){const s="horizontal"===this._orientation,r=e[t].clientRect,o=e[t+-1*i];let a=r[s?"width":"height"]*i;if(o){const l=s?"left":"top",c=s?"right":"bottom";-1===i?a-=o.clientRect[l]-r[c]:a+=r[l]-o.clientRect[c]}return a}_getItemOffsetPx(t,e,i){const s="horizontal"===this._orientation;let r=s?e.left-t.left:e.top-t.top;return-1===i&&(r+=s?e.width-t.width:e.height-t.height),r}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,s="horizontal"===this._orientation;if(i[0].drag!==this._activeDraggables[0]){const o=i[i.length-1].clientRect;return s?t>=o.right:e>=o.bottom}{const o=i[0].clientRect;return s?t<=o.left:e<=o.top}}_getItemIndexFromPointerPosition(t,e,i,s){const r="horizontal"===this._orientation,o=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===t)return!1;if(s){const c=r?s.x:s.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&c===this._previousSwap.delta)return!1}return r?e>=Math.floor(l.left)&&e<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom)});return-1!==o&&this.sortPredicate(o,t,this)?o:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(t,e){return null!=this._clientRect&&LA(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(s=>s._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._clientRect||!LA(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const s=this._getShadowRoot().elementFromPoint(e,i);if(!s)return!1;const r=Fi(this.element);return s===r||r.contains(s)}_startReceiving(t,e){const i=this._activeSiblings;!i.has(t)&&e.every(s=>this.enterPredicate(s,this)||this._draggables.indexOf(s)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&(this._itemPositions.forEach(({clientRect:i})=>{Nm(i,e.top,e.left)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=xv(Fi(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._activeDraggables.filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function yj(n,t){const{top:e,bottom:i,height:s}=n,r=.05*s;return t>=e-r&&t<=e+r?1:t>=i-r&&t<=i+r?2:0}function vj(n,t){const{left:e,right:i,width:s}=n,r=.05*s;return t>=e-r&&t<=e+r?1:t>=i-r&&t<=i+r?2:0}const cx=to({passive:!1,capture:!0});let VTe=(()=>{class n{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=s=>s.isDragging(),this.pointerMove=new ge,this.pointerUp=new ge,this.scroll=new ge,this._preventDefaultWhileDragging=s=>{this._activeDragInstances.length>0&&s.preventDefault()},this._persistentTouchmoveListener=s=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&s.preventDefault(),this.pointerMove.next(s))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,cx)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,cx)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const s=i.type.startsWith("touch");this._globalListeners.set(s?"touchend":"mouseup",{handler:r=>this.pointerUp.next(r),options:!0}).set("scroll",{handler:r=>this.scroll.next(r),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:cx}),s||this._globalListeners.set("mousemove",{handler:r=>this.pointerMove.next(r),options:cx}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((r,o)=>{this._document.addEventListener(o,r.handler,r.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new Jt(s=>this._ngZone.runOutsideAngular(()=>{const o=a=>{this._activeDragInstances.length&&s.next(a)};return e.addEventListener("scroll",o,!0),()=>{e.removeEventListener("scroll",o,!0)}}))),wn(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(e){return new(e||n)(j(Xe),j(it))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HTe={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let zTe=(()=>{class n{constructor(e,i,s,r){this._document=e,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=r}createDrag(e,i=HTe){return new LTe(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new NTe(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(e){return new(e||n)(j(it),j(Xe),j(io),j(VTe))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({providers:[zTe],imports:[Fo]}),n})(),UTe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({imports:[[gi,c4,f4,m5,$p,ZG,_4,HD,b4,w4,C4,QE,dA,b5,rA,KG,D4,aA,A4,WH,T4,jc,O4,L4,H4,Yb,z4,U4,wr,G4,j4,vA,W4,$4,ij,bj,HE,q3],c4,f4,m5,$p,ZG,_4,HD,b4,w4,C4,QE,dA,b5,rA,KG,D4,aA,A4,WH,T4,jc,O4,L4,H4,Yb,z4,U4,wr,G4,j4,vA,W4,$4,ij,bj,HE,q3]}),n})(),GTe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n}),n.\u0275inj=De({}),n})(),jTe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ee({type:n,bootstrap:[XCe]}),n.\u0275inj=De({providers:[ES],imports:[[kO,YMe,jue,LDe,UTe,GTe,dA,jc,QE,Yb,aA,Fee,Nee,_Ce,Cwe]]}),n})();(function KY(){BP=!1})(),hQ().bootstrapModule(jTe).catch(n=>console.error(n))}},bt=>{bt(bt.s=662)}]);